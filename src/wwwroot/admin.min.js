!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).bootstrap=factory()}(this,function(){"use strict";const MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",getSelector=element=>{let selector=element.getAttribute("data-bs-target");if(!selector||"#"===selector){let hrefAttribute=element.getAttribute("href");if(!hrefAttribute||!hrefAttribute.includes("#")&&!hrefAttribute.startsWith("."))return null;hrefAttribute.includes("#")&&!hrefAttribute.startsWith("#")&&(hrefAttribute="#"+hrefAttribute.split("#")[1]),selector=hrefAttribute&&"#"!==hrefAttribute?hrefAttribute.trim():null}return selector},getSelectorFromElement=element=>{element=getSelector(element);return element&&document.querySelector(element)?element:null},getElementFromSelector=element=>{element=getSelector(element);return element?document.querySelector(element):null},triggerTransitionEnd=element=>{element.dispatchEvent(new Event(TRANSITION_END))},isElement$1=object=>!(!object||"object"!=typeof object)&&void 0!==(object=void 0!==object.jquery?object[0]:object).nodeType,getElement=object=>isElement$1(object)?object.jquery?object[0]:object:"string"==typeof object&&0<object.length?document.querySelector(object):null,isVisible=element=>{if(!isElement$1(element)||0===element.getClientRects().length)return!1;var elementIsVisible="visible"===getComputedStyle(element).getPropertyValue("visibility"),closedDetails=element.closest("details:not([open])");if(closedDetails&&closedDetails!==element){element=element.closest("summary");if(element&&element.parentNode!==closedDetails)return!1;if(null===element)return!1}return elementIsVisible},isDisabled=element=>!element||element.nodeType!==Node.ELEMENT_NODE||(!!element.classList.contains("disabled")||(void 0!==element.disabled?element.disabled:element.hasAttribute("disabled")&&"false"!==element.getAttribute("disabled"))),findShadowRoot=element=>{var root;return document.documentElement.attachShadow?"function"==typeof element.getRootNode?(root=element.getRootNode())instanceof ShadowRoot?root:null:element instanceof ShadowRoot?element:element.parentNode?findShadowRoot(element.parentNode):null:null},noop=()=>{},reflow=element=>{element.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],isRTL=()=>"rtl"===document.documentElement.dir;var defineJQueryPlugin=plugin=>{var callback;callback=()=>{const $=getjQuery();if($){const name=plugin.NAME,JQUERY_NO_CONFLICT=$.fn[name];$.fn[name]=plugin.jQueryInterface,$.fn[name].Constructor=plugin,$.fn[name].noConflict=()=>($.fn[name]=JQUERY_NO_CONFLICT,plugin.jQueryInterface)}},"loading"===document.readyState?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const callback of DOMContentLoadedCallbacks)callback()}),DOMContentLoadedCallbacks.push(callback)):callback()};const execute=callback=>{"function"==typeof callback&&callback()},executeAfterTransition=(callback,transitionElement,waitForTransition=!0)=>{if(waitForTransition){waitForTransition=(element=>{if(!element)return 0;let{transitionDuration,transitionDelay}=window.getComputedStyle(element);var element=Number.parseFloat(transitionDuration),floatTransitionDelay=Number.parseFloat(transitionDelay);return element||floatTransitionDelay?(transitionDuration=transitionDuration.split(",")[0],transitionDelay=transitionDelay.split(",")[0],(Number.parseFloat(transitionDuration)+Number.parseFloat(transitionDelay))*MILLISECONDS_MULTIPLIER):0})(transitionElement)+5;let called=!1;const handler=({target})=>{target===transitionElement&&(called=!0,transitionElement.removeEventListener(TRANSITION_END,handler),execute(callback))};transitionElement.addEventListener(TRANSITION_END,handler),setTimeout(()=>{called||triggerTransitionEnd(transitionElement)},waitForTransition)}else execute(callback)},getNextActiveElement=(list,activeElement,shouldGetNext,isCycleAllowed)=>{var listLength=list.length;let index=list.indexOf(activeElement);return-1===index?!shouldGetNext&&isCycleAllowed?list[listLength-1]:list[0]:(index+=shouldGetNext?1:-1,isCycleAllowed&&(index=(index+listLength)%listLength),list[Math.max(0,Math.min(index,listLength-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(element,uid){return uid&&uid+"::"+uidEvent++||element.uidEvent||uidEvent++}function getElementEvents(element){var uid=makeEventUid(element);return element.uidEvent=uid,eventRegistry[uid]=eventRegistry[uid]||{},eventRegistry[uid]}function findHandler(events,callable,delegationSelector=null){return Object.values(events).find(event=>event.callable===callable&&event.delegationSelector===delegationSelector)}function normalizeParameters(originalTypeEvent,handler,delegationFunction){var isDelegated="string"==typeof handler,handler=!isDelegated&&handler||delegationFunction;let typeEvent=getTypeEvent(originalTypeEvent);return[isDelegated,handler,typeEvent=nativeEvents.has(typeEvent)?typeEvent:originalTypeEvent]}function addHandler(element,originalTypeEvent,handler,delegationFunction,oneOff){if("string"==typeof originalTypeEvent&&element){let[isDelegated,callable,typeEvent]=normalizeParameters(originalTypeEvent,handler,delegationFunction);originalTypeEvent in customEvents&&(callable=(fn=>function(event){if(!event.relatedTarget||event.relatedTarget!==event.delegateTarget&&!event.delegateTarget.contains(event.relatedTarget))return fn.call(this,event)})(callable));var delegationFunction=getElementEvents(element),delegationFunction=delegationFunction[typeEvent]||(delegationFunction[typeEvent]={}),previousFunction=findHandler(delegationFunction,callable,isDelegated?handler:null);previousFunction?previousFunction.oneOff=previousFunction.oneOff&&oneOff:(previousFunction=makeEventUid(callable,originalTypeEvent.replace(namespaceRegex,"")),(originalTypeEvent=isDelegated?function(element,selector,fn){return function handler(event){var domElements=element.querySelectorAll(selector);for(let target=event["target"];target&&target!==this;target=target.parentNode)for(const domElement of domElements)if(domElement===target)return hydrateObj(event,{delegateTarget:target}),handler.oneOff&&EventHandler.off(element,event.type,selector,fn),fn.apply(target,[event])}}(element,handler,callable):function(element,fn){return function handler(event){return hydrateObj(event,{delegateTarget:element}),handler.oneOff&&EventHandler.off(element,event.type,fn),fn.apply(element,[event])}}(element,callable)).delegationSelector=isDelegated?handler:null,originalTypeEvent.callable=callable,originalTypeEvent.oneOff=oneOff,delegationFunction[originalTypeEvent.uidEvent=previousFunction]=originalTypeEvent,element.addEventListener(typeEvent,originalTypeEvent,isDelegated))}}function removeHandler(element,events,typeEvent,handler,delegationSelector){handler=findHandler(events[typeEvent],handler,delegationSelector);handler&&(element.removeEventListener(typeEvent,handler,Boolean(delegationSelector)),delete events[typeEvent][handler.uidEvent])}function getTypeEvent(event){return event=event.replace(stripNameRegex,""),customEvents[event]||event}const EventHandler={on(element,event,handler,delegationFunction){addHandler(element,event,handler,delegationFunction,!1)},one(element,event,handler,delegationFunction){addHandler(element,event,handler,delegationFunction,!0)},off(element,originalTypeEvent,handler,delegationFunction){if("string"==typeof originalTypeEvent&&element){var[delegationFunction,callable,typeEvent]=normalizeParameters(originalTypeEvent,handler,delegationFunction),inNamespace=typeEvent!==originalTypeEvent,events=getElementEvents(element),storeElementEvent=events[typeEvent]||{},isNamespace=originalTypeEvent.startsWith(".");if(void 0!==callable)return Object.keys(storeElementEvent).length?void removeHandler(element,events,typeEvent,callable,delegationFunction?handler:null):void 0;if(isNamespace)for(const elementEvent of Object.keys(events))!function(element,events,typeEvent,namespace){var event,storeElementEvent=events[typeEvent]||{};for(const handlerKey of Object.keys(storeElementEvent))handlerKey.includes(namespace)&&removeHandler(element,events,typeEvent,(event=storeElementEvent[handlerKey]).callable,event.delegationSelector)}(element,events,elementEvent,originalTypeEvent.slice(1));for(const keyHandlers of Object.keys(storeElementEvent)){var handlerKey=keyHandlers.replace(stripUidRegex,"");inNamespace&&!originalTypeEvent.includes(handlerKey)||removeHandler(element,events,typeEvent,(handlerKey=storeElementEvent[keyHandlers]).callable,handlerKey.delegationSelector)}}},trigger(element,event,args){if("string"!=typeof event||!element)return null;var $=getjQuery();let jQueryEvent=null,bubbles=!0,nativeDispatch=!0,defaultPrevented=!1;event!==getTypeEvent(event)&&$&&(jQueryEvent=$.Event(event,args),$(element).trigger(jQueryEvent),bubbles=!jQueryEvent.isPropagationStopped(),nativeDispatch=!jQueryEvent.isImmediatePropagationStopped(),defaultPrevented=jQueryEvent.isDefaultPrevented());$=hydrateObj($=new Event(event,{bubbles:bubbles,cancelable:!0}),args);return defaultPrevented&&$.preventDefault(),nativeDispatch&&element.dispatchEvent($),$.defaultPrevented&&jQueryEvent&&jQueryEvent.preventDefault(),$}};function hydrateObj(obj,meta){for(const[key,value]of Object.entries(meta||{}))try{obj[key]=value}catch(_unused){Object.defineProperty(obj,key,{configurable:!0,get(){return value}})}return obj}const elementMap=new Map,Data={set(element,key,instance){elementMap.has(element)||elementMap.set(element,new Map);element=elementMap.get(element);element.has(key)||0===element.size?element.set(key,instance):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(element.keys())[0]}.`)},get(element,key){return elementMap.has(element)&&elementMap.get(element).get(key)||null},remove(element,key){var instanceMap;elementMap.has(element)&&((instanceMap=elementMap.get(element)).delete(key),0===instanceMap.size&&elementMap.delete(element))}};function normalizeData(value){if("true"===value)return!0;if("false"===value)return!1;if(value===Number(value).toString())return Number(value);if(""===value||"null"===value)return null;if("string"!=typeof value)return value;try{return JSON.parse(decodeURIComponent(value))}catch(_unused){return value}}function normalizeDataKey(key){return key.replace(/[A-Z]/g,chr=>"-"+chr.toLowerCase())}const Manipulator={setDataAttribute(element,key,value){element.setAttribute("data-bs-"+normalizeDataKey(key),value)},removeDataAttribute(element,key){element.removeAttribute("data-bs-"+normalizeDataKey(key))},getDataAttributes(element){if(!element)return{};var attributes={},bsKeys=Object.keys(element.dataset).filter(key=>key.startsWith("bs")&&!key.startsWith("bsConfig"));for(const key of bsKeys){let pureKey=key.replace(/^bs/,"");attributes[pureKey=pureKey.charAt(0).toLowerCase()+pureKey.slice(1,pureKey.length)]=normalizeData(element.dataset[key])}return attributes},getDataAttribute(element,key){return normalizeData(element.getAttribute("data-bs-"+normalizeDataKey(key)))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(config){return config=this._mergeConfigObj(config),config=this._configAfterMerge(config),this._typeCheckConfig(config),config}_configAfterMerge(config){return config}_mergeConfigObj(config,element){var jsonConfig=isElement$1(element)?Manipulator.getDataAttribute(element,"config"):{};return{...this.constructor.Default,..."object"==typeof jsonConfig?jsonConfig:{},...isElement$1(element)?Manipulator.getDataAttributes(element):{},..."object"==typeof config?config:{}}}_typeCheckConfig(config,configTypes=this.constructor.DefaultType){for(const property of Object.keys(configTypes)){var expectedTypes=configTypes[property],value=config[property],value=isElement$1(value)?"element":null==(value=value)?""+value:Object.prototype.toString.call(value).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(expectedTypes).test(value))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${property}" provided type "${value}" but expected type "${expectedTypes}".`)}}}class BaseComponent extends Config{constructor(element,config){super(),(element=getElement(element))&&(this._element=element,this._config=this._getConfig(config),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const propertyName of Object.getOwnPropertyNames(this))this[propertyName]=null}_queueCallback(callback,element,isAnimated=!0){executeAfterTransition(callback,element,isAnimated)}_getConfig(config){return config=this._mergeConfigObj(config,this._element),config=this._configAfterMerge(config),this._typeCheckConfig(config),config}static getInstance(element){return Data.get(getElement(element),this.DATA_KEY)}static getOrCreateInstance(element,config={}){return this.getInstance(element)||new this(element,"object"==typeof config?config:null)}static get VERSION(){return"5.2.2"}static get DATA_KEY(){return"bs."+this.NAME}static get EVENT_KEY(){return"."+this.DATA_KEY}static eventName(name){return""+name+this.EVENT_KEY}}var enableDismissTrigger=(component,method="hide")=>{var clickEvent="click.dismiss"+component.EVENT_KEY;const name=component.NAME;EventHandler.on(document,clickEvent,`[data-bs-dismiss="${name}"]`,function(event){["A","AREA"].includes(this.tagName)&&event.preventDefault(),isDisabled(this)||(event=getElementFromSelector(this)||this.closest("."+name),component.getOrCreateInstance(event)[method]())})};class Alert extends BaseComponent{static get NAME(){return"alert"}close(){var isAnimated;EventHandler.trigger(this._element,"close.bs.alert").defaultPrevented||(this._element.classList.remove("show"),isAnimated=this._element.classList.contains("fade"),this._queueCallback(()=>this._destroyElement(),this._element,isAnimated))}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(config){return this.each(function(){var data=Alert.getOrCreateInstance(this);if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config](this)}})}}enableDismissTrigger(Alert,"close"),defineJQueryPlugin(Alert);class Button extends BaseComponent{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(config){return this.each(function(){var data=Button.getOrCreateInstance(this);"toggle"===config&&data[config]()})}}EventHandler.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',event=>{event.preventDefault();event=event.target.closest('[data-bs-toggle="button"]');Button.getOrCreateInstance(event).toggle()}),defineJQueryPlugin(Button);const SelectorEngine={find(selector,element=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(element,selector))},findOne(selector,element=document.documentElement){return Element.prototype.querySelector.call(element,selector)},children(element,selector){return[].concat(...element.children).filter(child=>child.matches(selector))},parents(element,selector){var parents=[];let ancestor=element.parentNode.closest(selector);for(;ancestor;)parents.push(ancestor),ancestor=ancestor.parentNode.closest(selector);return parents},prev(element,selector){let previous=element.previousElementSibling;for(;previous;){if(previous.matches(selector))return[previous];previous=previous.previousElementSibling}return[]},next(element,selector){let next=element.nextElementSibling;for(;next;){if(next.matches(selector))return[next];next=next.nextElementSibling}return[]},focusableChildren(element){var focusables=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(selector=>selector+':not([tabindex^="-"])').join(",");return this.find(focusables,element).filter(el=>!isDisabled(el)&&isVisible(el))}},Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(element,config){super(),(this._element=element)&&Swipe.isSupported()&&(this._config=this._getConfig(config),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return"swipe"}dispose(){EventHandler.off(this._element,".bs.swipe")}_start(event){this._supportPointerEvents?this._eventIsPointerPenTouch(event)&&(this._deltaX=event.clientX):this._deltaX=event.touches[0].clientX}_end(event){this._eventIsPointerPenTouch(event)&&(this._deltaX=event.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(event){this._deltaX=event.touches&&1<event.touches.length?0:event.touches[0].clientX-this._deltaX}_handleSwipe(){var absDeltaX=Math.abs(this._deltaX);absDeltaX<=40||(absDeltaX=absDeltaX/this._deltaX,this._deltaX=0,absDeltaX&&execute(0<absDeltaX?this._config.rightCallback:this._config.leftCallback))}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,"pointerdown.bs.swipe",event=>this._start(event)),EventHandler.on(this._element,"pointerup.bs.swipe",event=>this._end(event)),this._element.classList.add("pointer-event")):(EventHandler.on(this._element,"touchstart.bs.swipe",event=>this._start(event)),EventHandler.on(this._element,"touchmove.bs.swipe",event=>this._move(event)),EventHandler.on(this._element,"touchend.bs.swipe",event=>this._end(event)))}_eventIsPointerPenTouch(event){return this._supportPointerEvents&&("pen"===event.pointerType||"touch"===event.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}}const KEY_TO_DIRECTION={ArrowLeft:"right",ArrowRight:"left"},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(element,config){super(element,config),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(".carousel-indicators",this._element),this._addEventListeners(),"carousel"===this._config.ride&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return"carousel"}next(){this._slide("next")}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide("prev")}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?EventHandler.one(this._element,"slid.bs.carousel",()=>this.cycle()):this.cycle())}to(index){var activeIndex,items=this._getItems();index>items.length-1||index<0||(this._isSliding?EventHandler.one(this._element,"slid.bs.carousel",()=>this.to(index)):(activeIndex=this._getItemIndex(this._getActive()))!==index&&this._slide(activeIndex<index?"next":"prev",items[index]))}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(config){return config.defaultInterval=config.interval,config}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,"keydown.bs.carousel",event=>this._keydown(event)),"hover"===this._config.pause&&(EventHandler.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),EventHandler.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const img of SelectorEngine.find(".carousel-item img",this._element))EventHandler.on(img,"dragstart.bs.carousel",event=>event.preventDefault());var swipeConfig={leftCallback:()=>this._slide(this._directionToOrder("left")),rightCallback:()=>this._slide(this._directionToOrder("right")),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Swipe(this._element,swipeConfig)}_keydown(event){var direction;/input|textarea/i.test(event.target.tagName)||(direction=KEY_TO_DIRECTION[event.key])&&(event.preventDefault(),this._slide(this._directionToOrder(direction)))}_getItemIndex(element){return this._getItems().indexOf(element)}_setActiveIndicatorElement(index){var activeIndicator;this._indicatorsElement&&((activeIndicator=SelectorEngine.findOne(".active",this._indicatorsElement)).classList.remove("active"),activeIndicator.removeAttribute("aria-current"),(activeIndicator=SelectorEngine.findOne(`[data-bs-slide-to="${index}"]`,this._indicatorsElement))&&(activeIndicator.classList.add("active"),activeIndicator.setAttribute("aria-current","true")))}_updateInterval(){var element=this._activeElement||this._getActive();element&&(element=Number.parseInt(element.getAttribute("data-bs-interval"),10),this._config.interval=element||this._config.defaultInterval)}_slide(order,element=null){if(!this._isSliding){const activeElement=this._getActive();var isNext="next"===order;const nextElement=element||getNextActiveElement(this._getItems(),activeElement,isNext,this._config.wrap);if(nextElement!==activeElement){const nextElementIndex=this._getItemIndex(nextElement),triggerEvent=eventName=>EventHandler.trigger(this._element,eventName,{relatedTarget:nextElement,direction:this._orderToDirection(order),from:this._getItemIndex(activeElement),to:nextElementIndex});element=triggerEvent("slide.bs.carousel");if(!element.defaultPrevented&&activeElement&&nextElement){element=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(nextElementIndex),this._activeElement=nextElement;const directionalClassName=isNext?"carousel-item-start":"carousel-item-end",orderClassName=isNext?"carousel-item-next":"carousel-item-prev";nextElement.classList.add(orderClassName),reflow(nextElement),activeElement.classList.add(directionalClassName),nextElement.classList.add(directionalClassName);this._queueCallback(()=>{nextElement.classList.remove(directionalClassName,orderClassName),nextElement.classList.add("active"),activeElement.classList.remove("active",orderClassName,directionalClassName),this._isSliding=!1,triggerEvent("slid.bs.carousel")},activeElement,this._isAnimated()),element&&this.cycle()}}}}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return SelectorEngine.findOne(".active.carousel-item",this._element)}_getItems(){return SelectorEngine.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(direction){return isRTL()?"left"===direction?"prev":"next":"left"===direction?"next":"prev"}_orderToDirection(order){return isRTL()?"prev"===order?"left":"right":"prev"===order?"right":"left"}static jQueryInterface(config){return this.each(function(){var data=Carousel.getOrCreateInstance(this,config);if("number"==typeof config)data.to(config);else if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config]()}})}}EventHandler.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(event){var target=getElementFromSelector(this);target&&target.classList.contains("carousel")&&(event.preventDefault(),event=Carousel.getOrCreateInstance(target),(target=this.getAttribute("data-bs-slide-to"))?event.to(target):"next"===Manipulator.getDataAttribute(this,"slide")?event.next():event.prev(),event._maybeEnableCycle())}),EventHandler.on(window,"load.bs.carousel.data-api",()=>{for(const carousel of SelectorEngine.find('[data-bs-ride="carousel"]'))Carousel.getOrCreateInstance(carousel)}),defineJQueryPlugin(Carousel);const Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(element,config){super(element,config),this._isTransitioning=!1,this._triggerArray=[];for(const elem of SelectorEngine.find('[data-bs-toggle="collapse"]')){var selector=getSelectorFromElement(elem),filterElement=SelectorEngine.find(selector).filter(foundElement=>foundElement===this._element);null!==selector&&filterElement.length&&this._triggerArray.push(elem)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._isShown()){let activeChildren=[];if(!(activeChildren=this._config.parent?this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(element=>element!==this._element).map(element=>Collapse.getOrCreateInstance(element,{toggle:!1})):activeChildren).length||!activeChildren[0]._isTransitioning){var startEvent=EventHandler.trigger(this._element,"show.bs.collapse");if(!startEvent.defaultPrevented){for(const activeInstance of activeChildren)activeInstance.hide();const dimension=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[dimension]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;startEvent="scroll"+(dimension[0].toUpperCase()+dimension.slice(1));this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[dimension]="",EventHandler.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[dimension]=this._element[startEvent]+"px"}}}}hide(){if(!this._isTransitioning&&this._isShown()){var startEvent=EventHandler.trigger(this._element,"hide.bs.collapse");if(!startEvent.defaultPrevented){startEvent=this._getDimension();this._element.style[startEvent]=this._element.getBoundingClientRect()[startEvent]+"px",reflow(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");for(const trigger of this._triggerArray){var element=getElementFromSelector(trigger);element&&!this._isShown(element)&&this._addAriaAndCollapsedClass([trigger],!1)}this._isTransitioning=!0;this._element.style[startEvent]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),EventHandler.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}}_isShown(element=this._element){return element.classList.contains("show")}_configAfterMerge(config){return config.toggle=Boolean(config.toggle),config.parent=getElement(config.parent),config}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent)for(const element of this._getFirstLevelChildren('[data-bs-toggle="collapse"]')){var selected=getElementFromSelector(element);selected&&this._addAriaAndCollapsedClass([element],this._isShown(selected))}}_getFirstLevelChildren(selector){const children=SelectorEngine.find(":scope .collapse .collapse",this._config.parent);return SelectorEngine.find(selector,this._config.parent).filter(element=>!children.includes(element))}_addAriaAndCollapsedClass(triggerArray,isOpen){if(triggerArray.length)for(const element of triggerArray)element.classList.toggle("collapsed",!isOpen),element.setAttribute("aria-expanded",isOpen)}static jQueryInterface(config){const _config={};return"string"==typeof config&&/show|hide/.test(config)&&(_config.toggle=!1),this.each(function(){var data=Collapse.getOrCreateInstance(this,_config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config]()}})}}EventHandler.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',function(event){("A"===event.target.tagName||event.delegateTarget&&"A"===event.delegateTarget.tagName)&&event.preventDefault();event=getSelectorFromElement(this);for(const element of SelectorEngine.find(event))Collapse.getOrCreateInstance(element,{toggle:!1}).toggle()}),defineJQueryPlugin(Collapse);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(acc,placement){return acc.concat([placement+"-"+start,placement+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(acc,placement){return acc.concat([placement,placement+"-"+start,placement+"-"+end])},[]),modifierPhases=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function getNodeName(element){return element?(element.nodeName||"").toLowerCase():null}function getWindow(node){var ownerDocument;return null==node?window:"[object Window]"!==node.toString()?(ownerDocument=node.ownerDocument)&&ownerDocument.defaultView||window:node}function isElement(node){return node instanceof getWindow(node).Element||node instanceof Element}function isHTMLElement(node){return node instanceof getWindow(node).HTMLElement||node instanceof HTMLElement}function isShadowRoot(node){return"undefined"!=typeof ShadowRoot&&(node instanceof getWindow(node).ShadowRoot||node instanceof ShadowRoot)}var applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:function(_ref){var state=_ref.state;Object.keys(state.elements).forEach(function(name){var style=state.styles[name]||{},attributes=state.attributes[name]||{},element=state.elements[name];isHTMLElement(element)&&getNodeName(element)&&(Object.assign(element.style,style),Object.keys(attributes).forEach(function(name){var value=attributes[name];!1===value?element.removeAttribute(name):element.setAttribute(name,!0===value?"":value)}))})},effect:function(_ref2){var state=_ref2.state,initialStyles={popper:{position:state.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(state.elements.popper.style,initialStyles.popper),state.styles=initialStyles,state.elements.arrow&&Object.assign(state.elements.arrow.style,initialStyles.arrow),function(){Object.keys(state.elements).forEach(function(name){var element=state.elements[name],attributes=state.attributes[name]||{},name=Object.keys((state.styles.hasOwnProperty(name)?state.styles:initialStyles)[name]).reduce(function(style,property){return style[property]="",style},{});isHTMLElement(element)&&getNodeName(element)&&(Object.assign(element.style,name),Object.keys(attributes).forEach(function(attribute){element.removeAttribute(attribute)}))})}},requires:["computeStyles"]};var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var uaData=navigator.userAgentData;return null!=uaData&&uaData.brands?uaData.brands.map(function(item){return item.brand+"/"+item.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(element,includeScale,isFixedStrategy){void 0===includeScale&&(includeScale=!1),void 0===isFixedStrategy&&(isFixedStrategy=!1);var clientRect=element.getBoundingClientRect(),scaleX=1,scaleY=1;includeScale&&isHTMLElement(element)&&(scaleX=0<element.offsetWidth&&round(clientRect.width)/element.offsetWidth||1,scaleY=0<element.offsetHeight&&round(clientRect.height)/element.offsetHeight||1);includeScale=(isElement(element)?getWindow(element):window).visualViewport,element=!isLayoutViewport()&&isFixedStrategy,isFixedStrategy=(clientRect.left+(element&&includeScale?includeScale.offsetLeft:0))/scaleX,element=(clientRect.top+(element&&includeScale?includeScale.offsetTop:0))/scaleY,includeScale=clientRect.width/scaleX,scaleX=clientRect.height/scaleY;return{width:includeScale,height:scaleX,top:element,right:isFixedStrategy+includeScale,bottom:element+scaleX,left:isFixedStrategy,x:isFixedStrategy,y:element}}function getLayoutRect(element){var clientRect=getBoundingClientRect(element),width=element.offsetWidth,height=element.offsetHeight;return Math.abs(clientRect.width-width)<=1&&(width=clientRect.width),Math.abs(clientRect.height-height)<=1&&(height=clientRect.height),{x:element.offsetLeft,y:element.offsetTop,width:width,height:height}}function contains(parent,child){var rootNode=child.getRootNode&&child.getRootNode();if(parent.contains(child))return!0;if(rootNode&&isShadowRoot(rootNode)){var next=child;do{if(next&&parent.isSameNode(next))return!0}while(next=next.parentNode||next.host)}return!1}function getComputedStyle$1(element){return getWindow(element).getComputedStyle(element)}function getDocumentElement(element){return((isElement(element)?element.ownerDocument:element.document)||window.document).documentElement}function getParentNode(element){return"html"===getNodeName(element)?element:element.assignedSlot||element.parentNode||(isShadowRoot(element)?element.host:null)||getDocumentElement(element)}function getTrueOffsetParent(element){return isHTMLElement(element)&&"fixed"!==getComputedStyle$1(element).position?element.offsetParent:null}function getOffsetParent(element){for(var window=getWindow(element),offsetParent=getTrueOffsetParent(element);offsetParent&&function(element){return 0<=["table","td","th"].indexOf(getNodeName(element))}(offsetParent)&&"static"===getComputedStyle$1(offsetParent).position;)offsetParent=getTrueOffsetParent(offsetParent);return(!offsetParent||"html"!==getNodeName(offsetParent)&&("body"!==getNodeName(offsetParent)||"static"!==getComputedStyle$1(offsetParent).position))&&(offsetParent||function(element){var isFirefox=/firefox/i.test(getUAString()),isIE=/Trident/i.test(getUAString());if(!isIE||!isHTMLElement(element)||"fixed"!==getComputedStyle$1(element).position){var currentNode=getParentNode(element);for(isShadowRoot(currentNode)&&(currentNode=currentNode.host);isHTMLElement(currentNode)&&["html","body"].indexOf(getNodeName(currentNode))<0;){var css=getComputedStyle$1(currentNode);if("none"!==css.transform||"none"!==css.perspective||"paint"===css.contain||-1!==["transform","perspective"].indexOf(css.willChange)||isFirefox&&"filter"===css.willChange||isFirefox&&css.filter&&"none"!==css.filter)return currentNode;currentNode=currentNode.parentNode}}return null}(element))||window}function getMainAxisFromPlacement(placement){return 0<=["top","bottom"].indexOf(placement)?"x":"y"}function within(min$1,value,max$1){return max(min$1,min(value,max$1))}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(paddingObject){return Object.assign({},getFreshSideObject(),paddingObject)}function expandToHashMap(value,keys){return keys.reduce(function(hashMap,key){return hashMap[key]=value,hashMap},{})}var arrow$1={name:"arrow",enabled:!0,phase:"main",fn:function(_ref){var arrowRect,endDiff,maxProp,minProp,state=_ref.state,name=_ref.name,_ref=_ref.options,arrowElement=state.elements.arrow,popperOffsets=state.modifiersData.popperOffsets,axis=getMainAxisFromPlacement(basePlacement=state.placement.split("-")[0]),basePlacement=0<=[left,right].indexOf(basePlacement)?"height":"width";arrowElement&&popperOffsets&&(_ref=function(padding,state){return mergePaddingObject("number"!=typeof(padding="function"==typeof padding?padding(Object.assign({},state.rects,{placement:state.placement})):padding)?padding:expandToHashMap(padding,basePlacements))}(_ref.padding,state),arrowRect=getLayoutRect(arrowElement),minProp="y"===axis?top:left,maxProp="y"===axis?bottom:right,endDiff=state.rects.reference[basePlacement]+state.rects.reference[axis]-popperOffsets[axis]-state.rects.popper[basePlacement],popperOffsets=popperOffsets[axis]-state.rects.reference[axis],arrowElement=(arrowElement=getOffsetParent(arrowElement))?"y"===axis?arrowElement.clientHeight||0:arrowElement.clientWidth||0:0,minProp=_ref[minProp],_ref=arrowElement-arrowRect[basePlacement]-_ref[maxProp],minProp=within(minProp,maxProp=arrowElement/2-arrowRect[basePlacement]/2+(endDiff/2-popperOffsets/2),_ref),state.modifiersData[name]=((arrowElement={})[axis]=minProp,arrowElement.centerOffset=minProp-maxProp,arrowElement))},effect:function(_ref2){var state=_ref2.state;null!=(_ref2=void 0===(_ref2=_ref2.options.element)?"[data-popper-arrow]":_ref2)&&("string"!=typeof _ref2||(_ref2=state.elements.popper.querySelector(_ref2)))&&contains(state.elements.popper,_ref2)&&(state.elements.arrow=_ref2)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mapToStyles(_ref2){var offsetParent,widthProp,popper=_ref2.popper,popperRect=_ref2.popperRect,placement=_ref2.placement,variation=_ref2.variation,offsets=_ref2.offsets,position=_ref2.position,gpuAcceleration=_ref2.gpuAcceleration,adaptive=_ref2.adaptive,roundOffsets=_ref2.roundOffsets,_ref2=_ref2.isFixed,_offsets$x=offsets.x,_offsets$x=void 0===_offsets$x?0:_offsets$x,_offsets$y=offsets.y,_offsets$y=void 0===_offsets$y?0:_offsets$y,_ref3="function"==typeof roundOffsets?roundOffsets({x:_offsets$x,y:_offsets$y}):{x:_offsets$x,y:_offsets$y},_ref3=(_offsets$x=_ref3.x,_offsets$y=_ref3.y,offsets.hasOwnProperty("x")),offsets=offsets.hasOwnProperty("y"),sideX=left,sideY=top,win=window,popper=(adaptive&&(heightProp="clientHeight",widthProp="clientWidth",(offsetParent=getOffsetParent(popper))===getWindow(popper)&&"static"!==getComputedStyle$1(offsetParent=getDocumentElement(popper)).position&&"absolute"===position&&(heightProp="scrollHeight",widthProp="scrollWidth"),placement!==top&&(placement!==left&&placement!==right||variation!==end)||(sideY=bottom,_offsets$y=(_offsets$y-((_ref2&&offsetParent===win&&win.visualViewport?win.visualViewport.height:offsetParent[heightProp])-popperRect.height))*(gpuAcceleration?1:-1)),placement!==left&&(placement!==top&&placement!==bottom||variation!==end)||(sideX=right,_offsets$x=(_offsets$x-((_ref2&&offsetParent===win&&win.visualViewport?win.visualViewport.width:offsetParent[widthProp])-popperRect.width))*(gpuAcceleration?1:-1))),Object.assign({position:position},adaptive&&unsetSides)),heightProp=!0===roundOffsets?function(_ref){var x=_ref.x,_ref=_ref.y,dpr=window.devicePixelRatio||1;return{x:round(x*dpr)/dpr||0,y:round(_ref*dpr)/dpr||0}}({x:_offsets$x,y:_offsets$y}):{x:_offsets$x,y:_offsets$y};return _offsets$x=heightProp.x,_offsets$y=heightProp.y,gpuAcceleration?Object.assign({},popper,((placement={})[sideY]=offsets?"0":"",placement[sideX]=_ref3?"0":"",placement.transform=(win.devicePixelRatio||1)<=1?"translate("+_offsets$x+"px, "+_offsets$y+"px)":"translate3d("+_offsets$x+"px, "+_offsets$y+"px, 0)",placement)):Object.assign({},popper,((variation={})[sideY]=offsets?_offsets$y+"px":"",variation[sideX]=_ref3?_offsets$x+"px":"",variation.transform="",variation))}var computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_ref5){var state=_ref5.state,_ref5=_ref5.options,_options$gpuAccelerat=void 0===(_options$gpuAccelerat=_ref5.gpuAcceleration)||_options$gpuAccelerat,_options$adaptive=void 0===(_options$adaptive=_ref5.adaptive)||_options$adaptive,_ref5=void 0===(_ref5=_ref5.roundOffsets)||_ref5,_options$gpuAccelerat={placement:state.placement.split("-")[0],variation:state.placement.split("-")[1],popper:state.elements.popper,popperRect:state.rects.popper,gpuAcceleration:_options$gpuAccelerat,isFixed:"fixed"===state.options.strategy};null!=state.modifiersData.popperOffsets&&(state.styles.popper=Object.assign({},state.styles.popper,mapToStyles(Object.assign({},_options$gpuAccelerat,{offsets:state.modifiersData.popperOffsets,position:state.options.strategy,adaptive:_options$adaptive,roundOffsets:_ref5})))),null!=state.modifiersData.arrow&&(state.styles.arrow=Object.assign({},state.styles.arrow,mapToStyles(Object.assign({},_options$gpuAccelerat,{offsets:state.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_ref5})))),state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-placement":state.placement})},data:{}},passive={passive:!0};var eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_ref){var state=_ref.state,instance=_ref.instance,_options$scroll=(_ref=_ref.options).scroll,scroll=void 0===_options$scroll||_options$scroll,resize=void 0===(_options$scroll=_ref.resize)||_options$scroll,window=getWindow(state.elements.popper),scrollParents=[].concat(state.scrollParents.reference,state.scrollParents.popper);return scroll&&scrollParents.forEach(function(scrollParent){scrollParent.addEventListener("scroll",instance.update,passive)}),resize&&window.addEventListener("resize",instance.update,passive),function(){scroll&&scrollParents.forEach(function(scrollParent){scrollParent.removeEventListener("scroll",instance.update,passive)}),resize&&window.removeEventListener("resize",instance.update,passive)}},data:{}},hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,function(matched){return hash$1[matched]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(placement){return placement.replace(/start|end/g,function(matched){return hash[matched]})}function getWindowScroll(node){node=getWindow(node);return{scrollLeft:node.pageXOffset,scrollTop:node.pageYOffset}}function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getWindowScroll(element).scrollLeft}function isScrollParent(element){var element=getComputedStyle$1(element),overflow=element.overflow,overflowX=element.overflowX,element=element.overflowY;return/auto|scroll|overlay|hidden/.test(overflow+element+overflowX)}function listScrollParents(element,list){void 0===list&&(list=[]);var scrollParent=function getScrollParent(node){return 0<=["html","body","#document"].indexOf(getNodeName(node))?node.ownerDocument.body:isHTMLElement(node)&&isScrollParent(node)?node:getScrollParent(getParentNode(node))}(element),element=scrollParent===(null==(element=element.ownerDocument)?void 0:element.body),win=getWindow(scrollParent),win=element?[win].concat(win.visualViewport||[],isScrollParent(scrollParent)?scrollParent:[]):scrollParent,scrollParent=list.concat(win);return element?scrollParent:scrollParent.concat(listScrollParents(getParentNode(win)))}function rectToClientRect(rect){return Object.assign({},rect,{left:rect.x,top:rect.y,right:rect.x+rect.width,bottom:rect.y+rect.height})}function getClientRectFromMixedType(element,clippingParent,strategy){return clippingParent===viewport?rectToClientRect(function(element,strategy){var layoutViewport,win=getWindow(element),html=getDocumentElement(element),win=win.visualViewport,width=html.clientWidth,html=html.clientHeight,x=0,y=0;return win&&(width=win.width,html=win.height,((layoutViewport=isLayoutViewport())||!layoutViewport&&"fixed"===strategy)&&(x=win.offsetLeft,y=win.offsetTop)),{width:width,height:html,x:x+getWindowScrollBarX(element),y:y}}(element,strategy)):isElement(clippingParent)?function(element,strategy){return(strategy=getBoundingClientRect(element,!1,"fixed"===strategy)).top=strategy.top+element.clientTop,strategy.left=strategy.left+element.clientLeft,strategy.bottom=strategy.top+element.clientHeight,strategy.right=strategy.left+element.clientWidth,strategy.width=element.clientWidth,strategy.height=element.clientHeight,strategy.x=strategy.left,strategy.y=strategy.top,strategy}(clippingParent,strategy):rectToClientRect(function(element){var html=getDocumentElement(element),winScroll=getWindowScroll(element),_element$ownerDocumen=null==(_element$ownerDocumen=element.ownerDocument)?void 0:_element$ownerDocumen.body,width=max(html.scrollWidth,html.clientWidth,_element$ownerDocumen?_element$ownerDocumen.scrollWidth:0,_element$ownerDocumen?_element$ownerDocumen.clientWidth:0),height=max(html.scrollHeight,html.clientHeight,_element$ownerDocumen?_element$ownerDocumen.scrollHeight:0,_element$ownerDocumen?_element$ownerDocumen.clientHeight:0),element=-winScroll.scrollLeft+getWindowScrollBarX(element),winScroll=-winScroll.scrollTop;return"rtl"===getComputedStyle$1(_element$ownerDocumen||html).direction&&(element+=max(html.clientWidth,_element$ownerDocumen?_element$ownerDocumen.clientWidth:0)-width),{width:width,height:height,x:element,y:winScroll}}(getDocumentElement(element)))}function getClippingRect(element,boundary,rootBoundary,strategy){boundary="clippingParents"===boundary?function(element){var clippingParents=listScrollParents(getParentNode(element)),clipperElement=0<=["absolute","fixed"].indexOf(getComputedStyle$1(element).position)&&isHTMLElement(element)?getOffsetParent(element):element;return isElement(clipperElement)?clippingParents.filter(function(clippingParent){return isElement(clippingParent)&&contains(clippingParent,clipperElement)&&"body"!==getNodeName(clippingParent)}):[]}(element):[].concat(boundary),boundary=[].concat(boundary,[rootBoundary]),rootBoundary=boundary[0],boundary=boundary.reduce(function(accRect,clippingParent){clippingParent=getClientRectFromMixedType(element,clippingParent,strategy);return accRect.top=max(clippingParent.top,accRect.top),accRect.right=min(clippingParent.right,accRect.right),accRect.bottom=min(clippingParent.bottom,accRect.bottom),accRect.left=max(clippingParent.left,accRect.left),accRect},getClientRectFromMixedType(element,rootBoundary,strategy));return boundary.width=boundary.right-boundary.left,boundary.height=boundary.bottom-boundary.top,boundary.x=boundary.left,boundary.y=boundary.top,boundary}function computeOffsets(_ref){var offsets,reference=_ref.reference,element=_ref.element,_ref=_ref.placement,basePlacement=_ref?_ref.split("-")[0]:null,_ref=_ref?_ref.split("-")[1]:null,commonX=reference.x+reference.width/2-element.width/2,commonY=reference.y+reference.height/2-element.height/2;switch(basePlacement){case top:offsets={x:commonX,y:reference.y-element.height};break;case bottom:offsets={x:commonX,y:reference.y+reference.height};break;case right:offsets={x:reference.x+reference.width,y:commonY};break;case left:offsets={x:reference.x-element.width,y:commonY};break;default:offsets={x:reference.x,y:reference.y}}var mainAxis=basePlacement?getMainAxisFromPlacement(basePlacement):null;if(null!=mainAxis){var len="y"===mainAxis?"height":"width";switch(_ref){case start:offsets[mainAxis]=offsets[mainAxis]-(reference[len]/2-element[len]/2);break;case end:offsets[mainAxis]=offsets[mainAxis]+(reference[len]/2-element[len]/2)}}return offsets}function detectOverflow(state,options){var offset,options=options=void 0===options?{}:options,_options$placement=options.placement,_options$placement=void 0===_options$placement?state.placement:_options$placement,_options$strategy=options.strategy,_options$strategy=void 0===_options$strategy?state.strategy:_options$strategy,_options$boundary=options.boundary,_options$boundary=void 0===_options$boundary?clippingParents:_options$boundary,_options$rootBoundary=options.rootBoundary,_options$rootBoundary=void 0===_options$rootBoundary?viewport:_options$rootBoundary,_options$elementConte=options.elementContext,_options$elementConte=void 0===_options$elementConte?popper:_options$elementConte,_options$altBoundary=options.altBoundary,_options$altBoundary=void 0!==_options$altBoundary&&_options$altBoundary,options=options.padding,options=void 0===options?0:options,options=mergePaddingObject("number"!=typeof options?options:expandToHashMap(options,basePlacements)),popperRect=state.rects.popper,_options$altBoundary=state.elements[_options$altBoundary?_options$elementConte===popper?reference:popper:_options$elementConte],_options$altBoundary=getClippingRect(isElement(_options$altBoundary)?_options$altBoundary:_options$altBoundary.contextElement||getDocumentElement(state.elements.popper),_options$boundary,_options$rootBoundary,_options$strategy),_options$boundary=getBoundingClientRect(state.elements.reference),_options$rootBoundary=computeOffsets({reference:_options$boundary,element:popperRect,strategy:"absolute",placement:_options$placement}),_options$strategy=rectToClientRect(Object.assign({},popperRect,_options$rootBoundary)),popperRect=_options$elementConte===popper?_options$strategy:_options$boundary,overflowOffsets={top:_options$altBoundary.top-popperRect.top+options.top,bottom:popperRect.bottom-_options$altBoundary.bottom+options.bottom,left:_options$altBoundary.left-popperRect.left+options.left,right:popperRect.right-_options$altBoundary.right+options.right},_options$rootBoundary=state.modifiersData.offset;return _options$elementConte===popper&&_options$rootBoundary&&(offset=_options$rootBoundary[_options$placement],Object.keys(overflowOffsets).forEach(function(key){var multiply=0<=[right,bottom].indexOf(key)?1:-1,axis=0<=[top,bottom].indexOf(key)?"y":"x";overflowOffsets[key]+=offset[axis]*multiply})),overflowOffsets}function computeAutoPlacement(state,options){var options=options=void 0===options?{}:options,placement=options.placement,boundary=options.boundary,rootBoundary=options.rootBoundary,padding=options.padding,flipVariations=options.flipVariations,options=options.allowedAutoPlacements,allowedAutoPlacements=void 0===options?placements:options,variation=placement.split("-")[1],options=variation?flipVariations?variationPlacements:variationPlacements.filter(function(placement){return placement.split("-")[1]===variation}):basePlacements,placement=options.filter(function(placement){return 0<=allowedAutoPlacements.indexOf(placement)}),overflows=(placement=0===placement.length?options:placement).reduce(function(acc,placement){return acc[placement]=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding})[placement.split("-")[0]],acc},{});return Object.keys(overflows).sort(function(a,b){return overflows[a]-overflows[b]})}var flip$1={name:"flip",enabled:!0,phase:"main",fn:function(_ref){var state=_ref.state,options=_ref.options,_ref=_ref.name;if(!state.modifiersData[_ref]._skip){for(var _options$mainAxis=options.mainAxis,checkMainAxis=void 0===_options$mainAxis||_options$mainAxis,_options$mainAxis=options.altAxis,checkAltAxis=void 0===_options$mainAxis||_options$mainAxis,_options$mainAxis=options.fallbackPlacements,padding=options.padding,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,_options$flipVariatio=options.flipVariations,flipVariations=void 0===_options$flipVariatio||_options$flipVariatio,allowedAutoPlacements=options.allowedAutoPlacements,_options$flipVariatio=state.options.placement,options=_options$flipVariatio.split("-")[0],_options$mainAxis=_options$mainAxis||(options===_options$flipVariatio||!flipVariations?[getOppositePlacement(_options$flipVariatio)]:function(placement){var oppositePlacement;return placement.split("-")[0]===auto?[]:(oppositePlacement=getOppositePlacement(placement),[getOppositeVariationPlacement(placement),oppositePlacement,getOppositeVariationPlacement(oppositePlacement)])}(_options$flipVariatio)),placements=[_options$flipVariatio].concat(_options$mainAxis).reduce(function(acc,placement){return acc.concat(placement.split("-")[0]===auto?computeAutoPlacement(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding,flipVariations:flipVariations,allowedAutoPlacements:allowedAutoPlacements}):placement)},[]),referenceRect=state.rects.reference,popperRect=state.rects.popper,checksMap=new Map,makeFallbackChecks=!0,firstFittingPlacement=placements[0],i=0;i<placements.length;i++){var placement=placements[i],_basePlacement=placement.split("-")[0],isStartVariation=placement.split("-")[1]===start,isVertical=0<=[top,bottom].indexOf(_basePlacement),len=isVertical?"width":"height",overflow=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,altBoundary:altBoundary,padding:padding}),isVertical=isVertical?isStartVariation?right:left:isStartVariation?bottom:top,isStartVariation=(referenceRect[len]>popperRect[len]&&(isVertical=getOppositePlacement(isVertical)),getOppositePlacement(isVertical)),len=[];if(checkMainAxis&&len.push(overflow[_basePlacement]<=0),checkAltAxis&&len.push(overflow[isVertical]<=0,overflow[isStartVariation]<=0),len.every(function(check){return check})){firstFittingPlacement=placement,makeFallbackChecks=!1;break}checksMap.set(placement,len)}if(makeFallbackChecks)for(var _i=flipVariations?3:1;0<_i;_i--)if("break"===function(_i){var fittingPlacement=placements.find(function(placement){placement=checksMap.get(placement);if(placement)return placement.slice(0,_i).every(function(check){return check})});if(fittingPlacement)return firstFittingPlacement=fittingPlacement,"break"}(_i))break;state.placement!==firstFittingPlacement&&(state.modifiersData[_ref]._skip=!0,state.placement=firstFittingPlacement,state.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(overflow,rect,preventedOffsets){return{top:overflow.top-rect.height-(preventedOffsets=void 0===preventedOffsets?{x:0,y:0}:preventedOffsets).y,right:overflow.right-rect.width+preventedOffsets.x,bottom:overflow.bottom-rect.height+preventedOffsets.y,left:overflow.left-rect.width-preventedOffsets.x}}function isAnySideFullyClipped(overflow){return[top,right,bottom,left].some(function(side){return 0<=overflow[side]})}var hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_ref){var state=_ref.state,_ref=_ref.name,referenceRect=state.rects.reference,popperRect=state.rects.popper,preventedOffsets=state.modifiersData.preventOverflow,referenceOverflow=detectOverflow(state,{elementContext:"reference"}),popperAltOverflow=detectOverflow(state,{altBoundary:!0}),referenceOverflow=getSideOffsets(referenceOverflow,referenceRect),referenceRect=getSideOffsets(popperAltOverflow,popperRect,preventedOffsets),popperAltOverflow=isAnySideFullyClipped(referenceOverflow),popperRect=isAnySideFullyClipped(referenceRect);state.modifiersData[_ref]={referenceClippingOffsets:referenceOverflow,popperEscapeOffsets:referenceRect,isReferenceHidden:popperAltOverflow,hasPopperEscaped:popperRect},state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-reference-hidden":popperAltOverflow,"data-popper-escaped":popperRect})}};var offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_ref2){var state=_ref2.state,options=_ref2.options,_ref2=_ref2.name,offset=void 0===(options=options.offset)?[0,0]:options,options=placements.reduce(function(acc,placement){return acc[placement]=function(placement,rects,offset){var basePlacement=placement.split("-")[0],invertDistance=0<=[left,top].indexOf(basePlacement)?-1:1,placement=(rects="function"==typeof offset?offset(Object.assign({},rects,{placement:placement})):offset)[0]||0,offset=(rects[1]||0)*invertDistance;return 0<=[left,right].indexOf(basePlacement)?{x:offset,y:placement}:{x:placement,y:offset}}(placement,state.rects,offset),acc},{}),x=(_data$state$placement=options[state.placement]).x,_data$state$placement=_data$state$placement.y;null!=state.modifiersData.popperOffsets&&(state.modifiersData.popperOffsets.x+=x,state.modifiersData.popperOffsets.y+=_data$state$placement),state.modifiersData[_ref2]=options}};var popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_ref){var state=_ref.state,_ref=_ref.name;state.modifiersData[_ref]=computeOffsets({reference:state.rects.reference,element:state.rects.popper,strategy:"absolute",placement:state.placement})},data:{}};var preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_ref){var offset,altSide,additive,mainSide,arrowPaddingObject,minLen,arrowElement,min$1,max$1,state=_ref.state,options=_ref.options,_ref=_ref.name,_options$mainAxis=void 0===(_options$mainAxis=options.mainAxis)||_options$mainAxis,_options$altAxis=void 0!==(_options$altAxis=options.altAxis)&&_options$altAxis,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,padding=options.padding,_options$tether=void 0===(_options$tether=options.tether)||_options$tether,options=void 0===(options=options.tetherOffset)?0:options,boundary=detectOverflow(state,{boundary:boundary,rootBoundary:rootBoundary,padding:padding,altBoundary:altBoundary}),rootBoundary=state.placement.split("-")[0],altBoundary=!(padding=state.placement.split("-")[1]),mainAxis=getMainAxisFromPlacement(rootBoundary),altAxis="x"===mainAxis?"y":"x",popperOffsets=state.modifiersData.popperOffsets,referenceRect=state.rects.reference,popperRect=state.rects.popper,options="number"==typeof(options="function"==typeof options?options(Object.assign({},state.rects,{placement:state.placement})):options)?{mainAxis:options,altAxis:options}:Object.assign({mainAxis:0,altAxis:0},options),offsetModifierState=state.modifiersData.offset?state.modifiersData.offset[state.placement]:null,data={x:0,y:0};popperOffsets&&(_options$mainAxis&&(_options$mainAxis="y"===mainAxis?"height":"width",min$1=(offset=popperOffsets[mainAxis])+boundary[mainSide="y"===mainAxis?top:left],max$1=offset-boundary[altSide="y"===mainAxis?bottom:right],additive=_options$tether?-popperRect[_options$mainAxis]/2:0,minLen=(padding===start?referenceRect:popperRect)[_options$mainAxis],padding=padding===start?-popperRect[_options$mainAxis]:-referenceRect[_options$mainAxis],arrowElement=state.elements.arrow,arrowElement=_options$tether&&arrowElement?getLayoutRect(arrowElement):{width:0,height:0},mainSide=(arrowPaddingObject=state.modifiersData["arrow#persistent"]?state.modifiersData["arrow#persistent"].padding:getFreshSideObject())[mainSide],arrowPaddingObject=arrowPaddingObject[altSide],altSide=within(0,referenceRect[_options$mainAxis],arrowElement[_options$mainAxis]),arrowElement=altBoundary?referenceRect[_options$mainAxis]/2-additive-altSide-mainSide-options.mainAxis:minLen-altSide-mainSide-options.mainAxis,minLen=altBoundary?-referenceRect[_options$mainAxis]/2+additive+altSide+arrowPaddingObject+options.mainAxis:padding+altSide+arrowPaddingObject+options.mainAxis,altBoundary=(mainSide=state.elements.arrow&&getOffsetParent(state.elements.arrow))?"y"===mainAxis?mainSide.clientTop||0:mainSide.clientLeft||0:0,padding=offset+minLen-(additive=null!=(_options$mainAxis=null==offsetModifierState?void 0:offsetModifierState[mainAxis])?_options$mainAxis:0),altSide=within(_options$tether?min(min$1,offset+arrowElement-additive-altBoundary):min$1,offset,_options$tether?max(max$1,padding):max$1),popperOffsets[mainAxis]=altSide,data[mainAxis]=altSide-offset),_options$altAxis&&(arrowPaddingObject="y"==altAxis?"height":"width",minLen=(mainSide=popperOffsets[altAxis])+boundary["x"===mainAxis?top:left],_options$mainAxis=mainSide-boundary["x"===mainAxis?bottom:right],arrowElement=-1!==[top,left].indexOf(rootBoundary),altBoundary=null!=(additive=null==offsetModifierState?void 0:offsetModifierState[altAxis])?additive:0,min$1=arrowElement?minLen:mainSide-referenceRect[arrowPaddingObject]-popperRect[arrowPaddingObject]-altBoundary+options.altAxis,padding=arrowElement?mainSide+referenceRect[arrowPaddingObject]+popperRect[arrowPaddingObject]-altBoundary-options.altAxis:_options$mainAxis,max$1=_options$tether&&arrowElement?function(min,value,max){return min=within(min,value,max),max<min?max:min}(min$1,mainSide,padding):within(_options$tether?min$1:minLen,mainSide,_options$tether?padding:_options$mainAxis),popperOffsets[altAxis]=max$1,data[altAxis]=max$1-mainSide),state.modifiersData[_ref]=data)},requiresIfExists:["offset"]};function getCompositeRect(elementOrVirtualElement,offsetParent,isFixed){void 0===isFixed&&(isFixed=!1);var isOffsetParentAnElement=isHTMLElement(offsetParent),offsetParentIsScaled=isHTMLElement(offsetParent)&&function(element){var rect=element.getBoundingClientRect(),scaleX=round(rect.width)/element.offsetWidth||1,rect=round(rect.height)/element.offsetHeight||1;return 1!==scaleX||1!==rect}(offsetParent),documentElement=getDocumentElement(offsetParent),elementOrVirtualElement=getBoundingClientRect(elementOrVirtualElement,offsetParentIsScaled,isFixed),offsetParentIsScaled={scrollLeft:0,scrollTop:0},offsets={x:0,y:0};return!isOffsetParentAnElement&&isFixed||("body"===getNodeName(offsetParent)&&!isScrollParent(documentElement)||(offsetParentIsScaled=(isOffsetParentAnElement=offsetParent)!==getWindow(isOffsetParentAnElement)&&isHTMLElement(isOffsetParentAnElement)?{scrollLeft:isOffsetParentAnElement.scrollLeft,scrollTop:isOffsetParentAnElement.scrollTop}:getWindowScroll(isOffsetParentAnElement)),isHTMLElement(offsetParent)?((offsets=getBoundingClientRect(offsetParent,!0)).x+=offsetParent.clientLeft,offsets.y+=offsetParent.clientTop):documentElement&&(offsets.x=getWindowScrollBarX(documentElement))),{x:elementOrVirtualElement.left+offsetParentIsScaled.scrollLeft-offsets.x,y:elementOrVirtualElement.top+offsetParentIsScaled.scrollTop-offsets.y,width:elementOrVirtualElement.width,height:elementOrVirtualElement.height}}function order(modifiers){var map=new Map,visited=new Set,result=[];return modifiers.forEach(function(modifier){map.set(modifier.name,modifier)}),modifiers.forEach(function(modifier){visited.has(modifier.name)||!function sort(modifier){visited.add(modifier.name),[].concat(modifier.requires||[],modifier.requiresIfExists||[]).forEach(function(dep){visited.has(dep)||(dep=map.get(dep))&&sort(dep)}),result.push(modifier)}(modifier)}),result}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return!args.some(function(element){return!(element&&"function"==typeof element.getBoundingClientRect)})}function popperGenerator(generatorOptions){var generatorOptions=generatorOptions=void 0===generatorOptions?{}:generatorOptions,_generatorOptions$def=generatorOptions.defaultModifiers,defaultModifiers=void 0===_generatorOptions$def?[]:_generatorOptions$def,_generatorOptions$def=generatorOptions.defaultOptions,defaultOptions=void 0===_generatorOptions$def?DEFAULT_OPTIONS:_generatorOptions$def;return function(reference,popper,options){void 0===options&&(options=defaultOptions);var fn,pending,state={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,defaultOptions),modifiersData:{},elements:{reference:reference,popper:popper},attributes:{},styles:{}},effectCleanupFns=[],isDestroyed=!1,instance={state:state,setOptions:function(setOptionsAction){var merged,setOptionsAction="function"==typeof setOptionsAction?setOptionsAction(state.options):setOptionsAction,setOptionsAction=(cleanupModifierEffects(),state.options=Object.assign({},defaultOptions,state.options,setOptionsAction),state.scrollParents={reference:isElement(reference)?listScrollParents(reference):reference.contextElement?listScrollParents(reference.contextElement):[],popper:listScrollParents(popper)},function(modifiers){var orderedModifiers=order(modifiers);return modifierPhases.reduce(function(acc,phase){return acc.concat(orderedModifiers.filter(function(modifier){return modifier.phase===phase}))},[])}((setOptionsAction=[].concat(defaultModifiers,state.options.modifiers),merged=setOptionsAction.reduce(function(merged,current){var existing=merged[current.name];return merged[current.name]=existing?Object.assign({},existing,current,{options:Object.assign({},existing.options,current.options),data:Object.assign({},existing.data,current.data)}):current,merged},{}),Object.keys(merged).map(function(key){return merged[key]}))));return state.orderedModifiers=setOptionsAction.filter(function(m){return m.enabled}),state.orderedModifiers.forEach(function(_ref3){var name=_ref3.name,_ref3$options=_ref3.options,_ref3=_ref3.effect;"function"==typeof _ref3&&(_ref3=_ref3({state:state,name:name,instance:instance,options:void 0===_ref3$options?{}:_ref3$options}),effectCleanupFns.push(_ref3||function(){}))}),instance.update()},forceUpdate:function(){if(!isDestroyed){var _state$elements=state.elements,reference=_state$elements.reference,_state$elements=_state$elements.popper;if(areValidElements(reference,_state$elements)){state.rects={reference:getCompositeRect(reference,getOffsetParent(_state$elements),"fixed"===state.options.strategy),popper:getLayoutRect(_state$elements)},state.reset=!1,state.placement=state.options.placement,state.orderedModifiers.forEach(function(modifier){return state.modifiersData[modifier.name]=Object.assign({},modifier.data)});for(var fn,_state$orderedModifie2,_state$orderedModifie,index=0;index<state.orderedModifiers.length;index++)!0===state.reset?(state.reset=!1,index=-1):(fn=(_state$orderedModifie=state.orderedModifiers[index]).fn,_state$orderedModifie2=_state$orderedModifie.options,_state$orderedModifie=_state$orderedModifie.name,"function"==typeof fn&&(state=fn({state:state,options:void 0===_state$orderedModifie2?{}:_state$orderedModifie2,name:_state$orderedModifie,instance:instance})||state))}}},update:(fn=function(){return new Promise(function(resolve){instance.forceUpdate(),resolve(state)})},function(){return pending=pending||new Promise(function(resolve){Promise.resolve().then(function(){pending=void 0,resolve(fn())})})}),destroy:function(){cleanupModifierEffects(),isDestroyed=!0}};return areValidElements(reference,popper)&&instance.setOptions(options).then(function(state){!isDestroyed&&options.onFirstUpdate&&options.onFirstUpdate(state)}),instance;function cleanupModifierEffects(){effectCleanupFns.forEach(function(fn){return fn()}),effectCleanupFns=[]}}}var createPopper=popperGenerator({defaultModifiers:[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1]});const Popper=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:popperGenerator,detectOverflow:detectOverflow,createPopperBase:popperGenerator(),createPopper:createPopper,createPopperLite:popperGenerator({defaultModifiers:[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1]}),top:top,bottom:bottom,right:right,left:left,auto:auto,basePlacements:basePlacements,start:start,end:end,clippingParents:clippingParents,viewport:viewport,popper:popper,reference:reference,variationPlacements:variationPlacements,placements:placements,beforeRead:"beforeRead",read:"read",afterRead:"afterRead",beforeMain:"beforeMain",main:"main",afterMain:"afterMain",beforeWrite:"beforeWrite",write:"write",afterWrite:"afterWrite",modifierPhases:modifierPhases,applyStyles:applyStyles$1,arrow:arrow$1,computeStyles:computeStyles$1,eventListeners:eventListeners,flip:flip$1,hide:hide$1,offset:offset$1,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1},Symbol.toStringTag,{value:"Module"}));const SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',PLACEMENT_TOP=(SELECTOR_DATA_TOGGLE$3,isRTL()?"top-end":"top-start"),PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(element,config){super(element,config),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,".dropdown-menu")[0]||SelectorEngine.prev(this._element,".dropdown-menu")[0]||SelectorEngine.findOne(".dropdown-menu",this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return"dropdown"}toggle(){return this._isShown()?this.hide():this.show()}show(){if(!isDisabled(this._element)&&!this._isShown()){var relatedTarget={relatedTarget:this._element},showEvent=EventHandler.trigger(this._element,"show.bs.dropdown",relatedTarget);if(!showEvent.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const element of[].concat(...document.body.children))EventHandler.on(element,"mouseover",noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add("show"),this._element.classList.add("show"),EventHandler.trigger(this._element,"shown.bs.dropdown",relatedTarget)}}}hide(){var relatedTarget;!isDisabled(this._element)&&this._isShown()&&(relatedTarget={relatedTarget:this._element},this._completeHide(relatedTarget))}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(relatedTarget){var hideEvent=EventHandler.trigger(this._element,"hide.bs.dropdown",relatedTarget);if(!hideEvent.defaultPrevented){if("ontouchstart"in document.documentElement)for(const element of[].concat(...document.body.children))EventHandler.off(element,"mouseover",noop);this._popper&&this._popper.destroy(),this._menu.classList.remove("show"),this._element.classList.remove("show"),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,"hidden.bs.dropdown",relatedTarget)}}_getConfig(config){if("object"!=typeof(config=super._getConfig(config)).reference||isElement$1(config.reference)||"function"==typeof config.reference.getBoundingClientRect)return config;throw new TypeError("dropdown".toUpperCase()+': Option "reference" provided type "object" without a required "getBoundingClientRect" method.')}_createPopper(){if(void 0===Popper)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let referenceElement=this._element;"parent"===this._config.reference?referenceElement=this._parent:isElement$1(this._config.reference)?referenceElement=getElement(this._config.reference):"object"==typeof this._config.reference&&(referenceElement=this._config.reference);var popperConfig=this._getPopperConfig();this._popper=createPopper(referenceElement,this._menu,popperConfig)}_isShown(){return this._menu.classList.contains("show")}_getPlacement(){var isEnd,parentDropdown=this._parent;return parentDropdown.classList.contains("dropend")?PLACEMENT_RIGHT:parentDropdown.classList.contains("dropstart")?PLACEMENT_LEFT:parentDropdown.classList.contains("dropup-center")?"top":parentDropdown.classList.contains("dropdown-center")?"bottom":(isEnd="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim(),parentDropdown.classList.contains("dropup")?isEnd?PLACEMENT_TOPEND:PLACEMENT_TOP:isEnd?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM)}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const offset=this._config["offset"];return"string"==typeof offset?offset.split(",").map(value=>Number.parseInt(value,10)):"function"==typeof offset?popperData=>offset(popperData,this._element):offset}_getPopperConfig(){var defaultBsPopperConfig={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return!this._inNavbar&&"static"!==this._config.display||(Manipulator.setDataAttribute(this._menu,"popper","static"),defaultBsPopperConfig.modifiers=[{name:"applyStyles",enabled:!1}]),{...defaultBsPopperConfig,..."function"==typeof this._config.popperConfig?this._config.popperConfig(defaultBsPopperConfig):this._config.popperConfig}}_selectMenuItem({key,target}){var items=SelectorEngine.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(element=>isVisible(element));items.length&&getNextActiveElement(items,target,"ArrowDown"===key,!items.includes(target)).focus()}static jQueryInterface(config){return this.each(function(){var data=Dropdown.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config]()}})}static clearMenus(event){if(2!==event.button&&("keyup"!==event.type||"Tab"===event.key))for(const toggle of SelectorEngine.find('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled).show')){var isMenuTarget,composedPath,context=Dropdown.getInstance(toggle);context&&!1!==context._config.autoClose&&(isMenuTarget=(composedPath=event.composedPath()).includes(context._menu),composedPath.includes(context._element)||"inside"===context._config.autoClose&&!isMenuTarget||"outside"===context._config.autoClose&&isMenuTarget||context._menu.contains(event.target)&&("keyup"===event.type&&"Tab"===event.key||/input|select|option|textarea|form/i.test(event.target.tagName))||(composedPath={relatedTarget:context._element},"click"===event.type&&(composedPath.clickEvent=event),context._completeHide(composedPath)))}}static dataApiKeydownHandler(event){var isInput=/input|textarea/i.test(event.target.tagName),isEscapeEvent="Escape"===event.key,isUpOrDownEvent=["ArrowUp","ArrowDown"].includes(event.key);!isUpOrDownEvent&&!isEscapeEvent||isInput&&!isEscapeEvent||(event.preventDefault(),isInput=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,event.delegateTarget.parentNode),isEscapeEvent=Dropdown.getOrCreateInstance(isInput),isUpOrDownEvent?(event.stopPropagation(),isEscapeEvent.show(),isEscapeEvent._selectMenuItem(event)):isEscapeEvent._isShown()&&(event.stopPropagation(),isEscapeEvent.hide(),isInput.focus()))}}EventHandler.on(document,"keydown.bs.dropdown.data-api",SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler),EventHandler.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.dataApiKeydownHandler),EventHandler.on(document,"click.bs.dropdown.data-api",Dropdown.clearMenus),EventHandler.on(document,"keyup.bs.dropdown.data-api",Dropdown.clearMenus),EventHandler.on(document,"click.bs.dropdown.data-api",SELECTOR_DATA_TOGGLE$3,function(event){event.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()}),defineJQueryPlugin(Dropdown);class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){var documentWidth=document.documentElement.clientWidth;return Math.abs(window.innerWidth-documentWidth)}hide(){const width=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"padding-right",calculatedValue=>calculatedValue+width),this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right",calculatedValue=>calculatedValue+width),this._setElementAttributes(".sticky-top","margin-right",calculatedValue=>calculatedValue-width)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"padding-right"),this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right"),this._resetElementAttributes(".sticky-top","margin-right")}isOverflowing(){return 0<this.getWidth()}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(selector,styleProperty,callback){const scrollbarWidth=this.getWidth();this._applyManipulationCallback(selector,element=>{var calculatedValue;element!==this._element&&window.innerWidth>element.clientWidth+scrollbarWidth||(this._saveInitialAttribute(element,styleProperty),calculatedValue=window.getComputedStyle(element).getPropertyValue(styleProperty),element.style.setProperty(styleProperty,callback(Number.parseFloat(calculatedValue))+"px"))})}_saveInitialAttribute(element,styleProperty){var actualValue=element.style.getPropertyValue(styleProperty);actualValue&&Manipulator.setDataAttribute(element,styleProperty,actualValue)}_resetElementAttributes(selector,styleProperty){this._applyManipulationCallback(selector,element=>{var value=Manipulator.getDataAttribute(element,styleProperty);null===value?element.style.removeProperty(styleProperty):(Manipulator.removeDataAttribute(element,styleProperty),element.style.setProperty(styleProperty,value))})}_applyManipulationCallback(selector,callBack){if(isElement$1(selector))callBack(selector);else for(const sel of SelectorEngine.find(selector,this._element))callBack(sel)}}const Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(config){super(),this._config=this._getConfig(config),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return"backdrop"}show(callback){var element;this._config.isVisible?(this._append(),element=this._getElement(),this._config.isAnimated&&reflow(element),element.classList.add("show"),this._emulateAnimation(()=>{execute(callback)})):execute(callback)}hide(callback){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),execute(callback)})):execute(callback)}dispose(){this._isAppended&&(EventHandler.off(this._element,"mousedown.bs.backdrop"),this._element.remove(),this._isAppended=!1)}_getElement(){var backdrop;return this._element||((backdrop=document.createElement("div")).className=this._config.className,this._config.isAnimated&&backdrop.classList.add("fade"),this._element=backdrop),this._element}_configAfterMerge(config){return config.rootElement=getElement(config.rootElement),config}_append(){var element;this._isAppended||(element=this._getElement(),this._config.rootElement.append(element),EventHandler.on(element,"mousedown.bs.backdrop",()=>{execute(this._config.clickCallback)}),this._isAppended=!0)}_emulateAnimation(callback){executeAfterTransition(callback,this._getElement(),this._config.isAnimated)}}const Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(config){super(),this._config=this._getConfig(config),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,".bs.focustrap"),EventHandler.on(document,"focusin.bs.focustrap",event=>this._handleFocusin(event)),EventHandler.on(document,"keydown.tab.bs.focustrap",event=>this._handleKeydown(event)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,".bs.focustrap"))}_handleFocusin(event){var trapElement=this._config["trapElement"];event.target===document||event.target===trapElement||trapElement.contains(event.target)||(0===(event=SelectorEngine.focusableChildren(trapElement)).length?trapElement:"backward"===this._lastTabNavDirection?event[event.length-1]:event[0]).focus()}_handleKeydown(event){"Tab"===event.key&&(this._lastTabNavDirection=event.shiftKey?"backward":"forward")}}const Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(element,config){super(element,config),this._dialog=SelectorEngine.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return"modal"}toggle(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}show(relatedTarget){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,"show.bs.modal",{relatedTarget:relatedTarget}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(()=>this._showElement(relatedTarget)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const htmlElement of[window,this._dialog])EventHandler.off(htmlElement,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(relatedTarget){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;var modalBody=SelectorEngine.findOne(".modal-body",this._dialog);modalBody&&(modalBody.scrollTop=0),reflow(this._element),this._element.classList.add("show");this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,"shown.bs.modal",{relatedTarget:relatedTarget})},this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,"keydown.dismiss.bs.modal",event=>{"Escape"===event.key&&(this._config.keyboard?(event.preventDefault(),this.hide()):this._triggerBackdropTransition())}),EventHandler.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,"mousedown.dismiss.bs.modal",event=>{EventHandler.one(this._element,"click.dismiss.bs.modal",event2=>{this._element===event.target&&this._element===event2.target&&("static"===this._config.backdrop?this._triggerBackdropTransition():this._config.backdrop&&this.hide())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,"hidden.bs.modal")})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){var hideEvent=EventHandler.trigger(this._element,"hidePrevented.bs.modal");if(!hideEvent.defaultPrevented){hideEvent=this._element.scrollHeight>document.documentElement.clientHeight;const initialOverflowY=this._element.style.overflowY;"hidden"===initialOverflowY||this._element.classList.contains("modal-static")||(hideEvent||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(()=>{this._element.classList.remove("modal-static"),this._queueCallback(()=>{this._element.style.overflowY=initialOverflowY},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var property,isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight,scrollbarWidth=this._scrollBar.getWidth(),isBodyOverflowing=0<scrollbarWidth;if(isBodyOverflowing&&!isModalOverflowing&&(property=isRTL()?"paddingLeft":"paddingRight",this._element.style[property]=scrollbarWidth+"px"),!isBodyOverflowing&&isModalOverflowing){const property=isRTL()?"paddingRight":"paddingLeft";this._element.style[property]=scrollbarWidth+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(config,relatedTarget){return this.each(function(){var data=Modal.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config](relatedTarget)}})}}EventHandler.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(event){const target=getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&event.preventDefault(),EventHandler.one(target,"show.bs.modal",showEvent=>{showEvent.defaultPrevented||EventHandler.one(target,"hidden.bs.modal",()=>{isVisible(this)&&this.focus()})});event=SelectorEngine.findOne(".modal.show");event&&Modal.getInstance(event).hide(),Modal.getOrCreateInstance(target).toggle(this)}),enableDismissTrigger(Modal),defineJQueryPlugin(Modal);const Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(element,config){super(element,config),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return"offcanvas"}toggle(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}show(relatedTarget){this._isShown||EventHandler.trigger(this._element,"show.bs.offcanvas",{relatedTarget:relatedTarget}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ScrollBarHelper).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove("showing"),EventHandler.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:relatedTarget})},this._element,!0))}hide(){this._isShown&&!EventHandler.trigger(this._element,"hide.bs.offcanvas").defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ScrollBarHelper).reset(),EventHandler.trigger(this._element,"hidden.bs.offcanvas")},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){var isVisible=Boolean(this._config.backdrop);return new Backdrop({className:"offcanvas-backdrop",isVisible:isVisible,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:isVisible?()=>{"static"===this._config.backdrop?EventHandler.trigger(this._element,"hidePrevented.bs.offcanvas"):this.hide()}:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,"keydown.dismiss.bs.offcanvas",event=>{"Escape"===event.key&&(this._config.keyboard?this.hide():EventHandler.trigger(this._element,"hidePrevented.bs.offcanvas"))})}static jQueryInterface(config){return this.each(function(){var data=Offcanvas.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config](this)}})}}EventHandler.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(event){var target=getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&event.preventDefault(),isDisabled(this)||(EventHandler.one(target,"hidden.bs.offcanvas",()=>{isVisible(this)&&this.focus()}),(event=SelectorEngine.findOne(".offcanvas.show"))&&event!==target&&Offcanvas.getInstance(event).hide(),Offcanvas.getOrCreateInstance(target).toggle(this))}),EventHandler.on(window,"load.bs.offcanvas.data-api",()=>{for(const selector of SelectorEngine.find(".offcanvas.show"))Offcanvas.getOrCreateInstance(selector).show()}),EventHandler.on(window,"resize.bs.offcanvas",()=>{for(const element of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(element).position&&Offcanvas.getOrCreateInstance(element).hide()}),enableDismissTrigger(Offcanvas),defineJQueryPlugin(Offcanvas);const uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;applyStyles$1={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function sanitizeHtml(unsafeHtml,allowList,sanitizeFunction){if(!unsafeHtml.length)return unsafeHtml;if(sanitizeFunction&&"function"==typeof sanitizeFunction)return sanitizeFunction(unsafeHtml);sanitizeFunction=(new window.DOMParser).parseFromString(unsafeHtml,"text/html");for(const element of[].concat(...sanitizeFunction.body.querySelectorAll("*"))){var elementName=element.nodeName.toLowerCase();if(Object.keys(allowList).includes(elementName)){var attributeList=[].concat(...element.attributes),allowedAttributes=[].concat(allowList["*"]||[],allowList[elementName]||[]);for(const attribute of attributeList)((attribute,allowedAttributeList)=>{const attributeName=attribute.nodeName.toLowerCase();return allowedAttributeList.includes(attributeName)?!uriAttributes.has(attributeName)||Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue)||DATA_URL_PATTERN.test(attribute.nodeValue)):allowedAttributeList.filter(attributeRegex=>attributeRegex instanceof RegExp).some(regex=>regex.test(attributeName))})(attribute,allowedAttributes)||element.removeAttribute(attribute.nodeName)}else element.remove()}return sanitizeFunction.body.innerHTML}const Default$4={allowList:applyStyles$1,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(config){super(),this._config=this._getConfig(config)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(config=>this._resolvePossibleFunction(config)).filter(Boolean)}hasContent(){return 0<this.getContent().length}changeContent(content){return this._checkContent(content),this._config.content={...this._config.content,...content},this}toHtml(){var selector,text,templateWrapper=document.createElement("div");templateWrapper.innerHTML=this._maybeSanitize(this._config.template);for([selector,text]of Object.entries(this._config.content))this._setContent(templateWrapper,text,selector);var template=templateWrapper.children[0],extraClass=this._resolvePossibleFunction(this._config.extraClass);return extraClass&&template.classList.add(...extraClass.split(" ")),template}_typeCheckConfig(config){super._typeCheckConfig(config),this._checkContent(config.content)}_checkContent(arg){for(var[selector,content]of Object.entries(arg))super._typeCheckConfig({selector:selector,entry:content},DefaultContentType)}_setContent(template,content,selector){selector=SelectorEngine.findOne(selector,template);selector&&((content=this._resolvePossibleFunction(content))?isElement$1(content)?this._putElementInTemplate(getElement(content),selector):this._config.html?selector.innerHTML=this._maybeSanitize(content):selector.textContent=content:selector.remove())}_maybeSanitize(arg){return this._config.sanitize?sanitizeHtml(arg,this._config.allowList,this._config.sanitizeFn):arg}_resolvePossibleFunction(arg){return"function"==typeof arg?arg(this):arg}_putElementInTemplate(element,templateElement){this._config.html?(templateElement.innerHTML="",templateElement.append(element)):templateElement.textContent=element.textContent}}const DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]);const AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:applyStyles$1,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(element,config){if(void 0===Popper)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(element,config),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var showEvent=EventHandler.trigger(this._element,this.constructor.eventName("show")),isInTheDom=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!showEvent.defaultPrevented&&isInTheDom){this.tip&&(this.tip.remove(),this.tip=null);showEvent=this._getTipElement(),isInTheDom=(this._element.setAttribute("aria-describedby",showEvent.getAttribute("id")),this._config)["container"];if(this._element.ownerDocument.documentElement.contains(this.tip)||(isInTheDom.append(showEvent),EventHandler.trigger(this._element,this.constructor.eventName("inserted"))),this._popper?this._popper.update():this._popper=this._createPopper(showEvent),showEvent.classList.add("show"),"ontouchstart"in document.documentElement)for(const element of[].concat(...document.body.children))EventHandler.on(element,"mouseover",noop);this._queueCallback(()=>{EventHandler.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}}}hide(){if(this._isShown()){var hideEvent=EventHandler.trigger(this._element,this.constructor.eventName("hide"));if(!hideEvent.defaultPrevented){const tip=this._getTipElement();if(tip.classList.remove("show"),"ontouchstart"in document.documentElement)for(const element of[].concat(...document.body.children))EventHandler.off(element,"mouseover",noop);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null;this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||tip.remove(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName("hidden")),this._disposePopper())},this.tip,this._isAnimated())}}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(content){content=this._getTemplateFactory(content).toHtml();if(!content)return null;content.classList.remove("fade","show"),content.classList.add(`bs-${this.constructor.NAME}-auto`);var tipId=(prefix=>{for(;prefix+=Math.floor(1e6*Math.random()),document.getElementById(prefix););return prefix})(this.constructor.NAME).toString();return content.setAttribute("id",tipId),this._isAnimated()&&content.classList.add("fade"),content}setContent(content){this._newContent=content,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(content){return this._templateFactory?this._templateFactory.changeContent(content):this._templateFactory=new TemplateFactory({...this._config,content:content,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(event){return this.constructor.getOrCreateInstance(event.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains("fade")}_isShown(){return this.tip&&this.tip.classList.contains("show")}_createPopper(tip){var placement="function"==typeof this._config.placement?this._config.placement.call(this,tip,this._element):this._config.placement,placement=AttachmentMap[placement.toUpperCase()];return createPopper(this._element,tip,this._getPopperConfig(placement))}_getOffset(){const offset=this._config["offset"];return"string"==typeof offset?offset.split(",").map(value=>Number.parseInt(value,10)):"function"==typeof offset?popperData=>offset(popperData,this._element):offset}_resolvePossibleFunction(arg){return"function"==typeof arg?arg.call(this._element):arg}_getPopperConfig(attachment){attachment={placement:attachment,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:data=>{this._getTipElement().setAttribute("data-popper-placement",data.state.placement)}}]};return{...attachment,..."function"==typeof this._config.popperConfig?this._config.popperConfig(attachment):this._config.popperConfig}}_setListeners(){var eventIn,eventOut;for(const trigger of this._config.trigger.split(" "))"click"===trigger?EventHandler.on(this._element,this.constructor.eventName("click"),this._config.selector,event=>{this._initializeOnDelegatedTarget(event).toggle()}):"manual"!==trigger&&(eventIn="hover"===trigger?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),eventOut="hover"===trigger?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout"),EventHandler.on(this._element,eventIn,this._config.selector,event=>{var context=this._initializeOnDelegatedTarget(event);context._activeTrigger["focusin"===event.type?"focus":"hover"]=!0,context._enter()}),EventHandler.on(this._element,eventOut,this._config.selector,event=>{var context=this._initializeOnDelegatedTarget(event);context._activeTrigger["focusout"===event.type?"focus":"hover"]=context._element.contains(event.relatedTarget),context._leave()}));this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler)}_fixTitle(){var title=this._element.getAttribute("title");title&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",title),this._element.setAttribute("data-bs-original-title",title),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(handler,timeout){clearTimeout(this._timeout),this._timeout=setTimeout(handler,timeout)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(config){var dataAttributes=Manipulator.getDataAttributes(this._element);for(const dataAttribute of Object.keys(dataAttributes))DISALLOWED_ATTRIBUTES.has(dataAttribute)&&delete dataAttributes[dataAttribute];return config={...dataAttributes,..."object"==typeof config&&config?config:{}},config=this._mergeConfigObj(config),config=this._configAfterMerge(config),this._typeCheckConfig(config),config}_configAfterMerge(config){return config.container=!1===config.container?document.body:getElement(config.container),"number"==typeof config.delay&&(config.delay={show:config.delay,hide:config.delay}),"number"==typeof config.title&&(config.title=config.title.toString()),"number"==typeof config.content&&(config.content=config.content.toString()),config}_getDelegateConfig(){var config={};for(const key in this._config)this.constructor.Default[key]!==this._config[key]&&(config[key]=this._config[key]);return config.selector=!1,config.trigger="manual",config}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(config){return this.each(function(){var data=Tooltip.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config]()}})}}defineJQueryPlugin(Tooltip);const Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(config){return this.each(function(){var data=Popover.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config]()}})}}defineJQueryPlugin(Popover);const Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(element,config){super(element,config),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const section of this._observableSections.values())this._observer.observe(section)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(config){return config.target=getElement(config.target)||document.body,config.rootMargin=config.offset?config.offset+"px 0px -30%":config.rootMargin,"string"==typeof config.threshold&&(config.threshold=config.threshold.split(",").map(value=>Number.parseFloat(value))),config}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,"click.bs.scrollspy"),EventHandler.on(this._config.target,"click.bs.scrollspy","[href]",event=>{var observableSection=this._observableSections.get(event.target.hash);observableSection&&(event.preventDefault(),event=this._rootElement||window,observableSection=observableSection.offsetTop-this._element.offsetTop,event.scrollTo?event.scrollTo({top:observableSection,behavior:"smooth"}):event.scrollTop=observableSection)}))}_getNewObserver(){var options={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(entries=>this._observerCallback(entries),options)}_observerCallback(entries){const targetElement=entry=>this._targetLinks.get("#"+entry.target.id);var activate=entry=>{this._previousScrollData.visibleEntryTop=entry.target.offsetTop,this._process(targetElement(entry))},parentScrollTop=(this._rootElement||document.documentElement).scrollTop,userScrollsDown=parentScrollTop>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=parentScrollTop;for(const entry of entries)if(entry.isIntersecting){var entryIsLowerThanPrevious=entry.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(userScrollsDown&&entryIsLowerThanPrevious){if(activate(entry),parentScrollTop)continue;return}userScrollsDown||entryIsLowerThanPrevious||activate(entry)}else this._activeTarget=null,this._clearActiveClass(targetElement(entry))}_initializeTargetsAndObservables(){var observableSection;this._targetLinks=new Map,this._observableSections=new Map;for(const anchor of SelectorEngine.find("[href]",this._config.target))anchor.hash&&!isDisabled(anchor)&&(observableSection=SelectorEngine.findOne(anchor.hash,this._element),isVisible(observableSection)&&(this._targetLinks.set(anchor.hash,anchor),this._observableSections.set(anchor.hash,observableSection)))}_process(target){this._activeTarget!==target&&(this._clearActiveClass(this._config.target),(this._activeTarget=target).classList.add("active"),this._activateParents(target),EventHandler.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:target}))}_activateParents(target){if(target.classList.contains("dropdown-item"))SelectorEngine.findOne(".dropdown-toggle",target.closest(".dropdown")).classList.add("active");else for(const listGroup of SelectorEngine.parents(target,".nav, .list-group"))for(const item of SelectorEngine.prev(listGroup,".nav-link, .nav-item > .nav-link, .list-group-item"))item.classList.add("active")}_clearActiveClass(parent){parent.classList.remove("active");for(const node of SelectorEngine.find("[href].active",parent))node.classList.remove("active")}static jQueryInterface(config){return this.each(function(){var data=ScrollSpy.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config]()}})}}EventHandler.on(window,"load.bs.scrollspy.data-api",()=>{for(const spy of SelectorEngine.find('[data-bs-spy="scroll"]'))ScrollSpy.getOrCreateInstance(spy)}),defineJQueryPlugin(ScrollSpy);arrow$1='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]';const SELECTOR_INNER_ELEM='.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), '+arrow$1;class Tab extends BaseComponent{constructor(element){super(element),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,"keydown.bs.tab",event=>this._keydown(event)))}static get NAME(){return"tab"}show(){var active,hideEvent,innerElem=this._element;this._elemIsActive(innerElem)||(hideEvent=(active=this._getActiveElem())?EventHandler.trigger(active,"hide.bs.tab",{relatedTarget:innerElem}):null,EventHandler.trigger(innerElem,"show.bs.tab",{relatedTarget:active}).defaultPrevented||hideEvent&&hideEvent.defaultPrevented||(this._deactivate(active,innerElem),this._activate(innerElem,active)))}_activate(element,relatedElem){element&&(element.classList.add("active"),this._activate(getElementFromSelector(element)),this._queueCallback(()=>{"tab"!==element.getAttribute("role")?element.classList.add("show"):(element.removeAttribute("tabindex"),element.setAttribute("aria-selected",!0),this._toggleDropDown(element,!0),EventHandler.trigger(element,"shown.bs.tab",{relatedTarget:relatedElem}))},element,element.classList.contains("fade")))}_deactivate(element,relatedElem){element&&(element.classList.remove("active"),element.blur(),this._deactivate(getElementFromSelector(element)),this._queueCallback(()=>{"tab"!==element.getAttribute("role")?element.classList.remove("show"):(element.setAttribute("aria-selected",!1),element.setAttribute("tabindex","-1"),this._toggleDropDown(element,!1),EventHandler.trigger(element,"hidden.bs.tab",{relatedTarget:relatedElem}))},element,element.classList.contains("fade")))}_keydown(event){var isNext;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(event.key)&&(event.stopPropagation(),event.preventDefault(),isNext=["ArrowRight","ArrowDown"].includes(event.key),(event=getNextActiveElement(this._getChildren().filter(element=>!isDisabled(element)),event.target,isNext,!0))&&(event.focus({preventScroll:!0}),Tab.getOrCreateInstance(event).show()))}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(child=>this._elemIsActive(child))||null}_setInitialAttributes(parent,children){this._setAttributeIfNotExists(parent,"role","tablist");for(const child of children)this._setInitialAttributesOnChild(child)}_setInitialAttributesOnChild(child){child=this._getInnerElement(child);var isActive=this._elemIsActive(child),outerElem=this._getOuterElement(child);child.setAttribute("aria-selected",isActive),outerElem!==child&&this._setAttributeIfNotExists(outerElem,"role","presentation"),isActive||child.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(child,"role","tab"),this._setInitialAttributesOnTargetPanel(child)}_setInitialAttributesOnTargetPanel(child){var target=getElementFromSelector(child);target&&(this._setAttributeIfNotExists(target,"role","tabpanel"),child.id&&this._setAttributeIfNotExists(target,"aria-labelledby","#"+child.id))}_toggleDropDown(element,open){const outerElem=this._getOuterElement(element);outerElem.classList.contains("dropdown")&&((element=(selector,className)=>{selector=SelectorEngine.findOne(selector,outerElem);selector&&selector.classList.toggle(className,open)})(".dropdown-toggle","active"),element(".dropdown-menu","show"),outerElem.setAttribute("aria-expanded",open))}_setAttributeIfNotExists(element,attribute,value){element.hasAttribute(attribute)||element.setAttribute(attribute,value)}_elemIsActive(elem){return elem.classList.contains("active")}_getInnerElement(elem){return elem.matches(SELECTOR_INNER_ELEM)?elem:SelectorEngine.findOne(SELECTOR_INNER_ELEM,elem)}_getOuterElement(elem){return elem.closest(".nav-item, .list-group-item")||elem}static jQueryInterface(config){return this.each(function(){var data=Tab.getOrCreateInstance(this);if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config]()}})}}EventHandler.on(document,"click.bs.tab",arrow$1,function(event){["A","AREA"].includes(this.tagName)&&event.preventDefault(),isDisabled(this)||Tab.getOrCreateInstance(this).show()}),EventHandler.on(window,"load.bs.tab",()=>{for(const element of SelectorEngine.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Tab.getOrCreateInstance(element)}),defineJQueryPlugin(Tab);const DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(element,config){super(element,config),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return"toast"}show(){EventHandler.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),reflow(this._element),this._element.classList.add("show","showing"),this._queueCallback(()=>{this._element.classList.remove("showing"),EventHandler.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!EventHandler.trigger(this._element,"hide.bs.toast").defaultPrevented&&(this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove("showing","show"),EventHandler.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove("show"),super.dispose()}isShown(){return this._element.classList.contains("show")}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(event,isInteracting){switch(event.type){case"mouseover":case"mouseout":this._hasMouseInteraction=isInteracting;break;case"focusin":case"focusout":this._hasKeyboardInteraction=isInteracting}isInteracting?this._clearTimeout():(event=event.relatedTarget,this._element===event||this._element.contains(event)||this._maybeScheduleHide())}_setListeners(){EventHandler.on(this._element,"mouseover.bs.toast",event=>this._onInteraction(event,!0)),EventHandler.on(this._element,"mouseout.bs.toast",event=>this._onInteraction(event,!1)),EventHandler.on(this._element,"focusin.bs.toast",event=>this._onInteraction(event,!0)),EventHandler.on(this._element,"focusout.bs.toast",event=>this._onInteraction(event,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(config){return this.each(function(){var data=Toast.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config](this)}})}}return enableDismissTrigger(Toast),defineJQueryPlugin(Toast),{Alert:Alert,Button:Button,Carousel:Carousel,Collapse:Collapse,Dropdown:Dropdown,Modal:Modal,Offcanvas:Offcanvas,Popover:Popover,ScrollSpy:ScrollSpy,Tab:Tab,Toast:Toast,Tooltip:Tooltip}});var hljs=function(){"use strict";var deepFreezeEs6={exports:{}};function deepFreeze(obj){return obj instanceof Map?obj.clear=obj.delete=obj.set=function(){throw new Error("map is read-only")}:obj instanceof Set&&(obj.add=obj.clear=obj.delete=function(){throw new Error("set is read-only")}),Object.freeze(obj),Object.getOwnPropertyNames(obj).forEach(function(name){name=obj[name];"object"!=typeof name||Object.isFrozen(name)||deepFreeze(name)}),obj}deepFreezeEs6.exports=deepFreeze,deepFreezeEs6.exports.default=deepFreeze;class Response{constructor(mode){void 0===mode.data&&(mode.data={}),this.data=mode.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(value){return value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(original,...objects){const result=Object.create(null);for(const key in original)result[key]=original[key];return objects.forEach(function(obj){for(const key in obj)result[key]=obj[key]}),result}const emitsWrappingTags=node=>!!node.scope||node.sublanguage&&node.language;class HTMLRenderer{constructor(parseTree,options){this.buffer="",this.classPrefix=options.classPrefix,parseTree.walk(this)}addText(text){this.buffer+=escapeHTML(text)}openNode(node){if(emitsWrappingTags(node)){let className="";var prefix,pieces;className=node.sublanguage?"language-"+node.language:([node,prefix]=[node.scope,{prefix:this.classPrefix}["prefix"]],node.includes(".")?[""+prefix+(pieces=node.split(".")).shift(),...pieces.map((x,i)=>""+x+"_".repeat(i+1))].join(" "):""+prefix+node),this.span(className)}}closeNode(node){emitsWrappingTags(node)&&(this.buffer+="</span>")}value(){return this.buffer}span(className){this.buffer+=`<span class="${className}">`}}const newNode=(opts={})=>{var result={children:[]};return Object.assign(result,opts),result};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(node){this.top.children.push(node)}openNode(scope){scope=newNode({scope:scope});this.add(scope),this.stack.push(scope)}closeNode(){if(1<this.stack.length)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(builder){return this.constructor._walk(builder,this.rootNode)}static _walk(builder,node){return"string"==typeof node?builder.addText(node):node.children&&(builder.openNode(node),node.children.forEach(child=>this._walk(builder,child)),builder.closeNode(node)),builder}static _collapse(node){"string"!=typeof node&&node.children&&(node.children.every(el=>"string"==typeof el)?node.children=[node.children.join("")]:node.children.forEach(child=>{TokenTree._collapse(child)}))}}class TokenTreeEmitter extends TokenTree{constructor(options){super(),this.options=options}addKeyword(text,scope){""!==text&&(this.openNode(scope),this.addText(text),this.closeNode())}addText(text){""!==text&&this.add(text)}addSublanguage(emitter,name){emitter=emitter.root;emitter.sublanguage=!0,emitter.language=name,this.add(emitter)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return!0}}function source(re){return re?"string"==typeof re?re:re.source:null}function lookahead(re){return concat("(?=",re,")")}function anyNumberOfTimes(re){return concat("(?:",re,")*")}function optional(re){return concat("(?:",re,")?")}function concat(...args){return args.map(x=>source(x)).join("")}function either(...args){return"("+(function(args){var opts=args[args.length-1];return"object"==typeof opts&&opts.constructor===Object?(args.splice(args.length-1,1),opts):{}}(args).capture?"":"?:")+args.map(x=>source(x)).join("|")+")"}function countMatchGroups(re){return new RegExp(re.toString()+"|").exec("").length-1}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(regexps,{joinWith}){let numCaptures=0;return regexps.map(regex=>{var offset=numCaptures+=1;let re=source(regex),out="";for(;0<re.length;){var match=BACKREF_RE.exec(re);if(!match){out+=re;break}out+=re.substring(0,match.index),re=re.substring(match.index+match[0].length),"\\"===match[0][0]&&match[1]?out+="\\"+String(Number(match[1])+offset):(out+=match[0],"("===match[0]&&numCaptures++)}return out}).map(re=>`(${re})`).join(joinWith)}function COMMENT(begin,end,modeOptions={}){return(begin=inherit$1({scope:"comment",begin:begin,end:end,contains:[]},modeOptions)).contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0}),end=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/),begin.contains.push({begin:concat(/[ ]+/,"(",end,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),begin}var C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),MODES$1=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:"[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE:"[a-zA-Z_]\\w*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:C_NUMBER_RE,BINARY_NUMBER_RE:"\\b(0b[01]+)",RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(opts={})=>{var beginShebang=/^#![ ]*\//;return opts.binary&&(opts.begin=concat(beginShebang,/.*\b/,opts.binary,/\b.*/)),inherit$1({scope:"meta",begin:beginShebang,end:/$/,relevance:0,"on:begin":(m,resp)=>{0!==m.index&&resp.ignoreMatch()}},opts)},BACKSLASH_ESCAPE:BACKSLASH_ESCAPE,APOS_STRING_MODE:APOS_STRING_MODE,QUOTE_STRING_MODE:QUOTE_STRING_MODE,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT:COMMENT,C_LINE_COMMENT_MODE:C_LINE_COMMENT_MODE,C_BLOCK_COMMENT_MODE:C_BLOCK_COMMENT_MODE,HASH_COMMENT_MODE:HASH_COMMENT_MODE,NUMBER_MODE:{scope:"number",begin:"\\b\\d+(\\.\\d+)?",relevance:0},C_NUMBER_MODE:{scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE:{scope:"number",begin:"\\b(0b[01]+)",relevance:0},REGEXP_MODE:{begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]}]},TITLE_MODE:{scope:"title",begin:"[a-zA-Z]\\w*",relevance:0},UNDERSCORE_TITLE_MODE:{scope:"title",begin:"[a-zA-Z_]\\w*",relevance:0},METHOD_GUARD:{begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},END_SAME_AS_BEGIN:function(mode){return Object.assign(mode,{"on:begin":(m,resp)=>{resp.data._beginMatch=m[1]},"on:end":(m,resp)=>{resp.data._beginMatch!==m[1]&&resp.ignoreMatch()}})}});function skipIfHasPrecedingDot(match,response){"."===match.input[match.index-1]&&response.ignoreMatch()}function scopeClassName(mode,_parent){void 0!==mode.className&&(mode.scope=mode.className,delete mode.className)}function beginKeywords(mode,parent){parent&&mode.beginKeywords&&(mode.begin="\\b("+mode.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",mode.__beforeBegin=skipIfHasPrecedingDot,mode.keywords=mode.keywords||mode.beginKeywords,delete mode.beginKeywords,void 0===mode.relevance&&(mode.relevance=0))}function compileIllegal(mode,_parent){Array.isArray(mode.illegal)&&(mode.illegal=either(...mode.illegal))}function compileMatch(mode,_parent){if(mode.match){if(mode.begin||mode.end)throw new Error("begin & end are not supported with match");mode.begin=mode.match,delete mode.match}}function compileRelevance(mode,_parent){void 0===mode.relevance&&(mode.relevance=1)}const beforeMatchExt=(mode,parent)=>{if(mode.beforeMatch){if(mode.starts)throw new Error("beforeMatch cannot be used with starts");var originalMode=Object.assign({},mode);Object.keys(mode).forEach(key=>{delete mode[key]}),mode.keywords=originalMode.keywords,mode.begin=concat(originalMode.beforeMatch,lookahead(originalMode.begin)),mode.starts={relevance:0,contains:[Object.assign(originalMode,{endsParent:!0})]},mode.relevance=0,delete originalMode.beforeMatch}},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(rawKeywords,caseInsensitive,scopeName=DEFAULT_KEYWORD_SCOPE){const compiledKeywords=Object.create(null);return"string"==typeof rawKeywords?compileList(scopeName,rawKeywords.split(" ")):Array.isArray(rawKeywords)?compileList(scopeName,rawKeywords):Object.keys(rawKeywords).forEach(function(scopeName){Object.assign(compiledKeywords,compileKeywords(rawKeywords[scopeName],caseInsensitive,scopeName))}),compiledKeywords;function compileList(scopeName,keywordList){(keywordList=caseInsensitive?keywordList.map(x=>x.toLowerCase()):keywordList).forEach(function(keyword){keyword=keyword.split("|");compiledKeywords[keyword[0]]=[scopeName,function(keyword,providedScore){if(providedScore)return Number(providedScore);return function(keyword){return COMMON_KEYWORDS.includes(keyword.toLowerCase())}(keyword)?0:1}(keyword[0],keyword[1])]})}}const seenDeprecations={},error=message=>{console.error(message)},warn=(message,...args)=>{console.log("WARN: "+message,...args)},deprecated=(version,message)=>{seenDeprecations[version+"/"+message]||(console.log(`Deprecated as of ${version}. `+message),seenDeprecations[version+"/"+message]=!0)},MultiClassError=new Error;function remapScopeNames(mode,regexes,{key}){let offset=0;var scopeNames=mode[key],emit={},positions={};for(let i=1;i<=regexes.length;i++)positions[i+offset]=scopeNames[i],emit[i+offset]=!0,offset+=countMatchGroups(regexes[i-1]);mode[key]=positions,mode[key]._emit=emit,mode[key]._multi=!0}function MultiClass(mode){!function(mode){mode.scope&&"object"==typeof mode.scope&&null!==mode.scope&&(mode.beginScope=mode.scope,delete mode.scope)}(mode),"string"==typeof mode.beginScope&&(mode.beginScope={_wrap:mode.beginScope}),"string"==typeof mode.endScope&&(mode.endScope={_wrap:mode.endScope}),function(mode){if(Array.isArray(mode.begin)){if(mode.skip||mode.excludeBegin||mode.returnBegin)throw error("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if("object"!=typeof mode.beginScope||null===mode.beginScope)throw error("beginScope must be object"),MultiClassError;remapScopeNames(mode,mode.begin,{key:"beginScope"}),mode.begin=_rewriteBackreferences(mode.begin,{joinWith:""})}}(mode),function(mode){if(Array.isArray(mode.end)){if(mode.skip||mode.excludeEnd||mode.returnEnd)throw error("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if("object"!=typeof mode.endScope||null===mode.endScope)throw error("endScope must be object"),MultiClassError;remapScopeNames(mode,mode.end,{key:"endScope"}),mode.end=_rewriteBackreferences(mode.end,{joinWith:""})}}(mode)}function compileLanguage(language){function langRe(value,global){return new RegExp(source(value),"m"+(language.case_insensitive?"i":"")+(language.unicodeRegex?"u":"")+(global?"g":""))}class MultiRegex{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(re,opts){opts.position=this.position++,this.matchIndexes[this.matchAt]=opts,this.regexes.push([opts,re]),this.matchAt+=countMatchGroups(re)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);var terminators=this.regexes.map(el=>el[1]);this.matcherRe=langRe(_rewriteBackreferences(terminators,{joinWith:"|"}),!0),this.lastIndex=0}exec(s){this.matcherRe.lastIndex=this.lastIndex;var i,matchData,s=this.matcherRe.exec(s);return s?(i=s.findIndex((el,i)=>0<i&&void 0!==el),matchData=this.matchIndexes[i],s.splice(0,i),Object.assign(s,matchData)):null}}class ResumableMultiRegex{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(index){if(this.multiRegexes[index])return this.multiRegexes[index];const matcher=new MultiRegex;return this.rules.slice(index).forEach(([re,opts])=>matcher.addRule(re,opts)),matcher.compile(),this.multiRegexes[index]=matcher}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(re,opts){this.rules.push([re,opts]),"begin"===opts.type&&this.count++}exec(s){var m=this.getMatcher(this.regexIndex);m.lastIndex=this.lastIndex;let result=m.exec(s);return!this.resumingScanAtSamePosition()||result&&result.index===this.lastIndex||((m=this.getMatcher(0)).lastIndex=this.lastIndex+1,result=m.exec(s)),result&&(this.regexIndex+=result.position+1,this.regexIndex===this.count&&this.considerAll()),result}}if(language.compilerExtensions||(language.compilerExtensions=[]),language.contains&&language.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return language.classNameAliases=inherit$1(language.classNameAliases||{}),function compileMode(mode,parent){const cmode=mode;if(!mode.isCompiled){[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(ext=>ext(mode,parent)),language.compilerExtensions.forEach(ext=>ext(mode,parent)),mode.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(ext=>ext(mode,parent)),mode.isCompiled=!0;let keywordPattern=null;"object"==typeof mode.keywords&&mode.keywords.$pattern&&(mode.keywords=Object.assign({},mode.keywords),keywordPattern=mode.keywords.$pattern,delete mode.keywords.$pattern),keywordPattern=keywordPattern||/\w+/,mode.keywords&&(mode.keywords=compileKeywords(mode.keywords,language.case_insensitive)),cmode.keywordPatternRe=langRe(keywordPattern,!0),parent&&(mode.begin||(mode.begin=/\B|\b/),cmode.beginRe=langRe(cmode.begin),mode.end||mode.endsWithParent||(mode.end=/\B|\b/),mode.end&&(cmode.endRe=langRe(cmode.end)),cmode.terminatorEnd=source(cmode.end)||"",mode.endsWithParent&&parent.terminatorEnd&&(cmode.terminatorEnd+=(mode.end?"|":"")+parent.terminatorEnd)),mode.illegal&&(cmode.illegalRe=langRe(mode.illegal)),mode.contains||(mode.contains=[]),mode.contains=[].concat(...mode.contains.map(function(c){return function(mode){return mode.variants&&!mode.cachedVariants&&(mode.cachedVariants=mode.variants.map(function(variant){return inherit$1(mode,{variants:null},variant)})),mode.cachedVariants||(function dependencyOnParent(mode){return!!mode&&(mode.endsWithParent||dependencyOnParent(mode.starts))}(mode)?inherit$1(mode,{starts:mode.starts?inherit$1(mode.starts):null}):Object.isFrozen(mode)?inherit$1(mode):mode)}("self"===c?mode:c)})),mode.contains.forEach(function(c){compileMode(c,cmode)}),mode.starts&&compileMode(mode.starts,parent),cmode.matcher=function(mode){const mm=new ResumableMultiRegex;return mode.contains.forEach(term=>mm.addRule(term.begin,{rule:term,type:"begin"})),mode.terminatorEnd&&mm.addRule(mode.terminatorEnd,{type:"end"}),mode.illegal&&mm.addRule(mode.illegal,{type:"illegal"}),mm}(cmode)}return cmode}(language)}class HTMLInjectionError extends Error{constructor(reason,html){super(reason),this.name="HTMLInjectionError",this.html=html}}const escape=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch");APOS_STRING_MODE=function(hljs){const languages=Object.create(null),aliases=Object.create(null),plugins=[];let SAFE_MODE=!0;const LANGUAGE_NOT_FOUND="Could not find the language '{}', did you forget to load/include a language module?",PLAINTEXT_LANGUAGE={disableAutodetect:!0,name:"Plain text",contains:[]};let options={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function shouldNotHighlight(languageName){return options.noHighlightRe.test(languageName)}function highlight(codeOrLanguageName,optionsOrCode,ignoreIllegals){let code="",languageName="";"object"==typeof optionsOrCode?(code=codeOrLanguageName,ignoreIllegals=optionsOrCode.ignoreIllegals,languageName=optionsOrCode.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),languageName=codeOrLanguageName,code=optionsOrCode),void 0===ignoreIllegals&&(ignoreIllegals=!0);codeOrLanguageName={code:code,language:languageName},fire("before:highlight",codeOrLanguageName),optionsOrCode=codeOrLanguageName.result||_highlight(codeOrLanguageName.language,codeOrLanguageName.code,ignoreIllegals);return optionsOrCode.code=codeOrLanguageName.code,fire("after:highlight",optionsOrCode),optionsOrCode}function _highlight(languageName,codeToHighlight,ignoreIllegals,continuation){const keywordHits=Object.create(null);function processKeywords(){if(top.keywords){let lastIndex=0,match=(top.keywordPatternRe.lastIndex=0,top.keywordPatternRe.exec(modeBuffer)),buf="";for(;match;){buf+=modeBuffer.substring(lastIndex,match.index);var keywordRelevance,word=language.case_insensitive?match[0].toLowerCase():match[0],data=top.keywords[word];!data||([data,keywordRelevance]=data,emitter.addText(buf),buf="",keywordHits[word]=(keywordHits[word]||0)+1,keywordHits[word]<=7&&(relevance+=keywordRelevance),data.startsWith("_"))?buf+=match[0]:(word=language.classNameAliases[data]||data,emitter.addKeyword(match[0],word)),lastIndex=top.keywordPatternRe.lastIndex,match=top.keywordPatternRe.exec(modeBuffer)}buf+=modeBuffer.substring(lastIndex),emitter.addText(buf)}else emitter.addText(modeBuffer)}function processBuffer(){(null!=top.subLanguage?function(){if(""!==modeBuffer){let result=null;if("string"==typeof top.subLanguage){if(!languages[top.subLanguage])return emitter.addText(modeBuffer);result=_highlight(top.subLanguage,modeBuffer,!0,continuations[top.subLanguage]),continuations[top.subLanguage]=result._top}else result=highlightAuto(modeBuffer,top.subLanguage.length?top.subLanguage:null);0<top.relevance&&(relevance+=result.relevance),emitter.addSublanguage(result._emitter,result.language)}}:processKeywords)(),modeBuffer=""}function emitMultiClass(scope,match){let i=1;for(var klass,text,max=match.length-1;i<=max;)scope._emit[i]&&(klass=language.classNameAliases[scope[i]]||scope[i],text=match[i],klass?emitter.addKeyword(text,klass):(modeBuffer=text,processKeywords(),modeBuffer="")),i++}function startNewMode(mode,match){mode.scope&&"string"==typeof mode.scope&&emitter.openNode(language.classNameAliases[mode.scope]||mode.scope),mode.beginScope&&(mode.beginScope._wrap?(emitter.addKeyword(modeBuffer,language.classNameAliases[mode.beginScope._wrap]||mode.beginScope._wrap),modeBuffer=""):mode.beginScope._multi&&(emitMultiClass(mode.beginScope,match),modeBuffer="")),top=Object.create(mode,{parent:{value:top}})}function doBeginMatch(match){var lexeme=match[0],newMode=match.rule,resp=new Response(newMode);for(const cb of[newMode.__beforeBegin,newMode["on:begin"]])if(cb&&(cb(match,resp),resp.isMatchIgnored))return function(lexeme){return 0===top.matcher.regexIndex?(modeBuffer+=lexeme[0],1):(resumeScanAtSamePosition=!0,0)}(lexeme);return newMode.skip?modeBuffer+=lexeme:(newMode.excludeBegin&&(modeBuffer+=lexeme),processBuffer(),newMode.returnBegin||newMode.excludeBegin||(modeBuffer=lexeme)),startNewMode(newMode,match),newMode.returnBegin?0:lexeme.length}function doEndMatch(match){var lexeme=match[0],matchPlusRemainder=codeToHighlight.substring(match.index),endMode=function endOfMode(mode,match,matchPlusRemainder){re=mode.endRe,lexeme=matchPlusRemainder;let matched=(re=re&&re.exec(lexeme))&&0===re.index;var re,lexeme;if(matched&&(mode["on:end"]&&(lexeme=new Response(mode),mode["on:end"](match,lexeme),lexeme.isMatchIgnored&&(matched=!1)),matched)){for(;mode.endsParent&&mode.parent;)mode=mode.parent;return mode}if(mode.endsWithParent)return endOfMode(mode.parent,match,matchPlusRemainder)}(top,match,matchPlusRemainder);if(!endMode)return NO_MATCH;matchPlusRemainder=top;for(top.endScope&&top.endScope._wrap?(processBuffer(),emitter.addKeyword(lexeme,top.endScope._wrap)):top.endScope&&top.endScope._multi?(processBuffer(),emitMultiClass(top.endScope,match)):matchPlusRemainder.skip?modeBuffer+=lexeme:(matchPlusRemainder.returnEnd||matchPlusRemainder.excludeEnd||(modeBuffer+=lexeme),processBuffer(),matchPlusRemainder.excludeEnd&&(modeBuffer=lexeme));top.scope&&emitter.closeNode(),top.skip||top.subLanguage||(relevance+=top.relevance),(top=top.parent)!==endMode.parent;);return endMode.starts&&startNewMode(endMode.starts,match),matchPlusRemainder.returnEnd?0:lexeme.length}let lastMatch={};function processLexeme(textBeforeMatch,match){var lexeme=match&&match[0];if(modeBuffer+=textBeforeMatch,null==lexeme)return processBuffer(),0;if("begin"===lastMatch.type&&"end"===match.type&&lastMatch.index===match.index&&""===lexeme){if(modeBuffer+=codeToHighlight.slice(match.index,match.index+1),SAFE_MODE)return 1;throw(textBeforeMatch=new Error(`0 width match regex (${languageName})`)).languageName=languageName,textBeforeMatch.badRule=lastMatch.rule,textBeforeMatch}if("begin"===(lastMatch=match).type)return doBeginMatch(match);if("illegal"===match.type&&!ignoreIllegals){const err=new Error('Illegal lexeme "'+lexeme+'" for mode "'+(top.scope||"<unnamed>")+'"');throw err.mode=top,err}if("end"===match.type){textBeforeMatch=doEndMatch(match);if(textBeforeMatch!==NO_MATCH)return textBeforeMatch}if("illegal"===match.type&&""===lexeme)return 1;if(1e5<iterations&&iterations>3*match.index){const err=new Error("potential infinite loop, way more iterations than matches");throw err}return modeBuffer+=lexeme,lexeme.length}const language=getLanguage(languageName);if(!language)throw error(LANGUAGE_NOT_FOUND.replace("{}",languageName)),new Error('Unknown language: "'+languageName+'"');var md=compileLanguage(language);let result="",top=continuation||md;const continuations={},emitter=new options.__emitter(options);var list=[];for(let current=top;current!==language;current=current.parent)current.scope&&list.unshift(current.scope);list.forEach(item=>emitter.openNode(item));let modeBuffer="",relevance=0,index=0,iterations=0,resumeScanAtSamePosition=!1;try{for(top.matcher.considerAll();;){iterations++,resumeScanAtSamePosition?resumeScanAtSamePosition=!1:top.matcher.considerAll(),top.matcher.lastIndex=index;var match=top.matcher.exec(codeToHighlight);if(!match)break;var processedCount=processLexeme(codeToHighlight.substring(index,match.index),match);index=match.index+processedCount}return processLexeme(codeToHighlight.substring(index)),emitter.closeAllNodes(),emitter.finalize(),result=emitter.toHTML(),{language:languageName,value:result,relevance:relevance,illegal:!1,_emitter:emitter,_top:top}}catch(err){if(err.message&&err.message.includes("Illegal"))return{language:languageName,value:escape(codeToHighlight),illegal:!0,relevance:0,_illegalBy:{message:err.message,index:index,context:codeToHighlight.slice(index-100,index+100),mode:err.mode,resultSoFar:result},_emitter:emitter};if(SAFE_MODE)return{language:languageName,value:escape(codeToHighlight),illegal:!1,relevance:0,errorRaised:err,_emitter:emitter,_top:top};throw err}}function highlightAuto(code,languageSubset){languageSubset=languageSubset||options.languages||Object.keys(languages);var plaintext=function(code){var result={value:escape(code),illegal:!1,relevance:0,_top:PLAINTEXT_LANGUAGE,_emitter:new options.__emitter(options)};return result._emitter.addText(code),result}(code),languageSubset=languageSubset.filter(getLanguage).filter(autoDetection).map(name=>_highlight(name,code,!1)),plaintext=(languageSubset.unshift(plaintext),languageSubset.sort((a,b)=>{if(a.relevance!==b.relevance)return b.relevance-a.relevance;if(a.language&&b.language){if(getLanguage(a.language).supersetOf===b.language)return 1;if(getLanguage(b.language).supersetOf===a.language)return-1}return 0})),[languageSubset,plaintext]=plaintext;return languageSubset.secondBest=plaintext,languageSubset}function highlightElement(element){var language=function(block){var language,classes=block.className+" ",match=(classes+=block.parentNode?block.parentNode.className:"",options.languageDetectRe.exec(classes));return match?((language=getLanguage(match[1]))||(warn(LANGUAGE_NOT_FOUND.replace("{}",match[1])),warn("Falling back to no-highlight mode for this block.",block)),language?match[1]:"no-highlight"):classes.split(/\s+/).find(_class=>shouldNotHighlight(_class)||getLanguage(_class))}(element);if(!shouldNotHighlight(language)){if(fire("before:highlightElement",{el:element,language:language}),0<element.children.length)if(options.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(element)),options.throwUnescapedHTML)throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",element.innerHTML);var text=element.textContent,result=language?highlight(text,{language:language,ignoreIllegals:!0}):highlightAuto(text);element.innerHTML=result.value,!function(element,currentLang,resultLang){currentLang=currentLang&&aliases[currentLang]||resultLang,element.classList.add("hljs"),element.classList.add("language-"+currentLang)}(element,language,result.language),element.result={language:result.language,re:result.relevance,relevance:result.relevance},result.secondBest&&(element.secondBest={language:result.secondBest.language,relevance:result.secondBest.relevance}),fire("after:highlightElement",{el:element,result:result,text:text})}}let wantsHighlight=!1;function highlightAll(){"loading"===document.readyState?wantsHighlight=!0:document.querySelectorAll(options.cssSelector).forEach(highlightElement)}function getLanguage(name){return name=(name||"").toLowerCase(),languages[name]||languages[aliases[name]]}function registerAliases(aliasList,{languageName}){(aliasList="string"==typeof aliasList?[aliasList]:aliasList).forEach(alias=>{aliases[alias.toLowerCase()]=languageName})}function autoDetection(name){name=getLanguage(name);return name&&!name.disableAutodetect}function fire(event,args){const cb=event;plugins.forEach(function(plugin){plugin[cb]&&plugin[cb](args)})}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",function(){wantsHighlight&&highlightAll()},!1),Object.assign(hljs,{highlight:highlight,highlightAuto:highlightAuto,highlightAll:highlightAll,highlightElement:highlightElement,highlightBlock:function(el){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),highlightElement(el)},configure:function(userOptions){options=inherit(options,userOptions)},initHighlighting:()=>{highlightAll(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){highlightAll(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(languageName,languageDefinition){let lang=null;try{lang=languageDefinition(hljs)}catch(error$1){if(error("Language definition for '{}' could not be registered.".replace("{}",languageName)),!SAFE_MODE)throw error$1;error(error$1),lang=PLAINTEXT_LANGUAGE}lang.name||(lang.name=languageName),(languages[languageName]=lang).rawDefinition=languageDefinition.bind(null,hljs),lang.aliases&&registerAliases(lang.aliases,{languageName:languageName})},unregisterLanguage:function(languageName){delete languages[languageName];for(const alias of Object.keys(aliases))aliases[alias]===languageName&&delete aliases[alias]},listLanguages:function(){return Object.keys(languages)},getLanguage:getLanguage,registerAliases:registerAliases,autoDetection:autoDetection,inherit:inherit,addPlugin:function(plugin){!function(plugin){plugin["before:highlightBlock"]&&!plugin["before:highlightElement"]&&(plugin["before:highlightElement"]=data=>{plugin["before:highlightBlock"](Object.assign({block:data.el},data))}),plugin["after:highlightBlock"]&&!plugin["after:highlightElement"]&&(plugin["after:highlightElement"]=data=>{plugin["after:highlightBlock"](Object.assign({block:data.el},data))})}(plugin),plugins.push(plugin)}}),hljs.debugMode=function(){SAFE_MODE=!1},hljs.safeMode=function(){SAFE_MODE=!0},hljs.versionString="11.6.0",hljs.regex={concat:concat,lookahead:lookahead,either:either,optional:optional,anyNumberOfTimes:anyNumberOfTimes};for(const key in MODES$1)"object"==typeof MODES$1[key]&&deepFreezeEs6.exports(MODES$1[key]);return Object.assign(hljs,MODES$1),hljs}({});const MODES=hljs=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:hljs.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:hljs.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),PSEUDO_SELECTORS=PSEUDO_CLASSES.concat(PSEUDO_ELEMENTS);var QUOTE_STRING_MODE="\\.([0-9](_*[0-9])*)",C_LINE_COMMENT_MODE="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC={className:"number",variants:[{begin:`(\\b([0-9](_*[0-9])*)((${QUOTE_STRING_MODE})|\\.)?|(${QUOTE_STRING_MODE}))`+"[eE][+-]?([0-9](_*[0-9])*)[fFdD]?\\b"},{begin:`\\b([0-9](_*[0-9])*)((${QUOTE_STRING_MODE})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${QUOTE_STRING_MODE})[fFdD]?\\b`},{begin:"\\b([0-9](_*[0-9])*)[fFdD]\\b"},{begin:`\\b0[xX]((${C_LINE_COMMENT_MODE})\\.?|(${C_LINE_COMMENT_MODE})?\\.(${C_LINE_COMMENT_MODE}))`+"[pP][+-]?([0-9](_*[0-9])*)[fFdD]?\\b"},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${C_LINE_COMMENT_MODE})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(hljs){const regex=hljs.regex;var IDENT_RE$1=IDENT_RE;const FRAGMENT_begin="<>",FRAGMENT_end="</>";const XML_TAG_begin=/<[A-Za-z0-9\\._:-]+/,XML_TAG_end=/\/[A-Za-z0-9\\._:-]+>|\/>/,XML_TAG_isTrulyOpeningTag=(match,response)=>{var afterMatchIndex=match[0].length+match.index,nextChar=match.input[afterMatchIndex];"<"!==nextChar&&","!==nextChar&&(">"!==nextChar||((match,{after})=>{var tag="</"+match[0].slice(1);return-1!==match.input.indexOf(tag,after)})(match,{after:afterMatchIndex})||response.ignoreMatch(),!(nextChar=match.input.substring(afterMatchIndex).match(/^\s+extends\s+/))||0!==nextChar.index)||response.ignoreMatch()};var KEYWORDS$1={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},frac="\\.([0-9](_?[0-9])*)",frac={className:"number",variants:[{begin:`(\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)((${frac})|\\.)?|(${frac}))`+"[eE][+-]?([0-9](_?[0-9])*)\\b"},{begin:`\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)\\b((${frac})\\b|\\.)?|(${frac})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},SUBST={className:"subst",begin:"\\$\\{",end:"\\}",keywords:KEYWORDS$1,contains:[]},HTML_TEMPLATE={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"xml"}},CSS_TEMPLATE={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"css"}},TEMPLATE_STRING={className:"string",begin:"`",end:"`",contains:[hljs.BACKSLASH_ESCAPE,SUBST]},COMMENT={className:"comment",variants:[hljs.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:IDENT_RE$1+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),hljs.C_BLOCK_COMMENT_MODE,hljs.C_LINE_COMMENT_MODE]},SUBST_INTERNALS=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,TEMPLATE_STRING,frac],SUBST_INTERNALS=(SUBST.contains=SUBST_INTERNALS.concat({begin:/\{/,end:/\}/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_INTERNALS)}),[].concat(COMMENT,SUBST.contains)),SUBST=SUBST_INTERNALS.concat([{begin:/\(/,end:/\)/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_INTERNALS)}]),SUBST_INTERNALS={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:SUBST},CLASS_OR_EXTENDS={variants:[{match:[/class/,/\s+/,IDENT_RE$1,/\s+/,/extends/,/\s+/,regex.concat(IDENT_RE$1,"(",regex.concat(/\./,IDENT_RE$1),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,IDENT_RE$1],scope:{1:"keyword",3:"title.class"}}]},CLASS_REFERENCE={relevance:0,match:regex.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},FUNCTION_DEFINITION={variants:[{match:[/function/,/\s+/,IDENT_RE$1,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[SUBST_INTERNALS],illegal:/%/};var list={match:regex.concat(/\b/,(list=[...BUILT_IN_GLOBALS,"super"],regex.concat("(?!",list.join("|"),")")),IDENT_RE$1,regex.lookahead(/\(/)),className:"title.function",relevance:0},PROPERTY_ACCESS={begin:regex.concat(/\./,regex.lookahead(regex.concat(IDENT_RE$1,/(?![0-9A-Za-z$_(])/))),end:IDENT_RE$1,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},GETTER_OR_SETTER={match:[/get|set/,/\s+/,IDENT_RE$1,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},SUBST_INTERNALS]},FUNC_LEAD_IN_RE="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+hljs.UNDERSCORE_IDENT_RE+")\\s*=>",FUNCTION_VARIABLE={match:[/const|var|let/,/\s+/,IDENT_RE$1,/\s*/,/=\s*/,/(async\s*)?/,regex.lookahead(FUNC_LEAD_IN_RE)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[SUBST_INTERNALS]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:KEYWORDS$1,exports:{PARAMS_CONTAINS:SUBST,CLASS_REFERENCE:CLASS_REFERENCE},illegal:/#(?![$_A-z])/,contains:[hljs.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,TEMPLATE_STRING,COMMENT,frac,CLASS_REFERENCE,{className:"attr",begin:IDENT_RE$1+regex.lookahead(":"),relevance:0},FUNCTION_VARIABLE,{begin:"("+hljs.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[COMMENT,hljs.REGEXP_MODE,{className:"function",begin:FUNC_LEAD_IN_RE,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:hljs.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:SUBST}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:FRAGMENT_begin,end:FRAGMENT_end},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:XML_TAG_begin,"on:begin":XML_TAG_isTrulyOpeningTag,end:XML_TAG_end}],subLanguage:"xml",contains:[{begin:XML_TAG_begin,end:XML_TAG_end,skip:!0,contains:["self"]}]}]},FUNCTION_DEFINITION,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+hljs.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[SUBST_INTERNALS,hljs.inherit(hljs.TITLE_MODE,{begin:IDENT_RE$1,className:"title.function"})]},{match:/\.\.\./,relevance:0},PROPERTY_ACCESS,{match:"\\$"+IDENT_RE$1,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[SUBST_INTERNALS]},list,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},CLASS_OR_EXTENDS,GETTER_OR_SETTER,{match:/\$[(.]/}]}}const keywordWrapper=keyword=>concat(/\b/,keyword,/\w$/.test(keyword)?/\b/:/\B/),dotKeywords=["Protocol","Type"].map(keywordWrapper),optionalDotKeywords=["init","self"].map(keywordWrapper),keywordTypes=["Any","Self"],keywords=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","break","case","catch","class","continue","convenience","default","defer","deinit","didSet","distributed","do","dynamic","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],literals=["false","nil","true"],precedencegroupKeywords=["assignment","associativity","higherThan","left","lowerThan","none","right"],numberSignKeywords=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warn_unqualified_access","#warning"],builtIns$1=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"];C_BLOCK_COMMENT_MODE=either(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/);const operatorCharacter=either(C_BLOCK_COMMENT_MODE,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),operator=concat(C_BLOCK_COMMENT_MODE,operatorCharacter,"*");HASH_COMMENT_MODE=either(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/);const identifierCharacter=either(HASH_COMMENT_MODE,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),identifier=concat(HASH_COMMENT_MODE,identifierCharacter,"*"),typeIdentifier=concat(/[A-Z]/,identifierCharacter,"*"),keywordAttributes=["autoclosure",concat(/convention\(/,either("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",concat(/objc\(/,identifier,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","testable","UIApplicationMain","unknown","usableFromInline"],availabilityKeywords=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];var builtIns=Object.freeze({__proto__:null,grmr_bash:function(hljs){var regex=hljs.regex,VAR={},BRACED_VAR={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[VAR]}]},regex=(Object.assign(VAR,{className:"variable",variants:[{begin:regex.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},BRACED_VAR]}),{className:"subst",begin:/\$\(/,end:/\)/,contains:[hljs.BACKSLASH_ESCAPE]}),BRACED_VAR={begin:/<<-?\s*(?=\w+)/,starts:{contains:[hljs.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},QUOTE_STRING={className:"string",begin:/"/,end:/"/,contains:[hljs.BACKSLASH_ESCAPE,VAR,regex]},regex=(regex.contains.push(QUOTE_STRING),{begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},hljs.NUMBER_MODE,VAR]}),KNOWN_SHEBANG=hljs.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),FUNCTION={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[hljs.inherit(hljs.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[KNOWN_SHEBANG,hljs.SHEBANG(),FUNCTION,regex,hljs.HASH_COMMENT_MODE,BRACED_VAR,{match:/(\/[a-z._-]+)+/},QUOTE_STRING,{className:"",begin:/\\"/},{className:"string",begin:/'/,end:/'/},VAR]}},grmr_c:function(hljs){var regex=hljs.regex,C_LINE_COMMENT_MODE=hljs.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),FUNCTION_TYPE_RE="(decltype\\(auto\\)|"+regex.optional("[a-zA-Z_]\\w*::")+"[a-zA-Z_]\\w*"+regex.optional("<[^<>]+>")+")",TYPES={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},STRINGS={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[hljs.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},hljs.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},NUMBERS={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},PREPROCESSOR={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},hljs.inherit(STRINGS,{className:"string"}),{className:"string",begin:/<.*?>/},C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},TITLE_MODE={className:"title",begin:regex.optional("[a-zA-Z_]\\w*::")+hljs.IDENT_RE,relevance:0},regex=regex.optional("[a-zA-Z_]\\w*::")+hljs.IDENT_RE+"\\s*\\(",KEYWORDS={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal128","const","static","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},EXPRESSION_CONTAINS=[PREPROCESSOR,TYPES,C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,NUMBERS,STRINGS],EXPRESSION_CONTEXT={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:KEYWORDS,contains:EXPRESSION_CONTAINS.concat([{begin:/\(/,end:/\)/,keywords:KEYWORDS,contains:EXPRESSION_CONTAINS.concat(["self"]),relevance:0}]),relevance:0},FUNCTION_TYPE_RE={begin:"("+FUNCTION_TYPE_RE+"[\\*&\\s]+)+"+regex,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:KEYWORDS,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:"decltype\\(auto\\)",keywords:KEYWORDS,relevance:0},{begin:regex,returnBegin:!0,contains:[hljs.inherit(TITLE_MODE,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:KEYWORDS,relevance:0,contains:[C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,STRINGS,NUMBERS,TYPES,{begin:/\(/,end:/\)/,keywords:KEYWORDS,relevance:0,contains:["self",C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,STRINGS,NUMBERS,TYPES]}]},TYPES,C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,PREPROCESSOR]};return{name:"C",aliases:["h"],keywords:KEYWORDS,disableAutodetect:!0,illegal:"</",contains:[].concat(EXPRESSION_CONTEXT,FUNCTION_TYPE_RE,EXPRESSION_CONTAINS,[PREPROCESSOR,{begin:hljs.IDENT_RE+"::",keywords:KEYWORDS},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},hljs.TITLE_MODE]}]),exports:{preprocessor:PREPROCESSOR,strings:STRINGS,keywords:KEYWORDS}}},grmr_cpp:function(hljs){var regex=hljs.regex,C_LINE_COMMENT_MODE=hljs.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),FUNCTION_TYPE_RE="(?!struct)(decltype\\(auto\\)|"+regex.optional("[a-zA-Z_]\\w*::")+"[a-zA-Z_]\\w*"+regex.optional("<[^<>]+>")+")",CPP_PRIMITIVE_TYPES={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},STRINGS={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[hljs.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},hljs.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},NUMBERS={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},PREPROCESSOR={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},hljs.inherit(STRINGS,{className:"string"}),{className:"string",begin:/<.*?>/},C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},TITLE_MODE={className:"title",begin:regex.optional("[a-zA-Z_]\\w*::")+hljs.IDENT_RE,relevance:0},FUNCTION_TITLE=regex.optional("[a-zA-Z_]\\w*::")+hljs.IDENT_RE+"\\s*\\(",CPP_KEYWORDS={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},EXPRESSION_CONTAINS=[regex={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:regex.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,hljs.IDENT_RE,regex.lookahead(/(<[^<>]+>|)\s*\(/))},PREPROCESSOR,CPP_PRIMITIVE_TYPES,C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,NUMBERS,STRINGS],EXPRESSION_CONTEXT={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:CPP_KEYWORDS,contains:EXPRESSION_CONTAINS.concat([{begin:/\(/,end:/\)/,keywords:CPP_KEYWORDS,contains:EXPRESSION_CONTAINS.concat(["self"]),relevance:0}]),relevance:0},FUNCTION_TYPE_RE={className:"function",begin:"("+FUNCTION_TYPE_RE+"[\\*&\\s]+)+"+FUNCTION_TITLE,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:CPP_KEYWORDS,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:"decltype\\(auto\\)",keywords:CPP_KEYWORDS,relevance:0},{begin:FUNCTION_TITLE,returnBegin:!0,contains:[TITLE_MODE],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[STRINGS,NUMBERS]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:CPP_KEYWORDS,relevance:0,contains:[C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,STRINGS,NUMBERS,CPP_PRIMITIVE_TYPES,{begin:/\(/,end:/\)/,keywords:CPP_KEYWORDS,relevance:0,contains:["self",C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,STRINGS,NUMBERS,CPP_PRIMITIVE_TYPES]}]},CPP_PRIMITIVE_TYPES,C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,PREPROCESSOR]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:CPP_KEYWORDS,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(EXPRESSION_CONTEXT,FUNCTION_TYPE_RE,regex,EXPRESSION_CONTAINS,[PREPROCESSOR,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:CPP_KEYWORDS,contains:["self",CPP_PRIMITIVE_TYPES]},{begin:hljs.IDENT_RE+"::",keywords:CPP_KEYWORDS},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}},grmr_csharp:function(hljs){var KEYWORDS={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},TITLE_MODE=hljs.inherit(hljs.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),NUMBERS={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},VERBATIM_STRING={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},VERBATIM_STRING_NO_LF=hljs.inherit(VERBATIM_STRING,{illegal:/\n/}),SUBST={className:"subst",begin:/\{/,end:/\}/,keywords:KEYWORDS},SUBST_NO_LF=hljs.inherit(SUBST,{illegal:/\n/}),INTERPOLATED_STRING={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},hljs.BACKSLASH_ESCAPE,SUBST_NO_LF]},INTERPOLATED_VERBATIM_STRING={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},SUBST]},INTERPOLATED_VERBATIM_STRING_NO_LF=hljs.inherit(INTERPOLATED_VERBATIM_STRING,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},SUBST_NO_LF]}),SUBST=(SUBST.contains=[INTERPOLATED_VERBATIM_STRING,INTERPOLATED_STRING,VERBATIM_STRING,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,NUMBERS,hljs.C_BLOCK_COMMENT_MODE],SUBST_NO_LF.contains=[INTERPOLATED_VERBATIM_STRING_NO_LF,INTERPOLATED_STRING,VERBATIM_STRING_NO_LF,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,NUMBERS,hljs.inherit(hljs.C_BLOCK_COMMENT_MODE,{illegal:/\n/})],{variants:[INTERPOLATED_VERBATIM_STRING,INTERPOLATED_STRING,VERBATIM_STRING,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE]}),SUBST_NO_LF={begin:"<",end:">",contains:[{beginKeywords:"in out"},TITLE_MODE]},INTERPOLATED_VERBATIM_STRING_NO_LF=hljs.IDENT_RE+"(<"+hljs.IDENT_RE+"(\\s*,\\s*"+hljs.IDENT_RE+")*>)?(\\[\\])?",VERBATIM_STRING_NO_LF={begin:"@"+hljs.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:KEYWORDS,illegal:/::/,contains:[hljs.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]}),hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},SUBST,NUMBERS,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},TITLE_MODE,SUBST_NO_LF,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[TITLE_MODE,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[TITLE_MODE,SUBST_NO_LF,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+INTERPOLATED_VERBATIM_STRING_NO_LF+"\\s+)+"+hljs.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:KEYWORDS,contains:[{beginKeywords:["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"].join(" "),relevance:0},{begin:hljs.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[hljs.TITLE_MODE,SUBST_NO_LF],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS,relevance:0,contains:[SUBST,NUMBERS,hljs.C_BLOCK_COMMENT_MODE]},hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},VERBATIM_STRING_NO_LF]}},grmr_css:function(hljs){var regex=hljs.regex,modes=MODES(hljs),hljs=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[modes.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},modes.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},modes.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS.join("|")+")"}]},modes.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[modes.BLOCK_COMMENT,modes.HEXCOLOR,modes.IMPORTANT,modes.CSS_NUMBER_MODE,...hljs,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...hljs,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},modes.FUNCTION_DISPATCH]},{begin:regex.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:MEDIA_FEATURES.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...hljs,modes.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS.join("|")+")\\b"}]}},grmr_diff:function(hljs){return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:(hljs=hljs.regex).either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:hljs.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}},grmr_go:function(hljs){var KEYWORDS={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:KEYWORDS,illegal:"</",contains:[hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,{className:"string",variants:[hljs.QUOTE_STRING_MODE,hljs.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:hljs.C_NUMBER_RE+"[i]",relevance:1},hljs.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[hljs.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:KEYWORDS,illegal:/["']/}]}]}},grmr_graphql:function(hljs){var regex=hljs.regex;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[hljs.HASH_COMMENT_MODE,hljs.QUOTE_STRING_MODE,hljs.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:regex.concat(/[_A-Za-z][_0-9A-Za-z]*/,regex.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}},grmr_ini:function(hljs){var regex=hljs.regex,NUMBERS={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:hljs.NUMBER_RE}]},COMMENTS=hljs.COMMENT(),VARIABLES=(COMMENTS.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}],{className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]}),LITERALS={className:"literal",begin:/\bon|off|true|false|yes|no\b/},hljs={className:"string",contains:[hljs.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},ARRAY={begin:/\[/,end:/\]/,contains:[COMMENTS,LITERALS,VARIABLES,hljs,NUMBERS,"self"],relevance:0},ANY_KEY=regex.either(/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/);return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[COMMENTS,{className:"section",begin:/\[+/,end:/\]+/},{begin:regex.concat(ANY_KEY,"(\\s*\\.\\s*",ANY_KEY,")*",regex.lookahead(/\s*=\s*[^#\s]/)),className:"attr",starts:{end:/$/,contains:[COMMENTS,ARRAY,LITERALS,VARIABLES,hljs,NUMBERS]}}]}},grmr_java:function(hljs){var regex=hljs.regex,JAVA_IDENT_RE="[-a-zA-Z_$][-a-zA-Z_$0-9]*",GENERIC_IDENT_RE=JAVA_IDENT_RE+function recurRegex(re,substitution,depth){return-1===depth?"":re.replace(substitution,_=>recurRegex(re,substitution,depth-1))}("(?:<"+JAVA_IDENT_RE+"~~~(?:\\s*,\\s*"+JAVA_IDENT_RE+"~~~)*>)?",/~~~/g,2),KEYWORDS={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},ANNOTATION={className:"meta",begin:"@"+JAVA_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},PARAMS={className:"params",begin:/\(/,end:/\)/,keywords:KEYWORDS,relevance:0,contains:[hljs.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:KEYWORDS,illegal:/<\/|#/,contains:[hljs.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[hljs.BACKSLASH_ESCAPE]},hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,JAVA_IDENT_RE],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[regex.concat(/(?!else)/,JAVA_IDENT_RE),/\s+/,JAVA_IDENT_RE,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,JAVA_IDENT_RE],className:{1:"keyword",3:"title.class"},contains:[PARAMS,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+GENERIC_IDENT_RE+"\\s+)",hljs.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:KEYWORDS,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:KEYWORDS,relevance:0,contains:[ANNOTATION,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,NUMERIC,hljs.C_BLOCK_COMMENT_MODE]},hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},NUMERIC,ANNOTATION]}},grmr_javascript:javascript,grmr_json:function(hljs){var LITERALS=["true","false","null"],LITERALS_MODE={scope:"literal",beginKeywords:LITERALS.join(" ")};return{name:"JSON",keywords:{literal:LITERALS},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},hljs.QUOTE_STRING_MODE,LITERALS_MODE,hljs.C_NUMBER_MODE,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE],illegal:"\\S"}},grmr_kotlin:function(hljs){var KEYWORDS={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},LABEL={className:"symbol",begin:hljs.UNDERSCORE_IDENT_RE+"@"},SUBST={className:"subst",begin:/\$\{/,end:/\}/,contains:[hljs.C_NUMBER_MODE]},VARIABLE={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[VARIABLE={className:"variable",begin:"\\$"+hljs.UNDERSCORE_IDENT_RE},SUBST]},{begin:"'",end:"'",illegal:/\n/,contains:[hljs.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[hljs.BACKSLASH_ESCAPE,VARIABLE,SUBST]}]},SUBST=(SUBST.contains.push(VARIABLE),{className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+hljs.UNDERSCORE_IDENT_RE+")?"}),ANNOTATION={className:"meta",begin:"@"+hljs.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[hljs.inherit(VARIABLE,{className:"string"}),"self"]}]},KOTLIN_NUMBER_MODE=NUMERIC,KOTLIN_NESTED_COMMENT=hljs.COMMENT("/\\*","\\*/",{contains:[hljs.C_BLOCK_COMMENT_MODE]}),KOTLIN_PAREN_TYPE={variants:[{className:"type",begin:hljs.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},KOTLIN_PAREN_TYPE2=KOTLIN_PAREN_TYPE;return KOTLIN_PAREN_TYPE2.variants[1].contains=[KOTLIN_PAREN_TYPE],KOTLIN_PAREN_TYPE.variants[1].contains=[KOTLIN_PAREN_TYPE2],{name:"Kotlin",aliases:["kt","kts"],keywords:KEYWORDS,contains:[hljs.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),hljs.C_LINE_COMMENT_MODE,KOTLIN_NESTED_COMMENT,{className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},LABEL,SUBST,ANNOTATION,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:KEYWORDS,relevance:5,contains:[{begin:hljs.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[hljs.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:KEYWORDS,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[KOTLIN_PAREN_TYPE,hljs.C_LINE_COMMENT_MODE,KOTLIN_NESTED_COMMENT],relevance:0},hljs.C_LINE_COMMENT_MODE,KOTLIN_NESTED_COMMENT,SUBST,ANNOTATION,VARIABLE,hljs.C_NUMBER_MODE]},KOTLIN_NESTED_COMMENT]},{begin:[/class|interface|trait/,/\s+/,hljs.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},hljs.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},SUBST,ANNOTATION]},VARIABLE,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},KOTLIN_NUMBER_MODE]}},grmr_less:function(hljs){function STRING_MODE(c){return{className:"string",begin:"~?"+c+".*?"+c}}function IDENT_MODE(name,begin,relevance){return{className:name,begin:begin,relevance:relevance}}var modes=MODES(hljs),PSEUDO_SELECTORS$1=PSEUDO_SELECTORS,INTERP_IDENT_RE="([\\w-]+|@\\{[\\w-]+\\})",RULES=[],VALUE_MODES=[],AT_KEYWORDS={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:MEDIA_FEATURES.join(" ")},VALUE_WITH_RULESETS=(VALUE_MODES.push(hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,STRING_MODE("'"),STRING_MODE('"'),modes.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},modes.HEXCOLOR,{begin:"\\(",end:"\\)",contains:VALUE_MODES,keywords:AT_KEYWORDS,relevance:0},IDENT_MODE("variable","@@?[\\w-]+",10),IDENT_MODE("variable","@\\{[\\w-]+\\}"),IDENT_MODE("built_in","~?`[^`]*?`"),{className:"attribute",begin:"[\\w-]+\\s*:",end:":",returnBegin:!0,excludeEnd:!0},modes.IMPORTANT,{beginKeywords:"and not"},modes.FUNCTION_DISPATCH),VALUE_MODES.concat({begin:/\{/,end:/\}/,contains:RULES})),MIXIN_GUARD_MODE={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(VALUE_MODES)},RULE_MODE={begin:INTERP_IDENT_RE+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},modes.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:VALUE_MODES}}]},AT_KEYWORDS={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:AT_KEYWORDS,returnEnd:!0,contains:VALUE_MODES,relevance:0}},VALUE_MODES={className:"variable",variants:[{begin:"@[\\w-]+\\s*:",relevance:15},{begin:"@[\\w-]+"}],starts:{end:"[;}]",returnEnd:!0,contains:VALUE_WITH_RULESETS}},INTERP_IDENT_RE={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:INTERP_IDENT_RE,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,MIXIN_GUARD_MODE,IDENT_MODE("keyword","all\\b"),IDENT_MODE("variable","@\\{[\\w-]+\\}"),{begin:"\\b("+TAGS.join("|")+")\\b",className:"selector-tag"},modes.CSS_NUMBER_MODE,IDENT_MODE("selector-tag",INTERP_IDENT_RE,0),IDENT_MODE("selector-id","#"+INTERP_IDENT_RE),IDENT_MODE("selector-class","\\."+INTERP_IDENT_RE,0),IDENT_MODE("selector-tag","&",0),modes.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:VALUE_WITH_RULESETS},{begin:"!important"},modes.FUNCTION_DISPATCH]},VALUE_WITH_RULESETS={begin:"[\\w-]+:(:)?"+`(${PSEUDO_SELECTORS$1.join("|")})`,returnBegin:!0,contains:[INTERP_IDENT_RE]};return RULES.push(hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,AT_KEYWORDS,VALUE_MODES,VALUE_WITH_RULESETS,RULE_MODE,INTERP_IDENT_RE,MIXIN_GUARD_MODE,modes.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:RULES}},grmr_lua:function(hljs){var LONG_BRACKETS={begin:"\\[=*\\[",end:"\\]=*\\]",contains:["self"]},COMMENTS=[hljs.COMMENT("--(?!\\[=*\\[)","$"),hljs.COMMENT("--\\[=*\\[","\\]=*\\]",{contains:[LONG_BRACKETS],relevance:10})];return{name:"Lua",keywords:{$pattern:hljs.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:COMMENTS.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[hljs.inherit(hljs.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:COMMENTS}].concat(COMMENTS)},hljs.C_NUMBER_MODE,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,{className:"string",begin:"\\[=*\\[",end:"\\]=*\\]",contains:[LONG_BRACKETS],relevance:5}])}},grmr_makefile:function(hljs){var VARIABLE={className:"variable",variants:[{begin:"\\$\\("+hljs.UNDERSCORE_IDENT_RE+"\\)",contains:[hljs.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},QUOTE_STRING={className:"string",begin:/"/,end:/"/,contains:[hljs.BACKSLASH_ESCAPE,VARIABLE]},ASSIGNMENT={begin:"^"+hljs.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[hljs.HASH_COMMENT_MODE,VARIABLE,QUOTE_STRING,{className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[VARIABLE]},ASSIGNMENT,{className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},{className:"section",begin:/^[^\s]+:/,end:/$/,contains:[VARIABLE]}]}},grmr_xml:function(hljs){var regex=hljs.regex,TAG_NAME_RE=regex.concat(/[\p{L}_]/u,regex.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),XML_ENTITIES={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},XML_META_KEYWORDS={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},XML_META_PAR_KEYWORDS=hljs.inherit(XML_META_KEYWORDS,{begin:/\(/,end:/\)/}),APOS_META_STRING_MODE=hljs.inherit(hljs.APOS_STRING_MODE,{className:"string"}),QUOTE_META_STRING_MODE=hljs.inherit(hljs.QUOTE_STRING_MODE,{className:"string"}),TAG_INTERNALS={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[XML_ENTITIES]},{begin:/'/,end:/'/,contains:[XML_ENTITIES]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[XML_META_KEYWORDS,QUOTE_META_STRING_MODE,APOS_META_STRING_MODE,XML_META_PAR_KEYWORDS,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[XML_META_KEYWORDS,XML_META_PAR_KEYWORDS,QUOTE_META_STRING_MODE,APOS_META_STRING_MODE]}]}]},hljs.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},XML_ENTITIES,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[QUOTE_META_STRING_MODE]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[TAG_INTERNALS],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[TAG_INTERNALS],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:regex.concat(/</,regex.lookahead(regex.concat(TAG_NAME_RE,regex.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:TAG_NAME_RE,relevance:0,starts:TAG_INTERNALS}]},{className:"tag",begin:regex.concat(/<\//,regex.lookahead(regex.concat(TAG_NAME_RE,/>/))),contains:[{className:"name",begin:TAG_NAME_RE,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}},grmr_markdown:function(hljs){var INLINE_HTML={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},LINK={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:hljs.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},BOLD={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},ITALIC={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]},BOLD_WITHOUT_ITALIC=hljs.inherit(BOLD,{contains:[]}),hljs=hljs.inherit(ITALIC,{contains:[]});BOLD.contains.push(hljs),ITALIC.contains.push(BOLD_WITHOUT_ITALIC);let CONTAINABLE=[INLINE_HTML,LINK];return[BOLD,ITALIC,BOLD_WITHOUT_ITALIC,hljs].forEach(m=>{m.contains=m.contains.concat(CONTAINABLE)}),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:CONTAINABLE=CONTAINABLE.concat(BOLD,ITALIC)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:CONTAINABLE}]}]},INLINE_HTML,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},BOLD,ITALIC,{className:"quote",begin:"^>\\s+",contains:CONTAINABLE,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},LINK,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}},grmr_objectivec:function(hljs){var IDENTIFIER_RE=/[a-zA-Z@][a-zA-Z0-9_]*/,CLASS_KEYWORDS={$pattern:IDENTIFIER_RE,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{"variable.language":["this","super"],$pattern:IDENTIFIER_RE,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,hljs.C_NUMBER_MODE,hljs.QUOTE_STRING_MODE,hljs.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[hljs.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},hljs.inherit(hljs.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+CLASS_KEYWORDS.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:CLASS_KEYWORDS,contains:[hljs.UNDERSCORE_TITLE_MODE]},{begin:"\\."+hljs.UNDERSCORE_IDENT_RE,relevance:0}]}},grmr_perl:function(hljs){const regex=hljs.regex,REGEX_MODIFIERS=/[dualxmsipngr]{0,12}/;var PERL_KEYWORDS={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},SUBST={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:PERL_KEYWORDS},METHOD={begin:/->\{/,end:/\}/},VAR={variants:[{begin:/\$\d/},{begin:regex.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},STRING_CONTAINS=[hljs.BACKSLASH_ESCAPE,SUBST,VAR],REGEX_DELIMS=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],PAIRED_DOUBLE_RE=(prefix,open,close="\\1")=>{var middle="\\1"===close?close:regex.concat(close,open);return regex.concat(regex.concat("(?:",prefix,")"),open,/(?:\\.|[^\\\/])*?/,middle,/(?:\\.|[^\\\/])*?/,close,REGEX_MODIFIERS)},PAIRED_RE=(prefix,open,close)=>regex.concat(regex.concat("(?:",prefix,")"),open,/(?:\\.|[^\\\/])*?/,close,REGEX_MODIFIERS),VAR=[VAR,hljs.HASH_COMMENT_MODE,hljs.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),METHOD,{className:"string",contains:STRING_CONTAINS,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[hljs.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[hljs.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+hljs.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[hljs.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:PAIRED_DOUBLE_RE("s|tr|y",regex.either(...REGEX_DELIMS,{capture:!0}))},{begin:PAIRED_DOUBLE_RE("s|tr|y","\\(","\\)")},{begin:PAIRED_DOUBLE_RE("s|tr|y","\\[","\\]")},{begin:PAIRED_DOUBLE_RE("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:PAIRED_RE("(?:m|qr)?",/\//,/\//)},{begin:PAIRED_RE("m|qr",regex.either(...REGEX_DELIMS,{capture:!0}),/\1/)},{begin:PAIRED_RE("m|qr",/\(/,/\)/)},{begin:PAIRED_RE("m|qr",/\[/,/\]/)},{begin:PAIRED_RE("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[hljs.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return SUBST.contains=VAR,{name:"Perl",aliases:["pl","pm"],keywords:PERL_KEYWORDS,contains:METHOD.contains=VAR}},grmr_php:function(hljs){var regex=hljs.regex,NOT_PERL_ETC=/(?![A-Za-z0-9])(?![$])/,IDENT_RE=regex.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,NOT_PERL_ETC),NOT_PERL_ETC=regex.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,NOT_PERL_ETC),VARIABLE={scope:"variable",match:"\\$+"+IDENT_RE},SUBST={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},SINGLE_QUOTED=hljs.inherit(hljs.APOS_STRING_MODE,{illegal:null}),SINGLE_QUOTED={scope:"string",variants:[hljs.inherit(hljs.QUOTE_STRING_MODE,{illegal:null,contains:hljs.QUOTE_STRING_MODE.contains.concat(SUBST)}),SINGLE_QUOTED,hljs.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:hljs.QUOTE_STRING_MODE.contains.concat(SUBST)})]},SUBST={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},LITERALS=["false","null","true"],BUILT_INS=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],KEYWORDS={keyword:KWS=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],literal:(items=>{const result=[];return items.forEach(item=>{result.push(item),item.toLowerCase()===item?result.push(item.toUpperCase()):result.push(item.toLowerCase())}),result})(LITERALS),built_in:BUILT_INS},normalizeKeywords=items=>items.map(item=>item.replace(/\|\d+$/,"")),CONSTRUCTOR_CALL={variants:[{match:[/new/,regex.concat("[ \t\n]","+"),regex.concat("(?!",normalizeKeywords(BUILT_INS).join("\\b|"),"\\b)"),NOT_PERL_ETC],scope:{1:"keyword",4:"title.class"}}]},CONSTANT_REFERENCE=regex.concat(IDENT_RE,"\\b(?!\\()"),CONSTANT_REFERENCE={variants:[{match:[regex.concat(/::/,regex.lookahead(/(?!class\b)/)),CONSTANT_REFERENCE],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[NOT_PERL_ETC,regex.concat(/::/,regex.lookahead(/(?!class\b)/)),CONSTANT_REFERENCE],scope:{1:"title.class",3:"variable.constant"}},{match:[NOT_PERL_ETC,regex.concat("::",regex.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[NOT_PERL_ETC,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},NAMED_ARGUMENT={scope:"attr",match:regex.concat(IDENT_RE,regex.lookahead(":"),regex.lookahead(/(?!::)/))},PARAMS_MODE={relevance:0,begin:/\(/,end:/\)/,keywords:KEYWORDS,contains:[NAMED_ARGUMENT,VARIABLE,CONSTANT_REFERENCE,hljs.C_BLOCK_COMMENT_MODE,SINGLE_QUOTED,SUBST,CONSTRUCTOR_CALL]},KWS={relevance:0,match:[/\b/,regex.concat("(?!fn\\b|function\\b|",normalizeKeywords(KWS).join("\\b|"),"|",normalizeKeywords(BUILT_INS).join("\\b|"),"\\b)"),IDENT_RE,regex.concat("[ \t\n]","*"),regex.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[PARAMS_MODE]},normalizeKeywords=(PARAMS_MODE.contains.push(KWS),[NAMED_ARGUMENT,CONSTANT_REFERENCE,hljs.C_BLOCK_COMMENT_MODE,SINGLE_QUOTED,SUBST,CONSTRUCTOR_CALL]);return{case_insensitive:!1,keywords:KEYWORDS,contains:[{begin:regex.concat(/#\[\s*/,NOT_PERL_ETC),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:LITERALS,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:LITERALS,keyword:["new","array"]},contains:["self",...normalizeKeywords]},...normalizeKeywords,{scope:"meta",match:NOT_PERL_ETC}]},hljs.HASH_COMMENT_MODE,hljs.COMMENT("//","$"),hljs.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:hljs.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},VARIABLE,KWS,CONSTANT_REFERENCE,{match:[/const/,/\s/,IDENT_RE],scope:{1:"keyword",3:"variable.constant"}},CONSTRUCTOR_CALL,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},hljs.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS,contains:["self",VARIABLE,CONSTANT_REFERENCE,hljs.C_BLOCK_COMMENT_MODE,SINGLE_QUOTED,SUBST]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},hljs.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[hljs.inherit(hljs.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},hljs.UNDERSCORE_TITLE_MODE]},SINGLE_QUOTED,SUBST]}},grmr_php_template:function(hljs){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},hljs.inherit(hljs.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),hljs.inherit(hljs.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}},grmr_plaintext:function(hljs){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}},grmr_python:function(hljs){var regex=hljs.regex,IDENT_RE=/[\p{XID_Start}_]\p{XID_Continue}*/u,KEYWORDS={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:RESERVED_WORDS=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},PROMPT={className:"meta",begin:/^(>>>|\.\.\.) /},SUBST={className:"subst",begin:/\{/,end:/\}/,keywords:KEYWORDS,illegal:/#/},LITERAL_BRACKET={begin:/\{\{/,relevance:0},LITERAL_BRACKET={className:"string",contains:[hljs.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[hljs.BACKSLASH_ESCAPE,PROMPT],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[hljs.BACKSLASH_ESCAPE,PROMPT],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[hljs.BACKSLASH_ESCAPE,PROMPT,LITERAL_BRACKET,SUBST]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[hljs.BACKSLASH_ESCAPE,PROMPT,LITERAL_BRACKET,SUBST]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[hljs.BACKSLASH_ESCAPE,LITERAL_BRACKET,SUBST]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[hljs.BACKSLASH_ESCAPE,LITERAL_BRACKET,SUBST]},hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE]},pointfloat=`(\\b(${digitpart="[0-9](_?[0-9])*"}))?\\.(${digitpart})|\\b(${digitpart})\\.`,RESERVED_WORDS="\\b|"+RESERVED_WORDS.join("|"),pointfloat={className:"number",relevance:0,variants:[{begin:`(\\b(${digitpart})|(${pointfloat}))[eE][+-]?(${digitpart})[jJ]?(?=${RESERVED_WORDS})`},{begin:`(${pointfloat})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${RESERVED_WORDS})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${RESERVED_WORDS})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${RESERVED_WORDS})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${RESERVED_WORDS})`},{begin:`\\b(${digitpart})[jJ](?=${RESERVED_WORDS})`}]},digitpart={className:"comment",begin:regex.lookahead(/# type:/),end:/$/,keywords:KEYWORDS,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},RESERVED_WORDS={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS,contains:["self",PROMPT,pointfloat,LITERAL_BRACKET,hljs.HASH_COMMENT_MODE]}]};return SUBST.contains=[LITERAL_BRACKET,pointfloat,PROMPT],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:KEYWORDS,illegal:/(<\/|->|\?)|=>/,contains:[PROMPT,pointfloat,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},LITERAL_BRACKET,digitpart,hljs.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,IDENT_RE],scope:{1:"keyword",3:"title.function"},contains:[RESERVED_WORDS]},{variants:[{match:[/\bclass/,/\s+/,IDENT_RE,/\s*/,/\(\s*/,IDENT_RE,/\s*\)/]},{match:[/\bclass/,/\s+/,IDENT_RE]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[pointfloat,RESERVED_WORDS,LITERAL_BRACKET]}]}},grmr_python_repl:function(hljs){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}},grmr_r:function(hljs){var regex=hljs.regex,IDENT_RE=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,NUMBER_TYPES_RE=regex.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),OPERATORS_RE=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,PUNCTUATION_RE=regex.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:IDENT_RE,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[hljs.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:regex.lookahead(regex.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:IDENT_RE},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),hljs.HASH_COMMENT_MODE,{scope:"string",contains:[hljs.BACKSLASH_ESCAPE],variants:[hljs.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),hljs.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),hljs.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),hljs.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),hljs.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),hljs.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[OPERATORS_RE,NUMBER_TYPES_RE]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,NUMBER_TYPES_RE]},{scope:{1:"punctuation",2:"number"},match:[PUNCTUATION_RE,NUMBER_TYPES_RE]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,NUMBER_TYPES_RE]}]},{scope:{3:"operator"},match:[IDENT_RE,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:OPERATORS_RE},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:PUNCTUATION_RE},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}},grmr_ruby:function(hljs){var regex=hljs.regex,RUBY_METHOD_RE="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",CLASS_NAME_RE=regex.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),CLASS_NAME_RE=regex.concat(CLASS_NAME_RE,/(::\w+)*/),RUBY_KEYWORDS={"variable.constant":["__FILE__","__LINE__"],"variable.language":["self","super"],keyword:["alias","and","attr_accessor","attr_reader","attr_writer","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","include","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield"],built_in:["proc","lambda"],literal:["true","false","nil"]},YARDOCTAG={className:"doctag",begin:"@[A-Za-z]+"},IRB_OBJECT={begin:"#<",end:">"},YARDOCTAG=[hljs.COMMENT("#","$",{contains:[YARDOCTAG]}),hljs.COMMENT("^=begin","^=end",{contains:[YARDOCTAG],relevance:10}),hljs.COMMENT("^__END__",hljs.MATCH_NOTHING_RE)],SUBST={className:"subst",begin:/#\{/,end:/\}/,keywords:RUBY_KEYWORDS},regex={className:"string",contains:[hljs.BACKSLASH_ESCAPE,SUBST],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:regex.concat(/<<[-~]?'?/,regex.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[hljs.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[hljs.BACKSLASH_ESCAPE,SUBST]})]}]},NUMBER={className:"number",relevance:0,variants:[{begin:"\\b([1-9](_?[0-9])*|0)(\\.([0-9](_?[0-9])*))?([eE][+-]?([0-9](_?[0-9])*)|r)?i?\\b"},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},PARAMS={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:RUBY_KEYWORDS}]},CLASS_NAME_RE=[regex,{variants:[{match:[/class\s+/,CLASS_NAME_RE,/\s+<\s+/,CLASS_NAME_RE]},{match:[/class\s+/,CLASS_NAME_RE]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:RUBY_KEYWORDS},{relevance:0,match:[CLASS_NAME_RE,/\.new[ (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{match:[/def/,/\s+/,RUBY_METHOD_RE],scope:{1:"keyword",3:"title.function"},contains:[PARAMS]},{begin:hljs.IDENT_RE+"::"},{className:"symbol",begin:hljs.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[regex,{begin:RUBY_METHOD_RE}],relevance:0},NUMBER,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:RUBY_KEYWORDS},{begin:"("+hljs.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[hljs.BACKSLASH_ESCAPE,SUBST],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(IRB_OBJECT,YARDOCTAG),relevance:0}].concat(IRB_OBJECT,YARDOCTAG),regex=(SUBST.contains=CLASS_NAME_RE,[{begin:/^\s*=>/,starts:{end:"$",contains:PARAMS.contains=CLASS_NAME_RE}},{className:"meta.prompt",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",keywords:RUBY_KEYWORDS,contains:CLASS_NAME_RE}}]);return YARDOCTAG.unshift(IRB_OBJECT),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:RUBY_KEYWORDS,illegal:/\/\*/,contains:[hljs.SHEBANG({binary:"ruby"})].concat(regex).concat(YARDOCTAG).concat(CLASS_NAME_RE)}},grmr_rust:function(hljs){var regex={className:"title.function.invoke",relevance:0,begin:(regex=hljs.regex).concat(/\b/,/(?!let\b)/,hljs.IDENT_RE,regex.lookahead(/\s*\(/))},NUMBER_SUFFIX="([ui](8|16|32|64|128|size)|f(32|64))?",BUILTINS=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],TYPES=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:hljs.IDENT_RE+"!?",type:TYPES,keyword:["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],literal:["true","false","Some","None","Ok","Err"],built_in:BUILTINS},illegal:"</",contains:[hljs.C_LINE_COMMENT_MODE,hljs.COMMENT("/\\*","\\*/",{contains:["self"]}),hljs.inherit(hljs.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+NUMBER_SUFFIX},{begin:"\\b0o([0-7_]+)"+NUMBER_SUFFIX},{begin:"\\b0x([A-Fa-f0-9_]+)"+NUMBER_SUFFIX},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+NUMBER_SUFFIX}],relevance:0},{begin:[/fn/,/\s+/,hljs.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,hljs.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,hljs.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,hljs.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,hljs.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:hljs.IDENT_RE+"::",keywords:{keyword:"Self",built_in:BUILTINS,type:TYPES}},{className:"punctuation",begin:"->"},regex]}},grmr_scss:function(hljs){var modes=MODES(hljs),PSEUDO_ELEMENTS$1=PSEUDO_ELEMENTS,PSEUDO_CLASSES$1=PSEUDO_CLASSES,VARIABLE={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE,modes.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},modes.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES$1.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS$1.join("|")+")"},VARIABLE,{begin:/\(/,end:/\)/,contains:[modes.CSS_NUMBER_MODE]},modes.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[modes.BLOCK_COMMENT,VARIABLE,modes.HEXCOLOR,modes.CSS_NUMBER_MODE,hljs.QUOTE_STRING_MODE,hljs.APOS_STRING_MODE,modes.IMPORTANT,modes.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:"@[a-z-]+",keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:MEDIA_FEATURES.join(" ")},contains:[{begin:"@[a-z-]+",className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},VARIABLE,hljs.QUOTE_STRING_MODE,hljs.APOS_STRING_MODE,modes.HEXCOLOR,modes.CSS_NUMBER_MODE]},modes.FUNCTION_DISPATCH]}},grmr_shell:function(hljs){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}},grmr_sql:function(hljs){var regex=hljs.regex,COMMENT_MODE=hljs.COMMENT("--","$"),LITERALS=["true","false","unknown"],TYPES=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"];const RESERVED_FUNCTIONS=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"];var COMBOS=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],FUNCTIONS=RESERVED_FUNCTIONS,KEYWORDS=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter(keyword=>!RESERVED_FUNCTIONS.includes(keyword)),FUNCTIONS={begin:regex.concat(/\b/,regex.either(...FUNCTIONS),/\s*\(/),relevance:0,keywords:{built_in:FUNCTIONS}};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(list,{exceptions,when}){const qualifyFn=when;return exceptions=exceptions||[],list.map(item=>!item.match(/\|\d+$/)&&!exceptions.includes(item)&&qualifyFn(item)?item+"|0":item)}(KEYWORDS,{when:x=>x.length<3}),literal:LITERALS,type:TYPES,built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{begin:regex.either(...COMBOS),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:KEYWORDS.concat(COMBOS),literal:LITERALS,type:TYPES}},{className:"type",begin:regex.either("double precision","large object","with timezone","without timezone")},FUNCTIONS,{className:"variable",begin:/@[a-z0-9]+/},{className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{begin:/""/}]},hljs.C_NUMBER_MODE,hljs.C_BLOCK_COMMENT_MODE,COMMENT_MODE,{className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}},grmr_swift:function(hljs){var WHITESPACE={match:/\s+/,relevance:0},BLOCK_COMMENT=hljs.COMMENT("/\\*","\\*/",{contains:["self"]}),BLOCK_COMMENT=[hljs.C_LINE_COMMENT_MODE,BLOCK_COMMENT],DOT_KEYWORD={match:[/\./,either(...dotKeywords,...optionalDotKeywords)],className:{2:"keyword"}},KEYWORD_GUARD={match:concat(/\./,either(...keywords)),relevance:0},PLAIN_KEYWORDS=keywords.filter(kw=>"string"==typeof kw).concat(["_|0"]),KEYWORD={variants:[{className:"keyword",match:either(...keywords.filter(kw=>"string"!=typeof kw).concat(keywordTypes).map(keywordWrapper),...optionalDotKeywords)}]},KEYWORDS={$pattern:either(/\b\w+/,/#\w+/),keyword:PLAIN_KEYWORDS.concat(numberSignKeywords),literal:literals},KEYWORD_MODES=[DOT_KEYWORD,KEYWORD_GUARD,KEYWORD],BUILT_INS=[{match:concat(/\./,either(...builtIns$1)),relevance:0},{className:"built_in",match:concat(/\b/,either(...builtIns$1),/(?=\()/)}],OPERATORS=[PLAIN_KEYWORDS={match:/->/,relevance:0},{className:"operator",relevance:0,variants:[{match:operator},{match:`\\.(\\.|${operatorCharacter})+`}]}],NUMBER={className:"number",relevance:0,variants:[{match:"\\b(([0-9]_*)+)(\\.(([0-9]_*)+))?([eE][+-]?(([0-9]_*)+))?\\b"},{match:"\\b0x(([0-9a-fA-F]_*)+)(\\.(([0-9a-fA-F]_*)+))?([pP][+-]?(([0-9]_*)+))?\\b"},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]};const ESCAPED_CHARACTER=(rawDelimiter="")=>({className:"subst",variants:[{match:concat(/\\/,rawDelimiter,/[0\\tnr"']/)},{match:concat(/\\/,rawDelimiter,/u\{[0-9a-fA-F]{1,8}\}/)}]}),INTERPOLATION=(rawDelimiter="")=>({className:"subst",label:"interpol",begin:concat(/\\/,rawDelimiter,/\(/),end:/\)/});var KEYWORD_GUARD=(rawDelimiter="")=>({begin:concat(rawDelimiter,/"/),end:concat(/"/,rawDelimiter),contains:[ESCAPED_CHARACTER(rawDelimiter),INTERPOLATION(rawDelimiter)]}),STRING={className:"string",variants:[(DOT_KEYWORD=(rawDelimiter="")=>({begin:concat(rawDelimiter,/"""/),end:concat(/"""/,rawDelimiter),contains:[ESCAPED_CHARACTER(rawDelimiter),((rawDelimiter="")=>({className:"subst",match:concat(/\\/,rawDelimiter,/[\t ]*(?:[\r\n]|\r\n)/)}))(rawDelimiter),INTERPOLATION(rawDelimiter)]}))(),DOT_KEYWORD("#"),DOT_KEYWORD("##"),DOT_KEYWORD("###"),KEYWORD_GUARD(),KEYWORD_GUARD("#"),KEYWORD_GUARD("##"),KEYWORD_GUARD("###")]},IDENTIFIERS=[KEYWORD={match:concat(/`/,identifier,/`/)},{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${identifierCharacter}+`}],DOT_KEYWORD=[{match:/(@|#(un)?)available/,className:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:availabilityKeywords,contains:[...OPERATORS,NUMBER,STRING]}]}},{className:"keyword",match:concat(/@/,either(...keywordAttributes))},{className:"meta",match:concat(/@/,identifier)}],KEYWORD_GUARD={match:lookahead(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:concat(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,identifierCharacter,"+")},{className:"type",match:typeIdentifier,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:concat(/\s+&\s+/,lookahead(typeIdentifier)),relevance:0}]},PLAIN_KEYWORDS={begin:/</,end:/>/,keywords:KEYWORDS,contains:[...BLOCK_COMMENT,...KEYWORD_MODES,...DOT_KEYWORD,PLAIN_KEYWORDS,KEYWORD_GUARD]},PLAIN_KEYWORDS=(KEYWORD_GUARD.contains.push(PLAIN_KEYWORDS),{match:concat(identifier,/\s*:/),keywords:"_|0",relevance:0}),PLAIN_KEYWORDS={begin:/\(/,end:/\)/,relevance:0,keywords:KEYWORDS,contains:["self",PLAIN_KEYWORDS,...BLOCK_COMMENT,...KEYWORD_MODES,...BUILT_INS,...OPERATORS,NUMBER,STRING,...IDENTIFIERS,...DOT_KEYWORD,KEYWORD_GUARD]},GENERIC_PARAMETERS={begin:/</,end:/>/,contains:[...BLOCK_COMMENT,KEYWORD_GUARD]},FUNCTION_PARAMETERS={begin:/\(/,end:/\)/,keywords:KEYWORDS,contains:[{begin:either(lookahead(concat(identifier,/\s*:/)),lookahead(concat(identifier,/\s+/,identifier,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:identifier}]},...BLOCK_COMMENT,...KEYWORD_MODES,...OPERATORS,NUMBER,STRING,...DOT_KEYWORD,KEYWORD_GUARD,PLAIN_KEYWORDS],endsParent:!0,illegal:/["']/},KEYWORD={match:[/func/,/\s+/,either(KEYWORD.match,identifier,operator)],className:{1:"keyword",3:"title.function"},contains:[GENERIC_PARAMETERS,FUNCTION_PARAMETERS,WHITESPACE],illegal:[/\[/,/%/]},GENERIC_PARAMETERS={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[GENERIC_PARAMETERS,FUNCTION_PARAMETERS,WHITESPACE],illegal:/\[|%/},FUNCTION_PARAMETERS={match:[/operator/,/\s+/,operator],className:{1:"keyword",3:"title"}},WHITESPACE={begin:[/precedencegroup/,/\s+/,typeIdentifier],className:{1:"keyword",3:"title"},contains:[KEYWORD_GUARD],keywords:[...precedencegroupKeywords,...literals],end:/}/};for(const variant of STRING.variants){var interpolation=variant.contains.find(mode=>"interpol"===mode.label),submodes=(interpolation.keywords=KEYWORDS,[...KEYWORD_MODES,...BUILT_INS,...OPERATORS,NUMBER,STRING,...IDENTIFIERS]);interpolation.contains=[...submodes,{begin:/\(/,end:/\)/,contains:["self",...submodes]}]}return{name:"Swift",keywords:KEYWORDS,contains:[...BLOCK_COMMENT,KEYWORD,GENERIC_PARAMETERS,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:KEYWORDS,contains:[hljs.inherit(hljs.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...KEYWORD_MODES]},FUNCTION_PARAMETERS,WHITESPACE,{beginKeywords:"import",end:/$/,contains:[...BLOCK_COMMENT],relevance:0},...KEYWORD_MODES,...BUILT_INS,...OPERATORS,NUMBER,STRING,...IDENTIFIERS,...DOT_KEYWORD,KEYWORD_GUARD,PLAIN_KEYWORDS]}},grmr_typescript:function(hljs){var tsLanguage=javascript(hljs),TYPES=(IDENT_RE,["any","void","number","boolean","string","object","never","symbol","bigint","unknown"]),NAMESPACE={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[tsLanguage.exports.CLASS_REFERENCE]},INTERFACE={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:TYPES},contains:[tsLanguage.exports.CLASS_REFERENCE]},TYPES={$pattern:IDENT_RE,keyword:KEYWORDS.concat(["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"]),literal:LITERALS,built_in:BUILT_INS.concat(TYPES),"variable.language":BUILT_IN_VARIABLES},DECORATOR={className:"meta",begin:"@[A-Za-z$_][0-9A-Za-z$_]*"},swapMode=(mode,label,replacement)=>{var indx=mode.contains.findIndex(m=>m.label===label);if(-1===indx)throw new Error("can not find mode to replace");mode.contains.splice(indx,1,replacement)};return Object.assign(tsLanguage.keywords,TYPES),tsLanguage.exports.PARAMS_CONTAINS.push(DECORATOR),tsLanguage.contains=tsLanguage.contains.concat([DECORATOR,NAMESPACE,INTERFACE]),swapMode(tsLanguage,"shebang",hljs.SHEBANG()),swapMode(tsLanguage,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/}),tsLanguage.contains.find(m=>"func.def"===m.label).relevance=0,Object.assign(tsLanguage,{name:"TypeScript",aliases:["ts","tsx"]}),tsLanguage},grmr_vbnet:function(hljs){var regex=hljs.regex,MM_DD_YYYY=/\d{1,2}\/\d{1,2}\/\d{4}/,YYYY_MM_DD=/\d{4}-\d{1,2}-\d{1,2}/,TIME_12H=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,TIME_24H=/\d{1,2}(:\d{1,2}){1,2}/,YYYY_MM_DD={className:"literal",variants:[{begin:regex.concat(/# */,regex.either(YYYY_MM_DD,MM_DD_YYYY),/ *#/)},{begin:regex.concat(/# */,TIME_24H,/ *#/)},{begin:regex.concat(/# */,TIME_12H,/ *#/)},{begin:regex.concat(/# */,regex.either(YYYY_MM_DD,MM_DD_YYYY),/ +/,regex.either(TIME_12H,TIME_24H),/ *#/)}]},MM_DD_YYYY=hljs.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),regex=hljs.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[{className:"string",begin:/"(""|[^/n])"C\b/},{className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},YYYY_MM_DD,{className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},{className:"label",begin:/^\w+:/},MM_DD_YYYY,regex,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[regex]}]}},grmr_wasm:function(hljs){hljs.regex;var BLOCK_COMMENT=hljs.COMMENT(/\(;/,/;\)/),LINE_COMMENT=(BLOCK_COMMENT.contains.push("self"),hljs.COMMENT(/;;/,/$/));return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"]},contains:[LINE_COMMENT,BLOCK_COMMENT,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},{className:"variable",begin:/\$[\w_]+/},{match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},{begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},hljs.QUOTE_STRING_MODE,{match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},{className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/},{className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/}]}},grmr_yaml:function(hljs){var LITERALS="true false yes no null",URI_CHARACTERS="[\\w#;/?:@&=+$,.~*'()[\\]]+",STRING={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[hljs.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},CONTAINER_STRING=hljs.inherit(STRING,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),VALUE_CONTAINER={end:",",endsWithParent:!0,excludeEnd:!0,keywords:LITERALS,relevance:0},URI_CHARACTERS=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+URI_CHARACTERS},{className:"type",begin:"!<"+URI_CHARACTERS+">"},{className:"type",begin:"!"+URI_CHARACTERS},{className:"type",begin:"!!"+URI_CHARACTERS},{className:"meta",begin:"&"+hljs.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+hljs.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},hljs.HASH_COMMENT_MODE,{beginKeywords:LITERALS,keywords:{literal:LITERALS}},{className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},{className:"number",begin:hljs.C_NUMBER_RE+"\\b",relevance:0},{begin:/\{/,end:/\}/,contains:[VALUE_CONTAINER],illegal:"\\n",relevance:0},{begin:"\\[",end:"\\]",contains:[VALUE_CONTAINER],illegal:"\\n",relevance:0},STRING];return(LITERALS=[...URI_CHARACTERS]).pop(),LITERALS.push(CONTAINER_STRING),VALUE_CONTAINER.contains=LITERALS,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:URI_CHARACTERS}}}),hljs=APOS_STRING_MODE;for(const key of Object.keys(builtIns)){var languageName=key.replace("grmr_","").replace("_","-");hljs.registerLanguage(languageName,builtIns[key])}return hljs}();function activeNavItem(id){try{document.querySelector(id).classList.add("active")}catch{}}function createEditor(ele,content){ele=document.querySelector(ele);return new window.stacksEditor.StacksEditor(ele,content??ele.innerHTML,{parserFeatures:{tables:!0}})}function submitRequest(url,option){if((option=option||{}).form){if(option.form.classList.contains("needs-validation")&&!option.form.checkValidity())return void option.form.classList.add("was-validated");var fieldset=option.form.closest("fieldset");fieldset&&(fieldset.disabled=!0)}option.preAction&&option.preAction();var headers,fieldset=option.method??"POST",body=option.body??"";function formPostAction(){var fieldset;option.form&&(option.form.classList.contains("was-validated")&&option.form.classList.remove("was-validated"),(fieldset=option.form.closest("fieldset"))&&(fieldset.disabled=!1))}headers=option.contentType&&0<option.contentType.length?{"Content-Type":option.contentType}:{},window.fetch(url,{method:fieldset,headers:headers,body:body}).then(response=>response.json()).then(result=>{result.ok?result.redirectTo?window.location.href=result.redirectTo:option.okAction&&option.okAction(result.content):(showErrorMessageModal(result.message),formPostAction()),option.postAction&&(formPostAction(),option.postAction())}).catch(error=>{showErrorMessageModal(error),formPostAction()})}function showMessageModal(title,bodyHtml,footerHtml){var messageModalEl=document.querySelector("#messageModal");messageModalEl&&(bootstrap.Modal.getOrCreateInstance(messageModalEl).show(),(messageModalEl=document.querySelector("#messageModalTitle"))&&(messageModalEl.innerHTML=title),(messageModalEl=document.querySelector("#messageModalBody"))&&(messageModalEl.innerHTML=bodyHtml),(title=document.querySelector("#messageModalFooter"))&&(title.innerHTML=footerHtml=footerHtml??'<button type="button" class="btn btn-info" data-bs-dismiss="modal">Ok</button>'))}function showInfoMessageModal(message){showMessageModal('<i class="bi bi-info-circle"></i> Info',`<div>${message}</div>`)}function showErrorMessageModal(message){showMessageModal('<i class="bi bi-exclamation-circle text-danger"></i> Error',`<div>${message}</div>`)}function showConfirmMessageModal(message,yesHandler){yesHandler&&(showMessageModal('<i class="fa-solid fa-circle-question text-warning"></i> Question',`<p>${message}</p>`,`<button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="${message=makeId(8)}"><span class="px-2">Yes</span></button>`+'<button type="button" class="btn btn-dark" data-bs-dismiss="modal"><span class="px-2">No</span></button>'),document.querySelector("#"+message).addEventListener("click",function(){yesHandler()}))}function makeId(length){var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",charactersLength=characters.length;for(let i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}function base64ArrayBuffer(arrayBuffer){for(var chunk,base64="",encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bytes=new Uint8Array(arrayBuffer),arrayBuffer=bytes.byteLength,byteRemainder=arrayBuffer%3,mainLength=arrayBuffer-byteRemainder,i=0;i<mainLength;i+=3)base64+=encodings[(16515072&(chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2]))>>18]+encodings[(258048&chunk)>>12]+encodings[(4032&chunk)>>6]+encodings[63&chunk];return 1==byteRemainder?base64+=encodings[(252&(chunk=bytes[mainLength]))>>2]+encodings[(3&chunk)<<4]+"==":2==byteRemainder&&(base64+=encodings[(64512&(chunk=bytes[mainLength]<<8|bytes[1+mainLength]))>>10]+encodings[(1008&chunk)>>4]+encodings[(15&chunk)<<2]+"="),base64}"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=hljs),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.Stacks=factory():root.Stacks=factory()}(globalThis,()=>(()=>{"use strict";var __webpack_modules__={492:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{afterMain:()=>afterMain,afterRead:()=>afterRead,afterWrite:()=>afterWrite,applyStyles:()=>modifiers_applyStyles,arrow:()=>modifiers_arrow,auto:()=>auto,basePlacements:()=>basePlacements,beforeMain:()=>beforeMain,beforeRead:()=>beforeRead,beforeWrite:()=>beforeWrite,bottom:()=>bottom,clippingParents:()=>clippingParents,computeStyles:()=>modifiers_computeStyles,createPopper:()=>popper_createPopper,createPopperBase:()=>createPopper,createPopperLite:()=>popper_lite_createPopper,detectOverflow:()=>detectOverflow,end:()=>end,eventListeners:()=>eventListeners,flip:()=>modifiers_flip,hide:()=>modifiers_hide,left:()=>left,main:()=>main,modifierPhases:()=>modifierPhases,offset:()=>modifiers_offset,placements:()=>enums_placements,popper:()=>popper,popperGenerator:()=>popperGenerator,popperOffsets:()=>modifiers_popperOffsets,preventOverflow:()=>modifiers_preventOverflow,read:()=>read,reference:()=>reference,right:()=>right,start:()=>start,top:()=>enums_top,variationPlacements:()=>variationPlacements,viewport:()=>viewport,write:()=>write});var enums_top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[enums_top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(acc,placement){return acc.concat([placement+"-"+start,placement+"-"+end])},[]),enums_placements=[].concat(basePlacements,[auto]).reduce(function(acc,placement){return acc.concat([placement,placement+"-"+start,placement+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(element){return element?(element.nodeName||"").toLowerCase():null}function getWindow(node){var ownerDocument;return null==node?window:"[object Window]"!==node.toString()?(ownerDocument=node.ownerDocument)&&ownerDocument.defaultView||window:node}function isElement(node){return node instanceof getWindow(node).Element||node instanceof Element}function isHTMLElement(node){return node instanceof getWindow(node).HTMLElement||node instanceof HTMLElement}function isShadowRoot(node){return"undefined"!=typeof ShadowRoot&&(node instanceof getWindow(node).ShadowRoot||node instanceof ShadowRoot)}const modifiers_applyStyles={name:"applyStyles",enabled:!0,phase:"write",fn:function(_ref){var state=_ref.state;Object.keys(state.elements).forEach(function(name){var style=state.styles[name]||{},attributes=state.attributes[name]||{},element=state.elements[name];isHTMLElement(element)&&getNodeName(element)&&(Object.assign(element.style,style),Object.keys(attributes).forEach(function(name){var value=attributes[name];!1===value?element.removeAttribute(name):element.setAttribute(name,!0===value?"":value)}))})},effect:function(_ref2){var state=_ref2.state,initialStyles={popper:{position:state.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(state.elements.popper.style,initialStyles.popper),state.styles=initialStyles,state.elements.arrow&&Object.assign(state.elements.arrow.style,initialStyles.arrow),function(){Object.keys(state.elements).forEach(function(name){var element=state.elements[name],attributes=state.attributes[name]||{},name=Object.keys((state.styles.hasOwnProperty(name)?state.styles:initialStyles)[name]).reduce(function(style,property){return style[property]="",style},{});isHTMLElement(element)&&getNodeName(element)&&(Object.assign(element.style,name),Object.keys(attributes).forEach(function(attribute){element.removeAttribute(attribute)}))})}},requires:["computeStyles"]};var math_max=Math.max,math_min=Math.min,round=Math.round;function getUAString(){var uaData=navigator.userAgentData;return null!=uaData&&uaData.brands?uaData.brands.map(function(item){return item.brand+"/"+item.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(element,includeScale,isFixedStrategy){void 0===includeScale&&(includeScale=!1),void 0===isFixedStrategy&&(isFixedStrategy=!1);var clientRect=element.getBoundingClientRect(),scaleX=1,scaleY=1;includeScale&&isHTMLElement(element)&&(scaleX=0<element.offsetWidth&&round(clientRect.width)/element.offsetWidth||1,scaleY=0<element.offsetHeight&&round(clientRect.height)/element.offsetHeight||1);includeScale=(isElement(element)?getWindow(element):window).visualViewport,element=!isLayoutViewport()&&isFixedStrategy,isFixedStrategy=(clientRect.left+(element&&includeScale?includeScale.offsetLeft:0))/scaleX,element=(clientRect.top+(element&&includeScale?includeScale.offsetTop:0))/scaleY,includeScale=clientRect.width/scaleX,scaleX=clientRect.height/scaleY;return{width:includeScale,height:scaleX,top:element,right:isFixedStrategy+includeScale,bottom:element+scaleX,left:isFixedStrategy,x:isFixedStrategy,y:element}}function getLayoutRect(element){var clientRect=getBoundingClientRect(element),width=element.offsetWidth,height=element.offsetHeight;return Math.abs(clientRect.width-width)<=1&&(width=clientRect.width),Math.abs(clientRect.height-height)<=1&&(height=clientRect.height),{x:element.offsetLeft,y:element.offsetTop,width:width,height:height}}function contains(parent,child){var rootNode=child.getRootNode&&child.getRootNode();if(parent.contains(child))return!0;if(rootNode&&isShadowRoot(rootNode)){var next=child;do{if(next&&parent.isSameNode(next))return!0}while(next=next.parentNode||next.host)}return!1}function getComputedStyle(element){return getWindow(element).getComputedStyle(element)}function getDocumentElement(element){return((isElement(element)?element.ownerDocument:element.document)||window.document).documentElement}function getParentNode(element){return"html"===getNodeName(element)?element:element.assignedSlot||element.parentNode||(isShadowRoot(element)?element.host:null)||getDocumentElement(element)}function getTrueOffsetParent(element){return isHTMLElement(element)&&"fixed"!==getComputedStyle(element).position?element.offsetParent:null}function getOffsetParent(element){for(var window=getWindow(element),offsetParent=getTrueOffsetParent(element);offsetParent&&function(element){return 0<=["table","td","th"].indexOf(getNodeName(element))}(offsetParent)&&"static"===getComputedStyle(offsetParent).position;)offsetParent=getTrueOffsetParent(offsetParent);return(!offsetParent||"html"!==getNodeName(offsetParent)&&("body"!==getNodeName(offsetParent)||"static"!==getComputedStyle(offsetParent).position))&&(offsetParent||function(element){var isFirefox=/firefox/i.test(getUAString()),isIE=/Trident/i.test(getUAString());if(!isIE||!isHTMLElement(element)||"fixed"!==getComputedStyle(element).position){var currentNode=getParentNode(element);for(isShadowRoot(currentNode)&&(currentNode=currentNode.host);isHTMLElement(currentNode)&&["html","body"].indexOf(getNodeName(currentNode))<0;){var css=getComputedStyle(currentNode);if("none"!==css.transform||"none"!==css.perspective||"paint"===css.contain||-1!==["transform","perspective"].indexOf(css.willChange)||isFirefox&&"filter"===css.willChange||isFirefox&&css.filter&&"none"!==css.filter)return currentNode;currentNode=currentNode.parentNode}}return null}(element))||window}function getMainAxisFromPlacement(placement){return 0<=["top","bottom"].indexOf(placement)?"x":"y"}function within(min,value,max){return math_max(min,math_min(value,max))}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(paddingObject){return Object.assign({},getFreshSideObject(),paddingObject)}function expandToHashMap(value,keys){return keys.reduce(function(hashMap,key){return hashMap[key]=value,hashMap},{})}const modifiers_arrow={name:"arrow",enabled:!0,phase:"main",fn:function(_ref){var arrowRect,endDiff,maxProp,minProp,state=_ref.state,name=_ref.name,_ref=_ref.options,arrowElement=state.elements.arrow,popperOffsets=state.modifiersData.popperOffsets,axis=getMainAxisFromPlacement(basePlacement=state.placement.split("-")[0]),basePlacement=0<=[left,right].indexOf(basePlacement)?"height":"width";arrowElement&&popperOffsets&&(_ref=function(padding,state){return mergePaddingObject("number"!=typeof(padding="function"==typeof padding?padding(Object.assign({},state.rects,{placement:state.placement})):padding)?padding:expandToHashMap(padding,basePlacements))}(_ref.padding,state),arrowRect=getLayoutRect(arrowElement),minProp="y"===axis?enums_top:left,maxProp="y"===axis?bottom:right,endDiff=state.rects.reference[basePlacement]+state.rects.reference[axis]-popperOffsets[axis]-state.rects.popper[basePlacement],popperOffsets=popperOffsets[axis]-state.rects.reference[axis],arrowElement=(arrowElement=getOffsetParent(arrowElement))?"y"===axis?arrowElement.clientHeight||0:arrowElement.clientWidth||0:0,minProp=_ref[minProp],_ref=arrowElement-arrowRect[basePlacement]-_ref[maxProp],minProp=within(minProp,maxProp=arrowElement/2-arrowRect[basePlacement]/2+(endDiff/2-popperOffsets/2),_ref),state.modifiersData[name]=((arrowElement={})[axis]=minProp,arrowElement.centerOffset=minProp-maxProp,arrowElement))},effect:function(_ref2){var state=_ref2.state;null!=(_ref2=void 0===(_ref2=_ref2.options.element)?"[data-popper-arrow]":_ref2)&&("string"!=typeof _ref2||(_ref2=state.elements.popper.querySelector(_ref2)))&&contains(state.elements.popper,_ref2)&&(state.elements.arrow=_ref2)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mapToStyles(_ref2){var offsetParent,widthProp,popper=_ref2.popper,popperRect=_ref2.popperRect,placement=_ref2.placement,variation=_ref2.variation,offsets=_ref2.offsets,position=_ref2.position,gpuAcceleration=_ref2.gpuAcceleration,adaptive=_ref2.adaptive,roundOffsets=_ref2.roundOffsets,_ref2=_ref2.isFixed,_offsets$x=offsets.x,_offsets$x=void 0===_offsets$x?0:_offsets$x,_offsets$y=offsets.y,_offsets$y=void 0===_offsets$y?0:_offsets$y,_ref3="function"==typeof roundOffsets?roundOffsets({x:_offsets$x,y:_offsets$y}):{x:_offsets$x,y:_offsets$y},_ref3=(_offsets$x=_ref3.x,_offsets$y=_ref3.y,offsets.hasOwnProperty("x")),offsets=offsets.hasOwnProperty("y"),sideX=left,sideY=enums_top,win=window,popper=(adaptive&&(heightProp="clientHeight",widthProp="clientWidth",(offsetParent=getOffsetParent(popper))===getWindow(popper)&&"static"!==getComputedStyle(offsetParent=getDocumentElement(popper)).position&&"absolute"===position&&(heightProp="scrollHeight",widthProp="scrollWidth"),placement!==enums_top&&(placement!==left&&placement!==right||variation!==end)||(sideY=bottom,_offsets$y=(_offsets$y-((_ref2&&offsetParent===win&&win.visualViewport?win.visualViewport.height:offsetParent[heightProp])-popperRect.height))*(gpuAcceleration?1:-1)),placement!==left&&(placement!==enums_top&&placement!==bottom||variation!==end)||(sideX=right,_offsets$x=(_offsets$x-((_ref2&&offsetParent===win&&win.visualViewport?win.visualViewport.width:offsetParent[widthProp])-popperRect.width))*(gpuAcceleration?1:-1))),Object.assign({position:position},adaptive&&unsetSides)),heightProp=!0===roundOffsets?function(_ref){var x=_ref.x,_ref=_ref.y,dpr=window.devicePixelRatio||1;return{x:round(x*dpr)/dpr||0,y:round(_ref*dpr)/dpr||0}}({x:_offsets$x,y:_offsets$y}):{x:_offsets$x,y:_offsets$y};return _offsets$x=heightProp.x,_offsets$y=heightProp.y,gpuAcceleration?Object.assign({},popper,((placement={})[sideY]=offsets?"0":"",placement[sideX]=_ref3?"0":"",placement.transform=(win.devicePixelRatio||1)<=1?"translate("+_offsets$x+"px, "+_offsets$y+"px)":"translate3d("+_offsets$x+"px, "+_offsets$y+"px, 0)",placement)):Object.assign({},popper,((variation={})[sideY]=offsets?_offsets$y+"px":"",variation[sideX]=_ref3?_offsets$x+"px":"",variation.transform="",variation))}const modifiers_computeStyles={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_ref5){var state=_ref5.state,_ref5=_ref5.options,_options$gpuAccelerat=void 0===(_options$gpuAccelerat=_ref5.gpuAcceleration)||_options$gpuAccelerat,_options$adaptive=void 0===(_options$adaptive=_ref5.adaptive)||_options$adaptive,_ref5=void 0===(_ref5=_ref5.roundOffsets)||_ref5,_options$gpuAccelerat={placement:state.placement.split("-")[0],variation:state.placement.split("-")[1],popper:state.elements.popper,popperRect:state.rects.popper,gpuAcceleration:_options$gpuAccelerat,isFixed:"fixed"===state.options.strategy};null!=state.modifiersData.popperOffsets&&(state.styles.popper=Object.assign({},state.styles.popper,mapToStyles(Object.assign({},_options$gpuAccelerat,{offsets:state.modifiersData.popperOffsets,position:state.options.strategy,adaptive:_options$adaptive,roundOffsets:_ref5})))),null!=state.modifiersData.arrow&&(state.styles.arrow=Object.assign({},state.styles.arrow,mapToStyles(Object.assign({},_options$gpuAccelerat,{offsets:state.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_ref5})))),state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-placement":state.placement})},data:{}};var passive={passive:!0};const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_ref){var state=_ref.state,instance=_ref.instance,_options$scroll=(_ref=_ref.options).scroll,scroll=void 0===_options$scroll||_options$scroll,resize=void 0===(_options$scroll=_ref.resize)||_options$scroll,window=getWindow(state.elements.popper),scrollParents=[].concat(state.scrollParents.reference,state.scrollParents.popper);return scroll&&scrollParents.forEach(function(scrollParent){scrollParent.addEventListener("scroll",instance.update,passive)}),resize&&window.addEventListener("resize",instance.update,passive),function(){scroll&&scrollParents.forEach(function(scrollParent){scrollParent.removeEventListener("scroll",instance.update,passive)}),resize&&window.removeEventListener("resize",instance.update,passive)}},data:{}};var hash={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}var getOppositeVariationPlacement_hash={start:"end",end:"start"};function getOppositeVariationPlacement(placement){return placement.replace(/start|end/g,function(matched){return getOppositeVariationPlacement_hash[matched]})}function getWindowScroll(node){node=getWindow(node);return{scrollLeft:node.pageXOffset,scrollTop:node.pageYOffset}}function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getWindowScroll(element).scrollLeft}function isScrollParent(element){var element=getComputedStyle(element),overflow=element.overflow,overflowX=element.overflowX,element=element.overflowY;return/auto|scroll|overlay|hidden/.test(overflow+element+overflowX)}function listScrollParents(element,list){void 0===list&&(list=[]);var scrollParent=function getScrollParent(node){return 0<=["html","body","#document"].indexOf(getNodeName(node))?node.ownerDocument.body:isHTMLElement(node)&&isScrollParent(node)?node:getScrollParent(getParentNode(node))}(element),element=scrollParent===(null==(element=element.ownerDocument)?void 0:element.body),win=getWindow(scrollParent),win=element?[win].concat(win.visualViewport||[],isScrollParent(scrollParent)?scrollParent:[]):scrollParent,scrollParent=list.concat(win);return element?scrollParent:scrollParent.concat(listScrollParents(getParentNode(win)))}function rectToClientRect(rect){return Object.assign({},rect,{left:rect.x,top:rect.y,right:rect.x+rect.width,bottom:rect.y+rect.height})}function getClientRectFromMixedType(element,clippingParent,strategy){return clippingParent===viewport?rectToClientRect(function(element,strategy){var layoutViewport,win=getWindow(element),html=getDocumentElement(element),win=win.visualViewport,width=html.clientWidth,html=html.clientHeight,x=0,y=0;return win&&(width=win.width,html=win.height,((layoutViewport=isLayoutViewport())||!layoutViewport&&"fixed"===strategy)&&(x=win.offsetLeft,y=win.offsetTop)),{width:width,height:html,x:x+getWindowScrollBarX(element),y:y}}(element,strategy)):isElement(clippingParent)?function(element,strategy){return(strategy=getBoundingClientRect(element,!1,"fixed"===strategy)).top=strategy.top+element.clientTop,strategy.left=strategy.left+element.clientLeft,strategy.bottom=strategy.top+element.clientHeight,strategy.right=strategy.left+element.clientWidth,strategy.width=element.clientWidth,strategy.height=element.clientHeight,strategy.x=strategy.left,strategy.y=strategy.top,strategy}(clippingParent,strategy):rectToClientRect(function(element){var html=getDocumentElement(element),winScroll=getWindowScroll(element),_element$ownerDocumen=null==(_element$ownerDocumen=element.ownerDocument)?void 0:_element$ownerDocumen.body,width=math_max(html.scrollWidth,html.clientWidth,_element$ownerDocumen?_element$ownerDocumen.scrollWidth:0,_element$ownerDocumen?_element$ownerDocumen.clientWidth:0),height=math_max(html.scrollHeight,html.clientHeight,_element$ownerDocumen?_element$ownerDocumen.scrollHeight:0,_element$ownerDocumen?_element$ownerDocumen.clientHeight:0),element=-winScroll.scrollLeft+getWindowScrollBarX(element),winScroll=-winScroll.scrollTop;return"rtl"===getComputedStyle(_element$ownerDocumen||html).direction&&(element+=math_max(html.clientWidth,_element$ownerDocumen?_element$ownerDocumen.clientWidth:0)-width),{width:width,height:height,x:element,y:winScroll}}(getDocumentElement(element)))}function getClippingRect(element,boundary,rootBoundary,strategy){boundary="clippingParents"===boundary?function(element){var clippingParents=listScrollParents(getParentNode(element)),clipperElement=0<=["absolute","fixed"].indexOf(getComputedStyle(element).position)&&isHTMLElement(element)?getOffsetParent(element):element;return isElement(clipperElement)?clippingParents.filter(function(clippingParent){return isElement(clippingParent)&&contains(clippingParent,clipperElement)&&"body"!==getNodeName(clippingParent)}):[]}(element):[].concat(boundary),boundary=[].concat(boundary,[rootBoundary]),rootBoundary=boundary[0],boundary=boundary.reduce(function(accRect,clippingParent){clippingParent=getClientRectFromMixedType(element,clippingParent,strategy);return accRect.top=math_max(clippingParent.top,accRect.top),accRect.right=math_min(clippingParent.right,accRect.right),accRect.bottom=math_min(clippingParent.bottom,accRect.bottom),accRect.left=math_max(clippingParent.left,accRect.left),accRect},getClientRectFromMixedType(element,rootBoundary,strategy));return boundary.width=boundary.right-boundary.left,boundary.height=boundary.bottom-boundary.top,boundary.x=boundary.left,boundary.y=boundary.top,boundary}function computeOffsets(_ref){var offsets,reference=_ref.reference,element=_ref.element,_ref=_ref.placement,basePlacement=_ref?_ref.split("-")[0]:null,_ref=_ref?_ref.split("-")[1]:null,commonX=reference.x+reference.width/2-element.width/2,commonY=reference.y+reference.height/2-element.height/2;switch(basePlacement){case enums_top:offsets={x:commonX,y:reference.y-element.height};break;case bottom:offsets={x:commonX,y:reference.y+reference.height};break;case right:offsets={x:reference.x+reference.width,y:commonY};break;case left:offsets={x:reference.x-element.width,y:commonY};break;default:offsets={x:reference.x,y:reference.y}}var mainAxis=basePlacement?getMainAxisFromPlacement(basePlacement):null;if(null!=mainAxis){var len="y"===mainAxis?"height":"width";switch(_ref){case start:offsets[mainAxis]=offsets[mainAxis]-(reference[len]/2-element[len]/2);break;case end:offsets[mainAxis]=offsets[mainAxis]+(reference[len]/2-element[len]/2)}}return offsets}function detectOverflow(state,options){var offset,options=options=void 0===options?{}:options,_options$placement=options.placement,_options$placement=void 0===_options$placement?state.placement:_options$placement,_options$strategy=options.strategy,_options$strategy=void 0===_options$strategy?state.strategy:_options$strategy,_options$boundary=options.boundary,_options$boundary=void 0===_options$boundary?clippingParents:_options$boundary,_options$rootBoundary=options.rootBoundary,_options$rootBoundary=void 0===_options$rootBoundary?viewport:_options$rootBoundary,_options$elementConte=options.elementContext,_options$elementConte=void 0===_options$elementConte?popper:_options$elementConte,_options$altBoundary=options.altBoundary,_options$altBoundary=void 0!==_options$altBoundary&&_options$altBoundary,options=options.padding,options=void 0===options?0:options,options=mergePaddingObject("number"!=typeof options?options:expandToHashMap(options,basePlacements)),popperRect=state.rects.popper,_options$altBoundary=state.elements[_options$altBoundary?_options$elementConte===popper?reference:popper:_options$elementConte],_options$altBoundary=getClippingRect(isElement(_options$altBoundary)?_options$altBoundary:_options$altBoundary.contextElement||getDocumentElement(state.elements.popper),_options$boundary,_options$rootBoundary,_options$strategy),_options$boundary=getBoundingClientRect(state.elements.reference),_options$rootBoundary=computeOffsets({reference:_options$boundary,element:popperRect,strategy:"absolute",placement:_options$placement}),_options$strategy=rectToClientRect(Object.assign({},popperRect,_options$rootBoundary)),popperRect=_options$elementConte===popper?_options$strategy:_options$boundary,overflowOffsets={top:_options$altBoundary.top-popperRect.top+options.top,bottom:popperRect.bottom-_options$altBoundary.bottom+options.bottom,left:_options$altBoundary.left-popperRect.left+options.left,right:popperRect.right-_options$altBoundary.right+options.right},_options$rootBoundary=state.modifiersData.offset;return _options$elementConte===popper&&_options$rootBoundary&&(offset=_options$rootBoundary[_options$placement],Object.keys(overflowOffsets).forEach(function(key){var multiply=0<=[right,bottom].indexOf(key)?1:-1,axis=0<=[enums_top,bottom].indexOf(key)?"y":"x";overflowOffsets[key]+=offset[axis]*multiply})),overflowOffsets}const modifiers_flip={name:"flip",enabled:!0,phase:"main",fn:function(_ref){var state=_ref.state,options=_ref.options,_ref=_ref.name;if(!state.modifiersData[_ref]._skip){for(var _options$mainAxis=options.mainAxis,checkMainAxis=void 0===_options$mainAxis||_options$mainAxis,_options$mainAxis=options.altAxis,checkAltAxis=void 0===_options$mainAxis||_options$mainAxis,_options$mainAxis=options.fallbackPlacements,padding=options.padding,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,_options$flipVariatio=options.flipVariations,flipVariations=void 0===_options$flipVariatio||_options$flipVariatio,allowedAutoPlacements=options.allowedAutoPlacements,_options$flipVariatio=state.options.placement,options=_options$flipVariatio.split("-")[0],_options$mainAxis=_options$mainAxis||(options===_options$flipVariatio||!flipVariations?[getOppositePlacement(_options$flipVariatio)]:function(placement){var oppositePlacement;return placement.split("-")[0]===auto?[]:(oppositePlacement=getOppositePlacement(placement),[getOppositeVariationPlacement(placement),oppositePlacement,getOppositeVariationPlacement(oppositePlacement)])}(_options$flipVariatio)),placements=[_options$flipVariatio].concat(_options$mainAxis).reduce(function(acc,placement){return acc.concat(placement.split("-")[0]===auto?function(state,options){var placement=(options=options=void 0===options?{}:options).placement,boundary=options.boundary,rootBoundary=options.rootBoundary,padding=options.padding,flipVariations=options.flipVariations,allowedAutoPlacements=void 0===(options=options.allowedAutoPlacements)?enums_placements:options,variation=placement.split("-")[1],overflows=(placement=0===(placement=(options=variation?flipVariations?variationPlacements:variationPlacements.filter(function(placement){return placement.split("-")[1]===variation}):basePlacements).filter(function(placement){return 0<=allowedAutoPlacements.indexOf(placement)})).length?options:placement).reduce(function(acc,placement){return acc[placement]=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding})[placement.split("-")[0]],acc},{});return Object.keys(overflows).sort(function(a,b){return overflows[a]-overflows[b]})}(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,padding:padding,flipVariations:flipVariations,allowedAutoPlacements:allowedAutoPlacements}):placement)},[]),referenceRect=state.rects.reference,popperRect=state.rects.popper,checksMap=new Map,makeFallbackChecks=!0,firstFittingPlacement=placements[0],i=0;i<placements.length;i++){var placement=placements[i],_basePlacement=placement.split("-")[0],isStartVariation=placement.split("-")[1]===start,isVertical=0<=[enums_top,bottom].indexOf(_basePlacement),len=isVertical?"width":"height",overflow=detectOverflow(state,{placement:placement,boundary:boundary,rootBoundary:rootBoundary,altBoundary:altBoundary,padding:padding}),isVertical=isVertical?isStartVariation?right:left:isStartVariation?bottom:enums_top,isStartVariation=(referenceRect[len]>popperRect[len]&&(isVertical=getOppositePlacement(isVertical)),getOppositePlacement(isVertical)),len=[];if(checkMainAxis&&len.push(overflow[_basePlacement]<=0),checkAltAxis&&len.push(overflow[isVertical]<=0,overflow[isStartVariation]<=0),len.every(function(check){return check})){firstFittingPlacement=placement,makeFallbackChecks=!1;break}checksMap.set(placement,len)}if(makeFallbackChecks)for(var _i=flipVariations?3:1;0<_i;_i--)if("break"===function(_i){var fittingPlacement=placements.find(function(placement){placement=checksMap.get(placement);if(placement)return placement.slice(0,_i).every(function(check){return check})});if(fittingPlacement)return firstFittingPlacement=fittingPlacement,"break"}(_i))break;state.placement!==firstFittingPlacement&&(state.modifiersData[_ref]._skip=!0,state.placement=firstFittingPlacement,state.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(overflow,rect,preventedOffsets){return{top:overflow.top-rect.height-(preventedOffsets=void 0===preventedOffsets?{x:0,y:0}:preventedOffsets).y,right:overflow.right-rect.width+preventedOffsets.x,bottom:overflow.bottom-rect.height+preventedOffsets.y,left:overflow.left-rect.width-preventedOffsets.x}}function isAnySideFullyClipped(overflow){return[enums_top,right,bottom,left].some(function(side){return 0<=overflow[side]})}const modifiers_hide={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_ref){var state=_ref.state,_ref=_ref.name,referenceRect=state.rects.reference,popperRect=state.rects.popper,preventedOffsets=state.modifiersData.preventOverflow,referenceOverflow=detectOverflow(state,{elementContext:"reference"}),popperAltOverflow=detectOverflow(state,{altBoundary:!0}),referenceOverflow=getSideOffsets(referenceOverflow,referenceRect),referenceRect=getSideOffsets(popperAltOverflow,popperRect,preventedOffsets),popperAltOverflow=isAnySideFullyClipped(referenceOverflow),popperRect=isAnySideFullyClipped(referenceRect);state.modifiersData[_ref]={referenceClippingOffsets:referenceOverflow,popperEscapeOffsets:referenceRect,isReferenceHidden:popperAltOverflow,hasPopperEscaped:popperRect},state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-reference-hidden":popperAltOverflow,"data-popper-escaped":popperRect})}};const modifiers_offset={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_ref2){var state=_ref2.state,options=_ref2.options,_ref2=_ref2.name,offset=void 0===(options=options.offset)?[0,0]:options,options=enums_placements.reduce(function(acc,placement){return acc[placement]=function(placement,rects,offset){var basePlacement=placement.split("-")[0],invertDistance=0<=[left,enums_top].indexOf(basePlacement)?-1:1,placement=(rects="function"==typeof offset?offset(Object.assign({},rects,{placement:placement})):offset)[0]||0,offset=(rects[1]||0)*invertDistance;return 0<=[left,right].indexOf(basePlacement)?{x:offset,y:placement}:{x:placement,y:offset}}(placement,state.rects,offset),acc},{}),x=(_data$state$placement=options[state.placement]).x,_data$state$placement=_data$state$placement.y;null!=state.modifiersData.popperOffsets&&(state.modifiersData.popperOffsets.x+=x,state.modifiersData.popperOffsets.y+=_data$state$placement),state.modifiersData[_ref2]=options}};const modifiers_popperOffsets={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_ref){var state=_ref.state,_ref=_ref.name;state.modifiersData[_ref]=computeOffsets({reference:state.rects.reference,element:state.rects.popper,strategy:"absolute",placement:state.placement})},data:{}};const modifiers_preventOverflow={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_ref){var offset,altSide,additive,mainSide,arrowPaddingObject,minLen,arrowElement,min,max,state=_ref.state,options=_ref.options,_ref=_ref.name,_options$mainAxis=void 0===(_options$mainAxis=options.mainAxis)||_options$mainAxis,_options$altAxis=void 0!==(_options$altAxis=options.altAxis)&&_options$altAxis,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,padding=options.padding,_options$tether=void 0===(_options$tether=options.tether)||_options$tether,options=void 0===(options=options.tetherOffset)?0:options,boundary=detectOverflow(state,{boundary:boundary,rootBoundary:rootBoundary,padding:padding,altBoundary:altBoundary}),rootBoundary=state.placement.split("-")[0],altBoundary=!(padding=state.placement.split("-")[1]),mainAxis=getMainAxisFromPlacement(rootBoundary),altAxis="x"===mainAxis?"y":"x",popperOffsets=state.modifiersData.popperOffsets,referenceRect=state.rects.reference,popperRect=state.rects.popper,options="number"==typeof(options="function"==typeof options?options(Object.assign({},state.rects,{placement:state.placement})):options)?{mainAxis:options,altAxis:options}:Object.assign({mainAxis:0,altAxis:0},options),offsetModifierState=state.modifiersData.offset?state.modifiersData.offset[state.placement]:null,data={x:0,y:0};popperOffsets&&(_options$mainAxis&&(_options$mainAxis="y"===mainAxis?"height":"width",min=(offset=popperOffsets[mainAxis])+boundary[mainSide="y"===mainAxis?enums_top:left],max=offset-boundary[altSide="y"===mainAxis?bottom:right],additive=_options$tether?-popperRect[_options$mainAxis]/2:0,minLen=(padding===start?referenceRect:popperRect)[_options$mainAxis],padding=padding===start?-popperRect[_options$mainAxis]:-referenceRect[_options$mainAxis],arrowElement=state.elements.arrow,arrowElement=_options$tether&&arrowElement?getLayoutRect(arrowElement):{width:0,height:0},mainSide=(arrowPaddingObject=state.modifiersData["arrow#persistent"]?state.modifiersData["arrow#persistent"].padding:getFreshSideObject())[mainSide],arrowPaddingObject=arrowPaddingObject[altSide],altSide=within(0,referenceRect[_options$mainAxis],arrowElement[_options$mainAxis]),arrowElement=altBoundary?referenceRect[_options$mainAxis]/2-additive-altSide-mainSide-options.mainAxis:minLen-altSide-mainSide-options.mainAxis,minLen=altBoundary?-referenceRect[_options$mainAxis]/2+additive+altSide+arrowPaddingObject+options.mainAxis:padding+altSide+arrowPaddingObject+options.mainAxis,altBoundary=(mainSide=state.elements.arrow&&getOffsetParent(state.elements.arrow))?"y"===mainAxis?mainSide.clientTop||0:mainSide.clientLeft||0:0,padding=offset+minLen-(additive=null!=(_options$mainAxis=null==offsetModifierState?void 0:offsetModifierState[mainAxis])?_options$mainAxis:0),altSide=within(_options$tether?math_min(min,offset+arrowElement-additive-altBoundary):min,offset,_options$tether?math_max(max,padding):max),popperOffsets[mainAxis]=altSide,data[mainAxis]=altSide-offset),_options$altAxis&&(arrowPaddingObject="y"==altAxis?"height":"width",minLen=(mainSide=popperOffsets[altAxis])+boundary["x"===mainAxis?enums_top:left],_options$mainAxis=mainSide-boundary["x"===mainAxis?bottom:right],arrowElement=-1!==[enums_top,left].indexOf(rootBoundary),altBoundary=null!=(additive=null==offsetModifierState?void 0:offsetModifierState[altAxis])?additive:0,min=arrowElement?minLen:mainSide-referenceRect[arrowPaddingObject]-popperRect[arrowPaddingObject]-altBoundary+options.altAxis,padding=arrowElement?mainSide+referenceRect[arrowPaddingObject]+popperRect[arrowPaddingObject]-altBoundary-options.altAxis:_options$mainAxis,max=_options$tether&&arrowElement?function(min,value,max){return min=within(min,value,max),max<min?max:min}(min,mainSide,padding):within(_options$tether?min:minLen,mainSide,_options$tether?padding:_options$mainAxis),popperOffsets[altAxis]=max,data[altAxis]=max-mainSide),state.modifiersData[_ref]=data)},requiresIfExists:["offset"]};function getCompositeRect(elementOrVirtualElement,offsetParent,isFixed){void 0===isFixed&&(isFixed=!1);var isOffsetParentAnElement=isHTMLElement(offsetParent),offsetParentIsScaled=isHTMLElement(offsetParent)&&function(element){var rect=element.getBoundingClientRect(),scaleX=round(rect.width)/element.offsetWidth||1,rect=round(rect.height)/element.offsetHeight||1;return 1!==scaleX||1!==rect}(offsetParent),documentElement=getDocumentElement(offsetParent),elementOrVirtualElement=getBoundingClientRect(elementOrVirtualElement,offsetParentIsScaled,isFixed),offsetParentIsScaled={scrollLeft:0,scrollTop:0},offsets={x:0,y:0};return!isOffsetParentAnElement&&isFixed||("body"===getNodeName(offsetParent)&&!isScrollParent(documentElement)||(offsetParentIsScaled=(isOffsetParentAnElement=offsetParent)!==getWindow(isOffsetParentAnElement)&&isHTMLElement(isOffsetParentAnElement)?{scrollLeft:isOffsetParentAnElement.scrollLeft,scrollTop:isOffsetParentAnElement.scrollTop}:getWindowScroll(isOffsetParentAnElement)),isHTMLElement(offsetParent)?((offsets=getBoundingClientRect(offsetParent,!0)).x+=offsetParent.clientLeft,offsets.y+=offsetParent.clientTop):documentElement&&(offsets.x=getWindowScrollBarX(documentElement))),{x:elementOrVirtualElement.left+offsetParentIsScaled.scrollLeft-offsets.x,y:elementOrVirtualElement.top+offsetParentIsScaled.scrollTop-offsets.y,width:elementOrVirtualElement.width,height:elementOrVirtualElement.height}}function order(modifiers){var map=new Map,visited=new Set,result=[];return modifiers.forEach(function(modifier){map.set(modifier.name,modifier)}),modifiers.forEach(function(modifier){visited.has(modifier.name)||!function sort(modifier){visited.add(modifier.name),[].concat(modifier.requires||[],modifier.requiresIfExists||[]).forEach(function(dep){visited.has(dep)||(dep=map.get(dep))&&sort(dep)}),result.push(modifier)}(modifier)}),result}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return!args.some(function(element){return!(element&&"function"==typeof element.getBoundingClientRect)})}function popperGenerator(generatorOptions){var generatorOptions=generatorOptions=void 0===generatorOptions?{}:generatorOptions,_generatorOptions$def=generatorOptions.defaultModifiers,defaultModifiers=void 0===_generatorOptions$def?[]:_generatorOptions$def,_generatorOptions$def=generatorOptions.defaultOptions,defaultOptions=void 0===_generatorOptions$def?DEFAULT_OPTIONS:_generatorOptions$def;return function(reference,popper,options){void 0===options&&(options=defaultOptions);var fn,pending,state={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,defaultOptions),modifiersData:{},elements:{reference:reference,popper:popper},attributes:{},styles:{}},effectCleanupFns=[],isDestroyed=!1,instance={state:state,setOptions:function(setOptionsAction){setOptionsAction="function"==typeof setOptionsAction?setOptionsAction(state.options):setOptionsAction,cleanupModifierEffects(),state.options=Object.assign({},defaultOptions,state.options,setOptionsAction),state.scrollParents={reference:isElement(reference)?listScrollParents(reference):reference.contextElement?listScrollParents(reference.contextElement):[],popper:listScrollParents(popper)},setOptionsAction=function(modifiers){var orderedModifiers=order(modifiers);return modifierPhases.reduce(function(acc,phase){return acc.concat(orderedModifiers.filter(function(modifier){return modifier.phase===phase}))},[])}(function(modifiers){var merged=modifiers.reduce(function(merged,current){var existing=merged[current.name];return merged[current.name]=existing?Object.assign({},existing,current,{options:Object.assign({},existing.options,current.options),data:Object.assign({},existing.data,current.data)}):current,merged},{});return Object.keys(merged).map(function(key){return merged[key]})}([].concat(defaultModifiers,state.options.modifiers)));return state.orderedModifiers=setOptionsAction.filter(function(m){return m.enabled}),state.orderedModifiers.forEach(function(_ref3){var name=_ref3.name,_ref3$options=_ref3.options,_ref3=_ref3.effect;"function"==typeof _ref3&&(_ref3=_ref3({state:state,name:name,instance:instance,options:void 0===_ref3$options?{}:_ref3$options}),effectCleanupFns.push(_ref3||function(){}))}),instance.update()},forceUpdate:function(){if(!isDestroyed){var _state$elements=state.elements,reference=_state$elements.reference,_state$elements=_state$elements.popper;if(areValidElements(reference,_state$elements)){state.rects={reference:getCompositeRect(reference,getOffsetParent(_state$elements),"fixed"===state.options.strategy),popper:getLayoutRect(_state$elements)},state.reset=!1,state.placement=state.options.placement,state.orderedModifiers.forEach(function(modifier){return state.modifiersData[modifier.name]=Object.assign({},modifier.data)});for(var fn,_state$orderedModifie2,_state$orderedModifie,index=0;index<state.orderedModifiers.length;index++)!0===state.reset?(state.reset=!1,index=-1):(fn=(_state$orderedModifie=state.orderedModifiers[index]).fn,_state$orderedModifie2=_state$orderedModifie.options,_state$orderedModifie=_state$orderedModifie.name,"function"==typeof fn&&(state=fn({state:state,options:void 0===_state$orderedModifie2?{}:_state$orderedModifie2,name:_state$orderedModifie,instance:instance})||state))}}},update:(fn=function(){return new Promise(function(resolve){instance.forceUpdate(),resolve(state)})},function(){return pending=pending||new Promise(function(resolve){Promise.resolve().then(function(){pending=void 0,resolve(fn())})})}),destroy:function(){cleanupModifierEffects(),isDestroyed=!0}};return areValidElements(reference,popper)&&instance.setOptions(options).then(function(state){!isDestroyed&&options.onFirstUpdate&&options.onFirstUpdate(state)}),instance;function cleanupModifierEffects(){effectCleanupFns.forEach(function(fn){return fn()}),effectCleanupFns=[]}}}var createPopper=popperGenerator(),popper_createPopper=popperGenerator({defaultModifiers:[eventListeners,modifiers_popperOffsets,modifiers_computeStyles,modifiers_applyStyles,modifiers_offset,modifiers_flip,modifiers_preventOverflow,modifiers_arrow,modifiers_hide]}),popper_lite_createPopper=popperGenerator({defaultModifiers:[eventListeners,modifiers_popperOffsets,modifiers_computeStyles,modifiers_applyStyles]})},708:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__)},931:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Application:()=>Application,Context:()=>Context,Controller:()=>Controller,defaultSchema:()=>defaultSchema});var EventListener=function(){function EventListener(eventTarget,eventName,eventOptions){this.eventTarget=eventTarget,this.eventName=eventName,this.eventOptions=eventOptions,this.unorderedBindings=new Set}return EventListener.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)},EventListener.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)},EventListener.prototype.bindingConnected=function(binding){this.unorderedBindings.add(binding)},EventListener.prototype.bindingDisconnected=function(binding){this.unorderedBindings.delete(binding)},EventListener.prototype.handleEvent=function(event){for(var extendedEvent=function(event){{var stopImmediatePropagation_1;return"immediatePropagationStopped"in event?event:(stopImmediatePropagation_1=event.stopImmediatePropagation,Object.assign(event,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,stopImmediatePropagation_1.call(this)}}))}}(event),_i=0,_a=this.bindings;_i<_a.length;_i++){var binding=_a[_i];if(extendedEvent.immediatePropagationStopped)break;binding.handleEvent(extendedEvent)}},Object.defineProperty(EventListener.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(left,right){left=left.index,right=right.index;return left<right?-1:right<left?1:0})},enumerable:!1,configurable:!0}),EventListener}();var Dispatcher=function(){function Dispatcher(application){this.application=application,this.eventListenerMaps=new Map,this.started=!1}return Dispatcher.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(eventListener){return eventListener.connect()}))},Dispatcher.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(eventListener){return eventListener.disconnect()}))},Object.defineProperty(Dispatcher.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(listeners,map){return listeners.concat(Array.from(map.values()))},[])},enumerable:!1,configurable:!0}),Dispatcher.prototype.bindingConnected=function(binding){this.fetchEventListenerForBinding(binding).bindingConnected(binding)},Dispatcher.prototype.bindingDisconnected=function(binding){this.fetchEventListenerForBinding(binding).bindingDisconnected(binding)},Dispatcher.prototype.handleError=function(error,message,detail){this.application.handleError(error,"Error "+message,detail=void 0===detail?{}:detail)},Dispatcher.prototype.fetchEventListenerForBinding=function(binding){var eventTarget=binding.eventTarget,eventName=binding.eventName,binding=binding.eventOptions;return this.fetchEventListener(eventTarget,eventName,binding)},Dispatcher.prototype.fetchEventListener=function(eventTarget,eventName,eventOptions){var eventListenerMap=this.fetchEventListenerMapForEventTarget(eventTarget),cacheKey=this.cacheKey(eventName,eventOptions),eventListener=eventListenerMap.get(cacheKey);return eventListener||(eventListener=this.createEventListener(eventTarget,eventName,eventOptions),eventListenerMap.set(cacheKey,eventListener)),eventListener},Dispatcher.prototype.createEventListener=function(eventTarget,eventName,eventOptions){eventTarget=new EventListener(eventTarget,eventName,eventOptions);return this.started&&eventTarget.connect(),eventTarget},Dispatcher.prototype.fetchEventListenerMapForEventTarget=function(eventTarget){var eventListenerMap=this.eventListenerMaps.get(eventTarget);return eventListenerMap||(eventListenerMap=new Map,this.eventListenerMaps.set(eventTarget,eventListenerMap)),eventListenerMap},Dispatcher.prototype.cacheKey=function(eventName,eventOptions){var parts=[eventName];return Object.keys(eventOptions).sort().forEach(function(key){parts.push((eventOptions[key]?"":"!")+key)}),parts.join(":")},Dispatcher}(),descriptorPattern=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function parseActionDescriptorString(descriptorString){var eventTargetName,descriptorString=descriptorString.trim().match(descriptorPattern)||[];return{eventTarget:"window"==(eventTargetName=descriptorString[4])?window:"document"==eventTargetName?document:void 0,eventName:descriptorString[2],eventOptions:descriptorString[9]?descriptorString[9].split(":").reduce(function(options,token){return Object.assign(options,((options={})[token.replace(/^!/,"")]=!/^!/.test(token),options))},{}):{},identifier:descriptorString[5],methodName:descriptorString[7]}}var Action=function(){function Action(element,index,descriptor){this.element=element,this.index=index,this.eventTarget=descriptor.eventTarget||element,this.eventName=descriptor.eventName||function(element){var tagName=element.tagName.toLowerCase();if(tagName in defaultEventNames)return defaultEventNames[tagName](element)}(element)||error("missing event name"),this.eventOptions=descriptor.eventOptions||{},this.identifier=descriptor.identifier||error("missing identifier"),this.methodName=descriptor.methodName||error("missing method name")}return Action.forToken=function(token){return new this(token.element,token.index,parseActionDescriptorString(token.content))},Action.prototype.toString=function(){var eventNameSuffix=this.eventTargetName?"@"+this.eventTargetName:"";return this.eventName+eventNameSuffix+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(Action.prototype,"eventTargetName",{get:function(){return(eventTarget=this.eventTarget)==window?"window":eventTarget==document?"document":void 0;var eventTarget},enumerable:!1,configurable:!0}),Action}(),defaultEventNames={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"input"},select:function(e){return"change"},textarea:function(e){return"input"}};function error(message){throw new Error(message)}var Binding=function(){function Binding(context,action){this.context=context,this.action=action}return Object.defineProperty(Binding.prototype,"index",{get:function(){return this.action.index},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"eventOptions",{get:function(){return this.action.eventOptions},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),Binding.prototype.handleEvent=function(event){this.willBeInvokedByEvent(event)&&this.invokeWithEvent(event)},Object.defineProperty(Binding.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"method",{get:function(){var method=this.controller[this.methodName];if("function"==typeof method)return method;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!1,configurable:!0}),Binding.prototype.invokeWithEvent=function(event){try{this.method.call(this.controller,event)}catch(error){var identifier=this.identifier,controller=this.controller,element=this.element,index=this.index;this.context.handleError(error,'invoking action "'+this.action+'"',{identifier:identifier,controller:controller,element:element,index:index,event:event})}},Binding.prototype.willBeInvokedByEvent=function(event){event=event.target;return this.element===event||(event instanceof Element&&this.element.contains(event)?this.scope.containsElement(event):this.scope.containsElement(this.action.element))},Object.defineProperty(Binding.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(Binding.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),Binding}(),ElementObserver=function(){function ElementObserver(element,delegate){var _this=this;this.element=element,this.started=!1,this.delegate=delegate,this.elements=new Set,this.mutationObserver=new MutationObserver(function(mutations){return _this.processMutations(mutations)})}return ElementObserver.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},ElementObserver.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},ElementObserver.prototype.refresh=function(){if(this.started){for(var matches=new Set(this.matchElementsInTree()),_i=0,_a=Array.from(this.elements);_i<_a.length;_i++){var element=_a[_i];matches.has(element)||this.removeElement(element)}for(var _b=0,_c=Array.from(matches);_b<_c.length;_b++){element=_c[_b];this.addElement(element)}}},ElementObserver.prototype.processMutations=function(mutations){if(this.started)for(var _i=0,mutations_1=mutations;_i<mutations_1.length;_i++){var mutation=mutations_1[_i];this.processMutation(mutation)}},ElementObserver.prototype.processMutation=function(mutation){"attributes"==mutation.type?this.processAttributeChange(mutation.target,mutation.attributeName):"childList"==mutation.type&&(this.processRemovedNodes(mutation.removedNodes),this.processAddedNodes(mutation.addedNodes))},ElementObserver.prototype.processAttributeChange=function(node,attributeName){this.elements.has(node)?this.delegate.elementAttributeChanged&&this.matchElement(node)?this.delegate.elementAttributeChanged(node,attributeName):this.removeElement(node):this.matchElement(node)&&this.addElement(node)},ElementObserver.prototype.processRemovedNodes=function(nodes){for(var _i=0,_a=Array.from(nodes);_i<_a.length;_i++){var node=_a[_i],node=this.elementFromNode(node);node&&this.processTree(node,this.removeElement)}},ElementObserver.prototype.processAddedNodes=function(nodes){for(var _i=0,_a=Array.from(nodes);_i<_a.length;_i++){var node=_a[_i],node=this.elementFromNode(node);node&&this.elementIsActive(node)&&this.processTree(node,this.addElement)}},ElementObserver.prototype.matchElement=function(element){return this.delegate.matchElement(element)},ElementObserver.prototype.matchElementsInTree=function(tree){return void 0===tree&&(tree=this.element),this.delegate.matchElementsInTree(tree)},ElementObserver.prototype.processTree=function(tree,processor){for(var _i=0,_a=this.matchElementsInTree(tree);_i<_a.length;_i++){var element=_a[_i];processor.call(this,element)}},ElementObserver.prototype.elementFromNode=function(node){if(node.nodeType==Node.ELEMENT_NODE)return node},ElementObserver.prototype.elementIsActive=function(element){return element.isConnected==this.element.isConnected&&this.element.contains(element)},ElementObserver.prototype.addElement=function(element){this.elements.has(element)||this.elementIsActive(element)&&(this.elements.add(element),this.delegate.elementMatched&&this.delegate.elementMatched(element))},ElementObserver.prototype.removeElement=function(element){this.elements.has(element)&&(this.elements.delete(element),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(element))},ElementObserver}(),AttributeObserver=function(){function AttributeObserver(element,attributeName,delegate){this.attributeName=attributeName,this.delegate=delegate,this.elementObserver=new ElementObserver(element,this)}return Object.defineProperty(AttributeObserver.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(AttributeObserver.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!1,configurable:!0}),AttributeObserver.prototype.start=function(){this.elementObserver.start()},AttributeObserver.prototype.stop=function(){this.elementObserver.stop()},AttributeObserver.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(AttributeObserver.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!1,configurable:!0}),AttributeObserver.prototype.matchElement=function(element){return element.hasAttribute(this.attributeName)},AttributeObserver.prototype.matchElementsInTree=function(tree){var match=this.matchElement(tree)?[tree]:[],tree=Array.from(tree.querySelectorAll(this.selector));return match.concat(tree)},AttributeObserver.prototype.elementMatched=function(element){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(element,this.attributeName)},AttributeObserver.prototype.elementUnmatched=function(element){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(element,this.attributeName)},AttributeObserver.prototype.elementAttributeChanged=function(element,attributeName){this.delegate.elementAttributeValueChanged&&this.attributeName==attributeName&&this.delegate.elementAttributeValueChanged(element,attributeName)},AttributeObserver}(),StringMapObserver=function(){function StringMapObserver(element,delegate){var _this=this;this.element=element,this.delegate=delegate,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(function(mutations){return _this.processMutations(mutations)})}return StringMapObserver.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0}),this.refresh())},StringMapObserver.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},StringMapObserver.prototype.refresh=function(){if(this.started)for(var _i=0,_a=this.knownAttributeNames;_i<_a.length;_i++){var attributeName=_a[_i];this.refreshAttribute(attributeName)}},StringMapObserver.prototype.processMutations=function(mutations){if(this.started)for(var _i=0,mutations_1=mutations;_i<mutations_1.length;_i++){var mutation=mutations_1[_i];this.processMutation(mutation)}},StringMapObserver.prototype.processMutation=function(mutation){mutation=mutation.attributeName;mutation&&this.refreshAttribute(mutation)},StringMapObserver.prototype.refreshAttribute=function(attributeName){var value,key=this.delegate.getStringMapKeyForAttribute(attributeName);null!=key&&(this.stringMap.has(attributeName)||this.stringMapKeyAdded(key,attributeName),value=this.element.getAttribute(attributeName),this.stringMap.get(attributeName)!=value&&this.stringMapValueChanged(value,key),null==value?(this.stringMap.delete(attributeName),this.stringMapKeyRemoved(key,attributeName)):this.stringMap.set(attributeName,value))},StringMapObserver.prototype.stringMapKeyAdded=function(key,attributeName){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(key,attributeName)},StringMapObserver.prototype.stringMapValueChanged=function(value,key){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(value,key)},StringMapObserver.prototype.stringMapKeyRemoved=function(key,attributeName){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(key,attributeName)},Object.defineProperty(StringMapObserver.prototype,"knownAttributeNames",{get:function(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))},enumerable:!1,configurable:!0}),Object.defineProperty(StringMapObserver.prototype,"currentAttributeNames",{get:function(){return Array.from(this.element.attributes).map(function(attribute){return attribute.name})},enumerable:!1,configurable:!0}),Object.defineProperty(StringMapObserver.prototype,"recordedAttributeNames",{get:function(){return Array.from(this.stringMap.keys())},enumerable:!1,configurable:!0}),StringMapObserver}();function add(map,key,value){fetch(map,key).add(value)}function del(map,key,value){fetch(map,key).delete(value),function(map,key){var values=map.get(key);null!=values&&0==values.size&&map.delete(key)}(map,key)}function fetch(map,key){var values=map.get(key);return values||(values=new Set,map.set(key,values)),values}var extendStatics,Multimap=function(){function Multimap(){this.valuesByKey=new Map}return Object.defineProperty(Multimap.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(values,set){return values.concat(Array.from(set))},[])},enumerable:!1,configurable:!0}),Object.defineProperty(Multimap.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(size,set){return size+set.size},0)},enumerable:!1,configurable:!0}),Multimap.prototype.add=function(key,value){add(this.valuesByKey,key,value)},Multimap.prototype.delete=function(key,value){del(this.valuesByKey,key,value)},Multimap.prototype.has=function(key,value){key=this.valuesByKey.get(key);return null!=key&&key.has(value)},Multimap.prototype.hasKey=function(key){return this.valuesByKey.has(key)},Multimap.prototype.hasValue=function(value){return Array.from(this.valuesByKey.values()).some(function(set){return set.has(value)})},Multimap.prototype.getValuesForKey=function(key){key=this.valuesByKey.get(key);return key?Array.from(key):[]},Multimap.prototype.getKeysForValue=function(value){return Array.from(this.valuesByKey).filter(function(_a){_a[0];return _a[1].has(value)}).map(function(_a){var key=_a[0];_a[1];return key})},Multimap}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),TokenListObserver=(function(_super){function IndexedMultimap(){var _this=_super.call(this)||this;return _this.keysByValue=new Map,_this}__extends(IndexedMultimap,_super),Object.defineProperty(IndexedMultimap.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!1,configurable:!0}),IndexedMultimap.prototype.add=function(key,value){_super.prototype.add.call(this,key,value),add(this.keysByValue,value,key)},IndexedMultimap.prototype.delete=function(key,value){_super.prototype.delete.call(this,key,value),del(this.keysByValue,value,key)},IndexedMultimap.prototype.hasValue=function(value){return this.keysByValue.has(value)},IndexedMultimap.prototype.getKeysForValue=function(value){value=this.keysByValue.get(value);return value?Array.from(value):[]}}(Multimap),function(){function TokenListObserver(element,attributeName,delegate){this.attributeObserver=new AttributeObserver(element,attributeName,this),this.delegate=delegate,this.tokensByElement=new Multimap}return Object.defineProperty(TokenListObserver.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!1,configurable:!0}),TokenListObserver.prototype.start=function(){this.attributeObserver.start()},TokenListObserver.prototype.stop=function(){this.attributeObserver.stop()},TokenListObserver.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(TokenListObserver.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(TokenListObserver.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!1,configurable:!0}),TokenListObserver.prototype.elementMatchedAttribute=function(element){this.tokensMatched(this.readTokensForElement(element))},TokenListObserver.prototype.elementAttributeValueChanged=function(element){var element=this.refreshTokensForElement(element),unmatchedTokens=element[0],element=element[1];this.tokensUnmatched(unmatchedTokens),this.tokensMatched(element)},TokenListObserver.prototype.elementUnmatchedAttribute=function(element){this.tokensUnmatched(this.tokensByElement.getValuesForKey(element))},TokenListObserver.prototype.tokensMatched=function(tokens){var _this=this;tokens.forEach(function(token){return _this.tokenMatched(token)})},TokenListObserver.prototype.tokensUnmatched=function(tokens){var _this=this;tokens.forEach(function(token){return _this.tokenUnmatched(token)})},TokenListObserver.prototype.tokenMatched=function(token){this.delegate.tokenMatched(token),this.tokensByElement.add(token.element,token)},TokenListObserver.prototype.tokenUnmatched=function(token){this.delegate.tokenUnmatched(token),this.tokensByElement.delete(token.element,token)},TokenListObserver.prototype.refreshTokensForElement=function(element){var left,right,previousTokens=this.tokensByElement.getValuesForKey(element),element=this.readTokensForElement(element),length=(left=previousTokens,right=element,length=Math.max(left.length,right.length),Array.from({length:length},function(_,index){return[left[index],right[index]]}).findIndex(function(_a){var previousToken=_a[0],_a=_a[1];return _a=_a,!((previousToken=previousToken)&&_a&&previousToken.index==_a.index&&previousToken.content==_a.content)}));return-1==length?[[],[]]:[previousTokens.slice(length),element.slice(length)]},TokenListObserver.prototype.readTokensForElement=function(element){var attributeName=this.attributeName;return function(tokenString,element,attributeName){return tokenString.trim().split(/\s+/).filter(function(content){return content.length}).map(function(content,index){return{element:element,attributeName:attributeName,content:content,index:index}})}(element.getAttribute(attributeName)||"",element,attributeName)},TokenListObserver}());var ValueListObserver=function(){function ValueListObserver(element,attributeName,delegate){this.tokenListObserver=new TokenListObserver(element,attributeName,this),this.delegate=delegate,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(ValueListObserver.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!1,configurable:!0}),ValueListObserver.prototype.start=function(){this.tokenListObserver.start()},ValueListObserver.prototype.stop=function(){this.tokenListObserver.stop()},ValueListObserver.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(ValueListObserver.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(ValueListObserver.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!1,configurable:!0}),ValueListObserver.prototype.tokenMatched=function(token){var element=token.element,value=this.fetchParseResultForToken(token).value;value&&(this.fetchValuesByTokenForElement(element).set(token,value),this.delegate.elementMatchedValue(element,value))},ValueListObserver.prototype.tokenUnmatched=function(token){var element=token.element,value=this.fetchParseResultForToken(token).value;value&&(this.fetchValuesByTokenForElement(element).delete(token),this.delegate.elementUnmatchedValue(element,value))},ValueListObserver.prototype.fetchParseResultForToken=function(token){var parseResult=this.parseResultsByToken.get(token);return parseResult||(parseResult=this.parseToken(token),this.parseResultsByToken.set(token,parseResult)),parseResult},ValueListObserver.prototype.fetchValuesByTokenForElement=function(element){var valuesByToken=this.valuesByTokenByElement.get(element);return valuesByToken||(valuesByToken=new Map,this.valuesByTokenByElement.set(element,valuesByToken)),valuesByToken},ValueListObserver.prototype.parseToken=function(token){try{return{value:this.delegate.parseValueForToken(token)}}catch(error){return{error:error}}},ValueListObserver}(),BindingObserver=function(){function BindingObserver(context,delegate){this.context=context,this.delegate=delegate,this.bindingsByAction=new Map}return BindingObserver.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new ValueListObserver(this.element,this.actionAttribute,this),this.valueListObserver.start())},BindingObserver.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(BindingObserver.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(BindingObserver.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(BindingObserver.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(BindingObserver.prototype,"schema",{get:function(){return this.context.schema},enumerable:!1,configurable:!0}),Object.defineProperty(BindingObserver.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!1,configurable:!0}),BindingObserver.prototype.connectAction=function(action){var binding=new Binding(this.context,action);this.bindingsByAction.set(action,binding),this.delegate.bindingConnected(binding)},BindingObserver.prototype.disconnectAction=function(action){var binding=this.bindingsByAction.get(action);binding&&(this.bindingsByAction.delete(action),this.delegate.bindingDisconnected(binding))},BindingObserver.prototype.disconnectAllActions=function(){var _this=this;this.bindings.forEach(function(binding){return _this.delegate.bindingDisconnected(binding)}),this.bindingsByAction.clear()},BindingObserver.prototype.parseValueForToken=function(token){token=Action.forToken(token);if(token.identifier==this.identifier)return token},BindingObserver.prototype.elementMatchedValue=function(element,action){this.connectAction(action)},BindingObserver.prototype.elementUnmatchedValue=function(element,action){this.disconnectAction(action)},BindingObserver}(),ValueObserver=function(){function ValueObserver(context,receiver){this.context=context,this.receiver=receiver,this.stringMapObserver=new StringMapObserver(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}return ValueObserver.prototype.start=function(){this.stringMapObserver.start()},ValueObserver.prototype.stop=function(){this.stringMapObserver.stop()},Object.defineProperty(ValueObserver.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(ValueObserver.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),ValueObserver.prototype.getStringMapKeyForAttribute=function(attributeName){if(attributeName in this.valueDescriptorMap)return this.valueDescriptorMap[attributeName].name},ValueObserver.prototype.stringMapValueChanged=function(attributeValue,name){this.invokeChangedCallbackForValue(name)},ValueObserver.prototype.invokeChangedCallbacksForDefaultValues=function(){for(var _i=0,_a=this.valueDescriptors;_i<_a.length;_i++){var _b=_a[_i],key=_b.key,name_1=_b.name;null==_b.defaultValue||this.controller.data.has(key)||this.invokeChangedCallbackForValue(name_1)}},ValueObserver.prototype.invokeChangedCallbackForValue=function(name){var method=this.receiver[name+"Changed"];"function"==typeof method&&(name=this.receiver[name],method.call(this.receiver,name))},Object.defineProperty(ValueObserver.prototype,"valueDescriptors",{get:function(){var valueDescriptorMap=this.valueDescriptorMap;return Object.keys(valueDescriptorMap).map(function(key){return valueDescriptorMap[key]})},enumerable:!1,configurable:!0}),ValueObserver}(),Context=function(){function Context(module,scope){this.module=module,this.scope=scope,this.controller=new module.controllerConstructor(this),this.bindingObserver=new BindingObserver(this,this.dispatcher),this.valueObserver=new ValueObserver(this,this.controller);try{this.controller.initialize()}catch(error){this.handleError(error,"initializing controller")}}return Context.prototype.connect=function(){this.bindingObserver.start(),this.valueObserver.start();try{this.controller.connect()}catch(error){this.handleError(error,"connecting controller")}},Context.prototype.disconnect=function(){try{this.controller.disconnect()}catch(error){this.handleError(error,"disconnecting controller")}this.valueObserver.stop(),this.bindingObserver.stop()},Object.defineProperty(Context.prototype,"application",{get:function(){return this.module.application},enumerable:!1,configurable:!0}),Object.defineProperty(Context.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(Context.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(Context.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(Context.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(Context.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!1,configurable:!0}),Context.prototype.handleError=function(error,message,detail){void 0===detail&&(detail={});var identifier=this.identifier,controller=this.controller,element=this.element;detail=Object.assign({identifier:identifier,controller:controller,element:element},detail),this.application.handleError(error,"Error "+message,detail)},Context}();function readInheritableStaticArrayValues(constructor,propertyName){constructor=getAncestorsForConstructor(constructor);return Array.from(constructor.reduce(function(values,constructor){return function(constructor,propertyName){constructor=constructor[propertyName];return Array.isArray(constructor)?constructor:[]}(constructor,propertyName).forEach(function(name){return values.add(name)}),values},new Set))}function readInheritableStaticObjectPairs(constructor,propertyName){return getAncestorsForConstructor(constructor).reduce(function(pairs,constructor){return pairs.push.apply(pairs,function(constructor,propertyName){var definition=constructor[propertyName];return definition?Object.keys(definition).map(function(key){return[key,definition[key]]}):[]}(constructor,propertyName)),pairs},[])}function getAncestorsForConstructor(constructor){for(var ancestors=[];constructor;)ancestors.push(constructor),constructor=Object.getPrototypeOf(constructor);return ancestors.reverse()}var blessing_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};function bless(constructor){return function(constructor,properties){var shadowConstructor=extend(constructor),constructor=function(prototype,properties){return getOwnKeys(properties).reduce(function(shadowProperties,key){var _a,descriptor=function(prototype,properties,key){prototype=Object.getOwnPropertyDescriptor(prototype,key);if(!(prototype&&"value"in prototype))return properties=Object.getOwnPropertyDescriptor(properties,key).value,prototype&&(properties.get=prototype.get||properties.get,properties.set=prototype.set||properties.set),properties}(prototype,properties,key);return descriptor&&Object.assign(shadowProperties,((_a={})[key]=descriptor,_a)),shadowProperties},{})}(constructor.prototype,properties);return Object.defineProperties(shadowConstructor.prototype,constructor),shadowConstructor}(constructor,function(constructor){return readInheritableStaticArrayValues(constructor,"blessings").reduce(function(blessedProperties,blessing){var key,properties=blessing(constructor);for(key in properties){var descriptor=blessedProperties[key]||{};blessedProperties[key]=Object.assign(descriptor,properties[key])}return blessedProperties},{})}(constructor))}var getOwnKeys="function"==typeof Object.getOwnPropertySymbols?function(object){return __spreadArrays(Object.getOwnPropertyNames(object),Object.getOwnPropertySymbols(object))}:Object.getOwnPropertyNames,extend=function(){function extendWithReflect(constructor){function extended(){var _newTarget=this&&this instanceof extended?this.constructor:void 0;return Reflect.construct(constructor,arguments,_newTarget)}return extended.prototype=Object.create(constructor.prototype,{constructor:{value:extended}}),Reflect.setPrototypeOf(extended,constructor),extended}try{return(b=extendWithReflect(function(){this.a.call(this)})).prototype.a=function(){},new b,extendWithReflect}catch(error){return function(constructor){return blessing_extends(extended,_super=constructor),extended;function extended(){return null!==_super&&_super.apply(this,arguments)||this}var _super}}var b}();var Module=function(){function Module(application,definition){this.application=application,this.definition=function(definition){return{identifier:definition.identifier,controllerConstructor:bless(definition.controllerConstructor)}}(definition),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(Module.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(Module.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!1,configurable:!0}),Object.defineProperty(Module.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!1,configurable:!0}),Module.prototype.connectContextForScope=function(scope){scope=this.fetchContextForScope(scope);this.connectedContexts.add(scope),scope.connect()},Module.prototype.disconnectContextForScope=function(scope){scope=this.contextsByScope.get(scope);scope&&(this.connectedContexts.delete(scope),scope.disconnect())},Module.prototype.fetchContextForScope=function(scope){var context=this.contextsByScope.get(scope);return context||(context=new Context(this,scope),this.contextsByScope.set(scope,context)),context},Module}(),ClassMap=function(){function ClassMap(scope){this.scope=scope}return ClassMap.prototype.has=function(name){return this.data.has(this.getDataKey(name))},ClassMap.prototype.get=function(name){return this.data.get(this.getDataKey(name))},ClassMap.prototype.getAttributeName=function(name){return this.data.getAttributeNameForKey(this.getDataKey(name))},ClassMap.prototype.getDataKey=function(name){return name+"-class"},Object.defineProperty(ClassMap.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),ClassMap}();function capitalize(value){return value.charAt(0).toUpperCase()+value.slice(1)}function dasherize(value){return value.replace(/([A-Z])/g,function(_,char){return"-"+char.toLowerCase()})}var DataMap=function(){function DataMap(scope){this.scope=scope}return Object.defineProperty(DataMap.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(DataMap.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),DataMap.prototype.get=function(key){key=this.getAttributeNameForKey(key);return this.element.getAttribute(key)},DataMap.prototype.set=function(key,value){var name=this.getAttributeNameForKey(key);return this.element.setAttribute(name,value),this.get(key)},DataMap.prototype.has=function(key){key=this.getAttributeNameForKey(key);return this.element.hasAttribute(key)},DataMap.prototype.delete=function(key){return!!this.has(key)&&(key=this.getAttributeNameForKey(key),this.element.removeAttribute(key),!0)},DataMap.prototype.getAttributeNameForKey=function(key){return"data-"+this.identifier+"-"+dasherize(key)},DataMap}(),Guide=function(){function Guide(logger){this.warnedKeysByObject=new WeakMap,this.logger=logger}return Guide.prototype.warn=function(object,key,message){var warnedKeys=this.warnedKeysByObject.get(object);warnedKeys||(warnedKeys=new Set,this.warnedKeysByObject.set(object,warnedKeys)),warnedKeys.has(key)||(warnedKeys.add(key),this.logger.warn(message,object))},Guide}();var target_set_spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},TargetSet=function(){function TargetSet(scope){this.scope=scope}return Object.defineProperty(TargetSet.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(TargetSet.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(TargetSet.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!1,configurable:!0}),TargetSet.prototype.has=function(targetName){return null!=this.find(targetName)},TargetSet.prototype.find=function(){for(var _this=this,targetNames=[],_i=0;_i<arguments.length;_i++)targetNames[_i]=arguments[_i];return targetNames.reduce(function(target,targetName){return target||_this.findTarget(targetName)||_this.findLegacyTarget(targetName)},void 0)},TargetSet.prototype.findAll=function(){for(var _this=this,targetNames=[],_i=0;_i<arguments.length;_i++)targetNames[_i]=arguments[_i];return targetNames.reduce(function(targets,targetName){return target_set_spreadArrays(targets,_this.findAllTargets(targetName),_this.findAllLegacyTargets(targetName))},[])},TargetSet.prototype.findTarget=function(targetName){targetName=this.getSelectorForTargetName(targetName);return this.scope.findElement(targetName)},TargetSet.prototype.findAllTargets=function(targetName){targetName=this.getSelectorForTargetName(targetName);return this.scope.findAllElements(targetName)},TargetSet.prototype.getSelectorForTargetName=function(targetName){return"["+("data-"+this.identifier+"-target")+'~="'+targetName+'"]'},TargetSet.prototype.findLegacyTarget=function(targetName){var selector=this.getLegacySelectorForTargetName(targetName);return this.deprecate(this.scope.findElement(selector),targetName)},TargetSet.prototype.findAllLegacyTargets=function(targetName){var _this=this,selector=this.getLegacySelectorForTargetName(targetName);return this.scope.findAllElements(selector).map(function(element){return _this.deprecate(element,targetName)})},TargetSet.prototype.getLegacySelectorForTargetName=function(targetName){targetName=this.identifier+"."+targetName;return"["+this.schema.targetAttribute+'~="'+targetName+'"]'},TargetSet.prototype.deprecate=function(element,targetName){var identifier,attributeName;return element&&(identifier=this.identifier,attributeName=this.schema.targetAttribute,this.guide.warn(element,"target:"+targetName,"Please replace "+attributeName+'="'+identifier+"."+targetName+'" with data-'+identifier+'-target="'+targetName+'". The '+attributeName+" attribute is deprecated and will be removed in a future version of Stimulus.")),element},Object.defineProperty(TargetSet.prototype,"guide",{get:function(){return this.scope.guide},enumerable:!1,configurable:!0}),TargetSet}(),scope_spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},Scope=function(){function Scope(schema,element,identifier,logger){var _this=this;this.targets=new TargetSet(this),this.classes=new ClassMap(this),this.data=new DataMap(this),this.containsElement=function(element){return element.closest(_this.controllerSelector)===_this.element},this.schema=schema,this.element=element,this.identifier=identifier,this.guide=new Guide(logger)}return Scope.prototype.findElement=function(selector){return this.element.matches(selector)?this.element:this.queryElements(selector).find(this.containsElement)},Scope.prototype.findAllElements=function(selector){return scope_spreadArrays(this.element.matches(selector)?[this.element]:[],this.queryElements(selector).filter(this.containsElement))},Scope.prototype.queryElements=function(selector){return Array.from(this.element.querySelectorAll(selector))},Object.defineProperty(Scope.prototype,"controllerSelector",{get:function(){return"["+this.schema.controllerAttribute+'~="'+this.identifier+'"]'},enumerable:!1,configurable:!0}),Scope}(),ScopeObserver=function(){function ScopeObserver(element,schema,delegate){this.element=element,this.schema=schema,this.delegate=delegate,this.valueListObserver=new ValueListObserver(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return ScopeObserver.prototype.start=function(){this.valueListObserver.start()},ScopeObserver.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(ScopeObserver.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),ScopeObserver.prototype.parseValueForToken=function(token){var element=token.element,token=token.content,scopesByIdentifier=this.fetchScopesByIdentifierForElement(element),scope=scopesByIdentifier.get(token);return scope||(scope=this.delegate.createScopeForElementAndIdentifier(element,token),scopesByIdentifier.set(token,scope)),scope},ScopeObserver.prototype.elementMatchedValue=function(element,value){var referenceCount=(this.scopeReferenceCounts.get(value)||0)+1;this.scopeReferenceCounts.set(value,referenceCount),1==referenceCount&&this.delegate.scopeConnected(value)},ScopeObserver.prototype.elementUnmatchedValue=function(element,value){var referenceCount=this.scopeReferenceCounts.get(value);referenceCount&&(this.scopeReferenceCounts.set(value,referenceCount-1),1==referenceCount&&this.delegate.scopeDisconnected(value))},ScopeObserver.prototype.fetchScopesByIdentifierForElement=function(element){var scopesByIdentifier=this.scopesByIdentifierByElement.get(element);return scopesByIdentifier||(scopesByIdentifier=new Map,this.scopesByIdentifierByElement.set(element,scopesByIdentifier)),scopesByIdentifier},ScopeObserver}(),Router=function(){function Router(application){this.application=application,this.scopeObserver=new ScopeObserver(this.element,this.schema,this),this.scopesByIdentifier=new Multimap,this.modulesByIdentifier=new Map}return Object.defineProperty(Router.prototype,"element",{get:function(){return this.application.element},enumerable:!1,configurable:!0}),Object.defineProperty(Router.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(Router.prototype,"logger",{get:function(){return this.application.logger},enumerable:!1,configurable:!0}),Object.defineProperty(Router.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(Router.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!1,configurable:!0}),Object.defineProperty(Router.prototype,"contexts",{get:function(){return this.modules.reduce(function(contexts,module){return contexts.concat(module.contexts)},[])},enumerable:!1,configurable:!0}),Router.prototype.start=function(){this.scopeObserver.start()},Router.prototype.stop=function(){this.scopeObserver.stop()},Router.prototype.loadDefinition=function(definition){this.unloadIdentifier(definition.identifier);definition=new Module(this.application,definition);this.connectModule(definition)},Router.prototype.unloadIdentifier=function(identifier){identifier=this.modulesByIdentifier.get(identifier);identifier&&this.disconnectModule(identifier)},Router.prototype.getContextForElementAndIdentifier=function(element,identifier){identifier=this.modulesByIdentifier.get(identifier);if(identifier)return identifier.contexts.find(function(context){return context.element==element})},Router.prototype.handleError=function(error,message,detail){this.application.handleError(error,message,detail)},Router.prototype.createScopeForElementAndIdentifier=function(element,identifier){return new Scope(this.schema,element,identifier,this.logger)},Router.prototype.scopeConnected=function(scope){this.scopesByIdentifier.add(scope.identifier,scope);var module=this.modulesByIdentifier.get(scope.identifier);module&&module.connectContextForScope(scope)},Router.prototype.scopeDisconnected=function(scope){this.scopesByIdentifier.delete(scope.identifier,scope);var module=this.modulesByIdentifier.get(scope.identifier);module&&module.disconnectContextForScope(scope)},Router.prototype.connectModule=function(module){this.modulesByIdentifier.set(module.identifier,module),this.scopesByIdentifier.getValuesForKey(module.identifier).forEach(function(scope){return module.connectContextForScope(scope)})},Router.prototype.disconnectModule=function(module){this.modulesByIdentifier.delete(module.identifier),this.scopesByIdentifier.getValuesForKey(module.identifier).forEach(function(scope){return module.disconnectContextForScope(scope)})},Router}(),defaultSchema={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},__awaiter=function(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}},application_spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},Application=function(){function Application(element,schema){void 0===element&&(element=document.documentElement),void 0===schema&&(schema=defaultSchema),this.logger=console,this.element=element,this.schema=schema,this.dispatcher=new Dispatcher(this),this.router=new Router(this)}return Application.start=function(element,schema){element=new Application(element,schema);return element.start(),element},Application.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,new Promise(function(resolve){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",resolve):resolve()})];case 1:return _a.sent(),this.dispatcher.start(),this.router.start(),[2]}})})},Application.prototype.stop=function(){this.dispatcher.stop(),this.router.stop()},Application.prototype.register=function(identifier,controllerConstructor){this.load({identifier:identifier,controllerConstructor:controllerConstructor})},Application.prototype.load=function(head){for(var _this=this,rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];(Array.isArray(head)?head:application_spreadArrays([head],rest)).forEach(function(definition){return _this.router.loadDefinition(definition)})},Application.prototype.unload=function(head){for(var _this=this,rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];(Array.isArray(head)?head:application_spreadArrays([head],rest)).forEach(function(identifier){return _this.router.unloadIdentifier(identifier)})},Object.defineProperty(Application.prototype,"controllers",{get:function(){return this.router.contexts.map(function(context){return context.controller})},enumerable:!1,configurable:!0}),Application.prototype.getControllerForElementAndIdentifier=function(element,identifier){element=this.router.getContextForElementAndIdentifier(element,identifier);return element?element.controller:null},Application.prototype.handleError=function(error,message,detail){this.logger.error("%s\n\n%o\n\n%o",message,error,detail)},Application}();function ClassPropertiesBlessing(constructor){return readInheritableStaticArrayValues(constructor,"classes").reduce(function(properties,classDefinition){return Object.assign(properties,((properties={})[classDefinition=(key=classDefinition)+"Class"]={get:function(){var classes=this.classes;if(classes.has(key))return classes.get(key);throw classes=classes.getAttributeName(key),new Error('Missing attribute "'+classes+'"')}},properties["has"+capitalize(classDefinition)]={get:function(){return this.classes.has(key)}},properties));var key},{})}function TargetPropertiesBlessing(constructor){return readInheritableStaticArrayValues(constructor,"targets").reduce(function(properties,targetDefinition){return Object.assign(properties,((properties={})[(name=targetDefinition)+"Target"]={get:function(){var target=this.targets.find(name);if(target)return target;throw new Error('Missing target element "'+this.identifier+"."+name+'"')}},properties[name+"Targets"]={get:function(){return this.targets.findAll(name)}},properties["has"+capitalize(name)+"Target"]={get:function(){return this.targets.has(name)}},properties));var name},{})}function ValuePropertiesBlessing(constructor){var valueDefinitionPairs=readInheritableStaticObjectPairs(constructor,"values");return valueDefinitionPairs.reduce(function(properties,valueDefinitionPair){return Object.assign(properties,function(valueDefinitionPair){var definition=parseValueDefinitionPair(valueDefinitionPair),valueDefinitionPair=definition.type,key=definition.key,name=definition.name,read=readers[valueDefinitionPair],write=writers[valueDefinitionPair]||writers.default;return(valueDefinitionPair={})[name]={get:function(){var value=this.data.get(key);return null!==value?read(value):definition.defaultValue},set:function(value){void 0===value?this.data.delete(key):this.data.set(key,write(value))}},valueDefinitionPair["has"+capitalize(name)]={get:function(){return this.data.has(key)}},valueDefinitionPair}(valueDefinitionPair))},{valueDescriptorMap:{get:function(){var _this=this;return valueDefinitionPairs.reduce(function(result,valueDefinitionPair){var valueDefinitionPair=parseValueDefinitionPair(valueDefinitionPair),attributeName=_this.data.getAttributeNameForKey(valueDefinitionPair.key);return Object.assign(result,((result={})[attributeName]=valueDefinitionPair,result))},{})}}})}function parseValueDefinitionPair(_a){return function(token,type){token=dasherize(token)+"-value";return{type:type,key:token,name:function(value){return value.replace(/(?:[_-])([a-z0-9])/g,function(_,char){return char.toUpperCase()})}(token),get defaultValue(){return defaultValuesByType[type]}}}(_a[0],function(typeConstant){switch(typeConstant){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}throw new Error('Unknown value type constant "'+typeConstant+'"')}(_a[1]))}var defaultValuesByType={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},readers={array:function(value){value=JSON.parse(value);if(Array.isArray(value))return value;throw new TypeError("Expected array")},boolean:function(value){return!("0"==value||"false"==value)},number:function(value){return parseFloat(value)},object:function(value){value=JSON.parse(value);if(null===value||"object"!=typeof value||Array.isArray(value))throw new TypeError("Expected object");return value},string:function(value){return value}},writers={default:function(value){return""+value},array:writeJSON,object:writeJSON};function writeJSON(value){return JSON.stringify(value)}var Controller=function(){function Controller(context){this.context=context}return Object.defineProperty(Controller.prototype,"application",{get:function(){return this.context.application},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"classes",{get:function(){return this.scope.classes},enumerable:!1,configurable:!0}),Object.defineProperty(Controller.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),Controller.prototype.initialize=function(){},Controller.prototype.connect=function(){},Controller.prototype.disconnect=function(){},Controller.blessings=[ClassPropertiesBlessing,TargetPropertiesBlessing,ValuePropertiesBlessing],Controller.targets=[],Controller.values={},Controller}()},470:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploaderController=exports.TooltipController=exports.setTooltipText=exports.setTooltipHtml=exports.TableController=exports.showPopover=exports.PopoverController=exports.BasePopoverController=exports.hidePopover=exports.detachPopover=exports.attachPopover=exports.TabListController=exports.showModal=exports.ModalController=exports.hideModal=exports.ExpandableController=void 0;var s_expandable_control_1=__webpack_require__(601),s_modal_1=(Object.defineProperty(exports,"ExpandableController",{enumerable:!0,get:function(){return s_expandable_control_1.ExpandableController}}),__webpack_require__(181)),s_navigation_tablist_1=(Object.defineProperty(exports,"hideModal",{enumerable:!0,get:function(){return s_modal_1.hideModal}}),Object.defineProperty(exports,"ModalController",{enumerable:!0,get:function(){return s_modal_1.ModalController}}),Object.defineProperty(exports,"showModal",{enumerable:!0,get:function(){return s_modal_1.showModal}}),__webpack_require__(642)),s_popover_1=(Object.defineProperty(exports,"TabListController",{enumerable:!0,get:function(){return s_navigation_tablist_1.TabListController}}),__webpack_require__(388)),s_table_1=(Object.defineProperty(exports,"attachPopover",{enumerable:!0,get:function(){return s_popover_1.attachPopover}}),Object.defineProperty(exports,"detachPopover",{enumerable:!0,get:function(){return s_popover_1.detachPopover}}),Object.defineProperty(exports,"hidePopover",{enumerable:!0,get:function(){return s_popover_1.hidePopover}}),Object.defineProperty(exports,"BasePopoverController",{enumerable:!0,get:function(){return s_popover_1.BasePopoverController}}),Object.defineProperty(exports,"PopoverController",{enumerable:!0,get:function(){return s_popover_1.PopoverController}}),Object.defineProperty(exports,"showPopover",{enumerable:!0,get:function(){return s_popover_1.showPopover}}),__webpack_require__(753)),s_tooltip_1=(Object.defineProperty(exports,"TableController",{enumerable:!0,get:function(){return s_table_1.TableController}}),__webpack_require__(355)),s_uploader_1=(Object.defineProperty(exports,"setTooltipHtml",{enumerable:!0,get:function(){return s_tooltip_1.setTooltipHtml}}),Object.defineProperty(exports,"setTooltipText",{enumerable:!0,get:function(){return s_tooltip_1.setTooltipText}}),Object.defineProperty(exports,"TooltipController",{enumerable:!0,get:function(){return s_tooltip_1.TooltipController}}),__webpack_require__(637));Object.defineProperty(exports,"UploaderController",{enumerable:!0,get:function(){return s_uploader_1.UploaderController}})},601:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__webpack_require__=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExpandableController=void 0,__webpack_require__(36)),RADIO_OFF_EVENT="s-expandable-control:radio-off";function globalChangeListener(e){var target=e.target;target instanceof HTMLInputElement&&"INPUT"===target.nodeName&&"radio"===target.type&&document.querySelectorAll('input[type="radio"][name="'+target.name+'"]').forEach(function(other){if(other!==e.target){var customEvent;try{customEvent=new Event(RADIO_OFF_EVENT)}catch(ex){(customEvent=document.createEvent("Event")).initEvent(RADIO_OFF_EVENT,!0,!0)}other.dispatchEvent(customEvent)}})}var refCount=0;function globalChangeListenerRequired(required){required?1===++refCount&&document.body.addEventListener("change",globalChangeListener):0===--refCount&&document.body.removeEventListener("change",globalChangeListener)}__webpack_require__=function(_super){function ExpandableController(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastKeydownClickTimestamp=0,_this}return __extends(ExpandableController,_super),ExpandableController.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable.bind(this),this.events=["change",RADIO_OFF_EVENT],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable.bind(this),this.events=["click","keydown"]),this.listener=this.listener.bind(this)},ExpandableController.prototype._isCollapsedForClickable=function(){var cc=this.controlledExpandables;return 0<cc.length?!cc.every(function(element){return element.classList.contains("is-expanded")}):"false"===this.element.getAttribute("aria-expanded")},ExpandableController.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(ExpandableController.prototype,"controlledExpandables",{get:function(){var attr=this.element.getAttribute("aria-controls");if(!attr)throw'[aria-controls="targetId1 ... targetIdN"] attribute required';attr=attr.split(/\s+/g).map(function(s){return document.getElementById(s)}).filter(function(e){return!!e});if(attr.length)return attr;throw"couldn't find controls"},enumerable:!1,configurable:!0}),ExpandableController.prototype._dispatchShowHideEvent=function(isShow){this.triggerEvent(isShow?"show":"hide")},ExpandableController.prototype._toggleClass=function(doAdd){if(this.data.has("toggle-class")){var cl=this.element.classList,toggleClass=this.data.get("toggle-class");if(!toggleClass)throw"couldn't find toggle class";toggleClass.split(/\s+/).forEach(function(cls){cl.toggle(cls,!!doAdd)})}},ExpandableController.prototype.listener=function(e){var newCollapsed;if(this.isCheckable)newCollapsed=!this.element.checked;else{if("keydown"==e.type&&e instanceof KeyboardEvent&&13!=e.keyCode&&32!=e.keyCode)return;if(e.target!==e.currentTarget&&0<=["A","BUTTON"].indexOf(e.target.nodeName))return;if(e.preventDefault(),"keydown"==e.type)this.lastKeydownClickTimestamp=Date.now();else if("click"==e.type&&Date.now()-this.lastKeydownClickTimestamp<300)return;newCollapsed="true"===this.element.getAttribute("aria-expanded"),"click"===e.type&&this.element.blur()}this.element.setAttribute("aria-expanded",newCollapsed?"false":"true");for(var _i=0,_a=this.controlledExpandables;_i<_a.length;_i++)_a[_i].classList.toggle("is-expanded",!newCollapsed);this._dispatchShowHideEvent(!newCollapsed),this._toggleClass(!newCollapsed)},ExpandableController.prototype.connect=function(){var _this=this;if(this.events.forEach(function(e){_this.element.addEventListener(e,_this.listener.bind(_this))},this),this.isRadio&&globalChangeListenerRequired(!0),this.isRadio||this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable){var cc=this.controlledExpandables;if(cc.length){var expected_1=!this.isCollapsed();if(cc.some(function(element){return element.classList.contains("is-expanded")!==expected_1})){for(var _i=0,_a=this.controlledExpandables;_i<_a.length;_i++)_a[_i].classList.toggle("is-expanded",expected_1);this._dispatchShowHideEvent(expected_1),this._toggleClass(expected_1)}}}},ExpandableController.prototype.disconnect=function(){var _this=this;this.events.forEach(function(e){_this.element.removeEventListener(e,_this.listener.bind(_this))},this),this.isRadio&&globalChangeListenerRequired(!1)},ExpandableController}(__webpack_require__.StacksController);exports.ExpandableController=__webpack_require__},181:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||((ar=ar||Array.prototype.slice.call(from,0,i))[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},Stacks=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.hideModal=exports.showModal=exports.ModalController=void 0,__webpack_require__(36)),__webpack_require__=function(_super){function ModalController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ModalController,_super),ModalController.prototype.connect=function(){this.validate()},ModalController.prototype.disconnect=function(){this.unbindDocumentEvents()},ModalController.prototype.toggle=function(dispatcher){this._toggle(void 0,dispatcher=void 0===dispatcher?null:dispatcher)},ModalController.prototype.show=function(dispatcher){this._toggle(!0,dispatcher=void 0===dispatcher?null:dispatcher)},ModalController.prototype.hide=function(dispatcher){this._toggle(!1,dispatcher=void 0===dispatcher?null:dispatcher)},ModalController.prototype.validate=function(){var returnElementSelector=this.data.get("return-element");if(returnElementSelector&&(this.returnElement=document.querySelector(returnElementSelector),!this.returnElement))throw"Unable to find element by return-element selector: "+returnElementSelector},ModalController.prototype._toggle=function(show,dispatcher){var dispatchingElement,_this=this,toShow=(void 0===dispatcher&&(dispatcher=null),show),show="false"===this.modalTarget.getAttribute("aria-hidden");(toShow=void 0===toShow?!show:toShow)&&show||!toShow&&!show||(dispatchingElement=this.getDispatcher(dispatcher),(show=this.triggerEvent(toShow?"show":"hide",{returnElement:this.returnElement,dispatcher:this.getDispatcher(dispatchingElement)},this.modalTarget)).defaultPrevented||(this.returnElement=show.detail.returnElement,this.modalTarget.setAttribute("aria-hidden",toShow?"false":"true"),toShow?(this.bindDocumentEvents(),this.focusInsideModal()):(this.unbindDocumentEvents(),this.focusReturnElement(),this.removeModalOnHide()),void 0!==this.modalTarget.ontransitionend?this.modalTarget.addEventListener("transitionend",function(){_this.triggerEvent(toShow?"shown":"hidden",{dispatcher:dispatchingElement},_this.modalTarget)},{once:!0}):this.triggerEvent(toShow?"shown":"hidden",{dispatcher:dispatchingElement},this.modalTarget)))},ModalController.prototype.focusReturnElement=function(){var _this=this;this.returnElement&&this.modalTarget.addEventListener("s-modal:hidden",function(){_this.returnElement&&document.body.contains(_this.returnElement)&&_this.returnElement.focus()},{once:!0})},ModalController.prototype.removeModalOnHide=function(){var _this=this;"true"===this.data.get("remove-when-hidden")&&this.modalTarget.addEventListener("s-modal:hidden",function(){_this.element.remove()},{once:!0})},ModalController.prototype.getAllTabbables=function(){return Array.from(this.modalTarget.querySelectorAll("[href], input, select, textarea, button, [tabindex]")).filter(function(el){return el.matches(":not([disabled]):not([tabindex='-1'])")})},ModalController.prototype.firstVisible=function(elements){return elements.find(function(el){return null!==el.offsetParent})},ModalController.prototype.lastVisible=function(elements){return this.firstVisible(__spreadArray([],elements,!0).reverse())},ModalController.prototype.focusInsideModal=function(){var _this=this;this.modalTarget.addEventListener("s-modal:shown",function(){var _a=null!=(_a=_this.firstVisible(_this.initialFocusTargets))?_a:_this.firstVisible(_this.getAllTabbables());null!=_a&&_a.focus()},{once:!0})},ModalController.prototype.keepFocusWithinModal=function(e){var firstTabbable,tabbables;this.modalTarget.contains(e.target)?"Tab"===e.key&&(tabbables=this.getAllTabbables(),firstTabbable=this.firstVisible(tabbables),tabbables=this.lastVisible(tabbables),firstTabbable&&tabbables&&(firstTabbable===tabbables?(e.preventDefault(),firstTabbable.focus()):e.shiftKey&&e.target===firstTabbable?(e.preventDefault(),tabbables.focus()):e.shiftKey||e.target!==tabbables||(e.preventDefault(),firstTabbable.focus()))):(tabbables=this.firstVisible(this.getAllTabbables()))&&(e.preventDefault(),tabbables.focus())},ModalController.prototype.bindDocumentEvents=function(){this._boundClickFn=this._boundClickFn||this.hideOnOutsideClick.bind(this),this._boundKeypressFn=this._boundKeypressFn||this.hideOnEscapePress.bind(this),this._boundTabTrap=this._boundTabTrap||this.keepFocusWithinModal.bind(this),document.addEventListener("mousedown",this._boundClickFn),document.addEventListener("keyup",this._boundKeypressFn),document.addEventListener("keydown",this._boundTabTrap)},ModalController.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this._boundClickFn),document.removeEventListener("keyup",this._boundKeypressFn),document.removeEventListener("keydown",this._boundTabTrap)},ModalController.prototype.hideOnOutsideClick=function(e){var target=e.target;!this.modalTarget.querySelector(".s-modal--dialog").contains(target)&&document.body.contains(target)&&this._toggle(!1,e)},ModalController.prototype.hideOnEscapePress=function(e){27===e.which&&"true"!==this.modalTarget.getAttribute("aria-hidden")&&this._toggle(!1,e)},ModalController.prototype.getDispatcher=function(dispatcher){return(dispatcher=void 0===dispatcher?null:dispatcher)instanceof Event?dispatcher.target:dispatcher instanceof Element?dispatcher:this.element},ModalController.targets=["modal","initialFocus"],ModalController}(Stacks.StacksController);function toggleModal(element,show){element=Stacks.application.getControllerForElementAndIdentifier(element,"s-modal");if(!element)throw"Unable to get s-modal controller from element";show?element.show():element.hide()}exports.ModalController=__webpack_require__,exports.showModal=function(element){toggleModal(element,!0)},exports.hideModal=function(element){toggleModal(element,!1)}},642:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),exports.TabListController=void 0;__webpack_require__=function(_super){function TabListController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TabListController,_super),TabListController.prototype.connect=function(){_super.prototype.connect.call(this),this.boundSelectTab=this.selectTab.bind(this),this.boundHandleKeydown=this.handleKeydown.bind(this);for(var _i=0,_a=this.tabTargets;_i<_a.length;_i++){var tab=_a[_i];tab.addEventListener("click",this.boundSelectTab),tab.addEventListener("keydown",this.boundHandleKeydown)}},TabListController.prototype.disconnect=function(){_super.prototype.disconnect.call(this);for(var _i=0,_a=this.tabTargets;_i<_a.length;_i++){var tab=_a[_i];tab.removeEventListener("click",this.boundSelectTab),tab.removeEventListener("keydown",this.boundHandleKeydown)}},Object.defineProperty(TabListController.prototype,"tabTargets",{get:function(){return Array.from(this.element.querySelectorAll("[role=tab]"))},enumerable:!1,configurable:!0}),TabListController.prototype.selectTab=function(event){this.switchToTab(event.currentTarget)},TabListController.prototype.handleKeydown=function(event){var tabElement=event.currentTarget,tabs=this.tabTargets,tabIndex=tabs.indexOf(tabElement);if("ArrowRight"===event.key)tabIndex++;else{if("ArrowLeft"!==event.key)return;tabIndex--}tabElement=tabs[tabIndex=(tabIndex=tabIndex<0?tabs.length-1:tabIndex)>=tabs.length?0:tabIndex],this.switchToTab(tabElement),null!=(event=this.selectedTab)&&event.focus()},TabListController.prototype.switchToTab=function(newTab){var oldTab=this.selectedTab;oldTab===newTab||this.triggerEvent("select",{oldTab:oldTab,newTab:newTab}).defaultPrevented||(this.selectedTab=newTab,this.triggerEvent("selected",{oldTab:oldTab,newTab:newTab}))},Object.defineProperty(TabListController.prototype,"selectedTab",{get:function(){return this.tabTargets.find(function(e){return"true"===e.getAttribute("aria-selected")})||null},set:function(selectedTab){for(var _i=0,_a=this.tabTargets;_i<_a.length;_i++){var tab=_a[_i],panelId=tab.getAttribute("aria-controls"),panelId=panelId?document.getElementById(panelId):null;tab===selectedTab?(tab.classList.add("is-selected"),tab.setAttribute("aria-selected","true"),tab.removeAttribute("tabindex"),null!=panelId&&panelId.classList.remove("d-none")):(tab.classList.remove("is-selected"),tab.setAttribute("aria-selected","false"),tab.setAttribute("tabindex","-1"),null!=panelId&&panelId.classList.add("d-none"))}},enumerable:!1,configurable:!0}),TabListController}(__webpack_require__(36).StacksController);exports.TabListController=__webpack_require__},388:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),core_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.detachPopover=exports.attachPopover=exports.hidePopover=exports.showPopover=exports.PopoverController=exports.BasePopoverController=void 0,__webpack_require__(492)),Stacks=__webpack_require__(36),__webpack_require__=function(_super){function BasePopoverController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(BasePopoverController,_super),Object.defineProperty(BasePopoverController.prototype,"isVisible",{get:function(){var popoverElement=this.popoverElement;return!!popoverElement&&popoverElement.classList.contains("is-visible")},enumerable:!1,configurable:!0}),Object.defineProperty(BasePopoverController.prototype,"isInViewport",{get:function(){var viewHeight,viewWidth,element=this.popoverElement;return!(!this.isVisible||!element)&&(element=element.getBoundingClientRect(),viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight),viewWidth=Math.max(document.documentElement.clientWidth,window.innerWidth),0<element.bottom&&element.top<viewHeight&&0<element.right&&element.left<viewWidth)},enumerable:!1,configurable:!0}),Object.defineProperty(BasePopoverController.prototype,"shouldHideOnOutsideClick",{get:function(){switch(this.data.get("hide-on-outside-click")){case"after-dismissal":case"never":return!1;case"if-in-viewport":return this.isInViewport;default:return!0}},enumerable:!1,configurable:!0}),BasePopoverController.prototype.connect=function(){_super.prototype.connect.call(this),this.validate(),this.isVisible?this.initializePopper():"true"===this.data.get("auto-show")&&this.show(null),this.data.delete("auto-show")},BasePopoverController.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),delete this.popper),_super.prototype.disconnect.call(this)},BasePopoverController.prototype.toggle=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.isVisible?this.hide(dispatcher):this.show(dispatcher)},BasePopoverController.prototype.show=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.isVisible||(dispatcher=this.getDispatcher(dispatcher),this.triggerEvent("show",{dispatcher:dispatcher}).defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.scheduleUpdate(),this.shown(dispatcher)))},BasePopoverController.prototype.hide=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.isVisible&&(dispatcher=this.getDispatcher(dispatcher),this.triggerEvent("hide",{dispatcher:dispatcher}).defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&(this.popper.destroy(),delete this.popper),"after-dismissal"===this.data.get("hide-on-outside-click")&&this.data.delete("hide-on-outside-click"),this.hidden(dispatcher)))},BasePopoverController.prototype.shown=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.bindDocumentEvents(),this.triggerEvent("shown",{dispatcher:dispatcher})},BasePopoverController.prototype.hidden=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.unbindDocumentEvents(),this.triggerEvent("hidden",{dispatcher:dispatcher})},BasePopoverController.prototype.generatePopover=function(){return null},BasePopoverController.prototype.initializePopper=function(){this.popper=(0,core_1.createPopper)(this.referenceElement,this.popoverElement,{placement:this.data.get("placement")||"bottom",modifiers:[{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:".s-popover--arrow"}}]})},BasePopoverController.prototype.validate=function(){var referenceSelector=this.data.get("reference-selector");if(this.referenceElement=this.element,referenceSelector&&(this.referenceElement=this.element.querySelector(referenceSelector),!this.referenceElement))throw"Unable to find element by reference selector: "+referenceSelector;var referenceSelector=this.referenceElement.getAttribute(this.popoverSelectorAttribute),popoverElement=null;if(referenceSelector){if(!(popoverElement=document.getElementById(referenceSelector)))throw"[".concat(this.popoverSelectorAttribute,'="{POPOVER_ID}"] required')}else popoverElement=this.generatePopover();if(!popoverElement)throw"unable to find or generate popover element";this.popoverElement=popoverElement},BasePopoverController.prototype.getDispatcher=function(dispatcher){return(dispatcher=void 0===dispatcher?null:dispatcher)instanceof Event?dispatcher.target:dispatcher instanceof Element?dispatcher:this.element},BasePopoverController.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.update()},BasePopoverController}(Stacks.StacksController),__webpack_require__=function(_super){function PopoverController(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.popoverSelectorAttribute="aria-controls",_this}return __extends(PopoverController,_super),PopoverController.prototype.shown=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.toggleOptionalClasses(!0),this.toggleAccessibilityAttributes(!0),_super.prototype.shown.call(this,dispatcher)},PopoverController.prototype.hidden=function(dispatcher){void 0===dispatcher&&(dispatcher=null),this.toggleOptionalClasses(!1),this.toggleAccessibilityAttributes(!1),_super.prototype.hidden.call(this,dispatcher)},PopoverController.prototype.connect=function(){_super.prototype.connect.call(this),this.toggleAccessibilityAttributes()},PopoverController.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("mousedown",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},PopoverController.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},PopoverController.prototype.hideOnOutsideClick=function(e){var target=e.target;this.shouldHideOnOutsideClick&&!this.referenceElement.contains(target)&&!this.popoverElement.contains(target)&&document.body.contains(target)&&this.hide(e)},PopoverController.prototype.hideOnEscapePress=function(e){27===e.which&&this.isVisible&&(this.popoverElement.contains(e.target)&&this.referenceElement.focus(),this.hide(e))},PopoverController.prototype.toggleOptionalClasses=function(show){var toggleClass,cl;this.data.has("toggle-class")&&(toggleClass=this.data.get("toggle-class")||"",cl=this.referenceElement.classList,toggleClass.split(/\s+/).forEach(function(cls){cl.toggle(cls,show)}))},PopoverController.prototype.toggleAccessibilityAttributes=function(show){show=(null==show?void 0:show.toString())||this.referenceElement.ariaExpanded||"false";this.referenceElement.ariaExpanded=show,this.referenceElement.setAttribute("aria-expanded",show)},PopoverController.targets=[],PopoverController}(exports.BasePopoverController=__webpack_require__);function getPopover(element){var _a=(null==(_a=element.getAttribute("data-controller"))?void 0:_a.includes("s-popover"))||!1,controller=Stacks.application.getControllerForElementAndIdentifier(element,"s-popover"),referenceSelector=element.getAttribute("data-s-popover-reference-selector"),referenceSelector=referenceSelector?element.querySelector(referenceSelector):element,element=referenceSelector?referenceSelector.getAttribute("aria-controls"):null;return{isPopover:_a,controller:controller,referenceElement:referenceSelector,popover:element?document.getElementById(element):null}}function toggleController(el,controllerName,include){var _a=new Set(null==(_a=el.getAttribute("data-controller"))?void 0:_a.split(/\s+/));include?_a.add(controllerName):_a.delete(controllerName),el.setAttribute("data-controller",Array.from(_a).join(" "))}exports.PopoverController=__webpack_require__,exports.showPopover=function(element){var _a=getPopover(element),isPopover=_a.isPopover;if(_a=_a.controller)_a.show();else{if(!isPopover)throw'element does not have data-controller="s-popover"';element.setAttribute("data-s-popover-auto-show","true")}},exports.hidePopover=function(element){var isPopover=(_a=getPopover(element)).isPopover,controller=_a.controller,_a=_a.popover;if(controller)controller.hide();else{if(!isPopover)throw'element does not have data-controller="s-popover"';element.removeAttribute("data-s-popover-auto-show"),_a&&_a.classList.remove("is-visible")}},exports.attachPopover=function(element,popover,options){var referenceElement=(_a=getPopover(element)).referenceElement;if(_a=_a.popover)throw'element already has popover with id="'.concat(_a.id,'"');if(!referenceElement)throw"element has invalid data-s-popover-reference-selector attribute";if("string"==typeof popover){_a=document.createRange().createContextualFragment(popover).children;if(1!==_a.length)throw"popover should contain a single element";popover=_a[0]}var _a=referenceElement.getAttribute("aria-controls"),popoverId=popover.id;if(!popover.classList.contains("s-popover"))throw'popover should have the "s-popover" class but had class="'.concat(popover.className,'"');if(_a&&_a!==popoverId)throw'element has aria-controls="'.concat(_a,'" but popover has id="').concat(popoverId,'"');popoverId||(popoverId="--stacks-s-popover-"+Math.random().toString(36).substring(2,10),popover.id=popoverId),_a||referenceElement.setAttribute("aria-controls",popoverId),!popover.parentElement&&element.parentElement&&referenceElement.insertAdjacentElement("afterend",popover),toggleController(element,"s-popover",!0),options&&(options.toggleOnClick&&referenceElement.setAttribute("data-action","click->s-popover#toggle"),options.placement&&element.setAttribute("data-s-popover-placement",options.placement),options.autoShow&&element.setAttribute("data-s-popover-auto-show","true"))},exports.detachPopover=function(element){var isPopover=(_a=getPopover(element)).isPopover,controller=_a.controller,referenceElement=_a.referenceElement,_a=_a.popover;return null!=controller&&controller.hide(),null!=_a&&_a.remove(),isPopover&&(toggleController(element,"s-popover",!1),referenceElement&&referenceElement.removeAttribute("aria-controls")),_a}},753:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),exports.TableController=void 0;__webpack_require__=function(_super){function TableController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TableController,_super),TableController.prototype.setCurrentSort=function(headElem,direction){if(["asc","desc","none"].indexOf(direction)<0)throw"direction must be one of asc, desc, or none";var controller=this;this.columnTargets.forEach(function(target){var isCurrrent=target===headElem;target.classList.toggle("is-sorted",isCurrrent&&"none"!==direction),target.querySelectorAll(".js-sorting-indicator").forEach(function(icon){icon.classList.toggle("d-none",!icon.classList.contains("js-sorting-indicator-"+(isCurrrent?direction:"none")))}),isCurrrent&&"none"!==direction?controller.setElementData(target,"sort-direction",direction):controller.removeElementData(target,"sort-direction")})},TableController.prototype.sort=function(evt){var controller=this,evt=evt.currentTarget;if(!(evt instanceof HTMLTableCellElement))throw"invalid event target";var slotIndex,direction,rows,anyNonInt,data,firstBottomRow,table=this.element,tbody=table.tBodies[0],colno=function(cell){if(!(cell.parentElement&&cell.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";cell=buildIndexOrGetCellSlot(cell.parentElement.parentElement,cell);if("number"==typeof cell)return cell;throw"shouldn't happen"}(evt);colno<0||(slotIndex=function(section){section=buildIndexOrGetCellSlot(section);if(section instanceof Array)return section;throw"shouldn't happen"}(tbody),direction="asc"===this.getElementData(evt,"sort-direction")?-1:1,rows=Array.from(table.tBodies[0].rows),anyNonInt=!1,data=[],rows.forEach(function(row,index){var force=controller.getElementData(row,"sort-to");"top"!==force&&("bottom"===force?firstBottomRow=firstBottomRow||row:(force=slotIndex[index][colno])?(""!==(row="string"==typeof(row=controller.getElementData(force,"sort-val"))?row:force.textContent.trim())&&"".concat(parseInt(row,10))!==row&&(anyNonInt=!0),data.push([row,index])):data.push(["",index]))}),anyNonInt||data.forEach(function(tuple){tuple[0]=""===tuple[0]?Number.MIN_VALUE:parseInt(tuple[0],10)}),data.sort(function(a,b){return a[0]>b[0]?direction:a[0]<b[0]?-1*direction:a[1]>b[1]?1:-1}),data.forEach(function(tup){tup=rows[tup[1]];tup.parentElement.removeChild(tup),firstBottomRow?tbody.insertBefore(tup,firstBottomRow):tbody.appendChild(tup)}),this.setCurrentSort(evt,1==direction?"asc":"desc"))},TableController.targets=["column"],TableController}(__webpack_require__(36).StacksController);function buildIndexOrGetCellSlot(section,findCell){for(var index=[],curRow=section.children[0],growing=[],growingRowsLeft=[];curRow||growingRowsLeft.some(function(e){return 0!==e});){var curIndexRow=[],curSlot=(index.push(curIndexRow),0);if(curRow)for(var curCellInd=0;curCellInd<curRow.children.length;curCellInd++){for(;growingRowsLeft[curSlot];)growingRowsLeft[curSlot]--,curIndexRow[curSlot]=growing[curSlot],curSlot++;var cell=curRow.children[curCellInd];if(!(cell instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(cell).display){if(cell===findCell)return curSlot;for(var nextFreeSlot=curSlot+cell.colSpan;curSlot<nextFreeSlot;curSlot++)growingRowsLeft[curSlot]=cell.rowSpan-1,growing[curSlot]=cell,curIndexRow[curSlot]=cell}}for(;curSlot<growing.length;)growingRowsLeft[curSlot]&&(growingRowsLeft[curSlot]--,curIndexRow[curSlot]=growing[curSlot]),curSlot++;curRow=curRow&&curRow.nextElementSibling}return findCell?-1:index}exports.TableController=__webpack_require__},355:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),Stacks=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTooltipText=exports.setTooltipHtml=exports.TooltipController=void 0,__webpack_require__(36)),__webpack_require__=function(_super){function TooltipController(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.popoverSelectorAttribute="aria-describedby",_this}return __extends(TooltipController,_super),TooltipController.prototype.connect=function(){_super.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents(),this.bindKeyboardEvents()},TooltipController.prototype.disconnect=function(){this.unbindKeyboardEvents(),this.unbindMouseEvents(),_super.prototype.disconnect.call(this)},TooltipController.prototype.show=function(dispatcher){void 0===dispatcher&&(dispatcher=null);var controller=Stacks.application.getControllerForElementAndIdentifier(this.element,"s-popover");controller&&controller.isVisible||_super.prototype.show.call(this,dispatcher)},TooltipController.prototype.scheduleShow=function(dispatcher){var _this=this;void 0===dispatcher&&(dispatcher=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=window.setTimeout(function(){return _this.show(dispatcher)},300)},TooltipController.prototype.scheduleHide=function(dispatcher){var _this=this;void 0===dispatcher&&(dispatcher=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=window.setTimeout(function(){return _super.prototype.hide.call(_this,dispatcher)},100)},TooltipController.prototype.clearActiveTimeout=function(){clearTimeout(this.activeTimeout)},TooltipController.prototype.applyTitleAttributes=function(){var content,htmlTitle=this.data.get("html-title");if(htmlTitle)content=document.createRange().createContextualFragment(htmlTitle);else{htmlTitle=this.element.getAttribute("title");if(!htmlTitle)return null;content=document.createTextNode(htmlTitle)}this.data.delete("html-title"),this.element.removeAttribute("title");var htmlTitle=this.element.getAttribute("aria-describedby"),popover=(htmlTitle||(htmlTitle=TooltipController.generateId(),this.element.setAttribute("aria-describedby",htmlTitle)),document.getElementById(htmlTitle)),htmlTitle=(popover||((popover=document.createElement("div")).id=htmlTitle,popover.className="s-popover s-popover__tooltip",popover.setAttribute("role","tooltip"),(htmlTitle=this.element.parentNode)?htmlTitle.insertBefore(popover,this.element.nextSibling):document.body.appendChild(popover)),popover.querySelector(".s-popover--arrow"));return popover.innerHTML="",popover.appendChild(content),htmlTitle?popover.appendChild(htmlTitle):popover.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),popover},TooltipController.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},TooltipController.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},TooltipController.prototype.generatePopover=function(){return this.applyTitleAttributes()},TooltipController.prototype.hideIfWithin=function(event){event.target.contains(this.referenceElement)&&this.scheduleHide()},TooltipController.prototype.hideOnEscapeKeyEvent=function(event){"Escape"===event.key&&this.scheduleHide()},TooltipController.prototype.bindKeyboardEvents=function(){this.boundScheduleShow=this.boundScheduleShow||this.scheduleShow.bind(this),this.boundHide=this.boundHide||this.scheduleHide.bind(this),this.boundHideOnEscapeKeyEvent=this.boundHideOnEscapeKeyEvent||this.hideOnEscapeKeyEvent.bind(this),this.referenceElement.addEventListener("focus",this.boundScheduleShow),this.referenceElement.addEventListener("blur",this.boundHide),document.addEventListener("keyup",this.boundHideOnEscapeKeyEvent)},TooltipController.prototype.unbindKeyboardEvents=function(){this.referenceElement.removeEventListener("focus",this.boundScheduleShow),this.referenceElement.removeEventListener("blur",this.boundHide),document.removeEventListener("keyup",this.boundHideOnEscapeKeyEvent)},TooltipController.prototype.bindMouseEvents=function(){this.boundScheduleShow=this.boundScheduleShow||this.scheduleShow.bind(this),this.boundHide=this.boundHide||this.scheduleHide.bind(this),this.boundClearActiveTimeout=this.boundClearActiveTimeout||this.clearActiveTimeout.bind(this),this.referenceElement.addEventListener("mouseover",this.boundScheduleShow),this.referenceElement.addEventListener("mouseout",this.boundHide),this.popoverElement.addEventListener("mouseover",this.boundClearActiveTimeout),this.popoverElement.addEventListener("mouseout",this.boundHide)},TooltipController.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundScheduleShow),this.referenceElement.removeEventListener("mouseout",this.boundHide),this.referenceElement.removeEventListener("focus",this.boundScheduleShow),this.referenceElement.removeEventListener("blur",this.boundHide),this.popoverElement.removeEventListener("mouseover",this.boundClearActiveTimeout),this.popoverElement.removeEventListener("mouseout",this.boundHide)},TooltipController.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},TooltipController.targets=[],TooltipController}(__webpack_require__(388).BasePopoverController);function applyOptionsAndTitleAttributes(element,options){options&&options.placement&&element.setAttribute("data-s-tooltip-placement",options.placement);var options=Stacks.application.getControllerForElementAndIdentifier(element,"s-tooltip");options?options.applyTitleAttributes():(options=element.getAttribute("data-controller"),element.setAttribute("data-controller","".concat(options||""," s-tooltip")))}exports.TooltipController=__webpack_require__,exports.setTooltipHtml=function(element,html,options){element.setAttribute("data-s-tooltip-html-title",html),element.removeAttribute("title"),applyOptionsAndTitleAttributes(element,options)},exports.setTooltipText=function(element,text,options){element.setAttribute("title",text),element.removeAttribute("data-s-tooltip-html-title"),applyOptionsAndTitleAttributes(element,options)}},637:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploaderController=void 0;__webpack_require__=function(_super){function UploaderController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(UploaderController,_super),UploaderController.prototype.connect=function(){_super.prototype.connect.call(this),this.boundDragEnter=this.handleUploaderActive.bind(this,!0),this.boundDragLeave=this.handleUploaderActive.bind(this,!1),this.inputTarget.addEventListener("dragenter",this.boundDragEnter),this.inputTarget.addEventListener("dragleave",this.boundDragLeave)},UploaderController.prototype.disconnect=function(){this.inputTarget.removeEventListener("dragenter",this.boundDragEnter),this.inputTarget.removeEventListener("dragleave",this.boundDragLeave),_super.prototype.disconnect.call(this)},UploaderController.prototype.handleInput=function(){var count,_this=this;this.previewsTarget.innerHTML="",this.inputTarget.files&&(count=this.inputTarget.files.length,this.getDataURLs(this.inputTarget.files,UploaderController.FILE_DISPLAY_LIMIT).then(function(res){var headingElement;_this.handleVisible(!0),1<res.length?((headingElement=document.createElement("div")).classList.add("s-uploader--previews-heading"),headingElement.innerText=res.length<count?"Showing ".concat(res.length," of ").concat(count," files"):"".concat(count," items"),_this.previewsTarget.appendChild(headingElement),_this.previewsTarget.classList.add("has-multiple")):_this.previewsTarget.classList.remove("has-multiple"),res.forEach(function(file){return _this.addFilePreview(file)}),_this.handleUploaderActive(!0)}).catch(function(){return null}))},UploaderController.prototype.reset=function(){this.inputTarget.value="",this.previewsTarget.innerHTML="",this.handleVisible(!1)},UploaderController.prototype.handleVisible=function(shouldPreview){var scope=this.targets.scope,hideElements=scope.findAllElements("[data-s-uploader-hide-on-input]"),showElements=scope.findAllElements("[data-s-uploader-show-on-input]"),scope=scope.findAllElements("[data-s-uploader-enable-on-input]");shouldPreview?(hideElements.forEach(function(el){el.classList.add("d-none")}),showElements.forEach(function(el){el.classList.remove("d-none")}),scope.forEach(function(el){el.removeAttribute("disabled")})):(hideElements.forEach(function(el){el.classList.remove("d-none")}),showElements.forEach(function(el){el.classList.add("d-none")}),scope.forEach(function(el){el.setAttribute("disabled","true")}),this.handleUploaderActive(!1))},UploaderController.prototype.addFilePreview=function(file){var previewElement,thumbElement;file&&(previewElement=document.createElement("div"),file.type.match("image/*")&&file.data?((thumbElement=document.createElement("img")).src=file.data.toString(),thumbElement.alt=file.name):(thumbElement=document.createElement("div")).innerText=file.name,thumbElement.classList.add("s-uploader--preview-thumbnail"),previewElement.appendChild(thumbElement),previewElement.classList.add("s-uploader--preview"),previewElement.setAttribute("data-filename",file.name),this.previewsTarget.appendChild(previewElement))},UploaderController.prototype.handleUploaderActive=function(active){this.uploaderTarget.classList.toggle("is-active",active)},UploaderController.prototype.fileToDataURL=function(file){var reader=new FileReader,name=file.name,size=file.size,type=file.type;return size<UploaderController.MAX_FILE_SIZE&&-1<type.indexOf("image")?new Promise(function(resolve,reject){reader.onload=function(evt){evt=null==(evt=null==evt?void 0:evt.target)?void 0:evt.result;evt?resolve({data:evt,name:name,type:type}):reject()},reader.readAsDataURL(file)}):Promise.resolve({name:name,type:type})},UploaderController.prototype.getDataURLs=function(files,limit){var _this=this,limit=Array.from(files).slice(0,Math.min(limit,files.length)).map(function(f){return _this.fileToDataURL(f)});return Promise.all(limit)},UploaderController.targets=["input","previews","uploader"],UploaderController.FILE_DISPLAY_LIMIT=10,UploaderController.MAX_FILE_SIZE=10485760,UploaderController}(__webpack_require__(36).StacksController);exports.UploaderController=__webpack_require__},603:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&("get"in desc?m.__esModule:!desc.writable&&!desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){o[k2=void 0===k2?k:k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)},controllers_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(708),__webpack_require__(470)),stacks_1=__webpack_require__(36);stacks_1.application.register("s-expandable-control",controllers_1.ExpandableController),stacks_1.application.register("s-modal",controllers_1.ModalController),stacks_1.application.register("s-navigation-tablist",controllers_1.TabListController),stacks_1.application.register("s-popover",controllers_1.PopoverController),stacks_1.application.register("s-table",controllers_1.TableController),stacks_1.application.register("s-tooltip",controllers_1.TooltipController),stacks_1.application.register("s-uploader",controllers_1.UploaderController),stacks_1.StacksApplication.finalize(),__exportStar(__webpack_require__(470),exports),__exportStar(__webpack_require__(36),exports)},36:function(__unused_webpack_module,exports,__webpack_require__){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||((ar=ar||Array.prototype.slice.call(from,0,i))[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},__webpack_require__=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.addController=exports.createController=exports.StacksController=exports.application=exports.StacksApplication=void 0,__webpack_require__(931)),StacksApplication=function(_super){function StacksApplication(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(StacksApplication,_super),StacksApplication.prototype.load=function(head){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];for(var head=Array.isArray(head)?head:__spreadArray([head],rest,!0),_a=0,definitions_1=head;_a<definitions_1.length;_a++){var definition=definitions_1[_a],definition=/^s-/.test(definition.identifier);if(StacksApplication._initializing&&!definition)throw'Stacks-created Stimulus controller names must start with "s-".';if(!StacksApplication._initializing&&definition)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}_super.prototype.load.call(this,head)},StacksApplication.start=function(element,schema){element=new StacksApplication(element,schema);return element.start(),element},StacksApplication.finalize=function(){StacksApplication._initializing=!1},StacksApplication._initializing=!0,StacksApplication}(__webpack_require__.Application),StacksController=(exports.StacksApplication=StacksApplication,exports.application=StacksApplication.start(),function(_super){function StacksController(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(StacksController,_super),StacksController.prototype.getElementData=function(element,key){return element.getAttribute("data-"+this.identifier+"-"+key)},StacksController.prototype.setElementData=function(element,key,value){element.setAttribute("data-"+this.identifier+"-"+key,value)},StacksController.prototype.removeElementData=function(element,key){element.removeAttribute("data-"+this.identifier+"-"+key)},StacksController.prototype.triggerEvent=function(eventName,detail,optionalElement){var event,eventName=this.identifier+":"+eventName;try{event=new CustomEvent(eventName,{bubbles:!0,cancelable:!0,detail:detail})}catch(ex){(event=document.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,detail)}return(optionalElement||this.element).dispatchEvent(event),event},StacksController}(__webpack_require__.Controller));function createController(controllerDefinition){var _a,prop,Controller=controllerDefinition.hasOwnProperty("targets")?((_a=function(_super){function Controller(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Controller,_super),Controller}(StacksController)).targets=controllerDefinition.targets,_a):function(_super){function Controller(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Controller,_super),Controller}(StacksController);for(prop in controllerDefinition)"targets"!==prop&&controllerDefinition.hasOwnProperty(prop)&&Object.defineProperty(Controller.prototype,prop,Object.getOwnPropertyDescriptor(controllerDefinition,prop));return Controller}exports.StacksController=StacksController,exports.createController=createController,exports.addController=function(name,controller){exports.application.register(name,createController(controller))}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];return void 0!==cachedModule||(cachedModule=__webpack_module_cache__[moduleId]={exports:{}},__webpack_modules__[moduleId].call(cachedModule.exports,cachedModule,cachedModule.exports,__webpack_require__)),cachedModule.exports}return __webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__(603)})()),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(function(){try{return require("highlight.js")}catch(e){}}()):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.stacksEditor=t(function(){try{return require("highlight.js")}catch(e){}}()):e.stacksEditor=t(e.hljs)}(self,e=>{return t={8337:(e,t,n)=>{"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function s(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===s(e)}function o(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var l={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},a={"http:":{validate:function(e,t,n){e=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(e)?e.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),!n.re.no_http.test(r)||3<=t&&":"===e[t-3]||3<=t&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length}},"mailto:":{validate:function(e,t,n){e=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(e)?e.match(n.re.mailto)[0].length:0}}},c="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function h(e){var t=e.re=n(6066)(e.__opts__),r=e.__tlds__.slice();function l(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(l(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(l(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(l(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(l(t.tpl_host_fuzzy_test),"i");var a=[];function c(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var r,n=e.__schemas__[t];null!==n&&(e.__compiled__[t]=r={validate:null,link:null},"[object Object]"===s(n)?("[object RegExp]"!==s(n.validate)?i(n.validate)?r.validate=n.validate:c(t,n):r.validate=function(e){return function(t,n){t=t.slice(n);return e.test(t)?t.match(e)[0].length:0}}(n.validate),i(n.normalize)?r.normalize=n.normalize:n.normalize?c(t,n):r.normalize=function(e,t){t.normalize(e)}):"[object String]"!==s(n)?c(t,n):a.push(t))}),a.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};r=Object.keys(e.__compiled__).filter(function(t){return 0<t.length&&e.__compiled__[t]}).map(o).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+r+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+r+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function u(e,t){t=new d(e,t);return e.__compiled__[t.schema].normalize(t,e),t}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce(function(e,t){return e||l.hasOwnProperty(t)},!1)&&(t=e,e={})),this.__opts__=r({},l,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},a,e),this.__compiled__={},this.__tlds__=c,this.__tlds_replaced__=!1,this.re={},h(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,h(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,s,i,l,a;if(this.re.schema_test.test(e))for((l=this.re.schema_search).lastIndex=0;null!==(t=l.exec(e));)if(s=this.testSchemaAt(e,t[2],l.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&0<=(a=e.search(this.re.host_fuzzy_test))&&(this.__index__<0||a<this.__index__)&&null!==(a=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=a.index+a[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=a.index+a[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&0<=e.indexOf("@")&&null!==(a=e.match(this.re.email_fuzzy))&&(i=a.index+a[1].length,a=a.index+a[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a)),0<=this.__index__},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];0<=this.__index__&&this.__text_cache__===e&&(n.push(u(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(u(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.matchAtStart=function(e){var t;return this.__text_cache__=e,this.__index__=-1,e.length&&(t=this.re.schema_at_start.exec(e))&&(e=this.testSchemaAt(e,t[2],t[0].length))?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+e,u(this,0)):null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),h(this),this},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},6066:(e,t,n)=>{"use strict";e.exports=function(e){var t={};return e=e||{},t.src_Any=n(9369).source,t.src_Cc=n(9413).source,t.src_Z=n(5045).source,t.src_P=n(3189).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|"),t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},9980:(e,t,n)=>{"use strict";e.exports=n(7024)},6233:(e,t,n)=>{"use strict";e.exports=n(9323)},813:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},1947:e=>{"use strict";var t="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",n="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=new RegExp("^(?:"+t+"|"+n+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),t=new RegExp("^(?:"+t+"|"+n+")");e.exports.n=r,e.exports.q=t},7022:(e,t,n)=>{"use strict";var r=Object.prototype.hasOwnProperty;function s(e,t){return r.call(e,t)}function i(e){return!(55296<=e&&e<=57343||64976<=e&&e<=65007||65535==(65535&e)||65534==(65535&e)||0<=e&&e<=8||11===e||14<=e&&e<=31||127<=e&&e<=159||1114111<e)}function o(e){var t;return 65535<e?(t=55296+((e-=65536)>>10),String.fromCharCode(t,56320+(1023&e))):String.fromCharCode(e)}var l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,a=new RegExp(l.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,h=n(6233),d=/[&<>"]/,u=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function f(e){return p[e]}var m=/[.?*+^$[\]\\(){}|-]/g,g=n(3189);t.lib={},t.lib.mdurl=n(8765),t.lib.ucmicro=n(4205),t.assign=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=s,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(l,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(a,function(e,t,n){return t||function(e,t){var n=0;return s(h,t)?h[t]:35===t.charCodeAt(0)&&c.test(t)&&i(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?o(n):e}(e,n)})},t.isValidEntityCode=i,t.fromCodePoint=o,t.escapeHtml=function(e){return d.test(e)?e.replace(u,f):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(8192<=e&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return g.test(e)},t.escapeRE=function(e){return e.replace(m,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),(e=""==="".toLowerCase()?e.replace(//g,""):e).toLowerCase().toUpperCase()}},1685:(e,t,n)=>{"use strict";t.parseLinkLabel=n(3595),t.parseLinkDestination=n(2548),t.parseLinkTitle=n(8040)},2548:(e,t,n)=>{"use strict";var r=n(7022).unescapeAll;e.exports=function(e,t,n){var s,i,o=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t))for(t++;t<n;){if(10===(s=e.charCodeAt(t)))return l;if(60===s)return l;if(62===s)return l.pos=t+1,l.str=r(e.slice(o+1,t)),l.ok=!0,l;92===s&&t+1<n?t+=2:t++}else{for(i=0;t<n&&32!==(s=e.charCodeAt(t))&&!(s<32||127===s);)if(92===s&&t+1<n){if(32===e.charCodeAt(t+1))break;t+=2}else{if(40===s&&32<++i)return l;if(41===s){if(0===i)break;i--}t++}o!==t&&0===i&&(l.str=r(e.slice(o,t)),l.lines=0,l.pos=t,l.ok=!0)}return l}},3595:e=>{"use strict";e.exports=function(e,t,n){var r,s,i,o,l=-1,a=e.posMax,c=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(93===(i=e.src.charCodeAt(e.pos))&&0==--r){s=!0;break}if(o=e.pos,e.md.inline.skipToken(e),91===i)if(o===e.pos-1)r++;else if(n)return e.pos=c,-1}return s&&(l=e.pos),e.pos=c,l}},8040:(e,t,n)=>{"use strict";var r=n(7022).unescapeAll;e.exports=function(e,t,n){var s,i,o=0,l=t,a={ok:!1,pos:0,lines:0,str:""};if(!(n<=t||34!==(i=e.charCodeAt(t))&&39!==i&&40!==i))for(t++,40===i&&(i=41);t<n;){if((s=e.charCodeAt(t))===i)return a.pos=t+1,a.lines=o,a.str=r(e.slice(l+1,t)),a.ok=!0,a;if(40===s&&41===i)return a;10===s?o++:92===s&&t+1<n&&(t++,10===e.charCodeAt(t)&&o++),t++}return a}},7024:(e,t,n)=>{"use strict";var r=n(7022),s=n(1685),i=n(7529),o=n(7346),l=n(2471),a=n(4485),c=n(8337),h=n(8765),d=n(3689),u={default:n(4218),zero:n(873),commonmark:n(6895)},p=/^(vbscript|javascript|file|data):/,f=/^data:image\/(gif|png|jpeg|webp);/;function m(e){e=e.trim().toLowerCase();return!p.test(e)||!!f.test(e)}var g=["http:","https:","mailto:"];function k(e){var t=h.parse(e,!0);if(t.hostname&&(!t.protocol||0<=g.indexOf(t.protocol)))try{t.hostname=d.toASCII(t.hostname)}catch(e){}return h.encode(h.format(t))}function b(e){var t=h.parse(e,!0);if(t.hostname&&(!t.protocol||0<=g.indexOf(t.protocol)))try{t.hostname=d.toUnicode(t.hostname)}catch(e){}return h.decode(h.format(t),h.decode.defaultChars+"%")}function y(e,t){if(!(this instanceof y))return new y(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new a,this.block=new l,this.core=new o,this.renderer=new i,this.linkify=new c,this.validateLink=m,this.normalizeLink=k,this.normalizeLinkText=b,this.utils=r,this.helpers=r.assign({},s),this.options={},this.configure(e),t&&this.set(t)}y.prototype.set=function(e){return r.assign(this.options,e),this},y.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=u[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(e)return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)}),this;throw new Error("Wrong `markdown-it` preset, can't be empty")},y.prototype.enable=function(e,t){var n=[],r=(Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0)),e.filter(function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},y.prototype.disable=function(e,t){var n=[],r=(Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0)),e.filter(function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},y.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},y.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");e=new this.core.State(e,this,t);return this.core.process(e),e.tokens},y.prototype.render=function(e,t){return this.renderer.render(this.parse(e,t=t||{}),this.options,t)},y.prototype.parseInline=function(e,t){e=new this.core.State(e,this,t);return e.inlineMode=!0,this.core.process(e),e.tokens},y.prototype.renderInline=function(e,t){return this.renderer.render(this.parseInline(e,t=t||{}),this.options,t)},e.exports=y},2471:(e,t,n)=>{"use strict";var r=n(9580),s=[["table",n(1785),["paragraph","reference"]],["code",n(8768)],["fence",n(3542),["paragraph","reference","blockquote","list"]],["blockquote",n(5258),["paragraph","reference","blockquote","list"]],["hr",n(5634),["paragraph","reference","blockquote","list"]],["list",n(8532),["paragraph","reference","blockquote"]],["reference",n(3804)],["html_block",n(6329),["paragraph","reference","blockquote"]],["heading",n(1630),["paragraph","reference","blockquote"]],["lheading",n(6850)],["paragraph",n(6864)]];function i(){this.ruler=new r;for(var e=0;e<s.length;e++)this.ruler.push(s[e][0],s[e][1],{alt:(s[e][2]||[]).slice()})}i.prototype.tokenize=function(e,t,n){for(var r,s=this.ruler.getRules(""),i=s.length,o=t,l=!1,a=e.md.options.maxNesting;o<n&&(e.line=o=e.skipEmptyLines(o),!(n<=o)&&!(e.sCount[o]<e.blkIndent));){if(e.level>=a){e.line=n;break}for(r=0;r<i&&!s[r](e,o,n,!1);r++);e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),(o=e.line)<n&&e.isEmpty(o)&&(l=!0,o++,e.line=o)}},i.prototype.parse=function(e,t,n,r){e&&(e=new this.State(e,t,n,r),this.tokenize(e,e.line,e.lineMax))},i.prototype.State=n(2948),e.exports=i},7346:(e,t,n)=>{"use strict";var r=n(9580),s=[["normalize",n(4129)],["block",n(898)],["inline",n(9827)],["linkify",n(7830)],["replacements",n(2834)],["smartquotes",n(8450)],["text_join",n(6633)]];function i(){this.ruler=new r;for(var e=0;e<s.length;e++)this.ruler.push(s[e][0],s[e][1])}i.prototype.process=function(e){for(var r,t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},i.prototype.State=n(6480),e.exports=i},4485:(e,t,n)=>{"use strict";var r=n(9580),s=[["text",n(9941)],["linkify",n(2906)],["newline",n(3905)],["escape",n(1917)],["backticks",n(9755)],["strikethrough",n(4814).w],["emphasis",n(7894).w],["link",n(1727)],["image",n(3006)],["autolink",n(3420)],["html_inline",n(1779)],["entity",n(9391)]],i=[["balance_pairs",n(9354)],["strikethrough",n(4814).g],["emphasis",n(7894).g],["fragments_join",n(9969)]];function o(){var e;for(this.ruler=new r,e=0;e<s.length;e++)this.ruler.push(s[e][0],s[e][1]);for(this.ruler2=new r,e=0;e<i.length;e++)this.ruler2.push(i[e][0],i[e][1])}o.prototype.skipToken=function(e){var t,n,r=e.pos,s=this.ruler.getRules(""),i=s.length,o=e.md.options.maxNesting,l=e.cache;if(void 0===l[r]){if(e.level<o)for(n=0;n<i&&(e.level++,t=s[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,l[r]=e.pos}else e.pos=l[r]},o.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),s=r.length,i=e.posMax,o=e.md.options.maxNesting;e.pos<i;){if(e.level<o)for(n=0;n<s&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},o.prototype.parse=function(e,t,n,r){var s,i,o,l=new this.State(e,t,n,r);for(this.tokenize(l),o=(i=this.ruler2.getRules("")).length,s=0;s<o;s++)i[s](l)},o.prototype.State=n(670),e.exports=o},6895:e=>{"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4218:e=>{"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},873:e=>{"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7529:(e,t,n)=>{"use strict";var r=n(7022).assign,s=n(7022).unescapeAll,i=n(7022).escapeHtml,o={};function l(){this.rules=r({},o)}o.code_inline=function(e,t,n,r,s){var o=e[t];return"<code"+s.renderAttrs(o)+">"+i(e[t].content)+"</code>"},o.code_block=function(e,t,n,r,s){var o=e[t];return"<pre"+s.renderAttrs(o)+"><code>"+i(e[t].content)+"</code></pre>\n"},o.fence=function(e,t,n,r,o){var c,e=e[t],t=e.info?s(e.info).trim():"",f="",m="";return t&&(f=(c=t.split(/(\s+)/g))[0],m=c.slice(2).join("")),0===(c=n.highlight&&n.highlight(e.content,f,m)||i(e.content)).indexOf("<pre")?c+"\n":t?(m=e.attrIndex("class"),t=e.attrs?e.attrs.slice():[],m<0?t.push(["class",n.langPrefix+f]):(t[m]=t[m].slice(),t[m][1]+=" "+n.langPrefix+f),"<pre><code"+o.renderAttrs({attrs:t})+">"+c+"</code></pre>\n"):"<pre><code"+o.renderAttrs(e)+">"+c+"</code></pre>\n"},o.image=function(e,t,n,r,s){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=s.renderInlineAsText(i.children,n,r),s.renderToken(e,t,n)},o.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},o.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},o.text=function(e,t){return i(e[t].content)},o.html_block=function(e,t){return e[t].content},o.html_inline=function(e,t){return e[t].content},l.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+i(e.attrs[t][0])+'="'+i(e.attrs[t][1])+'"';return r},l.prototype.renderToken=function(e,t,n){var s="",i=!1,o=e[t];return o.hidden?"":(o.block&&-1!==o.nesting&&t&&e[t-1].hidden&&(s+="\n"),s=(s+=(-1===o.nesting?"</":"<")+o.tag)+this.renderAttrs(o),0===o.nesting&&n.xhtmlOut&&(s+=" /"),o.block&&(i=!0,1===o.nesting&&t+1<e.length&&("inline"===(n=e[t+1]).type||n.hidden||-1===n.nesting&&n.tag===o.tag)&&(i=!1)),s+(i?">\n":">"))},l.prototype.renderInline=function(e,t,n){for(var r,s="",i=this.rules,o=0,l=e.length;o<l;o++)void 0!==i[r=e[o].type]?s+=i[r](e,o,t,n,this):s+=this.renderToken(e,o,t);return s},l.prototype.renderInlineAsText=function(e,t,n){for(var r="",s=0,i=e.length;s<i;s++)"text"===e[s].type?r+=e[s].content:"image"===e[s].type?r+=this.renderInlineAsText(e[s].children,t,n):"softbreak"===e[s].type&&(r+="\n");return r},l.prototype.render=function(e,t,n){for(var i,o="",l=this.rules,r=0,s=e.length;r<s;r++)"inline"===(i=e[r].type)?o+=this.renderInline(e[r].children,t,n):void 0!==l[i]?o+=l[e[r].type](e,r,t,n,this):o+=this.renderToken(e,r,t,n);return o},e.exports=l},9580:e=>{"use strict";function t(){this.__rules__=[],this.__cache__=null}t.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},t.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){!n.enabled||t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn)})})},t.prototype.at=function(e,t,n){var r=this.__find__(e),n=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=n.alt||[],this.__cache__=null},t.prototype.before=function(e,t,n,r){var s=this.__find__(e),r=r||{};if(-1===s)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},t.prototype.after=function(e,t,n,r){var s=this.__find__(e),r=r||{};if(-1===s)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},t.prototype.push=function(e,t,n){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(n||{}).alt||[]}),this.__cache__=null},t.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)},this),this.__cache__=null,n},t.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},t.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)},this),this.__cache__=null,n},t.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=t},5258:(e,t,n)=>{"use strict";var r=n(7022).isSpace;e.exports=function(e,t,n,s){var i,o,l,a,c,h,d,u,p,f,m,g,b,y,v,w,x,C,_,S=e.lineMax,M=e.bMarks[t]+e.tShift[t],A=e.eMarks[t];if(4<=e.sCount[t]-e.blkIndent)return!1;if(62!==e.src.charCodeAt(M++))return!1;if(!s){for(a=p=e.sCount[t]+1,32===e.src.charCodeAt(M)?(M++,a++,p++,v=!(i=!1)):9===e.src.charCodeAt(M)?(v=!0,i=(e.bsCount[t]+p)%4!=3||(M++,a++,p++,!1)):v=!1,f=[e.bMarks[t]],e.bMarks[t]=M;M<A&&(o=e.src.charCodeAt(M),r(o));)9===o?p+=4-(p+e.bsCount[t]+(i?1:0))%4:p++,M++;for(m=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(v?1:0),h=A<=M,b=[e.sCount[t]],e.sCount[t]=p-a,y=[e.tShift[t]],e.tShift[t]=M-e.bMarks[t],x=e.md.block.ruler.getRules("blockquote"),s=e.parentType,e.parentType="blockquote",u=t+1;u<n&&(_=e.sCount[u]<e.blkIndent,!((M=e.bMarks[u]+e.tShift[u])>=(A=e.eMarks[u])));u++)if(62!==e.src.charCodeAt(M++)||_){if(h)break;for(w=!1,l=0,c=x.length;l<c;l++)if(x[l](e,u,n,!0)){w=!0;break}if(w){e.lineMax=u,0!==e.blkIndent&&(f.push(e.bMarks[u]),m.push(e.bsCount[u]),y.push(e.tShift[u]),b.push(e.sCount[u]),e.sCount[u]-=e.blkIndent);break}f.push(e.bMarks[u]),m.push(e.bsCount[u]),y.push(e.tShift[u]),b.push(e.sCount[u]),e.sCount[u]=-1}else{for(a=p=e.sCount[u]+1,32===e.src.charCodeAt(M)?(M++,a++,p++,v=!(i=!1)):9===e.src.charCodeAt(M)?(v=!0,i=(e.bsCount[u]+p)%4!=3||(M++,a++,p++,!1)):v=!1,f.push(e.bMarks[u]),e.bMarks[u]=M;M<A&&(o=e.src.charCodeAt(M),r(o));)9===o?p+=4-(p+e.bsCount[u]+(i?1:0))%4:p++,M++;h=A<=M,m.push(e.bsCount[u]),e.bsCount[u]=e.sCount[u]+1+(v?1:0),b.push(e.sCount[u]),e.sCount[u]=p-a,y.push(e.tShift[u]),e.tShift[u]=M-e.bMarks[u]}for(g=e.blkIndent,e.blkIndent=0,(C=e.push("blockquote_open","blockquote",1)).markup=">",C.map=d=[t,0],e.md.block.tokenize(e,t,u),(C=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=S,e.parentType=s,d[1]=e.line,l=0;l<y.length;l++)e.bMarks[l+t]=f[l],e.tShift[l+t]=y[l],e.sCount[l+t]=b[l],e.bsCount[l+t]=m[l];e.blkIndent=g}return!0}},8768:e=>{"use strict";e.exports=function(e,t,n){var r,s,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(s=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(4<=e.sCount[r]-e.blkIndent))break;s=++r}return e.line=s,(i=e.push("code_block","code",0)).content=e.getLines(t,s,4+e.blkIndent,!1)+"\n",i.map=[t,e.line],!0}},3542:e=>{"use strict";e.exports=function(e,t,n,r){var s,i,o,l,a,h,d=!1,u=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(4<=e.sCount[t]-e.blkIndent)return!1;if(p<u+3)return!1;if(126!==(s=e.src.charCodeAt(u))&&96!==s)return!1;if(a=u,(i=(u=e.skipChars(u,s))-a)<3)return!1;if(h=e.src.slice(a,u),o=e.src.slice(u,p),96===s&&0<=o.indexOf(String.fromCharCode(s)))return!1;if(!r){for(l=t;!(++l>=n||(u=a=e.bMarks[l]+e.tShift[l])<(p=e.eMarks[l])&&e.sCount[l]<e.blkIndent);)if(e.src.charCodeAt(u)===s&&!(4<=e.sCount[l]-e.blkIndent||(u=e.skipChars(u,s))-a<i||(u=e.skipSpaces(u))<p)){d=!0;break}i=e.sCount[t],e.line=l+(d?1:0),(r=e.push("fence","code",0)).info=o,r.content=e.getLines(t+1,l,i,!0),r.markup=h,r.map=[t,e.line]}return!0}},1630:(e,t,n)=>{"use strict";var r=n(7022).isSpace;e.exports=function(e,t,n,s){var i,o,c=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(4<=e.sCount[t]-e.blkIndent)return!1;if(35!==(i=e.src.charCodeAt(c))||h<=c)return!1;for(o=1,i=e.src.charCodeAt(++c);35===i&&c<h&&o<=6;)o++,i=e.src.charCodeAt(++c);return!(6<o||c<h&&!r(i)||(s||(h=e.skipSpacesBack(h,c),(s=e.skipCharsBack(h,35,c))>c&&r(e.src.charCodeAt(s-1))&&(h=s),e.line=t+1,(s=e.push("heading_open","h"+String(o),1)).markup="########".slice(0,o),s.map=[t,e.line],(s=e.push("inline","",0)).content=e.src.slice(c,h).trim(),s.map=[t,e.line],s.children=[],(s=e.push("heading_close","h"+String(o),-1)).markup="########".slice(0,o)),0))}},5634:(e,t,n)=>{"use strict";var r=n(7022).isSpace;e.exports=function(e,t,n,s){var i,o,l,c=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(4<=e.sCount[t]-e.blkIndent)return!1;if(42!==(i=e.src.charCodeAt(c++))&&45!==i&&95!==i)return!1;for(o=1;c<h;){if((l=e.src.charCodeAt(c++))!==i&&!r(l))return!1;l===i&&o++}return!(o<3||(s||(e.line=t+1,(s=e.push("hr","hr",0)).map=[t,e.line],s.markup=Array(o+1).join(String.fromCharCode(i))),0))}},6329:(e,t,n)=>{"use strict";var r=n(813),n=n(1947).q,i=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(n.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var s,o,a,c=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(4<=e.sCount[t]-e.blkIndent)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(a=e.src.slice(c,h),s=0;s<i.length&&!i[s][0].test(a);s++);if(s===i.length)return!1;if(r)return i[s][2];if(o=t+1,!i[s][1].test(a))for(;o<n&&!(e.sCount[o]<e.blkIndent);o++)if(c=e.bMarks[o]+e.tShift[o],h=e.eMarks[o],a=e.src.slice(c,h),i[s][1].test(a)){0!==a.length&&o++;break}return e.line=o,(r=e.push("html_block","",0)).map=[t,o],r.content=e.getLines(t,o,e.blkIndent,!0),!0}},6850:e=>{"use strict";e.exports=function(e,t,n){var r,s,i,o,l,a,c,h,d,u,p=t+1,f=e.md.block.ruler.getRules("paragraph");if(4<=e.sCount[t]-e.blkIndent)return!1;for(u=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(3<e.sCount[p]-e.blkIndent)){if(e.sCount[p]>=e.blkIndent&&(a=e.bMarks[p]+e.tShift[p])<(c=e.eMarks[p])&&(45===(d=e.src.charCodeAt(a))||61===d)&&(a=e.skipChars(a,d),(a=e.skipSpaces(a))>=c)){h=61===d?1:2;break}if(!(e.sCount[p]<0)){for(s=!1,i=0,o=f.length;i<o;i++)if(f[i](e,p,n,!0)){s=!0;break}if(s)break}}return!!h&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(l=e.push("heading_open","h"+String(h),1)).markup=String.fromCharCode(d),l.map=[t,e.line],(l=e.push("inline","",0)).content=r,l.map=[t,e.line-1],l.children=[],(l=e.push("heading_close","h"+String(h),-1)).markup=String.fromCharCode(d),e.parentType=u,!0)}},8532:(e,t,n)=>{"use strict";var r=n(7022).isSpace;function s(e,t){var n,s=e.bMarks[t]+e.tShift[t],t=e.eMarks[t];return 42!==(n=e.src.charCodeAt(s++))&&45!==n&&43!==n||s<t&&(n=e.src.charCodeAt(s),!r(n))?-1:s}function i(e,t){var n,s=e.bMarks[t]+e.tShift[t],i=s,o=e.eMarks[t];if(o<=i+1)return-1;if((n=e.src.charCodeAt(i++))<48||57<n)return-1;for(;;){if(o<=i)return-1;if(!(48<=(n=e.src.charCodeAt(i++))&&n<=57)){if(41===n||46===n)break;return-1}if(10<=i-s)return-1}return i<o&&(n=e.src.charCodeAt(i),!r(n))?-1:i}e.exports=function(e,t,n,r){var o,l,a,d,u,p,f,g,k,b,y,v,w,x,_,S,M,A,T,E,O,D,N,I,L=!1,z=!0;if(4<=e.sCount[t]-e.blkIndent)return!1;if(0<=e.listIndent&&4<=e.sCount[t]-e.listIndent&&e.sCount[t]<e.blkIndent)return!1;if(r&&"paragraph"===e.parentType&&e.sCount[t]>=e.blkIndent&&(L=!0),0<=(T=i(e,t))){if(u=!0,O=e.bMarks[t]+e.tShift[t],b=Number(e.src.slice(O,T-1)),L&&1!==b)return!1}else{if(!(0<=(T=s(e,t))))return!1;u=!1}if(L&&e.skipSpaces(T)>=e.eMarks[t])return!1;if(k=e.src.charCodeAt(T-1),!r){for(g=e.tokens.length,u?(I=e.push("ordered_list_open","ol",1),1!==b&&(I.attrs=[["start",b]])):I=e.push("bullet_list_open","ul",1),I.map=L=[t,0],I.markup=String.fromCharCode(k),v=t,E=!1,N=e.md.block.ruler.getRules("list"),r=e.parentType,e.parentType="list";v<n;){for(A=T,y=e.eMarks[v],d=w=e.sCount[v]+T-(e.bMarks[t]+e.tShift[t]);A<y;){if(9===(o=e.src.charCodeAt(A)))w+=4-(w+e.bsCount[v])%4;else{if(32!==o)break;w++}A++}if(d=d+(d=4<(d=(l=A)>=y?1:w-d)?1:d),(I=e.push("list_item_open","li",1)).markup=String.fromCharCode(k),I.map=p=[t,0],u&&(I.info=e.src.slice(O,T-1)),M=e.tight,S=e.tShift[t],_=e.sCount[t],x=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=d,e.tight=!0,e.tShift[t]=l-e.bMarks[t],e.sCount[t]=w,y<=l&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!E||(z=!1),E=1<e.line-t&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=x,e.tShift[t]=S,e.sCount[t]=_,e.tight=M,(I=e.push("list_item_close","li",-1)).markup=String.fromCharCode(k),v=t=e.line,p[1]=v,e.bMarks[t],n<=v)break;if(e.sCount[v]<e.blkIndent)break;if(4<=e.sCount[t]-e.blkIndent)break;for(D=!1,a=0,f=N.length;a<f;a++)if(N[a](e,v,n,!0)){D=!0;break}if(D)break;if(u){if((T=i(e,v))<0)break;O=e.bMarks[v]+e.tShift[v]}else if((T=s(e,v))<0)break;if(k!==e.src.charCodeAt(T-1))break}(I=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(k),L[1]=v,e.line=v,e.parentType=r,z&&function(e){for(var s=e.level+2,n=g+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===s&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e)}return!0}},6864:e=>{"use strict";e.exports=function(e,t){var n,r,s,i,o,a=t+1,c=e.md.block.ruler.getRules("paragraph"),h=e.lineMax,l=e.parentType;for(e.parentType="paragraph";a<h&&!e.isEmpty(a);a++)if(!(3<e.sCount[a]-e.blkIndent||e.sCount[a]<0)){for(r=!1,s=0,i=c.length;s<i;s++)if(c[s](e,a,h,!0)){r=!0;break}if(r)break}return n=e.getLines(t,a,e.blkIndent,!1).trim(),e.line=a,(o=e.push("paragraph_open","p",1)).map=[t,e.line],(o=e.push("inline","",0)).content=n,o.map=[t,e.line],o.children=[],o=e.push("paragraph_close","p",-1),e.parentType=l,!0}},3804:(e,t,n)=>{"use strict";var r=n(7022).normalizeReference,s=n(7022).isSpace;e.exports=function(e,t,n,i){var o,l,a,c,h,d,u,f,m,g,k,b,y,v,w,x=0,C=e.bMarks[t]+e.tShift[t],_=e.eMarks[t],S=t+1;if(4<=e.sCount[t]-e.blkIndent)return!1;if(91!==e.src.charCodeAt(C))return!1;for(;++C<_;)if(93===e.src.charCodeAt(C)&&92!==e.src.charCodeAt(C-1)){if(C+1===_)return!1;if(58!==e.src.charCodeAt(C+1))return!1;break}for(c=e.lineMax,v=e.md.block.ruler.getRules("reference"),m=e.parentType,e.parentType="reference";S<c&&!e.isEmpty(S);S++)if(!(3<e.sCount[S]-e.blkIndent||e.sCount[S]<0)){for(y=!1,d=0,u=v.length;d<u;d++)if(v[d](e,S,c,!0)){y=!0;break}if(y)break}for(_=(b=e.getLines(t,S,e.blkIndent,!1).trim()).length,C=1;C<_;C++){if(91===(o=b.charCodeAt(C)))return!1;if(93===o){f=C;break}(10===o||92===o&&++C<_&&10===b.charCodeAt(C))&&x++}if(f<0||58!==b.charCodeAt(f+1))return!1;for(C=f+2;C<_;C++)if(10===(o=b.charCodeAt(C)))x++;else if(!s(o))break;if(!(g=e.md.helpers.parseLinkDestination(b,C,_)).ok)return!1;if(h=e.md.normalizeLink(g.str),!e.md.validateLink(h))return!1;for(l=C=g.pos,a=x+=g.lines,k=C;C<_;C++)if(10===(o=b.charCodeAt(C)))x++;else if(!s(o))break;for(g=e.md.helpers.parseLinkTitle(b,C,_),C<_&&k!==C&&g.ok?(w=g.str,C=g.pos,x+=g.lines):(w="",C=l,x=a);C<_&&(o=b.charCodeAt(C),s(o));)C++;if(C<_&&10!==b.charCodeAt(C)&&w)for(w="",C=l,x=a;C<_&&(o=b.charCodeAt(C),s(o));)C++;return!(C<_&&10!==b.charCodeAt(C)||!(k=r(b.slice(1,f)))||(i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[k]&&(e.env.references[k]={title:w,href:h}),e.parentType=m,e.line=t+x+1),0))}},2948:(e,t,n)=>{"use strict";var r=n(5872),s=n(7022).isSpace;function i(e,t,n,r){var i,o,l,a,c,h,d,u;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",u=!1,l=a=h=d=0,c=(o=this.src).length;a<c;a++){if(i=o.charCodeAt(a),!u){if(s(i)){h++,9===i?d+=4-d%4:d++;continue}u=!0}10!==i&&a!==c-1||(10!==i&&a++,this.bMarks.push(l),this.eMarks.push(a),this.tShift.push(h),this.sCount.push(d),this.bsCount.push(0),u=!1,d=h=0,l=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(e,t,n){e=new r(e,t,n);return e.block=!0,n<0&&this.level--,e.level=this.level,0<n&&this.level++,this.tokens.push(e),e},i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),s(t));e++);return e},i.prototype.skipSpacesBack=function(e,t){if(!(e<=t))for(;t<e;)if(!s(this.src.charCodeAt(--e)))return e+1;return e},i.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,n){if(!(e<=n))for(;n<e;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,n,r){var i,o,l,a,c,h,d,u=e;if(t<=e)return"";for(h=new Array(t-e),i=0;u<t;u++,i++){for(o=0,d=a=this.bMarks[u],c=u+1<t||r?this.eMarks[u]+1:this.eMarks[u];a<c&&o<n;){if(l=this.src.charCodeAt(a),s(l))9===l?o+=4-(o+this.bsCount[u])%4:o++;else{if(!(a-d<this.tShift[u]))break;o++}a++}h[i]=n<o?new Array(o-n+1).join(" ")+this.src.slice(a,c):this.src.slice(a,c)}return h.join("")},i.prototype.Token=r,e.exports=i},1785:(e,t,n)=>{"use strict";var r=n(7022).isSpace;function s(e,t){var n=e.bMarks[t]+e.tShift[t],t=e.eMarks[t];return e.src.slice(n,t)}function i(e){for(var n=[],r=0,s=e.length,i=!1,o=0,l="",t=e.charCodeAt(r);r<s;)124===t&&(o=i?(l+=e.substring(o,r-1),r):(n.push(l+e.substring(o,r)),l="",r+1)),i=92===t,t=e.charCodeAt(++r);return n.push(l+e.substring(o)),n}e.exports=function(e,t,n,o){var l,a,c,h,d,u,p,f,m,g,k,y,w,x,C,_;if(n<t+2)return!1;if(e.sCount[u=t+1]<e.blkIndent)return!1;if(4<=e.sCount[u]-e.blkIndent)return!1;if((c=e.bMarks[u]+e.tShift[u])>=e.eMarks[u])return!1;if(124!==(C=e.src.charCodeAt(c++))&&45!==C&&58!==C)return!1;if(c>=e.eMarks[u])return!1;if(124!==(_=e.src.charCodeAt(c++))&&45!==_&&58!==_&&!r(_))return!1;if(45===C&&r(_))return!1;for(;c<e.eMarks[u];){if(124!==(l=e.src.charCodeAt(c))&&45!==l&&58!==l&&!r(l))return!1;c++}for(p=(a=s(e,t+1)).split("|"),g=[],h=0;h<p.length;h++){if(!(k=p[h].trim())){if(0===h||h===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;58===k.charCodeAt(k.length-1)?g.push(58===k.charCodeAt(0)?"center":"right"):58===k.charCodeAt(0)?g.push("left"):g.push("")}if(-1===(a=s(e,t).trim()).indexOf("|"))return!1;if(4<=e.sCount[t]-e.blkIndent)return!1;if((p=i(a)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),0===(f=p.length)||f!==g.length)return!1;if(!o){for(C=e.parentType,e.parentType="table",x=e.md.block.ruler.getRules("blockquote"),(m=e.push("table_open","table",1)).map=_=[t,0],(m=e.push("thead_open","thead",1)).map=[t,t+1],(m=e.push("tr_open","tr",1)).map=[t,t+1],h=0;h<p.length;h++)m=e.push("th_open","th",1),g[h]&&(m.attrs=[["style","text-align:"+g[h]]]),(m=e.push("inline","",0)).content=p[h].trim(),m.children=[],m=e.push("th_close","th",-1);for(m=e.push("tr_close","tr",-1),m=e.push("thead_close","thead",-1),u=t+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(w=!1,h=0,d=x.length;h<d;h++)if(x[h](e,u,n,!0)){w=!0;break}if(w)break;if(!(a=s(e,u).trim()))break;if(4<=e.sCount[u]-e.blkIndent)break;for((p=i(a)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),u===t+2&&((m=e.push("tbody_open","tbody",1)).map=y=[t+2,0]),(m=e.push("tr_open","tr",1)).map=[u,u+1],h=0;h<f;h++)m=e.push("td_open","td",1),g[h]&&(m.attrs=[["style","text-align:"+g[h]]]),(m=e.push("inline","",0)).content=p[h]?p[h].trim():"",m.children=[],m=e.push("td_close","td",-1);m=e.push("tr_close","tr",-1)}y&&(m=e.push("tbody_close","tbody",-1),y[1]=u),m=e.push("table_close","table",-1),_[1]=u,e.parentType=C,e.line=u}return!0}},898:e=>{"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},9827:e=>{"use strict";e.exports=function(e){for(var t,s=e.tokens,n=0,r=s.length;n<r;n++)"inline"===(t=s[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},7830:(e,t,n)=>{"use strict";var r=n(7022).arrayReplaceAt;e.exports=function(e){var t,n,i,o,l,a,c,h,d,u,p,f,m,g,b,y,v,w=e.tokens;if(e.md.options.linkify)for(n=0,i=w.length;n<i;n++)if("inline"===w[n].type&&e.md.linkify.pretest(w[n].content))for(m=0,t=(o=w[n].children).length-1;0<=t;t--)if("link_close"!==(a=o[t]).type){if("html_inline"===a.type&&(v=a.content,/^<a[>\s]/i.test(v)&&0<m&&m--,/^<\/a\s*>/i.test(a.content)&&m++),!(0<m)&&"text"===a.type&&e.md.linkify.test(a.content)){for(d=a.content,y=e.md.linkify.match(d),c=[],f=a.level,(p=0)<y.length&&0===y[0].index&&0<t&&"text_special"===o[t-1].type&&(y=y.slice(1)),h=0;h<y.length;h++)g=y[h].url,g=e.md.normalizeLink(g),e.md.validateLink(g)&&(b=y[h].text,b=y[h].schema?"mailto:"!==y[h].schema||/^mailto:/i.test(b)?e.md.normalizeLinkText(b):e.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,""),(u=y[h].index)>p&&((l=new e.Token("text","",0)).content=d.slice(p,u),l.level=f,c.push(l)),(l=new e.Token("link_open","a",1)).attrs=[["href",g]],l.level=f++,l.markup="linkify",l.info="auto",c.push(l),(l=new e.Token("text","",0)).content=b,l.level=f,c.push(l),(l=new e.Token("link_close","a",-1)).level=--f,l.markup="linkify",l.info="auto",c.push(l),p=y[h].lastIndex);p<d.length&&((l=new e.Token("text","",0)).content=d.slice(p),l.level=f,c.push(l)),w[n].children=o=r(o,t,c)}}else for(t--;o[t].level!==a.level&&"link_open"!==o[t].type;)t--}},4129:e=>{"use strict";var t=/\r\n?|\n/g,n=/\0/g;e.exports=function(e){var r=(r=e.src.replace(t,"\n")).replace(n,"");e.src=r}},2834:e=>{"use strict";var t=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,n=/\((c|tm|r)\)/i,r=/\((c|tm|r)\)/gi,s={c:"",r:"",tm:""};function i(e,t){return s[t.toLowerCase()]}function o(e){for(var n,s=0,t=e.length-1;0<=t;t--)"text"!==(n=e[t]).type||s||(n.content=n.content.replace(r,i)),"link_open"===n.type&&"auto"===n.info&&s--,"link_close"===n.type&&"auto"===n.info&&s++}e.exports=function(e){var r;if(e.md.options.typographer)for(r=e.tokens.length-1;0<=r;r--)"inline"===e.tokens[r].type&&(n.test(e.tokens[r].content)&&o(e.tokens[r].children),t.test(e.tokens[r].content)&&function(e){for(var r,s=0,n=e.length-1;0<=n;n--)"text"!==(r=e[n]).type||s||t.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===r.type&&"auto"===r.info&&s--,"link_close"===r.type&&"auto"===r.info&&s++}(e.tokens[r].children))}},8450:(e,t,n)=>{"use strict";var r=n(7022).isWhiteSpace,s=n(7022).isPunctChar,i=n(7022).isMdAsciiPunct,o=/['"]/,l=/['"]/g;function a(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;0<=t;t--)"inline"===e.tokens[t].type&&o.test(e.tokens[t].content)&&function(e,t){for(var o,c,h,d,u,p,f,m,g,k,b,y,v,w,x,C,_,M,A,S=[],n=0;n<e.length;n++){for(o=e[n],p=e[n].level,C=S.length-1;0<=C&&!(S[C].level<=p);C--);if(S.length=C+1,"text"===o.type){d=0,u=(c=o.content).length;e:for(;d<u&&(l.lastIndex=d,h=l.exec(c));){if(w=x=!0,d=h.index+1,_="'"===h[0],m=32,0<=h.index-1)m=c.charCodeAt(h.index-1);else for(C=n-1;0<=C&&"softbreak"!==e[C].type&&"hardbreak"!==e[C].type;C--)if(e[C].content){m=e[C].content.charCodeAt(e[C].content.length-1);break}if(g=32,d<u)g=c.charCodeAt(d);else for(C=n+1;C<e.length&&"softbreak"!==e[C].type&&"hardbreak"!==e[C].type;C++)if(e[C].content){g=e[C].content.charCodeAt(0);break}if(k=i(m)||s(String.fromCharCode(m)),b=i(g)||s(String.fromCharCode(g)),y=r(m),(v=r(g))?w=!1:!b||y||k||(w=!1),y?x=!1:!k||v||b||(x=!1),34===g&&'"'===h[0]&&48<=m&&m<=57&&(x=w=!1),w&&x&&(w=k,x=b),w||x){if(x)for(C=S.length-1;0<=C&&!((f=S[C]).level<p);C--)if(f.single===_&&S[C].level===p){f=S[C],A=_?(M=t.md.options.quotes[2],t.md.options.quotes[3]):(M=t.md.options.quotes[0],t.md.options.quotes[1]),o.content=a(o.content,h.index,A),e[f.token].content=a(e[f.token].content,f.pos,M),d+=A.length-1,f.token===n&&(d+=M.length-1),u=(c=o.content).length,S.length=C;continue e}w?S.push({token:n,pos:h.index,single:_,level:p}):x&&_&&(o.content=a(o.content,h.index,""))}else _&&(o.content=a(o.content,h.index,""))}}}}(e.tokens[t].children,e)}},6480:(e,t,n)=>{"use strict";n=n(5872);function s(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}s.prototype.Token=n,e.exports=s},6633:e=>{"use strict";e.exports=function(e){for(var r,s,i,o,l=e.tokens,t=0,n=l.length;t<n;t++)if("inline"===l[t].type){for(i=(r=l[t].children).length,s=0;s<i;s++)"text_special"===r[s].type&&(r[s].type="text");for(s=o=0;s<i;s++)"text"===r[s].type&&s+1<i&&"text"===r[s+1].type?r[s+1].content=r[s].content+r[s+1].content:(s!==o&&(r[o]=r[s]),o++);s!==o&&(r.length=o)}}},3420:e=>{"use strict";var t=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,n=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;e.exports=function(e,r){var i,o,l,a,c,h=e.pos;if(60!==e.src.charCodeAt(h))return!1;for(a=e.pos,c=e.posMax;;){if(++h>=c)return!1;if(60===(l=e.src.charCodeAt(h)))return!1;if(62===l)break}return a=e.src.slice(a+1,h),n.test(a)?(i=e.md.normalizeLink(a),!!e.md.validateLink(i)&&(r||((o=e.push("link_open","a",1)).attrs=[["href",i]],o.markup="autolink",o.info="auto",(o=e.push("text","",0)).content=e.md.normalizeLinkText(a),(o=e.push("link_close","a",-1)).markup="autolink",o.info="auto"),e.pos+=a.length+2,!0)):!!t.test(a)&&(i=e.md.normalizeLink("mailto:"+a),!!e.md.validateLink(i)&&(r||((o=e.push("link_open","a",1)).attrs=[["href",i]],o.markup="autolink",o.info="auto",(o=e.push("text","",0)).content=e.md.normalizeLinkText(a),(o=e.push("link_close","a",-1)).markup="autolink",o.info="auto"),e.pos+=a.length+2,!0))}},9755:e=>{"use strict";e.exports=function(e,t){var n,r,s,i,o,l,a,c,h=e.pos;if(96!==e.src.charCodeAt(h))return!1;for(n=h,h++,r=e.posMax;h<r&&96===e.src.charCodeAt(h);)h++;if(a=(s=e.src.slice(n,h)).length,!(e.backticksScanned&&(e.backticks[a]||0)<=n)){for(l=h;-1!==(o=e.src.indexOf("`",l));){for(l=o+1;l<r&&96===e.src.charCodeAt(l);)l++;if((c=l-o)===a)return t||((i=e.push("code_inline","code",0)).markup=s,i.content=e.src.slice(h,o).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=l,!0;e.backticks[c]=o}e.backticksScanned=!0}return t||(e.pending+=s),e.pos+=a,!0}},9354:e=>{"use strict";function t(e,t){var r,s,i,o,l,a,h={},d=t.length;if(d)for(var u=0,p=-2,f=[],n=0;n<d;n++)if(s=t[n],f.push(0),t[u].marker===s.marker&&p===s.token-1||(u=n),p=s.token,s.length=s.length||0,s.close){for(h.hasOwnProperty(s.marker)||(h[s.marker]=[-1,-1,-1,-1,-1,-1]),o=h[s.marker][(s.open?3:0)+s.length%3],l=r=u-f[u]-1;o<r;r-=f[r]+1)if((i=t[r]).marker===s.marker&&i.open&&i.end<0&&(a=!1,!(a=!i.close&&!s.open||(i.length+s.length)%3!=0||i.length%3==0&&s.length%3==0?a:!0))){a=0<r&&!t[r-1].open?f[r-1]+1:0,f[n]=n-r+a,f[r]=a,s.open=!1,i.end=n,i.close=!1,l=-1,p=-2;break}-1!==l&&(h[s.marker][(s.open?3:0)+(s.length||0)%3]=l)}}e.exports=function(e){var n,r=e.tokens_meta,s=e.tokens_meta.length;for(t(0,e.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&t(0,r[n].delimiters)}},7894:e=>{"use strict";function t(e,t){for(var r,s,i,o,l,n=t.length-1;0<=n;n--)95!==(r=t[n]).marker&&42!==r.marker||-1!==r.end&&(s=t[r.end],l=0<n&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===s.token+1,o=String.fromCharCode(r.marker),(i=e.tokens[r.token]).type=l?"strong_open":"em_open",i.tag=l?"strong":"em",i.nesting=1,i.markup=l?o+o:o,i.content="",(i=e.tokens[s.token]).type=l?"strong_close":"em_close",i.tag=l?"strong":"em",i.nesting=-1,i.markup=l?o+o:o,i.content="",l&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}e.exports.w=function(e,t){var n,r,s=e.pos,i=e.src.charCodeAt(s);if(t)return!1;if(95!==i&&42!==i)return!1;for(r=e.scanDelims(e.pos,42===i),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:r.length,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.g=function(e){var n,r=e.tokens_meta,s=e.tokens_meta.length;for(t(e,e.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}},9391:(e,t,n)=>{"use strict";var r=n(6233),s=n(7022).has,i=n(7022).isValidEntityCode,o=n(7022).fromCodePoint,l=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,a=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var c,h,d=e.pos,u=e.posMax;if(38===e.src.charCodeAt(d)&&!(u<=d+1))if(35===e.src.charCodeAt(d+1)){if(c=e.src.slice(d).match(l))return t||(u="x"===c[1][0].toLowerCase()?parseInt(c[1].slice(1),16):parseInt(c[1],10),(h=e.push("text_special","",0)).content=i(u)?o(u):o(65533),h.markup=c[0],h.info="entity"),e.pos+=c[0].length,!0}else if((c=e.src.slice(d).match(a))&&s(r,c[1]))return t||((h=e.push("text_special","",0)).content=r[c[1]],h.markup=c[0],h.info="entity"),e.pos+=c[0].length,!0;return!1}},1917:(e,t,n)=>{"use strict";for(var r=n(7022).isSpace,s=[],i=0;i<256;i++)s.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){s[e.charCodeAt(0)]=1}),e.exports=function(e,t){var n,i,l,c=e.pos,h=e.posMax;if(92!==e.src.charCodeAt(c))return!1;if(++c>=h)return!1;if(10===(n=e.src.charCodeAt(c))){for(t||e.push("hardbreak","br",0),c++;c<h&&(n=e.src.charCodeAt(c),r(n));)c++;e.pos=c}else l=e.src[c],55296<=n&&n<=56319&&c+1<h&&56320<=(i=e.src.charCodeAt(c+1))&&i<=57343&&(l+=e.src[c+1],c++),i="\\"+l,t||((t=e.push("text_special","",0)).content=n<256&&0!==s[n]?l:i,t.markup=i,t.info="escape"),e.pos=c+1;return!0}},9969:e=>{"use strict";e.exports=function(e){for(var n,r=0,s=e.tokens,i=e.tokens.length,t=n=0;t<i;t++)s[t].nesting<0&&r--,s[t].level=r,0<s[t].nesting&&r++,"text"===s[t].type&&t+1<i&&"text"===s[t+1].type?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}},1779:(e,t,n)=>{"use strict";var r=n(1947).n;e.exports=function(e,t){var n,i,a=e.pos;return!(!e.md.options.html||(i=e.posMax,60!==e.src.charCodeAt(a)||i<=a+2||33!==(n=e.src.charCodeAt(a+1))&&63!==n&&47!==n&&!function(){var t=32|n;return 97<=t&&t<=122}()||!(i=e.src.slice(a).match(r))||(t||((t=e.push("html_inline","",0)).content=e.src.slice(a,a+i[0].length),a=t.content,/^<a[>\s]/i.test(a)&&e.linkLevel++,/^<\/a\s*>/i.test(t.content)&&e.linkLevel--),e.pos+=i[0].length,0)))}},3006:(e,t,n)=>{"use strict";var r=n(7022).normalizeReference,s=n(7022).isSpace;e.exports=function(e,t){var i,a,c,h,u,p,l,g,k="",b=e.pos,y=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(c=e.pos+2,(a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((h=a+1)<y&&40===e.src.charCodeAt(h)){for(h++;h<y&&(i=e.src.charCodeAt(h),s(i)||10===i);h++);if(y<=h)return!1;for(g=h,(u=e.md.helpers.parseLinkDestination(e.src,h,e.posMax)).ok&&(k=e.md.normalizeLink(u.str),e.md.validateLink(k)?h=u.pos:k=""),g=h;h<y&&(i=e.src.charCodeAt(h),s(i)||10===i);h++);if(u=e.md.helpers.parseLinkTitle(e.src,h,e.posMax),h<y&&g!==h&&u.ok)for(p=u.str,h=u.pos;h<y&&(i=e.src.charCodeAt(h),s(i)||10===i);h++);else p="";if(y<=h||41!==e.src.charCodeAt(h))return e.pos=b,!1;h++}else{if(void 0===e.env.references)return!1;if(h<y&&91===e.src.charCodeAt(h)&&(g=h+1,0<=(h=e.md.helpers.parseLinkLabel(e,h)))?l=e.src.slice(g,h++):h=a+1,l=l||e.src.slice(c,a),!(u=e.env.references[r(l)]))return e.pos=b,!1;k=u.href,p=u.title}return t||(g=e.src.slice(c,a),e.md.inline.parse(g,e.md,e.env,l=[]),(b=e.push("image","img",0)).attrs=u=[["src",k],["alt",""]],b.children=l,b.content=g,p&&u.push(["title",p])),e.pos=h,e.posMax=y,!0}},1727:(e,t,n)=>{"use strict";var r=n(7022).normalizeReference,s=n(7022).isSpace;e.exports=function(e,t){var i,o,l,a,c,h,u="",p="",f=e.pos,m=e.posMax,g=e.pos,k=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(a=e.pos+1,(l=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((c=l+1)<m&&40===e.src.charCodeAt(c)){for(k=!1,c++;c<m&&(i=e.src.charCodeAt(c),s(i)||10===i);c++);if(m<=c)return!1;if(g=c,(h=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok){for(u=e.md.normalizeLink(h.str),e.md.validateLink(u)?c=h.pos:u="",g=c;c<m&&(i=e.src.charCodeAt(c),s(i)||10===i);c++);if(h=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&h.ok)for(p=h.str,c=h.pos;c<m&&(i=e.src.charCodeAt(c),s(i)||10===i);c++);}(m<=c||41!==e.src.charCodeAt(c))&&(k=!0),c++}if(k){if(void 0===e.env.references)return!1;if(c<m&&91===e.src.charCodeAt(c)&&(g=c+1,0<=(c=e.md.helpers.parseLinkLabel(e,c)))?o=e.src.slice(g,c++):c=l+1,o=o||e.src.slice(a,l),!(h=e.env.references[r(o)]))return e.pos=f,!1;u=h.href,p=h.title}return t||(e.pos=a,e.posMax=l,e.push("link_open","a",1).attrs=k=[["href",u]],p&&k.push(["title",p]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}},2906:e=>{"use strict";var t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;e.exports=function(e,n){var s,r,a;return!(!e.md.options.linkify||0<e.linkLevel||(r=e.pos)+3>e.posMax||58!==e.src.charCodeAt(r)||47!==e.src.charCodeAt(r+1)||47!==e.src.charCodeAt(r+2)||!(s=e.pending.match(t))||(s=s[1],!(r=e.md.linkify.matchAtStart(e.src.slice(r-s.length)))||(r=(r=r.url).replace(/\*+$/,""),a=e.md.normalizeLink(r),!e.md.validateLink(a)||(n||(e.pending=e.pending.slice(0,-s.length),(n=e.push("link_open","a",1)).attrs=[["href",a]],n.markup="linkify",n.info="auto",(n=e.push("text","",0)).content=e.md.normalizeLinkText(r),(n=e.push("link_close","a",-1)).markup="linkify",n.info="auto"),e.pos+=r.length-s.length,0))))}},3905:(e,t,n)=>{"use strict";var r=n(7022).isSpace;e.exports=function(e,t){var n,s,i,o=e.pos;if(10!==e.src.charCodeAt(o))return!1;if(n=e.pending.length-1,s=e.posMax,!t)if(0<=n&&32===e.pending.charCodeAt(n))if(1<=n&&32===e.pending.charCodeAt(n-1)){for(i=n-1;1<=i&&32===e.pending.charCodeAt(i-1);)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(o++;o<s&&r(e.src.charCodeAt(o));)o++;return e.pos=o,!0}},670:(e,t,n)=>{"use strict";var r=n(5872),s=n(7022).isWhiteSpace,i=n(7022).isPunctChar,o=n(7022).isMdAsciiPunct;function l(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}l.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},l.prototype.push=function(e,t,n){this.pending&&this.pushPending();e=new r(e,t,n),t=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),e.level=this.level,0<n&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],t={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(e),this.tokens_meta.push(t),e},l.prototype.scanDelims=function(e,t){for(var a,d,r,p,f=e,m=!0,g=!0,k=this.posMax,b=this.src.charCodeAt(e),n=0<e?this.src.charCodeAt(e-1):32;f<k&&this.src.charCodeAt(f)===b;)f++;return e=f-e,r=f<k?this.src.charCodeAt(f):32,d=o(n)||i(String.fromCharCode(n)),p=o(r)||i(String.fromCharCode(r)),n=s(n),(r=s(r))?m=!1:!p||n||d||(m=!1),n?g=!1:!d||r||p||(g=!1),n=t?(a=m,g):(a=m&&(!g||d),g&&(!m||p)),{can_open:a,can_close:n,length:e}},l.prototype.Token=r,e.exports=l},4814:e=>{"use strict";function t(e,t){for(var r,s,i,o,l=[],a=t.length,n=0;n<a;n++)126===(s=t[n]).marker&&-1!==s.end&&(i=t[s.end],(o=e.tokens[s.token]).type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",(o=e.tokens[i.token]).type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="","text"===e.tokens[i.token-1].type&&"~"===e.tokens[i.token-1].content&&l.push(i.token-1));for(;l.length;){for(r=(n=l.pop())+1;r<e.tokens.length&&"s_close"===e.tokens[r].type;)r++;n!==--r&&(o=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=o)}}e.exports.w=function(e,t){var n,r,s,i,o=e.pos,l=e.src.charCodeAt(o);if(t)return!1;if(126!==l)return!1;if(s=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(l),s<2)return!1;for(s%2&&(e.push("text","",0).content=i,s--),n=0;n<s;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.g=function(e){var n,r=e.tokens_meta,s=e.tokens_meta.length;for(t(e,e.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}},9941:e=>{"use strict";e.exports=function(e,n){for(var r=e.pos;r<e.posMax&&!function(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return 1;default:return}}(e.src.charCodeAt(r));)r++;return r!==e.pos&&(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}},5872:e=>{"use strict";function t(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}t.prototype.attrIndex=function(e){var t,n,r;if(this.attrs)for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},t.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},t.prototype.attrSet=function(e,t){var n=this.attrIndex(e),e=[e,t];n<0?this.attrPush(e):this.attrs[n]=e},t.prototype.attrGet=function(e){var e=this.attrIndex(e),n=null;return n=0<=e?this.attrs[e][1]:n},t.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=t},3122:e=>{"use strict";var t={};function n(e,r){var s=function(e){var n,r,s=t[e];if(!s){for(s=t[e]=[],n=0;n<128;n++)r=String.fromCharCode(n),s.push(r);for(n=0;n<e.length;n++)s[r=e.charCodeAt(n)]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return s}(r="string"!=typeof r?n.defaultChars:r);return e.replace(/(%[a-f0-9]{2})+/gi,function(e){for(var r,i,o,l,a,c="",t=0,n=e.length;t<n;t+=3)(r=parseInt(e.slice(t+1,t+3),16))<128?c+=s[r]:192==(224&r)&&t+3<n&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(c+=(a=r<<6&1984|63&i)<128?"":String.fromCharCode(a),t+=3):224==(240&r)&&t+6<n&&(i=parseInt(e.slice(t+4,t+6),16),o=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&o))?(c+=(a=r<<12&61440|i<<6&4032|63&o)<2048||55296<=a&&a<=57343?"":String.fromCharCode(a),t+=6):240==(248&r)&&t+9<n&&(i=parseInt(e.slice(t+4,t+6),16),o=parseInt(e.slice(t+7,t+9),16),l=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&o)&&128==(192&l))?((a=r<<18&1835008|i<<12&258048|o<<6&4032|63&l)<65536||1114111<a?c+="":(a-=65536,c+=String.fromCharCode(55296+(a>>10),56320+(1023&a))),t+=9):c+="";return c})}n.defaultChars=";/?:@&=+$,#",n.componentChars="",e.exports=n},729:e=>{"use strict";var t={};function n(e,r,s){var i,o,l,c,h="";for("string"!=typeof r&&(s=r,r=n.defaultChars),void 0===s&&(s=!0),c=function(e){var n,r,s=t[e];if(!s){for(s=t[e]=[],n=0;n<128;n++)r=String.fromCharCode(n),/^[0-9a-z]$/i.test(r)?s.push(r):s.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)s[e.charCodeAt(n)]=e[n]}return s}(r),i=0,o=e.length;i<o;i++)if(l=e.charCodeAt(i),s&&37===l&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3)))h+=e.slice(i,i+3),i+=2;else if(l<128)h+=c[l];else if(55296<=l&&l<=57343){if(55296<=l&&l<=56319&&i+1<o&&56320<=(l=e.charCodeAt(i+1))&&l<=57343){h+=encodeURIComponent(e[i]+e[i+1]),i++;continue}h+="%EF%BF%BD"}else h+=encodeURIComponent(e[i]);return h}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},2201:e=>{"use strict";e.exports=function(e){var t="",t=(t=(t+=e.protocol||"")+(e.slashes?"//":""))+(e.auth?e.auth+"@":"");return e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",(t=(t=(t+=e.port?":"+e.port:"")+(e.pathname||""))+(e.search||""))+(e.hash||"")}},8765:(e,t,n)=>{"use strict";e.exports.encode=n(729),e.exports.decode=n(3122),e.exports.format=n(2201),e.exports.parse=n(9553)},9553:e=>{"use strict";function t(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var n=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),i=["'"].concat(i),l=["%","/","?",";","#"].concat(i),a=["/","?","#"],c=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};t.prototype.parse=function(e,t){var o,p;if(m=(m=e).trim(),!t&&1===e.split("#").length){e=s.exec(m);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}e=n.exec(m);if(e&&(o=(e=e[0]).toLowerCase(),this.protocol=e,m=m.substr(e.length)),!(t||e||m.match(/^\/\/[^@\/]+@[^@\/]+/))||!(f="//"===m.substr(0,2))||e&&d[e]||(m=m.substr(2),this.slashes=!0),!d[e]&&(f||e&&!u[e])){var v=-1;for(r=0;r<a.length;r++)-1!==(p=m.indexOf(a[r]))&&(-1===v||p<v)&&(v=p);for(-1!==(t=-1===v?m.lastIndexOf("@"):m.lastIndexOf("@",v))&&(f=m.slice(0,t),m=m.slice(t+1),this.auth=f),v=-1,r=0;r<l.length;r++)-1!==(p=m.indexOf(l[r]))&&(-1===v||p<v)&&(v=p);":"===m[(v=-1===v?m.length:v)-1]&&v--;var e=m.slice(0,v),m=m.slice(v),t=(this.parseHost(e),this.hostname=this.hostname||"","["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]);if(!t)for(var C=this.hostname.split(/\./),r=0,i=C.length;r<i;r++){var _=C[r];if(_&&!_.match(c)){for(var S="",M=0,A=_.length;M<A;M++)127<_.charCodeAt(M)?S+="x":S+=_[M];if(!S.match(c)){var T=C.slice(0,r),E=C.slice(r+1),O=_.match(h);O&&(T.push(O[1]),E.unshift(O[2])),E.length&&(m=E.join(".")+m),this.hostname=T.join(".");break}}}255<this.hostname.length&&(this.hostname=""),t&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var f=m.indexOf("#"),e=(-1!==f&&(this.hash=m.substr(f),m=m.slice(0,f)),m.indexOf("?"));return-1!==e&&(this.search=m.substr(e),m=m.slice(0,e)),m&&(this.pathname=m),u[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this},t.prototype.parseHost=function(e){var t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,n){var r;return e&&e instanceof t?e:((r=new t).parse(e,n),r)}},3689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{decode:()=>k,default:()=>w,encode:()=>b,toASCII:()=>v,toUnicode:()=>y,ucs2decode:()=>p,ucs2encode:()=>f});const r=2147483647,s=36,i=/^xn--/,o=/[^\0-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,h=String.fromCharCode;function d(e){throw new RangeError(a[e])}function u(e,t){var n=e.split("@");let r="";1<n.length&&(r=n[0]+"@",e=n[1]);n=function(e,t){var n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(l,".")).split("."),t).join(".");return r+n}function p(e){var t=[];let n=0;const r=e.length;for(;n<r;){var s=e.charCodeAt(n++);if(55296<=s&&s<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t}function m(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function g(e,t,n){let r=0;for(e=n?c(e/700):e>>1,e+=c(e/t);455<e;r+=s)e=c(e/35);return c(r+36*e/(e+38))}const f=e=>String.fromCodePoint(...e),k=function(e){var t=[],n=e.length;let i=0,o=128,l=72,a=e.lastIndexOf("-");a<0&&(a=0);for(let n=0;n<a;++n)128<=e.charCodeAt(n)&&d("not-basic"),t.push(e.charCodeAt(n));for(let u=0<a?a+1:0;u<n;){let a=i;for(let t=1,o=s;;o+=s){u>=n&&d("invalid-input");const a=(h=e.charCodeAt(u++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:s,p=((a>=s||a>c((r-i)/t))&&d("overflow"),i+=a*t,o<=l?1:o>=l+26?26:o-l);if(a<p)break;var h=s-p;t>c(r/h)&&d("overflow"),t*=h}var p=t.length+1;l=g(i-a,p,0==a),c(i/p)>r-o&&d("overflow"),o+=c(i/p),i%=p,t.splice(i++,0,o)}return String.fromCodePoint(...t)},b=function(e){const t=[];let n=(e=p(e)).length,i=128,o=0,l=72;for(const n of e)n<128&&t.push(h(n));let a=t.length,u=a;for(a&&t.push("-");u<n;){let n=r;for(const t of e)t>=i&&t<n&&(n=t);const p=u+1;n-i>c((r-o)/p)&&d("overflow"),o+=(n-i)*p,i=n;for(const n of e)if(n<i&&++o>r&&d("overflow"),n==i){let e=o;for(let n=s;;n+=s){const r=n<=l?1:n>=l+26?26:n-l;if(e<r)break;const i=e-r,o=s-r;t.push(h(m(r+i%o,0))),e=c(i/o)}t.push(h(m(e,0))),l=g(o,p,u==a),o=0,++u}++o,++i}return t.join("")},y=function(e){return u(e,function(e){return i.test(e)?k(e.slice(4).toLowerCase()):e})},v=function(e){return u(e,function(e){return o.test(e)?"xn--"+b(e):e})},w={version:"2.1.0",ucs2:{decode:p,encode:f},decode:k,encode:b,toASCII:v,toUnicode:y}},9413:e=>{e.exports=/[\0-\x1F\x7F-\x9F]/},2326:e=>{e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},3189:e=>{e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5045:e=>{e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},4205:(e,t,n)=>{"use strict";t.Any=n(9369),t.Cc=n(9413),t.Cf=n(2326),t.P=n(3189),t.Z=n(5045)},9369:e=>{e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},7500:t=>{"use strict";var n;if(void 0===e)throw(n=new Error("Cannot find module 'undefined'")).code="MODULE_NOT_FOUND",n;t.exports=e},9323:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')}},n={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s={},(()=>{"use strict";function e(e){return t=>`${e} (${t.shortcut})`}r.r(s),r.d(s,{EditorType:()=>S,StacksEditor:()=>vu,registerLocalizationStrings:()=>function(e){n=e}});const t={commands:{blockquote:e("Blockquote"),bold:e("Bold"),code_block:e("Code block"),emphasis:e("Italic"),heading:{dropdown:e("Heading"),entry:({level:e})=>"Heading "+e},help:"Help",horizontal_rule:e("Horizontal rule"),image:e("Image"),inline_code:e("Inline code"),kbd:e("Keyboard"),link:e("Link"),metaTagLink:e("Meta tag"),moreFormatting:"More formatting",ordered_list:e("Numbered list"),redo:e("Redo"),spoiler:e("Spoiler"),sub:e("Subscript"),sup:e("Superscript"),strikethrough:"Strikethrough",table_edit:"Edit table",table_insert:e("Table"),table_column:{insert_after:"Insert column after",insert_before:"Insert column before",remove:"Remove column"},table_row:{insert_after:"Insert row after",insert_before:"Insert row before",remove:"Remove row"},tagLink:e("Tag"),undo:e("Undo"),unordered_list:e("Bulleted list")},link_editor:{cancel_button:"Cancel",href_label:"Link URL",save_button:"Save",text_label:"Link text",validation_error:"The entered URL is invalid."},link_tooltip:{edit_button_title:"Edit link",remove_button_title:"Remove link"},menubar:{mode_toggle_markdown_title:"Markdown mode",mode_toggle_preview_title:"Markdown with preview mode",mode_toggle_richtext_title:"Rich text mode"},nodes:{codeblock_lang_auto:({lang:e})=>e+" (auto)",spoiler_reveal_text:"Reveal spoiler"},image_upload:{default_image_alt_text:"enter image description here",external_url_validation_error:"The entered URL is invalid.",upload_error_file_too_big:"Your image is too large to upload (over 2 MiB)",upload_error_generic:"Image upload failed. Please try again.",upload_error_unsupported_format:"Please select an image (jpeg, png, gif) to upload",uploaded_image_preview_alt:"uploaded image preview"}};let n=t;function o(e,t){return t.split(".").reduce((e,t)=>null==e?void 0:e[t],e)}const l={};function a(e,r={}){e in l||(l[e]=o(n,e)||o(t,e));var s=l[e];if(s){if("string"==typeof s)return s;if("function"==typeof s)return s(r)}throw"Missing translation for key: "+e}var S,c=r(7022);function d(e,...t){console.error.apply(console,[...function(e,t=""){return e?["%c"+t+e,"font-weight: bold;"]:[]}(e),...t])}function u(e,t){return function f(e,t){if(e instanceof Array&&t instanceof Array)return[...e,...t];const n=p(e),r=p(t);if(!n&&r)return f({},t);if(n&&!r)return f({},e);if(!n&&!r)return t;const s={},i=e,o=t;let l=Object.keys(i);for(const e of l)s[e]=e in o?f(i[e],o[e]):i[e];l=Object.keys(o);for(const e of l)e in s||(s[e]=o[e]);return s}(e,t)}function p(e){return e instanceof Object&&!(e instanceof Function||e instanceof Array)}function m(e,t){return!e||!t||!e.doc.eq(t.doc)||e.storedMarks!==t.storedMarks}function g(e,t){return m(e,t)||!e.selection.eq(t.selection)}const k=/^((https?|ftp):\/\/|\/)[-a-z0-9+&@#/%?=~_|!:,.;()*[\]$]+$/,b=/^mailto:[#-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+$/;function y(e,...t){var n;let r=e[0];for(let s=0,i=t.length;s<i;s++)r+=(0,c.escapeHtml)((null==(n=t[s])?void 0:n.toString())||"")+e[s+1];return r}function v(){return/Mac|iP(hone|[oa]d)/.test(navigator.platform)?"Cmd":"Ctrl"}function w(e){return e.startsWith("Mod-")?v()+e.slice(3):e}function x(){return(1e4*Math.random()).toFixed(0)}function C(e,t,n){t=new CustomEvent("StacksEditor:"+t,{bubbles:!0,cancelable:!0,detail:n});return e.dispatchEvent(t)}function _(e,t){var s,n=null==(n=e.split("-")[1])?void 0:n.toLowerCase().trim();return n&&n.match(/^[a-z]{1}$/)?{[(s=e.slice(0,-1))+n]:t,[s+n.toUpperCase()]:t}:{[e]:t}}!function(e){e[e.RichText=0]="RichText",e[e.Commonmark=1]="Commonmark"}(S=S||{});const M={snippets:!0,html:!0,extraEmphasis:!0,tables:!0,tagLinks:{validate:()=>!0},validateLink:function(e){e=null==e?void 0:e.trim().toLowerCase();return k.test(e)||b.test(e)}};class A{get document(){return this.editorView.state.doc}get dom(){return this.editorView.dom}get readonly(){return!this.editorView.editable}focus(){var e;null!=(e=this.editorView)&&e.focus()}destroy(){var e;null!=(e=this.editorView)&&e.destroy()}get content(){return this.serializeContent()}set content(e){let t=this.editorView.state.tr;var n=this.editorView.state.doc,e=this.parseContent(e);t=t.replaceWith(0,n.content.size,e),this.editorView.dispatch(t)}setTargetNodeAttributes(e,t){e.classList.add(...t.classList||[]),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline","true"),function(e,t){Object.entries(t).forEach(([t,n])=>{"style"===t||t.startsWith("class")||t.startsWith("on")?d("setAttributesOnElement",`Setting the "${t}" attribute is not supported`):!1!==n&&e.setAttribute(t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),!0===n?"":String(n))})}(e,t.elementAttributes||{})}}function E(){}var T=200,O=(E.prototype.append=function(e){return e.length?(e=E.from(e),!this.length&&e||e.length<T&&this.leafAppend(e)||this.length<T&&e.leafPrepend(this)||this.appendInner(e)):this},E.prototype.prepend=function(e){return e.length?E.from(e).append(this):this},E.prototype.appendInner=function(e){return new D(this,e)},E.prototype.slice=function(e,t){return(t=void 0===t?this.length:t)<=(e=void 0===e?0:e)?E.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},E.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},E.prototype.forEach=function(e,t,n){(t=void 0===t?0:t)<=(n=void 0===n?this.length:n)?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},E.prototype.map=function(e,t,n){void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t=void 0===t?0:t,n),r},E.from=function(e){return e instanceof E?e:e&&e.length?new O(e):E.empty},function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e);var n={length:{configurable:!0},depth:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var s=t;s<n;s++)if(!1===e(this.values[s],r+s))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var s=t-1;n<=s;s--)if(!1===e(this.values[s],r+s))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=T)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=T)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(E)),D=(E.empty=new O([]),function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var s=this.left.length;return!(t<s&&!1===this.left.forEachInner(e,t,Math.min(n,s),r))&&!(s<n&&!1===this.right.forEachInner(e,Math.max(t-s,0),Math.min(this.length,n)-s,r+s))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var s=this.left.length;return!(s<t&&!1===this.right.forEachInvertedInner(e,t-s,Math.max(n,s)-s,r+s))&&!(n<s&&!1===this.left.forEachInvertedInner(e,Math.min(t,s),n,r))&&void 0},t.prototype.sliceInner=function(e,t){var n;return 0==e&&t==this.length?this:t<=(n=this.left.length)?this.left.slice(e,t):n<=e?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){e=this.right.leafAppend(e);if(e)return new t(this.left,e)},t.prototype.leafPrepend=function(e){e=this.left.leafPrepend(e);if(e)return new t(e,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(E));const N=E;function I(e){this.content=e}I.prototype={constructor:I,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){e=this.find(e);return-1==e?void 0:this.content[e+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),r=r.content.slice();return-1==s?r.push(n||e,t):(r[s+1]=t,n&&(r[s]=n)),new I(r)},remove:function(e){var n,e=this.find(e);return-1==e?this:((n=this.content.slice()).splice(e,2),new I(n))},addToStart:function(e,t){return new I([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new I(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),r=r.find(e);return s.splice(-1==r?s.length:r,0,t,n),new I(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=I.from(e)).size?new I(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=I.from(e)).size?new I(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=I.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},I.from=function(e){if(e instanceof I)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new I(t)};const L=I;class R{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,s){for(let i=0,o=0;o<t;i++){var l=this.content[i],a=o+l.nodeSize;if(e<a&&!1!==n(l,r+o,s||null,i)&&l.content.size){let s=o+1;l.nodesBetween(Math.max(0,e-s),Math.min(l.content.size,t-s),n,r+s)}o=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let s="",i=!0;return this.nodesBetween(e,t,(o,l)=>{o.isText?(s+=o.text.slice(Math.max(e,l)-l,t-l),i=!n):o.isLeaf?(r?s+="function"==typeof r?r(o):r:o.type.spec.leafText&&(s+=o.type.spec.leafText(o)),i=!n):!i&&o.isBlock&&(s+=n,i=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new R(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(e<t)for(let s=0,i=0;i<t;s++){let o=this.content[s],l=i+o.nodeSize;e<l&&((i<e||t<l)&&(o=o.isText?o.cut(Math.max(0,e-i),Math.min(o.text.length,t-i)):o.cut(Math.max(0,e-i-1),Math.min(o.content.size,t-i-1))),n.push(o),r+=o.nodeSize),i=l}return new R(n,r)}cutByIndex(e,t){return e==t?R.empty:0==e&&t==this.content.length?this:new R(this.content.slice(e,t))}replaceChild(e,t){var r,n=this.content[e];return n==t?this:(r=this.content.slice(),n=this.size+t.nodeSize-n.nodeSize,r[e]=t,new R(r,n))}addToStart(e){return new R([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new R(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){var t=this.content[e];if(t)return t;throw new RangeError("Index "+e+" out of range for "+this)}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function z(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var s=e.child(r),i=t.child(r);if(s!=i){if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let e=0;s.text[e]==i.text[e];e++)n++;return n}if(s.content.size||i.content.size){let e=z(s.content,i.content,n+1);if(null!=e)return e}}n+=s.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function P(e,t,n,r){for(let s=e.childCount,i=t.childCount;;){if(0==s||0==i)return s==i?null:{a:n,b:r};var o=e.child(--s),l=t.child(--i),a=o.nodeSize;if(o!=l){if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let e=0,t=Math.min(o.text.length,l.text.length);for(;e<t&&o.text[o.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let e=P(o.content,l.content,n-1,r-1);if(e)return e}}n-=a,r-=a}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return F(0,e);if(e==this.size)return F(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){var s=r+this.child(n).nodeSize;if(e<=s)return s==e||0<t?F(n+1,s):F(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return R.empty;if(Array.isArray(t))return new R(t.map(e.nodeFromJSON));throw new RangeError("Invalid input for Fragment.fromJSON")}static fromArray(e){if(!e.length)return R.empty;let t,n=0;for(let r=0;r<e.length;r++){var s=e[r];n+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t=t||e.slice(0,r))[t.length-1]=s.withText(t[t.length-1].text+s.text):t&&t.push(s)}return new R(t||e,n)}static from(e){if(!e)return R.empty;if(e instanceof R)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new R([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}R.empty=new R([],0);const B={index:0,offset:0};function F(e,t){return B.index=e,B.offset=t,B}function $(e,t){if(e!==t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!$(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t&&$(e[n],t[n])))return!1;for(let n in t)if(!(n in e))return!1}}return!0}class q{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){var s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t=t||e.slice(0,r);else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&((t=t||e.slice(0,r)).push(this),n=!0),t&&t.push(s)}}return t=t||e.slice(),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$(this.attrs,e.attrs)}toJSON(){var t,e={type:this.type.name};for(t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");e=e.marks[t.type];if(e)return e.create(t.attrs);throw new RangeError(`There is no mark type ${t.type} in this schema`)}static sameSet(e,t){if(e!=t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1}return!0}static setFrom(e){return!e||Array.isArray(e)&&0==e.length?q.none:e instanceof q?[e]:((e=e.slice()).sort((e,t)=>e.type.rank-t.type.rank),e)}}q.none=[];class j extends Error{}class V{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){e=function U(e,t,n,r){let{index:s,offset:i}=e.findIndex(t),o=e.maybeChild(s);if(i==t||o.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=U(o.content,t-i-1,n);return l&&e.replaceChild(s,o.copy(l))}(this.content,e+this.openStart,t);return e&&new V(e,this.openStart,this.openEnd)}removeBetween(e,t){return new V(function H(e,t,n){let{index:r,offset:s}=e.findIndex(t),i=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(s==t||i.isText){if(l==n||e.child(o).isText)return e.cut(0,t).append(e.cut(n));throw new RangeError("Removing non-flat range")}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(H(i.content,t-s-1,n-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){var e;return this.content.size?(e={content:this.content.toJSON()},0<this.openStart&&(e.openStart=this.openStart),0<this.openEnd&&(e.openEnd=this.openEnd),e):null}static fromJSON(e,t){if(!t)return V.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new V(R.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new V(e,n,r)}}function W(e,t,n){if(n.openStart>e.depth)throw new j("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new j("Inconsistent open depths");return function J(e,t,n,r){let s=e.index(r),i=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let o=J(e,t,n,r+1);return i.copy(i.content.replaceChild(s,o))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:s,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;0<=e;e--)r=t.node(e).copy(R.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Q(i,Y(e,s,o,t,r))}{let r=e.parent,s=r.content;return Q(r,s.cut(0,e.parentOffset).append(n.content).append(s.cut(t.parentOffset)))}}return Q(i,ee(e,t,r))}(e,t,n,0)}function G(e,t){if(!t.type.compatibleContent(e.type))throw new j("Cannot join "+t.type.name+" onto "+e.type.name)}function K(e,t,n){e=e.node(n);return G(e,t.node(n)),e}function Z(e,t){var n=t.length-1;0<=n&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function X(e,t,n,r){let s=(t||e).node(n),i=0,o=t?t.index(n):s.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Z(e.nodeAfter,r),i++));for(let e=i;e<o;e++)Z(s.child(e),r);t&&t.depth==n&&t.textOffset&&Z(t.nodeBefore,r)}function Q(e,t){if(e.type.validContent(t))return e.copy(t);throw new j("Invalid content for node "+e.type.name)}function Y(e,t,n,r,s){var i=e.depth>s&&K(e,t,s+1),o=r.depth>s&&K(n,r,s+1),l=[];return X(null,e,s,l),i&&o&&t.index(s)==n.index(s)?(G(i,o),Z(Q(i,Y(e,t,n,r,s+1)),l)):(i&&Z(Q(i,ee(e,t,s+1)),l),X(t,n,s,l),o&&Z(Q(o,ee(n,r,s+1)),l)),X(r,null,s,l),new R(l)}function ee(e,t,n){var r=[];return X(null,e,n,r),e.depth>n&&Z(Q(K(e,t,n+1),ee(e,t,n+1)),r),X(t,null,n,r),new R(r)}V.empty=new V(R.empty,0,0);class te{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e))return e==this.depth+1?this.pos:this.path[3*e-1];throw new RangeError("There is no position before the top-level node")}after(e){if(e=this.resolveDepth(e))return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize;throw new RangeError("There is no position after the top-level node")}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){var n,r,e=this.parent,t=this.index(this.depth);return t==e.childCount?null:(n=this.pos-this.path[this.path.length-1],r=e.child(t),n?e.child(t).cut(n):r)}get nodeBefore(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){var e=this.parent,t=this.index();if(0==e.content.size)return q.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let s=n.marks;for(var i=0;i<s.length;i++)!1!==s[i].type.spec.inclusive||r&&s[i].isInSet(r.marks)||(s=s[i--].removeFromSet(s));return s}marksAcross(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)!1!==n[s].type.spec.inclusive||r&&n[s].isInSet(r.marks)||(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;0<t;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);0<=n;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ie(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(0<=t&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,s=t;for(let t=e;;){let{index:e,offset:i}=t.content.findIndex(s),o=s-i;if(n.push(t,e,r+i),!o)break;if((t=t.child(e)).isText)break;s=o-1,r+=i+1}return new te(t,n,s)}static resolveCached(e,t){for(let n=0;n<ne.length;n++){var r=ne[n];if(r.pos==t&&r.doc==e)return r}var n=ne[re]=te.resolve(e,t);return re=(re+1)%se,n}}let ne=[],re=0,se=12;class ie{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oe=Object.create(null);class le{constructor(e,t,n,r=q.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||R.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&$(this.attrs,t||e.defaultAttrs||oe)&&q.sameSet(this.marks,n||q.none)}copy(e=null){return e==this.content?this:new le(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new le(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){var s;return e==t?V.empty:(e=this.resolve(e),s=this.resolve(t),n=n?0:e.sharedDepth(t),t=e.start(n),t=e.node(n).content.cut(e.pos-t,s.pos-t),new V(t,e.depth-n,s.depth-n))}replace(e,t,n){return W(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){var{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){var{index:e,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(e){var t,n;return 0==e?{node:null,index:0,offset:0}:({index:t,offset:n}=this.content.findIndex(e),n<e?{node:this.content.child(t),index:t,offset:n}:{node:e=this.content.child(t-1),index:t-1,offset:n-e.nodeSize})}resolve(e){return te.resolveCached(this,e)}resolveNoCache(e){return te.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return e<t&&this.nodesBetween(e,t,e=>!(r=n.isInSet(e.marks)?!0:r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ce(this.marks,e)}contentMatchAt(e){e=this.type.contentMatch.matchFragment(this.content,0,e);if(e)return e;throw new Error("Called contentMatchAt on a node with invalid content")}canReplace(e,t,n=R.empty,r=0,s=n.childCount){e=this.contentMatchAt(e).matchFragment(n,r,s),e=e&&e.matchFragment(this.content,t);if(!e||!e.validEnd)return!1;for(let e=r;e<s;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){return!(r&&!this.type.allowsMarks(r))&&(!!(e=(r=this.contentMatchAt(e).matchType(n))&&r.matchFragment(this.content,t))&&e.validEnd)}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: `+this.content.toString().slice(0,50));let e=q.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!q.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: `+this.marks.map(e=>e.type.name));this.content.forEach(e=>e.check())}toJSON(){var t,e={type:this.type.name};for(t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=R.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}le.prototype.text=void 0;class ae extends le{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ce(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ae(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ae(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){var e=super.toJSON();return e.text=this.text,e}}function ce(e,t){for(let n=e.length-1;0<=n;n--)t=e[n].type.name+"("+t+")";return t}class he{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var s,e=new de(e,t);return null==e.next?he.empty:(t=ue(e),e.next&&e.err("Unexpected trailing text"),s=function(e){let t=Object.create(null);return function n(r){let s=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(t){let r;for(let e=0;e<s.length;e++)s[e][0]==t&&(r=s[e][1]);be(e,n).forEach(e=>{r||s.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})}})});var i=t[r.join(",")]=new he(-1<r.indexOf(e.length-1));for(let e=0;e<s.length;e++){let r=s[e][1].sort(ke);i.next.push({type:s[e][0],next:t[r.join(",")]||n(r)})}return i}(be(e,0))}(function(e){let t=[[]];return s(function e(t,i){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,i)),[]);if("seq"!=t.type){var o;if("star"==t.type)return o=n(),r(i,o),s(e(t.expr,o),o),[r(o)];if("plus"==t.type){let o=n();return s(e(t.expr,i),o),s(e(t.expr,o),o),[r(o)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){let o=i;for(let r=0;r<t.min;r++){let r=n();s(e(t.expr,o),r),o=r}if(-1==t.max)s(e(t.expr,o),o);else for(let i=t.min;i<t.max;i++){let i=n();r(o,i),s(e(t.expr,o),i),o=i}return[r(o)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=e(t.exprs[r],i);if(r==t.exprs.length-1)return o;s(o,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){r={term:r,to:n};return t[e].push(r),r}function s(e,t){e.forEach(e=>e.to=t)}}(t)),function(t){for(let n=0,r=[s];n<r.length;n++){let e=r[n],s=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];i.push(n.name),!s||n.isText||n.hasRequiredAttrs()||(s=!1),-1==r.indexOf(o)&&r.push(o)}s&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(e),s)}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let s=t;r&&s<n;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){var t=this.next[e]["type"];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function s(i,o){var l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return R.from(o.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=s(n,o.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),s=r.match;if(s.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<s.next.length;e++){var{type:i,next:o}=s.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!o.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}he.empty=new he(!0);class de{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ue(e){for(var t=[];t.push(function(e){var t=[];for(;t.push(function(e){let t=function(e){var t;if(e.eat("("))return t=ue(e),e.eat(")")||e.err("Missing closing paren"),t;if(!/\W/.test(e.next)){let t=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var s=[];for(let e in n){let r=n[e];-1<r.groups.indexOf(t)&&s.push(r)}return 0==s.length&&e.err("No node type or group '"+t+"' found"),s}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=function(e,t){let n=me(e),r=n;return e.eat(",")&&(r="}"!=e.next?me(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(e,t)}return t}(e)),e.next&&")"!=e.next&&"|"!=e.next;);return 1==t.length?t[0]:{type:"seq",exprs:t}}(e)),e.eat("|"););return 1==t.length?t[0]:{type:"choice",exprs:t}}function me(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function ke(e,t){return t-e}function be(e,t){let n=[];return function t(r){var s=e[r];if(1==s.length&&!s[0].term)return t(s[0].to);n.push(r);for(let e=0;e<s.length;e++){let{term:r,to:i}=s[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(ke)}function ye(e){var n,t=Object.create(null);for(n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function ve(e,t){var r,n=Object.create(null);for(r in e){let s=t&&t[r];if(void 0===s){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);s=t.default}n[r]=s}return n}function we(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Ce(e[n]);return t}class xe{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=we(n.attrs),this.defaultAttrs=ye(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==he.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ve(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new le(this,this.computeAttrs(e),R.from(t),q.setFrom(n))}createChecked(e=null,t,n){if(t=R.from(t),this.validContent(t))return new le(this,this.computeAttrs(e),t,q.setFrom(n));throw new RangeError("Invalid content for node "+this.name)}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=R.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}var r=this.contentMatch.matchFragment(t),r=r&&r.fillBefore(R.empty,!0);return r?new le(this,e,t.append(r),q.setFrom(n)):null}validContent(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}allowsMarkType(e){return null==this.markSet||-1<this.markSet.indexOf(e)}allowsMarks(e){if(null!=this.markSet)for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t=t||e.slice(0,n);return t?t.length?t:q.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new xe(e,t,r));e=t.spec.topNode||"doc";if(!n[e])throw new RangeError("Schema is missing its top node type ('"+e+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Ce{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class _e{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=we(r.attrs),this.excluded=null;e=ye(this.attrs);this.instance=e?new q(this,e):null}create(e=null){return!e&&this.instance?this.instance:new q(this,ve(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,s)=>n[e]=new _e(e,r++,t,s)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return-1<this.excluded.indexOf(e)}}class Se{constructor(e){this.cached=Object.create(null),this.spec={nodes:L.from(e.nodes),marks:L.from(e.marks||{}),topNode:e.topNode},this.nodes=xe.compile(this.spec.nodes,this),this.marks=_e.compile(this.spec.marks,this);var t=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");var n=this.nodes[e],r=n.spec.content||"",s=n.spec.marks;n.contentMatch=t[r]||(t[r]=he.parse(r,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet="_"==s?null:s?Me(this,s.split(" ")):""!=s&&n.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:Me(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof xe))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){var n=this.nodes.text;return new ae(n,n.defaultAttrs,e,q.setFrom(t))}mark(e,t){return(e="string"==typeof e?this.marks[e]:e).create(t)}nodeFromJSON(e){return le.fromJSON(this,e)}markFromJSON(e){return q.fromJSON(this,e)}nodeType(e){var t=this.nodes[e];if(t)return t;throw new RangeError("Unknown node type: "+e)}}function Me(e,t){var n=[];for(let r=0;r<t.length;r++){let s=t[r],i=e.marks[s],o=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==s||r.spec.group&&-1<r.spec.group.split(" ").indexOf(s))&&n.push(o=r)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class Ae{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)}),this.normalizeLists=!this.tags.some(t=>{return!(!/^(ul|ol)\b/.test(t.tag)||!t.node)&&(t=e.nodes[t.node]).contentMatch.matchType(t)})}parse(e,t={}){var n=new Ie(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){var n=new Ie(this,t,!0);return n.addAll(e,t.from,t.to),V.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(function(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let r=this.styles[s],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){var r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=ze(e)),e.mark=t})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=ze(e)),e.node=t})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ae(e,Ae.schemaRules(e)))}}const Te={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Oe={ol:!0,ul:!0};function De(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Ne{constructor(e,t,n,r,s,i,o){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=q.none,this.stashMarks=[],this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(R.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];var n;t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))&&((n=t).text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}let t=R.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(R.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;0<=t;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):function(e,t){var n=t.schema.nodes;for(var r in n){r=n[r];if(r.allowsMarkType(e)){let i=[],o=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){var{type:r,next:s}=e.edge(n);if(r==t)return!0;if(i.indexOf(s)<0&&o(s))return!0}};if(o(r.contentMatch))return 1}}}(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Te.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ie{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;var s=t.topNode,i=De(null,t.preserveWhitespace,0)|(n?4:0),s=s?new Ne(s.type,s.attrs,q.none,q.none,!0,t.topMatch||s.type.contentMatch,i):new Ne(n?null:e.schema.topNodeType,null,q.none,q.none,!0,null,i);this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(let e=0;e<n.length;e++)this.addPendingMark(n[e]);if(this.addElement(e),null!=n)for(let e=0;e<n.length;e++)this.removePendingMark(n[e],r)}}addTextNode(e){let t=e.nodeValue,n=this.top;var r,s;2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)?(1&n.options?t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," "):(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1&&(r=n.content[n.content.length-1],s=e.previousSibling,(!r||s&&"BR"==s.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1)))),t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)):this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();Oe.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&Oe.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);var s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(s?s.ignore:Ee.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let t,n=this.top,i=this.needsBlock;if(Te.hasOwnProperty(r))t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=i}else this.addElementByRule(e,s,!1===s.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=q.none;e:for(let n=0;n<e.length;n+=2)for(let r;;){var s=this.parser.matchStyle(e[n],e[n+1],this,r);if(!s)continue e;if(s.ignore)return null;if(t=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(t),!1!==s.consuming)break;r=s}return t}addElementByRule(e,t,n){let r,s,i;t.node?(s=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):r=this.enter(s,t.attrs||null,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(o)&&this.open--,i&&this.removePendingMark(i,o)}addAll(e,t,n){let r=t||0;for(let s=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];s!=i;s=s.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(s);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;0<=r;r--){var s=this.nodes[r],i=s.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=s,!i.length))break;if(s.solid)break}if(!t)return!1;this.sync(n);for(let e=0;e<t.length;e++)this.enterInner(t[e],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();var t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();var s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let i=De(e,r,s.options);4&s.options&&0==s.content.length&&(i|=4),this.nodes.push(new Ne(e,t,s.activeMarks,s.pendingMarks,n,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;0<=t;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;0<=t;t--){var n=this.nodes[t].content;for(let t=n.length-1;0<=t;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(-1<e.indexOf("|"))return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),s=-(n?n.depth+1:0)+(r?0:1),i=(e,o)=>{for(;0<=e;e--){var l=t[e];if(""==l){if(e==t.length-1||0==e)continue;for(;o>=s;o--)if(i(e-1,o))return!0;return!1}{let e=0<o||0==o&&r?this.nodes[o].type:n&&o>=s?n.node(o-s).type:null;if(!e||e.name!=l&&-1==e.groups.indexOf(l))return!1;o--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){var e=this.options.context;if(e)for(let t=e.depth;0<=t;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){var t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(e){var t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;0<=n;n--){var r=this.nodes[n];if(-1<r.pendingMarks.lastIndexOf(e))r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function ze(e){var n,t={};for(n in e)t[n]=e[n];return t}class Re{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){let r=n=n||Fe(t).createDocumentFragment(),s=[];return e.forEach(e=>{if(s.length||e.marks.length){let n=0,i=0;for(;n<s.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(s[n][0])||!1===t.type.spec.spanning)break;n++}i++}for(;n<s.length;)r=s.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],o=this.serializeMark(n,e.isInline,t);o&&(s.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){var{dom:n,contentDOM:r}=Re.renderSpec(Fe(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;0<=r;r--){var s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,t,n={}){var r=this.marks[e.type.name];return r&&Re.renderSpec(Fe(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,s=t[0],i=s.indexOf(" "),o=(0<i&&(n=s.slice(0,i),s=s.slice(i+1)),n?e.createElementNS(n,s):e.createElement(s)),l=t[1],a=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){a=2;for(let e in l)if(null!=l[e]){let t=e.indexOf(" ");0<t?o.setAttributeNS(e.slice(0,t),e.slice(t+1),l[e]):o.setAttribute(e,l[e])}}for(let s=a;s<t.length;s++){let i=t[s];if(0===i){if(s<t.length-1||s>a)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}{let{dom:t,contentDOM:s}=Re.renderSpec(e,i,n);if(o.appendChild(t),s){if(r)throw new RangeError("Multiple content holes");r=s}}}return{dom:o,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Re(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){e=Be(e.nodes);return e.text||(e.text=e=>e.text),e}static marksFromSchema(e){return Be(e.marks)}}function Be(e){var n,t={};for(n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Fe(e){return e.document||window.document}const $e=Math.pow(2,16);function qe(e){return 65535&e}class je{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return 0<(8&this.delInfo)}get deletedBefore(){return 0<(5&this.delInfo)}get deletedAfter(){return 0<(6&this.delInfo)}get deletedAcross(){return 0<(4&this.delInfo)}}class Ve{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ve.empty)return Ve.empty}recover(e){let t=0,n=qe(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/$e}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){var l=this.ranges[o]-(this.inverted?r:0);if(e<l)break;var a=this.ranges[o+s],c=this.ranges[o+i],h=l+a;if(e<=h){let s=l+r+((a?e==l?-1:e==h?1:t:t)<0?0:c);if(n)return s;let i=e==l?2:e==h?1:4;return(t<0?e!=l:e!=h)&&(i|=8),new je(s,i,e==(t<0?l:h)?null:o/3+(e-l)*$e)}r+=c-a}return n?e+r:new je(e+r,0,null)}touches(e,t){let n=0,r=qe(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){var o=this.ranges[t]-(this.inverted?n:0);if(e<o)break;var l=this.ranges[t+s];if(e<=o+l&&t==3*r)return!0;n+=this.ranges[t+i]-l}return!1}forEach(e){var t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){var i=this.ranges[r],o=i-(this.inverted?s:0),i=i+(this.inverted?0:s),a=this.ranges[r+t],c=this.ranges[r+n];e(o,o+a,i,i+c),s+=c-a}}invert(){return new Ve(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Ve.empty:new Ve(e<0?[0,-e,0]:[0,0,e])}}Ve.empty=new Ve([]);class He{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new He(this.maps,this.mirror,e,t)}copy(){return new He(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;0<=t;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){var e=new He;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){var s=this.maps[n].mapResult(e,t);if(null!=s.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(s.recover);continue}}r|=s.delInfo,e=s.pos}return n?e:new je(e,r,null)}}const Ue=Object.create(null);class We{getMap(){return Ve.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Ue[t.stepType];if(n)return n.fromJSON(e,t);throw new RangeError(`No step type ${t.stepType} defined`)}static jsonID(e,t){if(e in Ue)throw new RangeError("Duplicate use of step JSON ID "+e);return(Ue[e]=t).prototype.jsonID=e,t}}class Je{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Je(e,null)}static fail(e){return new Je(null,e)}static fromReplace(e,t,n,r){try{return Je.ok(e.replace(t,n,r))}catch(e){if(e instanceof j)return Je.fail(e.message);throw e}}}function Ge(e,t,n){var r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);(i=i.content.size?i.copy(Ge(i.content,t,i)):i).isInline&&(i=t(i,n,s)),r.push(i)}return R.fromArray(r)}class Ke extends We{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){var t=e.slice(this.from,this.to),n=e.resolve(this.from),n=n.node(n.sharedDepth(this.to)),n=new V(Ge(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,n),t.openStart,t.openEnd);return Je.fromReplace(e,this.from,this.to,n)}invert(){return new Ze(this.from,this.to,this.mark)}map(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new Ke(t.pos,e.pos,this.mark)}merge(e){return e instanceof Ke&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ke(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ke(t.from,t.to,e.markFromJSON(t.mark))}}We.jsonID("addMark",Ke);class Ze extends We{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){var t=e.slice(this.from,this.to),t=new V(Ge(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return Je.fromReplace(e,this.from,this.to,t)}invert(){return new Ke(this.from,this.to,this.mark)}map(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new Ze(t.pos,e.pos,this.mark)}merge(e){return e instanceof Ze&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ze(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ze(t.from,t.to,e.markFromJSON(t.mark))}}We.jsonID("removeMark",Ze);class Xe extends We{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){var n,t=e.nodeAt(this.pos);return t?(n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks)),Je.fromReplace(e,this.pos,this.pos+1,new V(R.from(n),0,t.isLeaf?0:1))):Je.fail("No node at mark step's position")}invert(e){var t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new Xe(this.pos,t.marks[n]);return new Xe(this.pos,this.mark)}}return new Qe(this.pos,this.mark)}map(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new Xe(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xe(t.pos,e.markFromJSON(t.mark))}}We.jsonID("addNodeMark",Xe);class Qe extends We{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){var n,t=e.nodeAt(this.pos);return t?(n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks)),Je.fromReplace(e,this.pos,this.pos+1,new V(R.from(n),0,t.isLeaf?0:1))):Je.fail("No node at mark step's position")}invert(e){e=e.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Xe(this.pos,this.mark):this}map(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new Qe(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qe(t.pos,e.markFromJSON(t.mark))}}We.jsonID("removeNodeMark",Qe);class Ye extends We{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&tt(e,this.from,this.to)?Je.fail("Structure replace would overwrite content"):Je.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ve([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ye(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deletedAcross&&e.deletedAcross?null:new Ye(t.pos,Math.max(t.pos,e.pos),this.slice)}merge(e){if(!(e instanceof Ye)||e.structure||this.structure)return null;var t;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)return e.to!=this.from||this.slice.openStart||e.slice.openEnd?null:(t=this.slice.size+e.slice.size==0?V.empty:new V(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd),new Ye(e.from,this.to,t,this.structure));{let t=this.slice.size+e.slice.size==0?V.empty:new V(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ye(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ye(t.from,t.to,V.fromJSON(e,t.slice),!!t.structure)}}We.jsonID("replace",Ye);class et extends We{constructor(e,t,n,r,s,i,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=o}apply(e){var t;return this.structure&&(tt(e,this.from,this.gapFrom)||tt(e,this.gapTo,this.to))?Je.fail("Structure gap-replace would overwrite content"):(t=e.slice(this.gapFrom,this.gapTo)).openStart||t.openEnd?Je.fail("Gap is not a flat range"):(t=this.slice.insertAt(this.insert,t.content))?Je.fromReplace(e,this.from,this.to,t):Je.fail("Content does not fit in gap")}getMap(){return new Ve([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){var t=this.gapTo-this.gapFrom;return new et(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),e=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||e>n.pos?null:new et(t.pos,n.pos,r,e,this.slice,this.insert,this.structure)}toJSON(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new et(t.from,t.to,t.gapFrom,t.gapTo,V.fromJSON(e,t.slice),t.insert,!!t.structure)}}function tt(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;0<s&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(0<s){let e=r.node(i).maybeChild(r.indexAfter(i));for(;0<s;){if(!e||e.isLeaf)return 1;e=e.firstChild,s--}}}function rt(e){var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){var r=e.$from.node(n),s=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(s,i,t))return n;if(0==n||r.type.spec.isolating||!function(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}(r,s,i))break}return null}function st(e,t,n=null,r=e){var s=function(e,t){var{parent:e,startIndex:r,endIndex:s}=e,i=e.contentMatchAt(r).findWrapping(t);return i&&(t=i.length?i[0]:t,e.canReplaceWith(r,s,t))?i:null}(e,t),r=s&&function(e,t){var{parent:n,startIndex:r,endIndex:s}=e,e=n.child(r),e=t.contentMatch.findWrapping(e.type);if(!e)return null;let l=(e.length?e[e.length-1]:t).contentMatch;for(let e=r;l&&e<s;e++)l=l.matchType(n.child(e).type);return l&&l.validEnd?e:null}(r,t);return r?s.map(it).concat({type:t,attrs:n}).concat(r.map(it)):null}function it(e){return{type:e,attrs:null}}function ot(e,t,n=1,r){var s=e.resolve(t),i=s.depth-n,e=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!e.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let e=s.depth-1,t=n-2;e>i;e--,t--){let n=s.node(e),i=s.index(e);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(i,n.childCount),l=r&&r[t]||n;if(l!=n&&(o=o.replaceChild(0,l.type.create(l.attrs))),!n.canReplace(i+1,n.childCount)||!l.type.validContent(o))return!1}t=s.indexAfter(i),e=r&&r[0];return s.node(i).canReplaceWith(t,t,(e||s.node(1+i)).type)}function lt(e,t){var e=e.resolve(t),t=e.index(),s=e.nodeBefore,i=e.nodeAfter;return s&&i&&!s.isLeaf&&s.canAppend(i)&&e.parent.canReplace(t,t+1)}function at(e,t,n=t,r=V.empty){var s;return t!=n||r.size?ct(s=e.resolve(t),e=e.resolve(n),r)?new Ye(t,n,r):new ht(s,e,r).fit():null}function ct(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}We.jsonID("replaceAround",et);class ht{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=R.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;0<t;t--)this.placed=R.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,i=n.depth,o=r.depth;for(;i&&o&&1==s.childCount;)s=s.firstChild.content,i--,o--;var l=new V(s,i,o);return-1<e?new et(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new Ye(n.pos,r.pos,l):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;0<=t;t--){let n,r=null;var s=(n=(t?r=pt(this.unplaced.content,t-1).firstChild:this.unplaced).content).firstChild;for(let n=this.depth;0<=n;n--){let i,{type:o,match:l}=this.frontier[n],a=null;if(1==e&&(s?l.matchType(s.type)||(a=l.fillBefore(R.from(s),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:n,parent:r,inject:a};if(2==e&&s&&(i=l.findWrapping(s.type)))return{sliceDepth:t,frontierDepth:n,parent:r,wrap:i};if(r&&l.matchType(r.type))break}}}openMore(){var{content:e,openStart:t,openEnd:n}=this.unplaced,r=pt(e,t);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new V(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),0))}dropNode(){var{content:e,openStart:t,openEnd:n}=this.unplaced,r=pt(e,t);r.childCount<=1&&0<t?(r=e.size-t<=t+r.size,this.unplaced=new V(dt(e,t-1,1),t-1,r?t-1:n)):this.unplaced=new V(dt(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let e=0;e<s.length;e++)this.openFrontierNode(s[e]);let i=this.unplaced,o=(n||i).content,l=i.openStart-e,a=0,c=[],{match:h,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));h=h.matchFragment(r)}let u=o.size+e-(i.content.size-i.openEnd);for(;a<o.childCount;){let e=o.child(a),t=h.matchType(e.type);if(!t)break;(1<++a||0==l||e.content.size)&&(h=t,c.push(function ft(e,t,n){if(t<=0)return e;let r=e.content;return 1<t&&(r=r.replaceChild(0,ft(r.firstChild,t-1,1==r.childCount?n-1:0))),0<t&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(R.empty,!0)))),e.copy(r)}(e.mark(d.allowedMarks(e.marks)),1==a?l:0,a==o.childCount?u:-1)))}var p=a==o.childCount;p||(u=-1),this.placed=ut(this.placed,t,R.from(c)),this.frontier[t].match=h,p&&u<0&&n&&n.type==this.frontier[this.depth].type&&1<this.frontier.length&&this.closeFrontierNode();for(let e=0,t=o;e<u;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?V.empty:new V(dt(i.content,e-1,1),e-1,u<0?i.openEnd:e-1):new V(dt(i.content,e,a),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!mt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let n=this.$to["depth"],r=this.$to.after(n);for(;1<n&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);0<=t;t--){var{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),r=mt(e,t,r,n,s);if(r){for(let n=t-1;0<=n;n--){let{match:t,type:r}=this.frontier[n],s=mt(e,n,r,t,!0);if(!s||s.childCount)continue e}return{depth:t,fit:r,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ut(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=ut(this.placed,this.depth,R.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){var e=this.frontier.pop().match.fillBefore(R.empty,!0);e.childCount&&(this.placed=ut(this.placed,this.frontier.length,e))}}function dt(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(dt(e.firstChild.content,t-1,n)))}function ut(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(ut(e.lastChild.content,t-1,n)))}function pt(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function mt(e,t,n,r,s){var i=e.node(t),o=s?e.indexAfter(t):e.index(t);return(o!=i.childCount||n.compatibleContent(i.type))&&(s=r.fillBefore(i.content,!0,o))&&!function(e,t){for(let r=o;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return 1}(n,i.content)?s:null}function bt(e,t){var n=[];for(let r=Math.min(e.depth,t.depth);0<=r;r--){var s=e.start(r);if(s<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&n.push(r)}return n}class yt extends We{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){var t=e.nodeAt(this.pos);if(!t)return Je.fail("No node at attribute step's position");var n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;var r=t.type.create(n,null,t.marks);return Je.fromReplace(e,this.pos,this.pos+1,new V(R.from(r),0,t.isLeaf?0:1))}getMap(){return Ve.empty}invert(e){return new yt(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new yt(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new yt(t.pos,t.attr,t.value)}}We.jsonID("attr",yt);(class extends Error{});let vt;(((vt=function e(t){t=Error.call(this,t);return t.__proto__=e.prototype,t}).prototype=Object.create(Error.prototype)).constructor=vt).prototype.name="TransformError";class wt{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new He}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){e=this.maybeStep(e);if(e.failed)throw new vt(e.failed);return this}maybeStep(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return 0<this.steps.length}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=V.empty){t=at(this.doc,e,t,n);return t&&this.step(t),this}replaceWith(e,t,n){return this.replace(e,t,new V(R.from(n),0,0))}delete(e,t){return this.replace(e,t,V.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var s=e.doc.resolve(t),i=e.doc.resolve(n);if(ct(s,i,r))return e.step(new Ye(t,n,r));var o=bt(s,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let e=s.depth,t=s.pos-1;0<e;e--,t--){let n=s.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;-1<o.indexOf(e)?l=e:s.before(e)==t&&o.splice(1,0,-e)}let a=o.indexOf(l),c=[],h=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=h-1;0<=e;e--){let t=c[e].type,n=function(e){return e.spec.defining||e.spec.definingForContent}(t);if(n&&s.node(a).type!=t)h=e;else if(n||!t.isTextblock)break}for(let t=r.openStart;0<=t;t--){let l=(t+h+1)%(r.openStart+1),d=c[l];if(d)for(let t=0;t<o.length;t++){let c=o[(t+a)%o.length],h=!0;c<0&&(h=!1,c=-c);var u=s.node(c-1),p=s.index(c-1);if(u.canReplaceWith(p,p,d.type,d.marks))return e.replace(s.before(c),h?i.after(c):n,new V(function kt(e,t,n,r,s){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(kt(s.content,t+1,n,r,s)))}if(r<t){let t=s.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(R.empty,!0))}return e}(r.content,0,r.openStart,l),l,r.openEnd))}}var d=e.steps.length;for(let l=o.length-1;0<=l&&(e.replace(t,n,r),!(e.steps.length>d));l--){let e=o[l];e<0||(t=s.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){var s;!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size&&null!=(s=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;0<=e;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(0<t)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;0<=e;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)return null}return null}(e.doc,t,r.type))&&(t=n=s),e.replaceRange(t,n,new V(R.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){var r=e.doc.resolve(t),s=e.doc.resolve(n),i=bt(r,s);for(let t=0;t<i.length;t++){let n=i[t],o=t==i.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),s.end(n));if(0<n&&(o||r.node(n-1).canReplace(r.index(n-1),s.indexAfter(n-1))))return e.delete(r.before(n),s.after(n))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i)return e.delete(r.before(i),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:s,depth:i}=t,o=r.before(i+1),l=s.after(i+1),a=o,c=l,h=R.empty,d=0;for(let e=i,t=!1;e>n;e--)t||0<r.index(e)?(t=!0,h=R.from(r.node(e).copy(h)),d++):a--;let u=R.empty,p=0;for(let e=i,t=!1;e>n;e--)t||s.after(e+1)<s.end(e)?(t=!0,u=R.from(s.node(e).copy(u)),p++):c++;e.step(new et(a,c,o,l,new V(h.append(u),d,p),h.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){t=new Ye(t-n,t+n,V.empty,!0);e.step(t)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=R.empty;for(let e=n.length-1;0<=e;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=R.from(n[e].type.create(n[e].attrs,r))}var s=t.start,t=t.end;e.step(new et(s,t,s,t,new V(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{var l,o;if(t.isTextblock&&!t.hasMarkup(r,s)&&function(e,t,n){e=e.resolve(t),t=e.index();return e.parent.canReplaceWith(t,t+1,n)}(e.doc,e.mapping.slice(i).map(n),r))return e.clearIncompatible(e.mapping.slice(i).map(n,1),r),l=(o=e.mapping.slice(i)).map(n,1),o=o.map(n+t.nodeSize,1),e.step(new et(l,o,l+1,o-1,new V(R.from(r.create(s,null,t.marks)),0,0),1,!0)),!1})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r=[]){return function(e,t,n,r,s){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");r=(n=n||i.type).create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,r);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new et(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new V(R.from(r),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new yt(e,t,n)),this}addNodeMark(e,t){return this.step(new Xe(e,t)),this}removeNodeMark(e,t){if(!(t instanceof q)){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new Qe(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let s=e.doc.resolve(t),i=R.empty,o=R.empty;for(let e=s.depth,t=s.depth-n,l=n-1;e>t;e--,l--){i=R.from(s.node(e).copy(i));let t=r&&r[l];o=R.from(t?t.type.create(t.attrs,o):s.node(e).copy(o))}e.step(new Ye(t,t,new V(i.append(o),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let s,i,o=[],l=[];e.doc.nodesBetween(t,n,(e,a,c)=>{if(e.isInline){var h=e.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(a,t),d=Math.min(a+e.nodeSize,n),u=r.addToSet(h);for(let e=0;e<h.length;e++)h[e].isInSet(u)||(s&&s.to==c&&s.mark.eq(h[e])?s.to=d:o.push(s=new Ze(c,d,h[e])));i&&i.to==c?i.to=d:l.push(i=new Ke(c,d,r))}}}),o.forEach(t=>e.step(t)),l.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(e,o)=>{if(e.isInline){i++;let l=null;if(r instanceof _e){let t,n=e.marks;for(;t=r.isInSet(n);)(l=l||[]).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(l=[r]):l=e.marks;if(l&&l.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,a=l[e];for(let e=0;e<s.length;e++){let t=s[e];t.step==i-1&&a.eq(s[e].style)&&(n=t)}n?(n.to=r,n.step=i):s.push({style:a,from:Math.max(o,t),to:r,step:i})}}}}),s.forEach(t=>e.step(new Ze(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let s=e.doc.nodeAt(t),i=[],o=t+1;for(let t=0;t<s.childCount;t++){var l=s.child(t),a=o+l.nodeSize,c=r.matchType(l.type);if(c){r=c;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new Ze(o,a,l.marks[t]))}else i.push(new Ye(o,a,V.empty));o=a}if(!r.validEnd){let t=r.fillBefore(R.empty,!0);e.replace(o,o,new V(t,0,0))}for(let t=i.length-1;0<=t;t--)e.step(i[t])}(this,e,t,n),this}}const xt=Object.create(null);class Ct{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new _t(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){var e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=V.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)n=(r=n).lastChild;var s=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){var{$from:l,$to:a}=i[o],c=e.mapping.slice(s);e.replaceRange(c.map(l.pos),c.map(a.pos),o?V.empty:t),0==o&&Lt(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){var n=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){var{$from:i,$to:o}=r[s],l=e.mapping.slice(n),i=l.map(i.pos),l=l.map(o.pos);s?e.deleteRange(i,l):(e.replaceRangeWith(i,l,t),Lt(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){var r=e.parent.inlineContent?new At(e):It(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;0<=r;r--){var s=t<0?It(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):It(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Dt(e.node(0))}static atStart(e){return It(e,e,0,0,1)||new Dt(e)}static atEnd(e){return It(e,e,e.content.size,e.childCount,-1)||new Dt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=xt[t.type];if(n)return n.fromJSON(e,t);throw new RangeError(`No selection type ${t.type} defined`)}static jsonID(e,t){if(e in xt)throw new RangeError("Duplicate use of selection JSON ID "+e);return(xt[e]=t).prototype.jsonID=e,t}getBookmark(){return At.between(this.$anchor,this.$head).getBookmark()}}class _t{constructor(e,t){this.$from=e,this.$to=t}}let St=!(Ct.prototype.visible=!0);function Mt(e){St||e.parent.inlineContent||(St=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class At extends Ct{constructor(e,t=e){Mt(e),Mt(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){var n=e.resolve(t.map(this.head));return n.parent.inlineContent?(e=e.resolve(t.map(this.anchor)),new At(e.parent.inlineContent?e:n,n)):Ct.near(n)}replace(e,t=V.empty){if(super.replace(e,t),t==V.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof At&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Tt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new At(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){var r=e.pos-t.pos;if(n&&!r||(n=0<=r?1:-1),!t.parent.inlineContent){let e=Ct.findFrom(t,n,!0)||Ct.findFrom(t,-n,!0);if(!e)return Ct.near(t,n);t=e.$head}return e.parent.inlineContent||(0!=r&&(e=(Ct.findFrom(e,-n,!0)||Ct.findFrom(e,n,!0)).$anchor).pos<t.pos==r<0||(e=t)),new At(e,t)}}Ct.jsonID("text",At);class Tt{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Tt(e.map(this.anchor),e.map(this.head))}resolve(e){return At.between(e.resolve(this.anchor),e.resolve(this.head))}}class Et extends Ct{constructor(e){var t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){var{deleted:t,pos:r}=t.mapResult(this.anchor),e=e.resolve(r);return t?Ct.near(e):new Et(e)}content(){return new V(R.from(this.node),0,0)}eq(e){return e instanceof Et&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ot(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Et(e.resolve(t.anchor))}static create(e,t){return new Et(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Et.prototype.visible=!1,Ct.jsonID("node",Et);class Ot{constructor(e){this.anchor=e}map(e){var{deleted:e,pos:n}=e.mapResult(this.anchor);return e?new Tt(n,n):new Ot(n)}resolve(e){var e=e.resolve(this.anchor),n=e.nodeAfter;return n&&Et.isSelectable(n)?new Et(e):Ct.near(e)}}class Dt extends Ct{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=V.empty){if(t==V.empty){e.delete(0,e.doc.content.size);let t=Ct.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Dt(e)}map(e){return new Dt(e)}eq(e){return e instanceof Dt}getBookmark(){return Nt}}Ct.jsonID("all",Dt);const Nt={map(){return this},resolve:e=>new Dt(e)};function It(e,t,n,r,s,i=!1){if(t.inlineContent)return At.create(e,n);for(let o=r-(0<s?0:1);0<s?o<t.childCount:0<=o;o+=s){let r=t.child(o);if(r.isAtom){if(!i&&Et.isSelectable(r))return Et.create(e,n-(s<0?r.nodeSize:0))}else{let t=It(e,r,n+s,s<0?r.childCount:0,s,i);if(t)return t}n+=r.nodeSize*s}return null}function Lt(e,t,n){var r=e.steps.length-1;if(!(r<t)){let s,i=e.steps[r];(i instanceof Ye||i instanceof et)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==s&&(s=r)}),e.setSelection(Ct.near(e.doc.resolve(s),n)))}}class zt extends wt{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return 0<(1&this.updated)}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return q.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return 0<(2&this.updated)}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){var n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||q.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(n=null==(n=null==n?t:n)?t:n,!e)return this.deleteRange(t,n);let s=this.storedMarks;if(!s){let e=this.doc.resolve(t);s=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,s)),this.selection.empty||this.setSelection(Ct.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(var e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return 0<(4&this.updated)}}function Pt(e,t){return t&&e?e.bind(t):e}class Rt{constructor(e,t,n){this.name=e,this.init=Pt(t.init,n),this.apply=Pt(t.apply,n)}}const Bt=[new Rt("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Rt("selection",{init:(e,t)=>e.selection||Ct.atStart(t.doc),apply:e=>e.selection}),new Rt("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Rt("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class Ft{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Bt.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),(this.pluginsByKey[e.key]=e).spec.state&&this.fields.push(new Rt(e.key,e.spec.state,e))})}}class $t{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){var o=this.config.plugins[i];if(o.spec.appendTransaction){var l=r?r[i].n:0,a=r?r[i].state:this,o=l<t.length&&o.spec.appendTransaction.call(o,l?t.slice(l):t,a,n);if(o&&n.filterTransaction(o,i)){if(o.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(o),n=n.applyInner(o),s=!0}r&&(r[i]={state:n,n:t.length})}}if(!s)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");var t=new $t(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){var s=n[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new zt(this)}static create(e){var t=new Ft((e.doc?e.doc.type:e).schema,e.plugins),n=new $t(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){var t=new Ft(this.schema,e.plugins),n=t.fields,r=new $t(t);for(let t=0;t<n.length;t++){var s=n[t].name;r[s]=this.hasOwnProperty(s)?this[s]:n[t].init(e,r)}return r}toJSON(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],s=r.spec.state;s&&s.toJSON&&(t[n]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Ft(e.schema,e.plugins),s=new $t(r);return r.fields.forEach(r=>{if("doc"==r.name)s.doc=le.fromJSON(e.schema,t.doc);else if("selection"==r.name)s.selection=Ct.fromJSON(s.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var i in n){var o=n[i],l=o.spec.state;if(o.key==r.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(s[r.name]=l.fromJSON.call(o,e,t[i],s))}s[r.name]=r.init(e,s)}}),s}}class jt{constructor(e){this.spec=e,this.props={},e.props&&function qt(e,t,n){for(var r in e){let s=e[r];s instanceof Function?s=s.bind(t):"handleDOMEvents"==r&&(s=qt(s,t,{})),n[r]=s}return n}(e.props,this,this.props),this.key=e.key?e.key.key:Ht("plugin")}getState(e){return e[this.key]}}const Vt=Object.create(null);function Ht(e){return e in Vt?e+"$"+ ++Vt[e]:(Vt[e]=0,e+"$")}class Ut{constructor(e="key"){this.key=Ht(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Wt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}t&&(n=this.remapping(s,this.items.length),r=n.maps.length);let i,o,l=e.tr,a=[],c=[];return this.items.forEach((e,t)=>{if(e.step){if(n){c.push(new Jt(e.map));let t,s=e.step.map(n.slice(r));s&&l.maybeStep(s).doc&&(t=l.mapping.maps[l.mapping.maps.length-1],a.push(new Jt(t,void 0,void 0,a.length+c.length))),r--,t&&n.appendMap(t,r)}else l.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,o=new Wt(this.items.slice(0,s).append(c.reverse().concat(a)),this.eventCount-1),!1):void 0}n||(n=this.remapping(s,t+1),r=n.maps.length),r--,c.push(e)},this.items.length,0),{remaining:o,transform:l,selection:i}}addTransform(e,t,n,r){let s=[],i=this.eventCount,o=this.items,l=!r&&o.length?o.get(o.length-1):null;for(let n=0;n<e.steps.length;n++){let a,c=e.steps[n].invert(e.docs[n]),h=new Jt(e.mapping.maps[n],c,t);(a=l&&l.merge(h))&&(h=a,n?s.pop():o=o.slice(0,o.length-1)),s.push(h),t&&(i++,t=void 0),r||(l=h)}n=i-n.depth;return n>Kt&&(o=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(o,n),i-=n),new Wt(o.append(s),i)}remapping(e,t){let n=new He;return this.items.forEach((t,r)=>{r=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,r)},e,t),n}addMaps(e){return 0==this.eventCount?this:new Wt(this.items.append(e.map(e=>new Jt(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),s=e.mapping,i=e.steps.length,o=this.eventCount,l=(this.items.forEach(e=>{e.selection&&o--},r),t);this.items.forEach(t=>{var r=s.getMirror(--l);if(null!=r){i=Math.min(i,r);var a=s.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(s.slice(l+1,r));c&&o++,n.push(new Jt(a,i,c))}else n.push(new Jt(a))}},r);var a=[];for(let e=t;e<i;e++)a.push(new Jt(s.maps[e]));let c=this.items.slice(0,r).append(a).append(n),h=new Wt(c,o);return h=500<h.emptyItemCount()?h.compress(this.items.length-n.length):h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],s=0;return this.items.forEach((i,o)=>{if(e<=o)r.push(i),i.selection&&s++;else if(i.step){let e=i.step.map(t.slice(n)),o=e&&e.getMap();var a,l,h;n--,o&&t.appendMap(o,n),e&&((l=i.selection&&i.selection.map(t.slice(n)))&&s++,l=new Jt(o.invert(),e,l),h=r.length-1,(a=r.length&&r[h].merge(l))?r[h]=a:r.push(l))}else i.map&&n--},this.items.length,0),new Wt(N.from(r.reverse()),s)}}Wt.empty=new Wt(N.empty,0);class Jt{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){e=e.step.merge(this.step);if(e)return new Jt(e.getMap().invert(),e,this.selection)}}}class Gt{constructor(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r}}const Kt=20;function Zt(e){let t=[];return e.forEach((e,n,r,s)=>t.push(r,s)),t}function Xt(e,t){if(!e)return null;var n=[];for(let r=0;r<e.length;r+=2){var s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}function Qt(e,t,n,r){var l,s=tn(t),i=nn.get(t).spec.config,o=(r?e.undone:e.done).popEvent(t,s);o&&(l=o.selection.resolve(o.transform.doc),e=(r?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,s),t=new Gt(r?e:o.remaining,r?o.remaining:e,null,0),n(o.transform.setSelection(l).setMeta(nn,{redo:r,historyState:t}).scrollIntoView()))}let Yt=!1,en=null;function tn(e){var t=e.plugins;if(en!=t){Yt=!1,en=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Yt=!0;break}}return Yt}const nn=new Ut("history"),rn=new Ut("closeHistory");function sn(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new jt({key:nn,state:{init:()=>new Gt(Wt.empty,Wt.empty,null,0),apply:(t,n,r)=>function(e,t,n,r){var i=n.getMeta(nn);if(i)return i.historyState;n.getMeta(rn)&&(e=new Gt(e.done,e.undone,null,0));var o=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(o&&o.getMeta(nn))return o.getMeta(nn).redo?new Gt(e.done.addTransform(n,void 0,r,tn(t)),e.undone,Zt(n.mapping.maps[n.steps.length-1]),e.prevTime):new Gt(e.done,e.undone.addTransform(n,void 0,r,tn(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new Gt(e.done.rebased(n,i),e.undone.rebased(n,i),Xt(e.prevRanges,n.mapping),e.prevTime):new Gt(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Xt(e.prevRanges,n.mapping),e.prevTime);{let s=0==e.prevTime||!o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(t){if(!e.docChanged)return 1;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let s=0;s<t.length;s+=2)e<=t[s+1]&&r>=t[s]&&(n=!0)}),n}}(n,e.prevRanges)),i=o?Xt(e.prevRanges,n.mapping):Zt(n.mapping.maps[n.steps.length-1]);return new Gt(e.done.addTransform(n,s?t.selection.getBookmark():void 0,r,tn(t)),Wt.empty,i,n.time)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){var n=t.inputType,n="historyUndo"==n?on:"historyRedo"==n?ln:null;return!!n&&(t.preventDefault(),n(e.state,e.dispatch))}}}})}function An(e){return(e=e.assignedSlot||e.parentNode)&&11==e.nodeType?e.host:e}const on=(e,t)=>{var n=nn.getState(e);return!(!n||0==n.done.eventCount||(t&&Qt(n,e,t,!1),0))},ln=(e,t)=>{var n=nn.getState(e);return!(!n||0==n.undone.eventCount||(t&&Qt(n,e,t,!0),0))},an="undefined"!=typeof navigator?navigator:null,cn="undefined"!=typeof document?document:null,hn=an&&an.userAgent||"",dn=/Edge\/(\d+)/.exec(hn),un=/MSIE \d/.exec(hn),pn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hn),fn=!!(un||pn||dn),mn=un?document.documentMode:pn?+pn[1]:dn?+dn[1]:0,gn=!fn&&/gecko\/(\d+)/i.test(hn),kn=(gn&&(/Firefox\/(\d+)/.exec(hn)||[0,0])[1],!fn&&/Chrome\/(\d+)/.exec(hn)),bn=!!kn,yn=kn?+kn[1]:0,vn=!fn&&!!an&&/Apple Computer/.test(an.vendor),wn=vn&&(/Mobile\/\w+/.test(hn)||!!an&&2<an.maxTouchPoints),xn=wn||!!an&&/Mac/.test(an.platform),Cn=/Android \d/.test(hn),_n=!!cn&&"webkitFontSmoothing"in cn.documentElement.style,Sn=_n?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Mn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t};let Tn=null;function On(e,t,n,r){return n&&(Nn(e,t,n,r,-1)||Nn(e,t,n,r,1))}const En=function(e,t,n){var r=Tn=Tn||document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Dn=/^(img|br|input|textarea|hr)$/i;function Nn(e,t,n,r,s){for(;;){if(e==n&&t==r)return!0;if(t==(s<0?0:In(e))){let n=e.parentNode;if(!n||1!=n.nodeType||function(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}(e)||Dn.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Mn(e)+(s<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(s<0?-1:0)]).contentEditable)return!1;t=s<0?In(e):0}}}function In(e){return(3==e.nodeType?e.nodeValue:e.childNodes).length}const zn=function(e){let t=e.isCollapsed;return t=t&&bn&&e.rangeCount&&!e.getRangeAt(0).collapsed?!1:t};function Pn(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Bn(e,t){return"number"==typeof e?e:e[t]}function $n(e,t,n){var r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let o=n||e.dom;o;o=An(o))if(1==o.nodeType){let e=o,n=e==i.body,l=n?function(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(i):function(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}(e),a=0,c=0;if(t.top<l.top+Bn(r,"top")?c=-(l.top-t.top+Bn(s,"top")):t.bottom>l.bottom-Bn(r,"bottom")&&(c=t.bottom-l.bottom+Bn(s,"bottom")),t.left<l.left+Bn(r,"left")?a=-(l.left-t.left+Bn(s,"left")):t.right>l.right-Bn(r,"right")&&(a=t.right-l.right+Bn(s,"right")),a||c)if(n)i.defaultView.scrollBy(a,c);else{let n=e.scrollLeft,r=e.scrollTop,s=(c&&(e.scrollTop+=c),a&&(e.scrollLeft+=a),e.scrollLeft-n),i=e.scrollTop-r;t={left:t.left-s,top:t.top-i,right:t.right-s,bottom:t.bottom-i}}if(n)break}}function qn(e){var t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=An(r));return t}function jn(e,t){for(let n=0;n<e.length;n++){var{dom:r,top:s,left:i}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Vn=null;function Un(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Jn(e,t){let n,r=e.dom.ownerDocument,s=0;if(r.caretPositionFromPoint)try{let e=r.caretPositionFromPoint(t.left,t.top);e&&({offsetNode:n,offset:s}=e)}catch(e){}if(!n&&r.caretRangeFromPoint){let e=r.caretRangeFromPoint(t.left,t.top);e&&({startContainer:n,startOffset:s}=e)}let i,o=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!o||!e.dom.contains(1!=o.nodeType?o.parentNode:o)){let n=e.dom.getBoundingClientRect();if(!Un(t,n))return null;if(!(o=function Wn(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let s=e[r];if(Un(t,s))return Wn(n,t,s)}}if((i=(i+1)%r)==s)break}return e}(e.dom,t,n)))return null}if(vn)for(let e=o;n&&e;e=An(e))e.draggable&&(n=void 0);if(o=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(o,t),n){if(gn&&1==n.nodeType&&(s=Math.min(s,n.childNodes.length))<n.childNodes.length){let e,r=n.childNodes[s];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&s++}n==e.dom&&s==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?i=e.state.doc.content.size:0!=s&&1==n.nodeType&&"BR"==n.childNodes[s-1].nodeName||(i=function(e,t,n,r){let s=-1;for(let n=t;n!=e.dom;){let t=e.docView.nearestDesc(n,!0);if(!t)return null;if(t.node.isBlock&&t.parent){let e=t.dom.getBoundingClientRect();if(e.left>r.left||e.top>r.top)s=t.posBefore;else{if(!(e.right<r.left||e.bottom<r.top))break;s=t.posAfter}}n=t.dom.parentNode}return-1<s?s:e.docView.posFromDOM(t,n,1)}(e,n,s,t))}null==i&&(i=function(e,t,n){let{node:r,offset:s}=function Hn(e,t){let n,r,s=2e8,i=0,o=t.top,l=t.top;for(let a=e.firstChild,c=0;a;a=a.nextSibling,c++){let e;if(1==a.nodeType)e=a.getClientRects();else{if(3!=a.nodeType)continue;e=En(a).getClientRects()}for(let h=0;h<e.length;h++){var d=e[h];if(d.top<=o&&d.bottom>=l){o=Math.max(d.bottom,o),l=Math.min(d.top,l);let e=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(e<s){n=a,s=e,r=e&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==a.nodeType&&e&&(i=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){var n=e.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let n=Gn(r,1);if(n.top!=n.bottom&&Un(t,n))return{node:e,offset:s+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:i}:Hn(n,r)}(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,s,i)}(e,o,t));t=e.docView.nearestDesc(o,!0);return{pos:i,inside:t?t.posAtStart-t.border:-1}}function Gn(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}const Kn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Zn(e,t,n){var{node:r,offset:s,atom:i}=e.docView.domFromPos(t,n<0?-1:1),o=_n||gn;if(3==r.nodeType){if(!o||!Kn.test(r.nodeValue)&&(n<0?s:s!=r.nodeValue.length)){let e=s,t=s,i=n<0?1:-1;return n<0&&!s?(t++,i=-1):0<=n&&s==r.nodeValue.length?(e--,i=1):n<0?e--:t++,Xn(Gn(En(r,e,t),1),i<0)}{let e=Gn(En(r,s,s),n);if(gn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let t=Gn(En(r,s-1,s-1),-1);if(t.top==e.top){let n=Gn(En(r,s,s+1),-1);if(n.top!=e.top)return Xn(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&s&&(n<0||s==In(r))){let e=r.childNodes[s-1];if(1==e.nodeType)return Qn(e.getBoundingClientRect(),!1)}if(null==i&&s<In(r)){let e=r.childNodes[s];if(1==e.nodeType)return Qn(e.getBoundingClientRect(),!0)}return Qn(r.getBoundingClientRect(),0<=n)}if(null==i&&s&&(n<0||s==In(r))){let e=r.childNodes[s-1],t=3==e.nodeType?En(e,In(e)-(o?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Xn(Gn(t,1),!1)}if(null==i&&s<In(r)){let e=r.childNodes[s];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?En(e,0,o?0:1):1==e.nodeType?e:null:null;if(t)return Xn(Gn(t,-1),!0)}return Xn(Gn(3==r.nodeType?En(r):r,-n),0<=n)}function Xn(e,t){return 0==e.width?e:(t=t?e.left:e.right,{top:e.top,bottom:e.bottom,left:t,right:t})}function Qn(e,t){return 0==e.height?e:{top:t=t?e.top:e.bottom,bottom:t,left:e.left,right:e.right}}function Yn(e,t,n){var r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}const er=/[\u0590-\u08ac]/;let tr=null,nr=null,rr=!1;class sr{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>Mn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?0<n:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let s,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(s=i.nodeDOM)||(1==s.nodeType?s.contains(1==e.nodeType?e:e.parentNode):s==e))return i;n=!1}}}getDesc(e){var t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){var s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],s=n+r.size;if(n==e&&s!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<s)return r.descAt(e-n-r.border);n=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n,r=0,s=0;for(let t=0;r<this.children.length;r++){let n=this.children[r],i=t+n.size;if(e<i||n instanceof dr){s=e-t;break}t=i}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof ir&&0<=n.side;r--);if(t<=0){let e,n=!0;for(;(e=r?this.children[r-1]:null)&&e.dom.parentNode!=this.contentDOM;r--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?Mn(e.dom)+1:0}}{let e,n=!0;for(;(e=r<this.children.length?this.children[r]:null)&&e.dom.parentNode!=this.contentDOM;r++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?Mn(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let i=n,o=0;;o++){let n=this.children[o],l=i+n.size;if(-1==r&&e<=l){let s=i+n.border;if(e>=s&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,s);e=i;for(let t=o;0<t;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=Mn(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(-1<r&&(t<l||o==this.children.length-1)){t=l;for(let e=o+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){s=Mn(n.dom);break}t+=n.size}-1==s&&(s=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){var t;return!(this.border||!this.contentDOM||!this.children.length)&&(0==(t=this.children[e<0?0:this.children.length-1]).size||t.emptyChildAt(e))}domAfterPos(e){var{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){var s=Math.min(e,t),i=Math.max(e,t);for(let o=0,l=0;o<this.children.length;o++){let a=this.children[o],c=l+a.size;if(s>l&&i<c)return a.setSelection(e-l-a.border,t-l-a.border,n,r);l=c}let o=this.domFromPos(e,e?-1:1),l=t==e?o:this.domFromPos(t,t?-1:1),a=n.getSelection(),c=!1;if((gn||vn)&&e==t){let{node:e,offset:t}=o;if(3==e.nodeType){if((c=!(!t||"\n"!=e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t,n=e;n;n=n.parentNode){if(t=n.nextSibling){"BR"==t.nodeName&&(o=l={node:t.parentNode,offset:Mn(t)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(gn&&a.focusNode&&a.focusNode!=l.node&&1==a.focusNode.nodeType){let e=a.focusNode.childNodes[a.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(r||c&&vn||!On(o.node,o.offset,a.anchorNode,a.anchorOffset)||!On(l.node,l.offset,a.focusNode,a.focusOffset)){let h=!1;if((a.extend||e==t)&&!c){a.collapse(o.node,o.offset);try{if(e!=t)try{a.extend(l.node,l.offset)}catch(e){}h=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!h){if(t<e){let e=o;o=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(o.node,o.offset),a.removeAllRanges(),a.addRange(n)}}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){var s=this.children[r],i=n+s.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+s.border,o=i-s.border;if(e>=r&&t<=o)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=o||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(e-r,t-r):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class ir extends sr{constructor(e,t,n,r){let s,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:r)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class or extends sr{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class lr extends sr{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let s=r.nodeViews[t.type.name],i=s&&s(t,r,n);return i&&i.dom||(i=Re.renderSpec(document,t.type.spec.toDOM(t,n))),new lr(e,t,i.dom,i.contentDOM||i.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=lr.create(this.parent,this.mark,!0,n),s=this.children,i=this.size;t<i&&(s=_r(s,t,i,n)),0<e&&(s=_r(s,0,e,n));for(let e=0;e<s.length;e++)s[e].parent=r;return r.children=s,r}}class ar extends sr{constructor(e,t,n,r,s,i,o,l,a){super(e,[],s,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=o,i&&this.updateChildren(l,a)}static create(e,t,n,r,s,i){let o,l=s.nodeViews[t.type.name],a=l&&l(t,s,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:i,n,r),c=a&&a.dom,h=a&&a.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:h}=Re.renderSpec(document,t.type.spec.toDOM(t)));h||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));var d=c;return c=yr(c,n,t),a?o=new ur(e,t,n,r,c,h||null,d,a,s,i+1):t.isText?new hr(e,t,n,r,c,d,s):new ar(e,t,n,r,c,h||null,d,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;0<=t;t--){var n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>R.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&vr(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,i=s&&-1<s.pos?s:null,o=s&&s.pos<0,l=new xr(this,i&&i.node,e);!function(e,t,n,r){let s=t.locals(e),i=0;if(0==s.length)for(let n=0;n<e.childCount;n++){let o=e.child(n);r(o,s,t.forChild(i,o),n),i+=o.nodeSize}else{let o=0,l=[],a=null;for(let c=0;;){if(o<s.length&&s[o].to==i){let e,t=s[o++];for(;o<s.length&&s[o].to==i;)(e=e||[t]).push(s[o++]);if(e){e.sort(Cr);for(let t=0;t<e.length;t++)n(e[t],c,!!a)}else n(t,c,!!a)}let h,d;if(a)d=-1,h=a,a=null;else{if(!(c<e.childCount))break;d=c,h=e.child(c++)}for(let e=0;e<l.length;e++)l[e].to<=i&&l.splice(e--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)l.push(s[o++]);let u=i+h.nodeSize;if(h.isText){let e=u;o<s.length&&s[o].from<e&&(e=s[o].from);for(let t=0;t<l.length;t++)l[t].to<e&&(e=l[t].to);e<u&&(a=h.cut(e-i),h=h.cut(0,e-i),u=e,d=-1)}r(h,h.isInline&&!h.isLeaf?l.filter(e=>!e.inline):l.slice(),t.forChild(i,h),d),i=u}}}(this.node,this.innerDeco,(t,s,i)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):0<=t.type.side&&!i&&l.syncToMarks(s==this.node.childCount?q.none:this.node.child(s).marks,n,e),l.placeWidget(t,e,r)},(t,i,a,c)=>{let h;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,i,a,c)||o&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&-1<(h=l.findIndexWithChild(s.node))&&l.updateNodeAt(t,i,a,h,e)||l.updateNextNode(t,i,a,e,c)||l.addNode(t,i,a,e,r),r+=t.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),!l.changed&&2!=this.dirty||(i&&this.protectLocalComposition(e,i),function pr(e,t,n){let r=e.firstChild,s=!1;for(let i=0;i<t.length;i++){let o=t[i],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=wr(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(l,r);if(o instanceof lr){let t=r?r.previousSibling:e.lastChild;pr(o.contentDOM,o.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=wr(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}(this.contentDOM,this.children,e),wn&&function(e){var t;"UL"!=e.nodeName&&"OL"!=e.nodeName||(t=e.style.cssText,e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t)}(this.dom))}localCompositionInfo(e,t){var{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof At)||n<t||r>t+this.node.content.size)return null;var e=e.domSelection(),i=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&0<t){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=In(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(e.focusNode,e.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,s=function(e,t,n,r){for(let s=0,i=0;s<e.childCount&&i<=r;){var o=e.child(s++),l=i;if(i+=o.nodeSize,o.isText){let a=o.text;for(;s<e.childCount;){let t=e.child(s++);if(i+=t.nodeSize,!t.isText)break;a+=t.text}if(i>=n){let e=l<r?a.lastIndexOf(t,r-l-1):-1;if(0<=e&&e+t.length+l>=n)return l+e;if(n==r&&a.length>=r+t.length-l&&a.slice(r-l,r-l+t.length)==t)return r}}}return-1}(this.node.content,e,n-t,r-t);return s<0?null:{node:i,pos:s,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(!this.getDesc(t)){let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}t=new or(this,s,t,r);e.input.compositionNodes.push(t),this.children=_r(this.children,n,n+r.length,e,t)}}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){var t,n;vr(e,this.outerDeco)||(t=1!=this.nodeDOM.nodeType,n=this.dom,this.dom=kr(this.dom,this.nodeDOM,gr(this.outerDeco,this.node,t),gr(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e)}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function cr(e,t,n,r,s){return yr(r,t,e),new ar(void 0,e,t,n,r,r,r,s,0)}class hr extends ar{constructor(e,t,n,r,s,i,o){super(e,t,n,r,s,null,i,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0))}inParent(){var e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){e=this.node.cut(e,t),t=document.createTextNode(e.text);return new hr(this.parent,e,this.outerDeco,this.innerDeco,t,t,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class dr extends sr{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class ur extends ar{constructor(e,t,n,r,s,i,o,l,a,c){super(e,t,n,r,s,i,o,a,c),this.spec=l}update(e,t,n,r){var s;return 3!=this.dirty&&(this.spec.update?((s=this.spec.update(e,t,n))&&this.updateInner(e,t,n,r),s):!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r))}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}const fr=function(e){e&&(this.nodeName=e)},mr=(fr.prototype=Object.create(null),[new fr]);function gr(e,t,n){if(0==e.length)return mr;let r=n?mr[0]:new fr,s=[r];for(let i=0;i<e.length;i++){var o=e[i].type.attrs;if(o){o.nodeName&&s.push(r=new fr(o.nodeName));for(let e in o){let i=o[e];null!=i&&(n&&1==s.length&&s.push(r=new fr(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return s}function kr(e,t,n,r){if(n==mr&&r==mr)return t;let s=t;for(let t=0;t<r.length;t++){let i=r[t],o=n[t];if(t){let t;o&&o.nodeName==i.nodeName&&s!=e&&(t=s.parentNode)&&t.nodeName.toLowerCase()==i.nodeName||((t=document.createElement(i.nodeName)).pmIsDeco=!0,t.appendChild(s),o=mr[0]),s=t}!function(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==s.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<s.length;t++)-1==r.indexOf(s[t])&&e.classList.add(s[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}(s,o||mr[0],i)}return s}function yr(e,t,n){return kr(e,e,mr,gr(t,n,1!=e.nodeType))}function vr(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function wr(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}class xr{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,s=e.childCount,i=new Map,o=[];e:for(;0<s;){let l;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof lr)){l=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var a=l.node;if(a){if(a!=e.child(s-1))break;--s,i.set(l,s),o.push(l)}}return{index:s,matched:i,matches:o.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;r<i&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++)if(this.top.children[t].matchesMark(e[s])){r=t;break}if(-1<r)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=lr.create(this.top,e[s],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,n,r){let s,i=-1;if(r>=this.preMatch.index&&(s=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,n))i=this.top.children.indexOf(s,this.index);else for(let r=this.index,s=Math.min(this.top.children.length,r+5);r<s;r++){let s=this.top.children[r];if(s.matchesNode(e,t,n)&&!this.preMatch.matched.has(s)){i=r;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}updateNodeAt(e,t,n,r,s){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,s)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,s){for(let i=this.index;i<this.top.children.length;i++){var o=this.top.children[i];if(o instanceof ar){var l=this.preMatch.matched.get(o);if(null!=l&&l!=s)return!1;l=o.dom;if((!this.lock||!(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))||e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&vr(t,o.outerDeco))&&o.update(e,t,n,r))return this.destroyBetween(this.index,i),o.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,n,r,s){this.top.children.splice(this.index++,0,ar.create(this.top,e,t,n,r,s)),this.changed=!0}placeWidget(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new ir(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof lr;)e=(t=e).children[t.children.length-1];(!(e&&e instanceof hr)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((vn||bn)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){var n;t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e)?this.index++:(n=document.createElement(e),"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak"),e=new dr(this.top,[],n,null),t!=this.top?t.children.push(e):t.children.splice(this.index++,0,e),this.changed=!0)}}function Cr(e,t){return e.type.side-t.type.side}function _r(e,t,n,r,s){var i=[];for(let o=0,l=0;o<e.length;o++){var a=e[o],c=l,h=l+=a.size;n<=c||h<=t?i.push(a):(c<t&&i.push(a.slice(0,t-c,r)),s&&(i.push(s),s=void 0),n<h&&i.push(a.slice(n-c,a.size,r)))}return i}function Sr(e,t=null){var n=e.domSelection(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),i=s&&0==s.size,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l,a,c=r.resolve(o);if(zn(n)){for(l=c;s&&!s.node;)s=s.parent;let e=s.node;if(s&&e.isAtom&&Et.isSelectable(e)&&s.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,s=t==In(e);r||s;){if(e==n)return 1;let t=Mn(e);if(!(e=e.parentNode))return;r=r&&0==t,s=s&&t==In(e)}}(n.focusNode,n.focusOffset,s.dom))){let e=s.posBefore;a=new Et(o==e?c:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;l=r.resolve(t)}return a=a||Lr(e,l,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)}function Mr(e){return e.editable?e.hasFocus():Pr(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ar(e,t=!1){var n=e.state.selection;if(Nr(e,n),Mr(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&bn){let t=e.domSelection(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&On(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,s="IMG"==r.nodeName;s?n.setEnd(r.parentNode,Mn(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!s&&!e.state.selection.visible&&fn&&mn<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,s,{anchor:i,head:o}=n;!Tr||n instanceof At||(n.$from.parent.inlineContent||(r=Er(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=Er(e,n.to))),e.docView.setSelection(i,o,e.root,t),Tr&&(r&&Dr(r),s&&Dr(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument,n=(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),e.domSelection()),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==s||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{Mr(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Tr=vn||bn&&yn<63;function Er(e,t){var{node:e,offset:t}=e.docView.domFromPos(t,0),s=t<e.childNodes.length?e.childNodes[t]:null,e=t?e.childNodes[t-1]:null;return vn&&s&&"false"==s.contentEditable?Or(s):s&&"false"!=s.contentEditable||e&&"false"!=e.contentEditable?void 0:s?Or(s):e?Or(e):void 0}function Or(e){return e.contentEditable="true",vn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Dr(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Nr(e,t){t instanceof Et?(t=e.docView.descAt(t.from))!=e.lastSelectedViewDesc&&(Ir(e),t&&t.selectNode(),e.lastSelectedViewDesc=t):Ir(e)}function Ir(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Lr(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||At.between(t,n,r)}function zr(e){return!(e.editable&&!e.hasFocus())&&Pr(e)}function Pr(e){var t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Rr(e,t){var{$anchor:n,$head:r}=e.selection,n=0<t?n.max(r):n.min(r),r=n.parent.inlineContent?n.depth?e.doc.resolve(0<t?n.after():n.before()):null:n;return r&&Ct.findFrom(r,t)}function Br(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Fr(e,t,n){var r=e.state.selection;if(!(r instanceof At)){if(r instanceof Et&&r.node.isInline)return Br(e,new At(0<t?r.$to:r.$from));{let n=Rr(e.state,t);return!!n&&Br(e,n)}}if(!r.empty||-1<n.indexOf("s"))return!1;if(e.endOfTextblock(0<t?"right":"left")){let n=Rr(e.state,t);return!!(n&&n instanceof Et)&&Br(e,n)}if(!(xn&&-1<n.indexOf("m"))){let n,s=r.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;return!i||i.isText?!1:(r=t<0?s.pos-i.nodeSize:s.pos,!!(i.isAtom||(n=e.docView.descAt(r))&&!n.contentDOM)&&(Et.isSelectable(i)?Br(e,new Et(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):!!_n&&Br(e,new At(e.state.doc.resolve(t<0?r:r+i.nodeSize)))))}}function $r(e){return(3==e.nodeType?e.nodeValue:e.childNodes).length}function qr(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function jr(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(n){let s,i,o=!1;for(gn&&1==n.nodeType&&r<$r(n)&&qr(n.childNodes[r])&&(o=!0);;)if(0<r){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(qr(e))s=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Hr(n))break;{let t=n.previousSibling;for(;t&&qr(t);)s=n.parentNode,i=Mn(t),t=t.previousSibling;if(t)n=t,r=$r(n);else{if((n=n.parentNode)==e.dom)break;r=0}}}o?Ur(e,t,n,r):s&&Ur(e,t,s,i)}}function Vr(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(n){let s,i,o=$r(n);for(;;)if(r<o){if(1!=n.nodeType)break;if(!qr(n.childNodes[r]))break;s=n,i=++r}else{if(Hr(n))break;{let t=n.nextSibling;for(;t&&qr(t);)s=t.parentNode,i=Mn(t)+1,t=t.nextSibling;if(t)n=t,r=0,o=$r(n);else{if((n=n.parentNode)==e.dom)break;r=o=0}}}s&&Ur(e,t,s,i)}}function Hr(e){e=e.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ur(e,t,n,r){if(zn(t)){let e=document.createRange();e.setEnd(n,r),e.setStart(n,r),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();let s=e["state"];setTimeout(()=>{e.state==s&&Ar(e)},50)}function Wr(e,t,n){var r=e.state.selection;if(r instanceof At&&!r.empty||-1<n.indexOf("s"))return!1;if(xn&&-1<n.indexOf("m"))return!1;var{$from:s,$to:i}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Rr(e.state,t);if(n&&n instanceof Et)return Br(e,n)}if(s.parent.inlineContent)return!1;{let n=t<0?s:i,o=r instanceof Dt?Ct.near(n,t):Ct.findFrom(n,t);return!!o&&Br(e,o)}}function Jr(e,t){if(!(e.state.selection instanceof At))return!0;var{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(!s||s.isText)return!1;{let r=e.state.tr;return t<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),e.dispatch(r),!0}}function Gr(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Kr(e,t){e.someProp("transformCopied",e=>{t=e(t)});let n=[],{content:r,openStart:s,openEnd:i}=t;for(;1<s&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){s--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}var o=e.someProp("clipboardSerializer")||Re.fromSchema(e.state.schema),l=is(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c,h=a.firstChild,d=0;for(;h&&1==h.nodeType&&(c=rs[h.nodeName.toLowerCase()]);){for(let e=c.length-1;0<=e;e--){let t=l.createElement(c[e]);for(;a.firstChild;)t.appendChild(a.firstChild);a.appendChild(t),d++}h=a.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${s} ${i}${d?" -"+d:""} `+JSON.stringify(n)),{dom:a,text:e.someProp("clipboardTextSerializer",e=>e(t))||t.content.textBetween(0,t.content.size,"\n\n")}}function Zr(e,t,n,r,s){let i,o,l=s.parent.type.spec.code;if(!n&&!t)return null;var a=t&&(r||l||!n);if(a){if(e.someProp("transformPastedText",e=>{t=e(t,l||r)}),l)return t?new V(R.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):V.empty;let n=e.someProp("clipboardTextParser",e=>e(t,s,r));if(n)o=n;else{let n=s.marks(),r=e.state["schema"],o=Re.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{var t=i.appendChild(document.createElement("p"));e&&t.appendChild(o.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",e=>{n=e(n)}),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=is().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e);if((n=s&&rs[s[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join("")),r.innerHTML=e,n)for(let e=0;e<n.length;e++)r=r.querySelector(n[e])||r;return r}(n),_n&&function(e){var t=e.querySelectorAll(bn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);var c=i&&i.querySelector("[data-pm-slice]"),c=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let e=+c[3];0<e&&i.firstChild;e--)i=i.firstChild;if(!o){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Ae.fromSchema(e.state.schema);o=t.parseSlice(i,{preserveWhitespace:!(!a&&!c),context:s,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Xr.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(c)o=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}let{content:s,openStart:i,openEnd:o}=e;for(let e=n.length-2;0<=e;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;s=R.from(t.create(n[e+1],s)),i++,o++}return new V(s,i,o)}(ns(o,+c[1],+c[2]),c[4]);else if((o=V.maxOpen(function(e,t){if(!(e.childCount<2))for(let n=t.depth;0<=n;n--){let r,s=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach(e=>{if(i){var t,n=s.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&function Yr(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=Yr(e,t,n,r.lastChild,s+1);return i?r.copy(r.content.replaceChild(r.childCount-1,i)):r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1])?r.copy(r.content.append(R.from(Qr(n,e,s+1)))):void 0}}(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function es(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,es(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(R.empty,!0);return e.copy(n.append(r))}(i[i.length-1],r.length));let t=Qr(e,n);i.push(t),s=s.matchType(t.type),r=n}}}),i)return R.from(i)}return e}(o.content,s),!0)).openStart||o.openEnd){let e=0,t=0;for(let t=o.content.firstChild;e<o.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=o.content.lastChild;t<o.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);o=ns(o,e,t)}return e.someProp("transformPasted",e=>{o=e(o)}),o}const Xr=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Qr(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,R.from(e));return e}function ts(e,t,n,r,s,i){let o=t<0?e.firstChild:e.lastChild,l=o.content;return s<r-1&&(l=ts(l,t,n,r,s+1,i)),n<=s&&(l=t<0?o.contentMatchAt(0).fillBefore(l,1<e.childCount||i<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(R.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function ns(e,t,n){return e=n<(e=t<e.openStart?new V(ts(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd):e).openEnd?new V(ts(e.content,1,n,e.openEnd,0,0),e.openStart,n):e}const rs={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ss=null;function is(){return ss=ss||document.implementation.createHTMLDocument("title")}const ls={},as={},cs={touchstart:!0,touchmove:!0};class hs{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ds(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function us(e){e.someProp("handleDOMEvents",t=>{for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>ps(e,t))})}function ps(e,t){return e.someProp("handleDOMEvents",n=>{n=n[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function ms(e){return{left:e.clientX,top:e.clientY}}function gs(e,t,n,r,s){if(-1!=r){let i=e.state.doc.resolve(r);for(let r=i.depth+1;0<r;r--)if(e.someProp(t,t=>r>i.depth?t(e,n,i.nodeAfter,i.before(r),s,!0):t(e,n,i.node(r),i.before(r),s,!1)))return!0}return!1}function ks(e,t,n){e.focused||e.focus();t=e.state.tr.setSelection(t);"pointer"==n&&t.setMeta("pointer",!0),e.dispatch(t)}function vs(e){return As(e)}as.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Cs(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Cn||!bn||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!wn||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||function(e,t){var n=t.keyCode,t=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||xn&&72==n&&"c"==t?Jr(e,-1)||jr(e):46==n||xn&&68==n&&"c"==t?Jr(e,1)||Vr(e):13==n||27==n||(37==n||xn&&66==n&&"c"==t?Fr(e,-1,t)||jr(e):39==n||xn&&70==n&&"c"==t?Fr(e,1,t)||Vr(e):38==n||xn&&80==n&&"c"==t?Wr(e,-1,t)||jr(e):40==n||xn&&78==n&&"c"==t?(function(e){if(vn&&!(0<e.state.selection.$head.parentOffset)){var{focusNode:t,focusOffset:n}=e.domSelection();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Gr(e,n,"true"),setTimeout(()=>Gr(e,n,"false"),20)}}}(e),Wr(e,1,t)||Vr(e)):t==(xn?"m":"c")&&(66==n||73==n||89==n||90==n))}(e,n)?n.preventDefault():ds(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,Pn(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},as.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},as.keypress=(e,t)=>{let n=t;if(!(Cs(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||xn&&n.metaKey))if(e.someProp("handleKeyPress",t=>t(e,n)))n.preventDefault();else{let r=e.state.selection;if(!(r instanceof At&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}}};const ws=xn?"metaKey":"ctrlKey";ls.mousedown=(e,t)=>{e.input.shiftKey=t.shiftKey;let r=vs(e),s=Date.now(),i="singleClick";s-e.input.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,t=t.y-e.clientY;return n*n+t*t<100}(t,e.input.lastClick)&&!t[ws]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(ms(t));o&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new xs(e,o,t,!!r)):("doubleClick"==i?function(e,t,n,r){return gs(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}:function(e,t,n,r){return gs(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0==n.button){var r=e.state.doc;if(-1==t)return r.inlineContent&&(ks(e,At.create(r,0,r.content.size),"pointer"),1);var s=r.resolve(t);for(let t=s.depth+1;0<t;t--){let n=t>s.depth?s.nodeAfter:s.node(t),i=s.before(t);if(n.inlineContent)ks(e,At.create(r,i+1,i+1+n.content.size),"pointer");else{if(!Et.isSelectable(n))continue;ks(e,Et.create(r,i),"pointer")}return 1}}}(e,n,r)})(e,o.pos,o.inside,t)?t.preventDefault():ds(e,"pointer"))};class xs{constructor(e,t,n,r){let s,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[ws],this.allowDefault=n.shiftKey,-1<t.inside)s=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);s=n.parent,i=n.depth?n.before():0}t=r?null:n.target,r=t?e.docView.nearestDesc(t,!0):null,this.target=r?r.dom:null,t=e.state.selection;(0==n.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||t instanceof Et&&t.from<=i&&t.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!gn||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ds(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ar(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),this.view.dom.contains(e.target)){let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ms(e))),this.updateAllowDefault(e),this.allowDefault||!t?ds(this.view,"pointer"):function(e,t,n,r,s){return gs(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(s?function(e,t){if(-1!=t){let n,r,s=e.state.selection;s instanceof Et&&(n=s.node);var i=e.state.doc.resolve(t);for(let e=i.depth+1;0<e;e--){let t=e>i.depth?i.nodeAfter:i.node(e);if(Et.isSelectable(t)){r=n&&0<s.$from.depth&&e>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?i.before(s.$from.depth):i.before(e);break}}return null!=r&&(ks(e,Et.create(e.state.doc,r),"pointer"),1)}}:function(e,t){var r;if(-1!=t)return(r=(t=e.state.doc.resolve(t)).nodeAfter)&&r.isAtom&&Et.isSelectable(r)&&(ks(e,new Et(t),"pointer"),1)})(e,n)}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||vn&&this.mightDrag&&!this.mightDrag.node.isAtom||bn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ks(this.view,Ct.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ds(this.view,"pointer")}}move(e){this.updateAllowDefault(e),ds(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0)}}function Cs(e,t){return e.composing||vn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500&&(e.input.compositionEndedAt=-2e8)}ls.touchstart=e=>{e.input.lastTouch=Date.now(),vs(e),ds(e,"pointer")},ls.touchmove=e=>{e.input.lastTouch=Date.now(),ds(e,"pointer")},ls.contextmenu=e=>vs(e);const _s=Cn?5e3:-1;function Ss(e,t){clearTimeout(e.input.composingTimeout),-1<t&&(e.input.composingTimeout=setTimeout(()=>As(e),t))}function Ms(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());0<e.input.compositionNodes.length;)e.input.compositionNodes.pop().markParentsDirty()}function As(e,t=!1){if(!(Cn&&0<=e.domObserver.flushingSoon)){if(e.domObserver.forceFlush(),Ms(e),t||e.docView&&e.docView.dirty){let t=Sr(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}as.compositionstart=as.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();var t=e["state"],n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),As(e,!0),e.markCursor=null;else if(As(e),gn&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelection();for(let e=t.focusNode,n=t.focusOffset;e&&1==e.nodeType&&0!=n;){var r=n<0?e.lastChild:e.childNodes[n-1];if(!r)break;if(3==r.nodeType){t.collapse(r,r.nodeValue.length);break}e=r,n=-1}}e.input.composing=!0}Ss(e,_s)},as.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,Ss(e,20))};const Ts=fn&&mn<15||wn&&Sn<604;function Es(e,t,n,r){let s=Zr(e,t,n,e.input.shiftKey,e.state.selection.$from);return e.someProp("handlePaste",t=>t(e,r,s||V.empty))||(s?(n=(t=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(s))?e.state.tr.replaceSelectionWith(t,e.input.shiftKey):e.state.tr.replaceSelection(s),e.dispatch(n.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),1):void 0)}ls.copy=as.cut=(e,t)=>{var i,a,r=e.state.selection,s="cut"==t.type;r.empty||(i=Ts?null:t.clipboardData,{dom:r,text:a}=Kr(e,r.content()),i?(t.preventDefault(),i.clearData(),i.setData("text/html",r.innerHTML),i.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}}(e,r),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")))},as.paste=(e,t)=>{var r;e.composing&&!Cn||((r=Ts?null:t.clipboardData)&&Es(e,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Es(e,r.value,null,t):Es(e,r.textContent,r.innerHTML,t)},50)}}(e,t))};class Os{constructor(e,t){this.slice=e,this.move=t}}const Ds=xn?"altKey":"ctrlKey";ls.dragstart=(e,t)=>{var n=t,t=e.input.mouseDown;if(t&&t.done(),n.dataTransfer){var s=e.state.selection,i=s.empty?null:e.posAtCoords(ms(n));if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Et?s.to-1:s.to)))if(t&&t.mightDrag)e.dispatch(e.state.tr.setSelection(Et.create(e.state.doc,t.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(Et.create(e.state.doc,t.posBefore)))}var i=e.state.selection.content(),{dom:s,text:t}=Kr(e,i);n.dataTransfer.clearData(),n.dataTransfer.setData(Ts?"Text":"text/html",s.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ts||n.dataTransfer.setData("text/plain",t),e.dragging=new Os(i,!n[Ds])}},ls.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},as.dragover=as.dragenter=(e,t)=>t.preventDefault(),as.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){t=e.posAtCoords(ms(n));if(t){let i=e.state.doc.resolve(t.pos),o=r&&r.slice,l=(o?e.someProp("transformPasted",e=>{o=e(o)}):o=Zr(e,n.dataTransfer.getData(Ts?"Text":"text/plain"),Ts?null:n.dataTransfer.getData("text/html"),!1,i),!(!r||n[Ds]));if(e.someProp("handleDrop",t=>t(e,n,o||V.empty,l)))n.preventDefault();else if(o){n.preventDefault();let a=o?function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let e=0;e<n.openStart;e++)s=s.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;0<=t;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,i=r.index(t)+(0<n?1:0),o=r.node(t),l=!1;if(1==e)l=o.canReplace(i,i,s);else{let e=o.contentMatchAt(i).findWrapping(s.firstChild.type);l=e&&o.canReplaceWith(i,i,e[0])}if(l)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}(e.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);var c=e.state.tr,t=(l&&c.deleteSelection(),c.mapping.map(a)),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,u=c.doc;if(d?c.replaceRangeWith(t,t,o.content.firstChild):c.replaceRange(t,t,o),!c.doc.eq(u)){u=c.doc.resolve(t);if(d&&Et.isSelectable(o.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Et(u));else{let t=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,s)=>t=s),c.setSelection(Lr(e,u,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}},ls.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&Ar(e)},20))},ls.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ls.beforeinput=(e,t)=>{if(bn&&Cn&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let t=e.input["domChangeCount"];setTimeout(()=>{var n;e.input.domChangeCount==t&&(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,Pn(8,"Backspace")))||(n=e.state.selection["$cursor"],n&&0<n.pos&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())))},50)}};for(let e in as)ls[e]=as[e];function Ns(e,t){if(e!=t){for(var n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1}return!0}class Is{constructor(e,t){this.toDOM=e,this.spec=t||Bs,this.side=this.spec.side||0}map(e,t,n,r){var{pos:e,deleted:t}=e.mapResult(t.from+r,this.side<0?-1:1);return t?null:new Ps(e-n,e-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Is&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ns(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ls{constructor(e,t){this.attrs=e,this.spec=t||Bs}map(e,t,n,r){var s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,e=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return e<=s?null:new Ps(s,e,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ls&&Ns(this.attrs,e.attrs)&&Ns(this.spec,e.spec)}static is(e){return e.type instanceof Ls}destroy(){}}class zs{constructor(e,t){this.attrs=e,this.spec=t||Bs}map(e,t,n,r){var s=e.mapResult(t.from+r,1);return s.deleted||(e=e.mapResult(t.to+r,-1)).deleted||e.pos<=s.pos?null:new Ps(s.pos-n,e.pos-n,this)}valid(e,t){let n,{index:r,offset:s}=e.content.findIndex(t.from);return s==t.from&&!(n=e.child(r)).isText&&s+n.nodeSize==t.to}eq(e){return this==e||e instanceof zs&&Ns(this.attrs,e.attrs)&&Ns(this.spec,e.spec)}destroy(){}}class Ps{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Ps(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Ps(e,e,new Is(t,n))}static inline(e,t,n,r){return new Ps(e,t,new Ls(n,r))}static node(e,t,n,r){return new Ps(e,t,new zs(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ls}}const Rs=[],Bs={};class Fs{constructor(e,t){this.local=e.length?e:Rs,this.children=t.length?t:Rs}static create(e,t){return t.length?Us(t,e,0,Bs):$s}find(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,s){for(let i=0;i<this.local.length;i++){var o=this.local[i];o.from<=t&&o.to>=e&&(!s||s(o.spec))&&n.push(o.copy(o.from+r,o.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let o=this.children[i]+1;this.children[i+2].findInner(e-o,t-o,n,r+o,s)}}map(e,t,n){return this==$s||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Bs)}mapInner(e,t,n,r,s){let i;for(let o=0;o<this.local.length;o++){var l=this.local[o].map(e,n,r);l&&l.type.valid(t,l)?(i=i||[]).push(l):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?function(e,t,n,r,s,i,o){let l=e.slice();for(let e=0,t=i;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,o)=>{var a=o-i-(n-e);for(let o=0;o<l.length;o+=3){var c=l[o+1];c<0||e>c+t-r||((c=l[o]+t-r)<=n?l[o+1]=e<=c?-2:-1:s<=i&&a&&(l[o]+=a,l[o+1]+=a))}r+=a}),t=n.maps[e].map(t,-1)}let a=!1;for(let t=0;t<l.length;t+=3)if(l[t+1]<0){if(-2==l[t+1]){a=!0,l[t+1]=-1;continue}var c=n.map(e[t]+i),h=c-s;if(h<0||h>=r.content.size){a=!0;continue}var d=n.map(e[t+1]+i,-1)-s,{index:u,offset:p}=r.content.findIndex(h),u=r.maybeChild(u);if(u&&p==h&&p+u.nodeSize==d){let r=l[t+2].mapInner(n,u,c+1,e[t]+i+1,o);r!=$s?(l[t]=h,l[t+1]=d,l[t+2]=r):(l[t+1]=-2,a=!0)}else a=!0}if(a){let a=function(e,t,n,r,s,i,o){function l(e,t){for(let i=0;i<e.local.length;i++){let l=e.local[i].map(r,s,t);l?n.push(l):o.onRemove&&o.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)l(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&l(e[n+2],t[n]+i+1);return n}(l,e,t,n,s,i,o),c=Us(a,r,0,o);t=c.local;for(let e=0;e<l.length;e+=3)l[e+1]<0&&(l.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<l.length&&l[t]<n;)t+=3;l.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Fs(t.sort(Ws),l)}(this.children,i||[],e,t,n,r,s):i?new Fs(i.sort(Ws),Rs):$s}add(e,t){return t.length?this==$s?Fs.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,s=0;e.forEach((e,i)=>{var o,l=i+n;if(o=Vs(t,e,l)){for(r=r||this.children.slice();s<r.length&&r[s]<i;)s+=3;r[s]==i?r[s+2]=r[s+2].addInner(e,o,l+1):r.splice(s,0,i,i+e.nodeSize,Us(o,e,l+1,Bs)),s+=3}});var i=js(s?Hs(t):t,-n);for(let t=0;t<i.length;t++)i[t].type.valid(e,i[t])||i.splice(t--,1);return new Fs(i.length?this.local.concat(i).sort(Ws):this.local,r||this.children)}remove(e){return 0==e.length||this==$s?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let s,i=n[r]+t,o=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<o&&(e[n]=null,(s=s||[]).push(t));var l;s&&((l=(n=n==this.children?this.children.slice():n)[r+2].removeInner(s,i+1))!=$s?n[r+2]=l:(n.splice(r,3),r-=3))}if(r.length)for(let n,s=0;s<e.length;s++)if(n=e[s])for(let e=0;e<r.length;e++)r[e].eq(n,t)&&(r=r==this.local?this.local.slice():r).splice(e--,1);return n==this.children&&r==this.local?this:r.length||n.length?new Fs(r,n):$s}forChild(e,t){if(this==$s)return this;if(t.isLeaf)return Fs.empty;let n,r;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}var s=e+1,i=s+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<i&&t.to>s&&t.type instanceof Ls){let e=Math.max(s,t.from)-s,n=Math.min(i,t.to)-s;e<n&&(r=r||[]).push(t.copy(e,n))}}if(r){let e=new Fs(r.sort(Ws),Rs);return n?new qs([e,n]):e}return n||$s}eq(e){if(this!=e){if(!(e instanceof Fs)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1}return!0}locals(e){return Js(this.localsInner(e))}localsInner(e){if(this==$s)return Rs;if(e.inlineContent||!this.local.some(Ls.is))return this.local;var t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof Ls||t.push(this.local[e]);return t}}Fs.empty=new Fs([],[]),Fs.removeOverlap=Js;const $s=Fs.empty;class qs{constructor(e){this.members=e}map(e,t){var n=this.members.map(n=>n.map(e,t,Bs));return qs.from(n)}forChild(e,t){if(t.isLeaf)return Fs.empty;let n=[];for(let r=0;r<this.members.length;r++){var s=this.members[r].forChild(e,t);s!=$s&&(s instanceof qs?n=n.concat(s.members):n.push(s))}return qs.from(n)}eq(e){if(!(e instanceof qs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){var s=this.members[r].localsInner(e);if(s.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<s.length;e++)t.push(s[e])}else t=s}return t?Js(n?t:t.sort(Ws)):Rs}static from(e){switch(e.length){case 0:return $s;case 1:return e[0];default:return new qs(e)}}}function js(e,t){if(!t||!e.length)return e;var n=[];for(let r=0;r<e.length;r++){var s=e[r];n.push(new Ps(s.from+t,s.to+t,s.type))}return n}function Vs(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let t,i=0;i<e.length;i++)(t=e[i])&&t.from>n&&t.to<r&&((s=s||[]).push(t),e[i]=null);return s}function Hs(e){var t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Us(e,t,n,r){let s=[],i=!1;t.forEach((t,o)=>{var l=Vs(e,t,o+n);if(l){i=!0;let e=Us(l,t,n+o+1,r);e!=$s&&s.push(o,o+t.nodeSize,e)}});var o=js(i?Hs(e):e,-n).sort(Ws);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||(r.onRemove&&r.onRemove(o[e].spec),o.splice(e--,1));return o.length||s.length?new Fs(o,s):$s}function Ws(e,t){return e.from-t.from||e.to-t.to}function Js(e){let t=e;for(let n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){var i=t[s];if(i.from!=r.from){i.from<r.to&&((t=t==e?e.slice():t)[n]=r.copy(r.from,i.from),Gs(t,s,r.copy(i.from,r.to)));break}i.to!=r.to&&((t=t==e?e.slice():t)[s]=i.copy(i.from,r.to),Gs(t,s+1,i.copy(r.to,i.to)))}}return t}function Gs(e,t,n){for(;t<e.length&&0<Ws(n,e[t]);)t++;e.splice(t,0,n)}function Ks(e){let t=[];return e.someProp("decorations",n=>{n=n(e.state);n&&n!=$s&&t.push(n)}),e.cursorWrapper&&t.push(Fs.create(e.state.doc,[e.cursorWrapper.deco])),qs.from(t)}const Zs={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xs=fn&&mn<=11;class Qs{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Ys{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Qs,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);fn&&mn<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Xs&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){-1<this.flushingSoon&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Zs)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){var e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zr(this.view)){if(this.suppressingSelectionUpdates)return Ar(this.view);if(fn&&mn<=11&&!this.view.state.selection.empty){var e=this.view.domSelection();if(e.focusNode&&On(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){var n;return 0==e.rangeCount||(e=e.getRangeAt(0).commonAncestorContainer,(n=this.view.docView.nearestDesc(e))&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0)}flush(){var e=this["view"];if(e.docView&&!(-1<this.flushingSoon)){let t=this.observer?this.observer.takeRecords():[],n=(this.queue.length&&(t=this.queue.concat(t),this.queue.length=0),e.domSelection()),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&zr(e)&&!this.ignoreSelectionChange(n),s=-1,i=-1,o=!1,l=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],l);n&&(s=s<0?n.from:Math.min(n.from,s),i=i<0?n.to:Math.max(n.to,i),n.typeOver&&(o=!0))}if(gn&&1<l.length){let e=l.filter(e=>"BR"==e.nodeName);if(2==e.length){let t=e[0],n=e[1];(t.parentNode&&t.parentNode.parentNode==n.parentNode?n:t).remove()}}let a=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&zn(n)&&(a=Sr(e))&&a.eq(Ct.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ar(e),this.currentSelection.set(n),e.scrollToSelection()):(-1<s||r)&&(-1<s&&(e.docView.markDirty(s,i),function(e){ei.has(e)||(ei.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)&&(e.requiresGeckoHackNode=gn,ti||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ti=!0)))}(e)),this.handleDOMChange(s,i,o,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ar(e),this.currentSelection.set(n))}}registerMutation(e,t){if(-1<t.indexOf(e.target))return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"!=e.type)return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue};{for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,s=e.nextSibling;if(fn&&mn<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(s=i)}var i=r&&r.parentNode==e.target?Mn(r)+1:0,i=n.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Mn(s):e.target.childNodes.length;return{from:i,to:n.localPosFromDOM(e.target,l,1)}}}}let ei=new WeakMap,ti=!1;function ni(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(vn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||vn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function ri(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Lr(e,t.resolve(n.anchor),t.resolve(n.head))}function si(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,s++}return s}class ii{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new hs,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(hi),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ai(this),li(this),this.nodeViews=ci(this),this.docView=cr(this.state.doc,oi(this),Ks(this),this.dom,this),this.domObserver=new Ys(this,(e,t,n,r)=>function(e,t,n,r,s){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Sr(e,t);if(n&&!e.state.selection.eq(n)){let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),e.dispatch(r)}}else{var i=e.state.doc.resolve(t),o=i.sharedDepth(n);t=i.before(o+1),n=e.state.doc.resolve(n).after(o+1);let l,a,c=e.state.selection,h=function(e,t,n){let r,{node:s,fromOffset:i,toOffset:o,from:l,to:a}=e.docView.parseRange(t,n),c=e.domSelection(),h=c.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:c.anchorOffset}],zn(c)||r.push({node:c.focusNode,offset:c.focusOffset})),bn&&8===e.input.lastKeyCode)for(let e=o;e>i;e--){let t=s.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){o=e;break}if(!n||n.size)break}let d=e.state.doc,u=e.someProp("domParser")||Ae.fromSchema(e.state.schema),p=d.resolve(l),f=null,m=u.parse(s,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:ni,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+l,head:t+l}}return{doc:m,sel:f,from:l,to:a}}(e,t,n),d=e.state.doc,u=d.slice(h.from,h.to),p=(a=8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,"end"):(l=e.state.selection.from,"start"),e.input.lastKeyCode=null,function(e,t,n,r,s){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);return"end"==s&&(r-=o+Math.max(0,i-Math.min(o,l))-i),o<i&&e.size<t.size?(i-=r<=i&&r>=o?i-r:0,l=i+(l-o),o=i):l<i&&(i-=r<=i&&r>=l?i-r:0,o=i+(o-l),l=i),{start:i,endA:o,endB:l}}(u.content,h.doc.content,h.from,l,a));if((wn&&e.input.lastIOSEnter>Date.now()-225||Cn)&&s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName)&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",t=>t(e,Pn(13,"Enter"))))e.input.lastIOSEnter=0;else{if(!p){if(!(r&&c instanceof At&&!c.empty&&c.$head.sameParent(c.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let t=ri(e,e.state.doc,h.sel);t&&!t.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(t))}return}p={start:c.from,endA:c.to,endB:c.to}}if(bn&&e.cursorWrapper&&h.sel&&h.sel.anchor==e.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let e=p.endB-p.start;h.sel={anchor:h.sel.anchor+e,head:h.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof At&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),fn&&mn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>h.from&&" "==h.doc.textBetween(p.start-h.from-1,p.start-h.from+1)&&(p.start--,p.endA--,p.endB--);let f,m=h.doc.resolveNoCache(p.start-h.from),g=h.doc.resolveNoCache(p.endB-h.from),k=d.resolve(p.start),b=m.sameParent(g)&&m.parent.inlineContent&&k.end()>=p.endA;if((wn&&e.input.lastIOSEnter>Date.now()-225&&(!b||s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&m.pos<h.doc.content.size&&(f=Ct.findFrom(h.doc.resolve(m.pos+1),1,!0))&&f.head==g.pos)&&e.someProp("handleKeyDown",t=>t(e,Pn(13,"Enter"))))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>p.start&&function(e,t,n,r,s){if(!(!r.parent.isTextblock||n-t<=s.pos-r.pos||si(r,!0,!1)<s.pos)){s=e.resolve(t);if(!(s.parentOffset<s.parent.content.size)&&s.parent.isTextblock)return!(!(t=e.resolve(si(s,!0,!0))).parent.isTextblock||t.pos>n||si(t,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(t.parent.content)}}(d,p.start,p.endA,m,g)&&e.someProp("handleKeyDown",t=>t(e,Pn(8,"Backspace"))))Cn&&bn&&e.domObserver.suppressSelectionUpdates();else{bn&&Cn&&p.endB==p.start&&(e.input.lastAndroidDelete=Date.now()),Cn&&!b&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==p.endA&&(p.endB-=2,g=h.doc.resolveNoCache(p.endB-h.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,Pn(13,"Enter"))})},20));let y,v,w,x=p.start,C=p.endA;if(b)if(m.pos==g.pos)fn&&mn<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ar(e),20)),y=e.state.tr.delete(x,C),v=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(w=function(e,t){let n,r,s,i=e.firstChild.marks,o=t.firstChild.marks,l=i,a=o;for(let e=0;e<o.length;e++)l=o[e].removeFromSet(l);for(let e=0;e<i.length;e++)a=i[e].removeFromSet(a);if(1==l.length&&0==a.length)r=l[0],n="add",s=e=>e.mark(r.addToSet(e.marks));else{if(0!=l.length||1!=a.length)return null;r=a[0],n="remove",s=e=>e.mark(r.removeFromSet(e.marks))}var c=[];for(let e=0;e<t.childCount;e++)c.push(s(t.child(e)));if(R.from(c).eq(e))return{mark:r,type:n}}(m.parent.content.cut(m.parentOffset,g.parentOffset),k.parent.content.cut(k.parentOffset,p.endA-k.start()))))y=e.state.tr,"add"==w.type?y.addMark(x,C,w.mark):y.removeMark(x,C,w.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let t=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",n=>n(e,x,C,t)))return;y=e.state.tr.insertText(t,x,C)}if(y=y||e.state.tr.replace(x,C,h.doc.slice(p.start-h.from,p.endB-h.from)),h.sel){let t=ri(e,y.doc,h.sel);t&&!(bn&&Cn&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==x||t.head==y.mapping.map(C)-1)||fn&&t.empty&&t.head==x)&&y.setSelection(t)}v&&y.ensureMarks(v),e.dispatch(y.scrollIntoView())}}}}(this,e,t,n,r)),this.domObserver.start(),function(e){for(var t in ls){let n=ls[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return 1;if(!t.defaultPrevented){for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return;return 1}}(e,t)||ps(e,t)||!e.editable&&t.type in as||n(e,t)},cs[t]?{passive:!0}:void 0)}vn&&e.dom.addEventListener("input",()=>null),us(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){var t,e=this._props;for(t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&us(this);var t=this._props;(this._props=e).plugins&&(e.plugins.forEach(hi),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){var n,t={};for(let e in this._props)t[e]=this._props[e];for(n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,s=!1;e.storedMarks&&this.composing&&(Ms(this),s=!0),this.state=e;var i=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=ci(this);!function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return 1;n++}for(let e in t)r++;return n!=r}(e,this.nodeViews)||(this.nodeViews=e,r=!0)}!i&&t.handleDOMEvents==this._props.handleDOMEvents||us(this),this.editable=ai(this),li(this);var i=Ks(this),l=oi(this),t=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,l,i),h=(!c&&e.selection.eq(n.selection)||(s=!0),"preserve"==t&&s&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),s=Math.max(0,r.top);for(let i=(r.left+r.right)/2,o=s+1;o<Math.min(innerHeight,r.bottom);o+=5){let r=e.root.elementFromPoint(i,o);if(r&&r!=e.dom&&e.dom.contains(r)){var l=r.getBoundingClientRect();if(l.top>=s-20){t=r,n=l.top;break}}}return{refDOM:t,refTop:n,stack:qn(e.dom)}}(this));if(s){this.domObserver.stop();let t=c&&(fn||bn)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(c){let n=bn?this.trackWrites=this.domSelection().focusNode:null;!r&&this.docView.update(e.doc,l,i,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=cr(e.doc,l,i,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),e=e.domSelection();return On(t.node,t.offset,e.anchorNode,e.anchorOffset)}(this))?Ar(this,t):(Nr(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==t?this.dom.scrollTop=0:"to selection"==t?this.scrollToSelection():h&&function({refDOM:e,refTop:t,stack:n}){e=e?e.getBoundingClientRect().top:0;jn(n,0==e?0:e-t)}(h)}scrollToSelection(){var t,e=this.domSelection().focusNode;this.someProp("handleScrollToSelection",e=>e(this))||(this.state.selection instanceof Et?1==(t=this.docView.domAfterPos(this.state.selection.from)).nodeType&&$n(this,t.getBoundingClientRect(),e):$n(this,this.coordsAtPos(this.state.selection.head,1),e))}destroyPluginViews(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){var t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let s=this.directPlugins[r].props[e];if(null!=s&&(n=t?t(s):s))return n}var s=this.state.plugins;if(s)for(let r=0;r<s.length;r++){var i=s[r].props[e];if(null!=i&&(n=t?t(i):i))return n}}hasFocus(){if(fn){let e=this.root.activeElement;if(e!=this.dom){if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}}return!0}return this.root.activeElement==this.dom}focus(){var e,t;this.domObserver.stop(),this.editable&&((e=this.dom).setActive?e.setActive():Vn?e.focus(Vn):(t=qn(e),e.focus(null==Vn?{get preventScroll(){return Vn={preventScroll:!0},!0}}:void 0),Vn||(Vn=!1,jn(t,0)))),Ar(this),this.domObserver.start()}get root(){var e;if(null==(e=this._root))for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}posAtCoords(e){return Jn(this,e)}coordsAtPos(e,t=1){return Zn(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){e=this.docView.descAt(e);return e?e.nodeDOM:null}posAtDOM(e,t,n=-1){e=this.docView.posFromDOM(e,t,n);if(null==e)throw new RangeError("DOM position not inside the editor");return e}endOfTextblock(e,t){return function(e,t,n){return tr==t&&nr==n?rr:(tr=t,nr=n,rr=("up"==n||"down"==n?function(e,t,n){let r=t.selection,s="up"==n?r.$from:r.$to;return Yn(e,t,()=>{let t=e.docView.domFromPos(s.pos,"up"==n?-1:1)["node"];for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}var r=Zn(e,s.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=En(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let s=t[e];if(s.bottom>s.top+1&&("up"==n?r.top-s.top>2*(s.bottom-r.top):s.bottom-r.bottom>2*(r.bottom-s.top)))return!1}}return!0})}:function(e,t,n){let r=t.selection["$head"];if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,l=e.domSelection();return er.test(r.parent.textContent)&&l.modify?Yn(e,t,()=>{var t=l.getRangeAt(0),s=l.focusNode,i=l.focusOffset,o=l.caretBidiLevel,s=(l.modify("move",n,"character"),!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==l.focusNode.nodeType?l.focusNode:l.focusNode.parentNode)||s==l.focusNode&&i==l.focusOffset);return l.removeAllRanges(),l.addRange(t),null!=o&&(l.caretBidiLevel=o),s}):"left"==n||"backward"==n?i:o})(e,t,n))}(this,t||this.state,e)}destroy(){if(this.docView){var t,e=this;for(t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ks(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null}}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){ps(e,t)||!ls[t.type]||!e.editable&&t.type in as||ls[t.type](e,t)}(this,e)}dispatch(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function oi(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",n=>{if(n="function"==typeof n?n(e.state):n)for(let e in n)"class"==e&&(t.class+=" "+n[e]),"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),[Ps.node(0,e.state.doc.content.size,t)]}function li(e){var t;e.markCursor?((t=document.createElement("img")).className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ps.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}):e.cursorWrapper=null}function ai(e){return!e.someProp("editable",t=>!1===t(e.state))}function ci(e){let t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function hi(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function ui(e,t){var n=document.createElement("span"),e=(n.className="flex--item ta-left fs-fine tt-uppercase mx12 mb6 mt12 fc-black-400",n.dataset.key=t,n.textContent=e,{command:()=>!0,visible:()=>!0,active:()=>!1});return{key:t,richText:e,commonmark:e,display:n}}function pi(e,t,n,r){var s=document.createElement("button");return s.type="button",s.dataset.key=n,s.textContent=e,s.dataset.action="s-popover#hide",s.className="s-block-link s-editor--dropdown-item js-editor-btn",r&&s.classList.add(...r),Object.assign(Object.assign({key:n},t),{display:s})}function fi(e,t){return t?e:null}function mi(e,t,n,r){var s=document.createElement("button"),r=(s.className="s-editor-btn s-btn js-editor-btn js-"+n,r&&s.classList.add(...r),s.title=t,s.setAttribute("aria-label",t),s.dataset.controller="s-tooltip",s.dataset.sTooltipPlacement="top",s.dataset.key=n,s.type="button",document.createElement("span"));return r.className="icon-bg icon"+e,s.append(r),s}function gi(e,t,n,r,s,...i){r={command:()=>!0,visible:r,active:s};return{key:n,display:{svg:e,label:t},children:i,richText:r,commonmark:r}}const ki=()=>!1;class bi{constructor(e,t,n){this.view=t,this.editorType=n,this.dom=document.createElement("div"),this.dom.className="d-flex g16 fl-grow1 ai-center js-editor-menu",this.blocks=e.filter(e=>!!e).sort((e,t)=>e.priority-t.priority).map(e=>{var t=this.standardizeMenuItems(e.entries),n=this.makeBlockContainer(e);for(const e of t)n.appendChild(e.display);return this.dom.appendChild(n),Object.assign(Object.assign({},e),{entries:t,dom:n})}),this.update(t,null);const r=[].concat(...this.blocks.map(e=>e.entries).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e).map(e=>{var t;return"children"in e&&null!=(t=e.children)&&t.length?[e,...e.children]:e}));this.dom.addEventListener("click",e=>{var n=e.target.closest(".js-editor-btn");if(n&&!n.classList.contains(bi.disabledClass)){const s=n.dataset.key;e.preventDefault(),t.focus();n=r.find(e=>e.key===s),e=this.command(n);e.command&&e.command(t.state,t.dispatch.bind(t),t)}}),this.readonly=!t.editable}update(e,t){if(g(t,e.state)||this.readonly===e.editable){this.readonly=!e.editable,this.dom.classList.toggle("pe-none",this.readonly);var n=this.readonly,r=this.view.hasFocus();for(const e of this.blocks){const t=!e.visible||e.visible(this.view.state);if(e.visible&&e.dom.classList.toggle(bi.invisibleClass,!t),t)for(const t of e.entries)this.checkAndUpdateMenuCommandState(t,n,r)}}}destroy(){this.dom.remove()}checkAndUpdateMenuCommandState(e,t,n){var r;let s=e.display;if(!s.classList.contains("js-editor-btn")){const e=s.querySelector(".js-editor-btn");s=null!=e?e:s}var i=this.command(e),o=!i.visible||i.visible(this.view.state),l=!(!n||!i.active)&&i.active(this.view.state),i=!t&&i.command(this.view.state,void 0,this.view);if(s.classList.remove(bi.disabledClass),s.classList.remove(bi.activeClass),s.classList.remove(bi.invisibleClass),s.dataset.key=e.key,o?l?s.classList.add(bi.activeClass):i||s.classList.add(bi.disabledClass):s.classList.add(bi.invisibleClass),"children"in e&&null!=(r=e.children)&&r.length)for(const r of e.children)this.checkAndUpdateMenuCommandState(r,t,n)}makeBlockContainer(e){var t,r=document.createElement("div");return r.className=`s-editor-menu-block d-flex g2 ${null!=(t=null==(t=e.classes)?void 0:t.join(" "))?t:""} js-block-`+e.name,r}standardizeMenuItems(e){var t,n=[];if(null==e||!e.length)return[];for(const r of e)if(null!=r&&r.key){let e=Object.assign(Object.assign({},r),{commonmark:this.expandCommand(r.commonmark),richText:this.expandCommand(r.richText),display:null,children:null});"children"in r&&null!=(t=r.children)&&t.length?(e.children=this.standardizeMenuItems(r.children),e=this.buildMenuDropdown(e,r.display)):"svg"in r.display?e.display=mi(r.display.svg,r.display.label,e.key,[]):e.display=r.display,n.push(e)}return n}command(e){return this.editorType===S.RichText?null==e?void 0:e.richText:null==e?void 0:e.commonmark}buildMenuDropdown(e,t){var n=x(),r=e.key+"-popover-"+n,n=e.key+"-btn-"+n,t=mi(t.svg,t.label,e.key),o=(t.classList.add("s-btn","s-btn__dropdown"),t.setAttribute("aria-controls",r),t.setAttribute("data-action","s-popover#toggle"),t.setAttribute("data-controller","s-tooltip"),t.id=n,t.dataset.key=e.key,document.createElement("div")),r=(o.className="s-popover wmn-initial w-auto px0 pt0 pb8",o.id=r,o.setAttribute("role","menu"),document.createElement("div")),r=(r.className="s-popover--arrow",o.appendChild(r),document.createElement("div")),r=(r.className="d-flex fd-column",r.append(...e.children.map(e=>e.display)),o.appendChild(r),document.createElement("div")),n=(r.dataset.controller="s-popover",r.setAttribute("data-s-popover-toggle-class","is-selected"),r.setAttribute("data-s-popover-placement","bottom"),r.setAttribute("data-s-popover-reference-selector","#"+n),r.appendChild(t),r.appendChild(o),Object.assign({},this.command(e)));return{key:e.key,display:r,children:e.children,richText:n,commonmark:n}}expandCommand(e){return e?"command"in e?e:{command:e}:{command:ki,visible:null,active:null}}}function yi(e,t,n){return new jt({view(r){var s=new bi(e,r,n),i=(t=t||function(e){return e.dom.parentNode})(r);return i.contains(r.dom)?i.insertBefore(s.dom,r.dom):i.insertBefore(s.dom,i.firstChild),s}})}bi.disabledClass="is-disabled",bi.activeClass="is-selected",bi.invisibleClass="d-none";class vi extends Ut{constructor(e){super(e)}get(e){return super.get(e)}setMeta(e,t){return e.setMeta(this,t)}}class wi extends jt{constructor(e){super(e)}get transactionKey(){return this.spec.key}getMeta(e){return e.getMeta(this.transactionKey)}}class xi{constructor(e,t,n){this.callback=n,this.transactionKey=t,this.attachCallback(e,null)}update(e,t){e.state.doc.eq(t.doc)||this.attachCallback(e,t)}destroy(){}attachCallback(e,t){const n=this.inProgressPromise=Math.random();this.callback(e,t).then(t=>{n===this.inProgressPromise&&(this.inProgressPromise=null,this.transactionKey.dispatchCallbackData(e,t))}).catch(()=>{this.inProgressPromise=null})}}class Ci extends wi{constructor(e){e.view=t=>new xi(t,e.key,e.asyncCallback),super(e)}getMeta(e){e=e.getMeta(this.transactionKey);return null==e?void 0:e.state}getCallbackData(e){e=e.getMeta(this.transactionKey);return null==e?void 0:e.callbackData}}class _i{constructor(e,t,n){if(this.renderTimeoutId=null,this.container=t,this.isShown=n.enabled&&n.shownByDefault,this.dom=document.createElement("div"),this.dom.classList.add("s-prose","py16","js-md-preview"),this.container.appendChild(this.dom),this.renderer=null==n?void 0:n.renderer,!this.renderer)throw"CommonmarkOptions.preview.renderer is required when CommonmarkOptions.preview.enabled is true";this.renderDelayMs=null!=(t=null==n?void 0:n.renderDelayMs)?t:100,this.updatePreview(e.state.doc.textContent)}update(e,t){var n=Si.getState(e.state),n=(null==n?void 0:n.isShown)||!1;if(m(t,e.state)||this.isShown!==n){this.isShown=n,this.renderTimeoutId&&(window.clearTimeout(this.renderTimeoutId),this.renderTimeoutId=null);const s=e.state.doc.textContent;this.isShown&&this.renderDelayMs?this.renderTimeoutId=window.setTimeout(()=>{this.updatePreview(s),this.renderTimeoutId=null},this.renderDelayMs):this.updatePreview(s)}}destroy(){this.dom.remove()}updatePreview(e){var t;this.container.innerHTML="",this.isShown&&(this.dom.innerHTML="",this.container.appendChild(this.dom),null!=(t=this.renderer)&&t.call(this,e,this.dom).catch(e=>d("PreviewView.updatePreview","Uncaught exception in preview renderer",e)))}}const Si=new class extends vi{constructor(){super("preview")}togglePreviewVisibility(e,t){t=this.setMeta(e.state.tr,{isShown:t});e.dispatch(t)}previewIsVisible(e){var e=this.getState(e.state);return null!=(e=null==e?void 0:e.isShown)&&e}},Mi={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},spoiler:{content:"block+",group:"block",attrs:{revealed:{default:!1}},parseDOM:[{tag:"blockquote.spoiler",getAttrs:e=>({revealed:e.classList.contains("is-visible")})}],toDOM:e=>["blockquote",{class:"spoiler"+(e.attrs.revealed?" is-visible":""),"data-spoiler":a("nodes.spoiler_reveal_text")},0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""},detectedHighlightLanguage:{default:""},isEditingProcessor:{default:!1}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1===e.attrs.order?null:String(e.attrs.order),"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,group:"inline",draggable:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},referenceType:{default:""},referenceLabel:{default:""}},parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),height:e.getAttribute("height"),width:e.getAttribute("width")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},pre:{content:"block+",marks:"",group:"block",inline:!1,selectable:!0,toDOM:()=>["pre",0],parseDOM:[{tag:"pre"}]},html_block:{content:"text*",attrs:{content:{default:""}},marks:"_",group:"block",atom:!0,inline:!1,selectable:!0,defining:!0,isolating:!0,parseDOM:[{tag:"div.html_block"}],toDOM:e=>["div",{class:"html_block"},e.attrs.content]},html_inline:{content:"text*",attrs:{content:{default:""}},marks:"_",group:"inline",atom:!0,inline:!0,selectable:!0,defining:!0,isolating:!0,parseDOM:[{tag:"span.html_inline"}],toDOM:e=>["span",{class:"html_inline"},e.attrs.content]},html_block_container:{content:"block*",attrs:{contentOpen:{default:""},contentClose:{default:""}},marks:"_",group:"block",inline:!1,selectable:!0,defining:!0,isolating:!0},softbreak:{content:"inline+",attrs:{},marks:"_",inline:!0,group:"inline",parseDOM:[{tag:"span[softbreak]",getAttrs:e=>({content:e.innerHTML})}],toDOM:()=>["span",{softbreak:""},0]},table:{content:"table_head table_body*",isolating:!0,group:"block",selectable:!1,parseDOM:[{tag:"table"}],toDOM:()=>["div",{class:"s-table-container"},["table",{class:"s-table"},0]]},table_head:{content:"table_row",isolating:!0,group:"table_block",selectable:!1,parseDOM:[{tag:"thead"}],toDOM:()=>["thead",0]},table_body:{content:"table_row+",isolating:!0,group:"table_block",selectable:!1,parseDOM:[{tag:"tbody"}],toDOM:()=>["tbody",0]},table_row:{content:"(table_cell | table_header)+",isolating:!0,group:"table_block",selectable:!1,parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:"inline*",isolating:!0,group:"table_block",selectable:!1,attrs:{style:{default:null}},parseDOM:[{tag:"td",getAttrs(e){e=e.style.textAlign;return e?{style:"text-align: "+e}:null}}],toDOM:e=>["td",e.attrs,0]},table_header:{content:"inline*",isolating:!0,group:"table_block",selectable:!1,attrs:{style:{default:null}},parseDOM:[{tag:"th",getAttrs(e){e=e.style.textAlign;return e?{style:"text-align: "+e}:null}}],toDOM:e=>["th",e.attrs,0]},tagLink:{content:"text*",marks:"",atom:!0,inline:!0,group:"inline",attrs:{tagName:{default:null},tagType:{default:"tag"}}}};var Fi,Ai={em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e&&null}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{inclusive:!1,attrs:{href:{},title:{default:null},referenceType:{default:""},referenceLabel:{default:""}},parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",{href:e.attrs.href,title:e.attrs.title}]},code:{exitable:!0,inclusive:!0,parseDOM:[{tag:"code"}],toDOM:()=>["code"]},strike:Ei({},"del","s","strike"),kbd:Ei({exitable:!0,inclusive:!0},"kbd"),sup:Ei({},"sup"),sub:Ei({},"sub")};Object.values(Ai).forEach(e=>{var t=e.attrs||{};t.markup={default:""},e.attrs=t}),Object.entries(Mi).forEach(([e,t])=>{"text"!==e&&((e=t.attrs||{}).markup={default:""},t.attrs=e)});const Ti={nodes:Mi,marks:Ai};function Ei(e,...t){return Object.assign(Object.assign({},e),{toDOM:()=>[t[0],0],parseDOM:t.map(e=>({tag:e}))})}const Oi=new Se({nodes:{doc:Ti.nodes.doc,text:Ti.nodes.text,paragraph:Ti.nodes.paragraph,code_block:Ti.nodes.code_block}});function Di(e){return e.types.includes("text/html")?(new globalThis.DOMParser).parseFromString(e.getData("text/html"),"text/html"):null}function Ni(e,t){let n,r=null;return t||(r=Di(e))&&(t=Ae.fromSchema(Oi).parse(r)),(n=t&&1===t.content.childCount&&"code_block"===t.content.child(0).type.name?t.content.child(0).textContent:function(e,t){var n=null==t?void 0:t.querySelector("code");return t&&n?t.body.textContent.trim()!==n.textContent?null:n.textContent:(t=e.getData("text/plain"))&&(e.getData("vscode-editor-data")||/^([ ]{2,}|\t)/m.test(t))?t:null}(e,r=null==r?Di(e):r))||null}const Ii=new jt({props:{handlePaste(e,t,n){var r=e.state.schema,s=r.nodes.code_block;return e.state.selection.$from.node().type!==s&&(!!(t=Ni(t.clipboardData,n))&&(n=s.createChecked({},r.text(t)),e.dispatch(e.state.tr.replaceSelectionWith(n)),!0))}}}),Li=new jt({props:{handlePaste(e,t){var r,t=Ni(t.clipboardData,null);return!!t&&(r=e.state.selection["$from"],t=(1===r.pos?"":"\n")+("```\n"+t+"\n```\n"),e.dispatch(e.state.tr.insertText(t)),!0)}}}),zi=new class extends vi{constructor(){super("interface-manager")}showInterfaceTr(e,t,n){n&&"shouldShow"in n&&delete n.shouldShow;var s,n=Object.assign(Object.assign({},t.getState(e)),n);return!this.checkIfValid(n,!0)||(s=this.hideCurrentInterfaceTr(e)||e.tr,this.dispatchCancelableEvent(e,t.name+"-show",n))?null:(s=t.setMeta(s,Object.assign(Object.assign({},n),{shouldShow:!0})),{containerGetter:n,dom:e}=this.getState(e),this.setMeta(s,{dom:e,currentlyShown:t,containerGetter:n}))}hideInterfaceTr(e,t,n){n&&"shouldShow"in n&&delete n.shouldShow;var s,n=Object.assign(Object.assign({},t.getState(e)),n);return!this.checkIfValid(n,!1)||this.dispatchCancelableEvent(e,t.name+"-hide",n)?null:(s=e.tr,s=t.setMeta(s,Object.assign(Object.assign({},n),{shouldShow:!1})),{containerGetter:t,dom:n}=this.getState(e),this.setMeta(s,{dom:n,currentlyShown:null,containerGetter:t}))}hideCurrentInterfaceTr(e){var t=this.getState(e)["currentlyShown"];return t?this.hideInterfaceTr(e,t,{shouldShow:!1}):null}checkIfValid(e,t){return t?!("shouldShow"in e&&e.shouldShow):e.shouldShow}dispatchCancelableEvent(e,t,n){return!C(this.getState(e).dom,t,n)}};class Pi extends vi{constructor(e){super(e),this.name=e}getContainer(e){return zi.getState(e.state).containerGetter(e)}showInterfaceTr(e,t){return zi.showInterfaceTr(e,this,t)}hideInterfaceTr(e,t){return zi.hideInterfaceTr(e,this,t)}}function Ri(e){return e=e||function(e){return e.dom.parentElement},new wi({key:zi,state:{init:()=>({dom:null,currentlyShown:null,containerGetter:e}),apply(e,t){return Object.assign(Object.assign({},t),this.getMeta(e))}},props:{handleKeyDown:(e,t)=>{if("Escape"===t.key){const t=zi.hideCurrentInterfaceTr(e.state);t&&e.dispatch(t)}return!1},handleClick(e){var t=zi.hideCurrentInterfaceTr(e.state);return t&&e.dispatch(t),!1}},view:t=>(t.dispatch(zi.setMeta(t.state.tr,{dom:t.dom,currentlyShown:null,containerGetter:e})),{})})}class Bi{constructor(e){this.key=e,this.isShown=!1}update(e){var t=this.key.getState(e.state)["shouldShow"];this.isShown&&!t?(this.isShown=!1,this.destroyInterface(this.key.getContainer(e))):!this.isShown&&t&&(this.isShown=!0,this.buildInterface(this.key.getContainer(e)))}tryShowInterfaceTr(e,t){return this.key.showInterfaceTr(e,t)}tryHideInterfaceTr(e,t){return this.key.hideInterfaceTr(e,t)}}function $i(e){return t=this,s=function*(){var t=new FormData,t=(t.append("file",e),yield fetch("/image/upload",{method:"POST",cache:"no-cache",body:t}));if(t.ok)return(yield t.json()).UploadedImage;throw Error(`Failed to upload image: ${t.status} - `+t.statusText)},new(r=(r=void 0,Promise))(function(e,i){function o(e){try{a(s.next(e))}catch(e){i(e)}}function l(e){try{a(s.throw(e))}catch(e){i(e)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,l)}a((s=s.apply(t,[])).next())});var t,r,s}!function(e){e[e.Ok=0]="Ok",e[e.FileTooLarge=1]="FileTooLarge",e[e.InvalidFileType=2]="InvalidFileType"}(Fi=Fi||{});class qi extends Bi{constructor(e,t,n,r){super(Ui),this.image=null;var o=x();this.isVisible=!1,this.uploadOptions=t,this.validateLink=n,this.addTransactionDispatcher=r,this.uploadContainer=document.createElement("div"),this.uploadContainer.className="mt6 bt bb bc-black-400 js-image-uploader",this.uploadField=document.createElement("input"),this.uploadField.type="file",this.uploadField.className="js-image-uploader-input v-visible-sr",this.uploadField.accept="image/*",this.uploadField.multiple=!1,this.uploadField.id="fileUpload"+o,this.uploadContainer.innerHTML=y`
            <div class="fs-body2 p12 pb0 js-cta-container">
                <label for="${this.uploadField.id}" class="d-inline-flex f:outline-ring s-link js-browse-button" role="button" aria-controls="image-preview-${o}">
                    Browse
                </label>, drag & drop<span class="js-external-url-trigger-container d-none">, <button type="button" class="s-btn s-btn__link js-external-url-trigger">enter a link</button></span>, or paste an image <span class="fc-light fs-caption">Max size 2 MiB</span>
            </div>

            <div class="js-external-url-input-container p12 d-none">
                <div class="d-flex fd-row ai-center sm:fd-column sm:ai-start">
                    <label class="d-block s-label ws-nowrap mr4" for="external-url-input-${o}">
                        External url
                    </label>
                    <input id="external-url-input-${o}" type="text" class="s-input js-external-url-input" placeholder="https://example.com/img.png" />
                </div>
            </div>

            <div id="image-preview-${o}" class="js-image-preview wmx100 pt12 px12 d-none"></div>
            <aside class="s-notice s-notice__warning d-none m8 js-validation-message" role="status" aria-hidden="true"></aside>

            <div class="d-flex jc-space-between ai-center p12 sm:fd-column sm:ai-start sm:g16">
                <div>
                    <button class="s-btn s-btn__primary ws-nowrap mr8 js-add-image" type="button" disabled>Add image</button>
                    <button class="s-btn ws-nowrap js-cancel-button" type="button">Cancel</button>
                </div>
                <div class="d-flex fd-column fs-caption fc-black-300 s-anchors s-anchors__muted">
                    <div class="js-branding-html"></div>
                    <div class="js-content-policy-html"></div>
                </div>
            </div>
        `,this.uploadContainer.querySelector(".js-browse-button").appendChild(this.uploadField),this.uploadContainer.querySelector(".js-branding-html").innerHTML=null==(t=this.uploadOptions)?void 0:t.brandingHtml,this.uploadContainer.querySelector(".js-content-policy-html").innerHTML=null==(n=this.uploadOptions)?void 0:n.contentPolicyHtml,this.uploadField.addEventListener("change",()=>{this.handleFileSelection(e)}),this.uploadContainer.addEventListener("dragenter",this.highlightDropArea.bind(this)),this.uploadContainer.addEventListener("dragover",this.highlightDropArea.bind(this)),this.uploadContainer.addEventListener("drop",t=>{this.unhighlightDropArea(t),this.handleDrop(t,e)}),this.uploadContainer.addEventListener("paste",t=>{this.handlePaste(t,e)}),this.uploadContainer.addEventListener("dragleave",this.unhighlightDropArea.bind(this)),this.uploadContainer.querySelector(".js-cancel-button").addEventListener("click",()=>{var t=this.tryHideInterfaceTr(e.state);t&&e.dispatch(t)}),this.uploadContainer.querySelector(".js-add-image").addEventListener("click",t=>this.handleUploadTrigger(t,this.image,e)),this.uploadOptions.allowExternalUrls&&(this.uploadContainer.querySelector(".js-external-url-trigger-container").classList.remove("d-none"),this.uploadContainer.querySelector(".js-external-url-trigger").addEventListener("click",()=>{this.toggleExternalUrlInput(!0)}),this.uploadContainer.querySelector(".js-external-url-input").addEventListener("input",e=>{this.validateExternalUrl(e.target.value)}))}highlightDropArea(e){this.uploadContainer.classList.add("bs-ring"),this.uploadContainer.classList.add("bc-blue-300"),e.preventDefault(),e.stopPropagation()}unhighlightDropArea(e){this.uploadContainer.classList.remove("bs-ring"),this.uploadContainer.classList.remove("bc-blue-300"),e.preventDefault(),e.stopPropagation()}handleFileSelection(e){this.resetImagePreview();var t=this.uploadField.files;e.state.selection.$from.parent.inlineContent&&t.length&&this.showImagePreview(t[0])}handleDrop(e,t){this.resetImagePreview();e=e.dataTransfer.files;t.state.selection.$from.parent.inlineContent&&e.length&&this.showImagePreview(e[0])}handlePaste(e,t){this.resetImagePreview();e=e.clipboardData.files;t.state.selection.$from.parent.inlineContent&&e.length&&this.showImagePreview(e[0])}validateImage(e){return-1===["image/jpeg","image/png","image/gif"].indexOf(e.type)?Fi.InvalidFileType:2097152<=e.size?Fi.FileTooLarge:Fi.Ok}showValidationError(e,t="warning"){this.uploadField.value=null;var n=this.uploadContainer.querySelector(".js-validation-message");"warning"===t?(n.classList.remove("s-notice__danger"),n.classList.add("s-notice__warning")):(n.classList.remove("s-notice__warning"),n.classList.add("s-notice__danger")),n.classList.remove("d-none"),n.textContent=e}hideValidationError(){var e=this.uploadContainer.querySelector(".js-validation-message");e.classList.add("d-none"),e.classList.remove("s-notice__warning"),e.classList.remove("s-notice__danger"),e.innerHTML=""}showImagePreview(e){return new Promise((t,n)=>this.showImagePreviewAsync(e,t,n))}showImagePreviewAsync(e,t,n){const r=this.uploadContainer.querySelector(".js-image-preview"),s=this.uploadContainer.querySelector(".js-add-image");switch(this.hideValidationError(),this.validateImage(e)){case Fi.FileTooLarge:return this.showValidationError(a("image_upload.upload_error_file_too_big")),void n("file too large");case Fi.InvalidFileType:return this.showValidationError(a("image_upload.upload_error_unsupported_format")),void n("invalid filetype")}this.resetImagePreview();const i=new FileReader;i.addEventListener("load",()=>{var n=new Image;n.className="hmx1 w-auto",n.title=e.name,n.src=i.result,n.alt=a("image_upload.uploaded_image_preview_alt"),r.appendChild(n),r.classList.remove("d-none"),this.image=e,s.disabled=!1,t()},!1),i.readAsDataURL(e)}toggleExternalUrlInput(e){var t=this.uploadContainer.querySelector(".js-cta-container"),n=this.uploadContainer.querySelector(".js-external-url-input-container");t.classList.toggle("d-none",e),n.classList.toggle("d-none",!e),n.querySelector(".js-external-url-input").value=""}validateExternalUrl(e){this.resetImagePreview();var t=this.uploadContainer.querySelector(".js-add-image");this.validateLink(e)?(this.hideValidationError(),t.disabled=!1):(this.showValidationError(a("image_upload.external_url_validation_error"),"danger"),t.disabled=!0)}resetImagePreview(){this.uploadContainer.querySelector(".js-image-preview").innerHTML="",this.image=null,this.uploadContainer.querySelector(".js-add-image").disabled=!0}resetUploader(){this.resetImagePreview(),this.toggleExternalUrlInput(!1),this.hideValidationError(),this.uploadField.value=null}handleUploadTrigger(e,t,n){var r=this.uploadContainer.querySelector(".js-external-url-input").value,s=r&&this.validateLink(r);(t||s)&&(this.startImageUpload(n,t||r),this.resetUploader(),(s=this.tryHideInterfaceTr(n.state))&&n.dispatch(s),n.focus())}startImageUpload(e,t){var n;const r={},s=e.state.tr;if(s.selection.empty||s.deleteSelection(),this.key.setMeta(s,{add:{id:r,pos:s.selection.from},file:null,shouldShow:!1}),e.dispatch(s),null!=(n=this.uploadOptions)&&n.handler)return this.uploadOptions.handler(t).then(t=>{var n=this.key.getState(e.state).decorations.find(null,null,e=>e.id==r),n=n.length?n[0].from:null;null!==n&&(t=this.addTransactionDispatcher(e.state,t,n),t=this.key.setMeta(t,{remove:{id:r},shouldShow:!1,file:null}),e.dispatch(t))},()=>{var t=this.tryShowInterfaceTr(e.state)||e.state.tr,t=this.key.setMeta(t,{remove:{id:r},shouldShow:!1,file:null});e.dispatch(t),this.showValidationError(a("image_upload.upload_error_generic"),"error")});console.error("No upload handler registered. Ensure you set a proper handler on the editor's options.imageUploadHandler")}update(e){var t=this.key.getState(e.state);this.image=(null==t?void 0:t.file)||this.image,super.update(e)}destroy(){this.uploadField.remove(),this.uploadContainer.remove(),this.image=null}buildInterface(e){this.image&&this.showImagePreview(this.image),e.appendChild(this.uploadContainer),this.uploadContainer.querySelector(".js-image-uploader-input").focus()}destroyInterface(e){this.resetUploader(),this.uploadContainer.classList.remove("outline-ring"),e.removeChild(this.uploadContainer)}}function ji(e,t){t=Ui.showInterfaceTr(e.state,{file:t||null});t&&e.dispatch(t)}function Vi(e){return Ui.getState(e)}function Hi(e,t,n){return null!=e&&e.handler?new wi({key:Ui,state:{init:()=>({decorations:Fs.empty,file:null,shouldShow:!1}),apply(e,t){let n=t.decorations||Fs.empty;n=n.map(e.mapping,e.doc);const r=this.getMeta(e),s={file:t.file,decorations:n,shouldShow:t.shouldShow};if(r)if(s.file="file"in r?r.file:null,"shouldShow"in r&&(s.shouldShow=r.shouldShow),r.add){const t=Ps.widget(r.add.pos,function(){var e=document.createElement("div");return e.className="ws-normal d-block m8",e.innerHTML='\n<div class="py6 px6 bg-black-050 bar-sm gsx gs8 d-inline-flex ai-center fw-normal fs-body1">\n    <span class="s-spinner s-spinner__sm flex--item">\n        <span class="v-visible-sr">Loading</span>\n    </span>\n    <span class="flex--item">Uploading image</span>\n</div>\n',e}(),{id:r.add.id});s.decorations=n.add(e.doc,[t])}else r.remove&&(s.decorations=n.remove(n.find(null,null,e=>e.id==r.remove.id)));return s}},props:{decorations(e){return this.getState(e).decorations},handleDrop(e,t){t=t.dataTransfer.files;return!(!e.state.selection.$from.parent.inlineContent||!t.length||(ji(e,t[0]),0))},handlePaste(e,t){t=t.clipboardData.files;return!(!e.state.selection.$from.parent.inlineContent||!t.length||(ji(e,t[0]),0))}},view:r=>new qi(r,e,t,n)}):new jt({})}const Ui=new Pi("image-uploader");function Wi(e,t,n){return Hi(e,t,(t,r,s)=>{var i=a("image_upload.default_image_alt_text"),o=e.wrapImagesInLinks||e.embedImagesAsLinks?[n.marks.link.create({href:r})]:null,r=e.embedImagesAsLinks?n.text(i,o):n.nodes.image.create({src:r,alt:i},null,o);return t.tr.replaceWith(s,s,r)})}function Ji(e,t){var n;return e.textContent||1!==e.childCount||0!==e.firstChild.childCount?Fs.empty:(n=e.resolve(1),Fs.create(e,[Ps.node(n.before(),n.after(),{"data-placeholder":t})]))}function Gi(e){return null!=e&&e.trim()?new jt({key:new Ut("placeholder"),state:{init:(t,n)=>Ji(n.doc,e),apply:(t,n)=>t.docChanged?Ji(t.doc,e):n.map(t.mapping,t.doc)},props:{decorations(e){return this.getState(e)}},view:t=>(t.dom.setAttribute("aria-placeholder",e),{destroy(){t.dom.removeAttribute("aria-placeholder")}})}):new jt({})}const Ki=new Ut(Qi.name);function Zi(e){return!Ki.getState(e)}function Xi(e,t,n){if(Ki.getState(t)!==e){let r=t.tr.setMeta(Ki,e);r=r.setMeta("addToHistory",!1),n&&n(r)}}function Qi(){return new jt({key:Ki,state:{init:()=>!1,apply(e,t){e=e.getMeta(Ki);return void 0===e?t:e}}})}const Yi=new jt({props:{handleDOMEvents:{mousedown(e,t){var{$from:e,$to:r}=e.state.selection,t=3===t.detail,e=e.sameParent(r);return t&&e}}}});class eo extends Ae{parseCode(e,t){var n=document.createElement("div");return n.innerHTML=y`<pre>${e}</pre>`,super.parse(n,t)}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new eo(e,eo.schemaRules(e)))}static toString(e){return e.textBetween(0,e.content.size,"\n\n")}}for(var ao,to={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},no={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ai="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),so=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),io="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),oo=so||Ai&&+Ai[1]<57,lo=0;lo<10;lo++)to[48+lo]=to[96+lo]=String(lo);for(lo=1;lo<=24;lo++)to[lo+111]="F"+lo;for(lo=65;lo<=90;lo++)to[lo]=String.fromCharCode(lo+32),no[lo]=String.fromCharCode(lo);for(ao in to)no.hasOwnProperty(ao)||(no[ao]=to[ao]);const co="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function uo(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),e=!1!==n&&t.shiftKey?"Shift-"+e:e}function po(e){return new jt({props:{handleKeyDown:function(e){let t=function(e){var n,t=Object.create(null);for(n in e)t[function(e){let t,n,r,s,i=e.split(/-(?!$)/),o=i[i.length-1];"Space"==o&&(o=" ");for(let e=0;e<i.length-1;e++){let o=i[e];if(/^(cmd|meta|m)$/i.test(o))s=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else{if(!/^mod$/i.test(o))throw new Error("Unrecognized modifier name: "+o);co?s=!0:n=!0}}return t&&(o="Alt-"+o),n&&(o="Ctrl-"+o),s&&(o="Meta-"+o),o=r?"Shift-"+o:o}(n)]=e[n];return t}(e);return function(e,n){let r,s=function(){var t=!(oo&&(n.ctrlKey||n.altKey||n.metaKey)||io&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?no:to)[n.keyCode]||n.key||"Unidentified";return t="Down"==(t="Right"==(t="Up"==(t="Left"==(t="Del"==(t="Esc"==t?"Escape":t)?"Delete":t)?"ArrowLeft":t)?"ArrowUp":t)?"ArrowRight":t)?"ArrowDown":t}(),i=1==s.length&&" "!=s,o=t[uo(s,n,!i)];if(o&&o(e.state,e.dispatch,e))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||127<s.charCodeAt(0))&&(r=to[n.keyCode])&&r!=s){let s=t[uo(r,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}else if(i&&n.shiftKey){let r=t[uo(s,n,!0)];if(r&&r(e.state,e.dispatch,e))return!0}return!1}}(e)}})}const mo=e=>function(e,t,n){return!!function(e,t,n){if(!t.selection.empty){let r=t.selection["from"];var s=t.doc.cut(r,t.selection.to).textContent;if(s.includes("\n")){const i=" ";let o=t.tr;const l=s.split("\n"),a=l.some(t=>!t.startsWith(e+i));let c=r;if(l.forEach(t=>{var r=vo(t),r=a&&r===e+i?t:a&&r.length?e+i+t.slice(r.length):a?e+i+t:t.slice(r.length),t=c+t.length;o=r.length?o.replaceRangeWith(c,t,ko(o.doc.type.schema,r)):o.deleteRange(c,t),c+=r.length+"\n".length}),1<r&&"\n"!==t.doc.textBetween(r-1,r)&&(o=o.insertText("\n",r,r),r+="\n".length,c+="\n".length),n){const e=c-"\n".length;o.setSelection(At.create(t.apply(o).doc,r,e)),o.scrollIntoView(),n(o)}return 1}}}(e,t,n)||function(e,t,n){var r=t.selection["from"],r=t.doc.cut(0,r).textContent.lastIndexOf("\n"),r=-1===r?1:r+1+"\n".length,o=vo(t.doc.cut(r).textContent);let l=t.tr,a=(o.length&&(l=l.delete(r,r+o.length)),!1);return(a=o===e+" "?!0:a)||(l=l.insertText(e+" ",r)),n&&n(l=l.scrollIntoView()),!0}(e,t,n)}.bind(null,e),go=(e,t)=>function(e,t,n,r){return!!function(e,t,n,r){if(!n.selection.empty){t=t||e;const{from:s,to:i}=n.selection,o=n.doc.textBetween(s,i),l=o.slice(0,e.length),a=o.slice(-1*t.length);if(l===e&&a===t){if(r){const l=n.tr,a=o.slice(e.length,-1*t.length);l.replaceSelectionWith(ko(l.doc.type.schema,a)),l.setSelection(At.create(n.apply(l).doc,s,i-e.length-t.length)),r(l)}return 1}}}(e,t,n,r)||function(e,t,n,r){var s="your text",{from:i,to:o}=n.selection,l=n.tr.insertText(t=t||e,o);if(n.selection.empty&&l.insertText(s,o),l.insertText(e,i).scrollIntoView(),r){let a=i,c=o+e.length+t.length;n.selection.empty&&(a=i+e.length,c=a+s.length),l.setSelection(At.create(n.apply(l).doc,a,c)),r(l)}return!0}(e,t,n,r)}.bind(null,e,t),ko=(e,t)=>e.text(t);function vo(e){var t;let r=null==(t=/^(\d+)(?:\.|\))\s/.exec(e))?void 0:t[0];return(r=r||(null==(t=/^[^a-zA-Z0-9]+\s{1}(?=[a-zA-Z0-9_*[!]|$)+/.exec(e))?void 0:t[0]))||""}function wo(e,t,n){if(!t.selection.empty){var{from:r,to:s}=t.selection,i=t.doc.textBetween(r,s),o=e.length+"\n".length,l=i.slice(0,o),i=i.slice(-1*o);if(l===e+"\n"&&i==="\n"+e){let c=t.tr;return c=(c=c.delete(s-o,s)).delete(r,r+o),n&&(c.setSelection(At.create(t.apply(c).doc,r,s-2*o)),c.scrollIntoView(),n(c)),1}}}function xo(e,t,n,r,s){let i=r.tr;var o=r.selection["from"];return i=r.selection.empty?i.insertText(e,o):i.replaceSelectionWith(ko(i.doc.type.schema,e)),s&&s(i=(i=void 0!==t&&void 0!==n?i.setSelection(At.create(r.apply(i).doc,o+t,o+n)):i.setSelection(At.create(r.apply(i).doc,o))).scrollIntoView()),!0}function Co(e,t){var r,s,n="https://www.stackoverflow.com/";return e.selection.empty?xo("[text]("+n+")",1,5,e,t):({from:r,to:s}=e.selection,xo(`[${r=e.doc.textBetween(r,s)}](${n})`,s=3+r.length,s+n.length,e,t))}function _o(e,t){return(n,r)=>{var s=t?"[meta-tag:":"[tag:";if(n.selection.empty){const e="tag-name";return xo(s+e+"]",s.length,s.length+e.length,n,r)}var{from:i,to:o}=n.selection,i=n.doc.textBetween(i,o);return!!e(i.trim(),t)&&xo(s+i+"]",o=s.length,o+i.length,n,r)}}function So(e,t){if(e.selection.empty)return xo("\n| Column A | Column B |\n| -------- | -------- |\n| Cell 1   | Cell 2   |\n| Cell 3   | Cell 4   |\n",1,1,e,t)}function Mo(e,t){var n=e.doc.cut(0,e.selection.from).textContent,r=n.lastIndexOf("\n"),s=n.slice(r+1);let i,o=null;if(-1<r){const e=n.lastIndexOf("\n",r-1);o=n.slice(e+1,r)}return i=n&&(o||s)?s?"\n\n":"\n":"",xo.bind(null,i+"---\n",4,4)(e,t)}function Ao(e,t){if(t){let n=0,r=0;e.doc.nodesBetween(0,e.doc.content.size,(e,t)=>"text"!==e.type.name||(n=t,r=e.nodeSize,!1)),t(e.tr.setSelection(At.create(e.doc,n,n+r)))}return!0}function Do(){return!1}const To=go("**",null),Eo=go("*",null),Oo=go("`",null),No=mo("#"),Io=go("~~",null),Lo=mo(">"),zo=mo("1."),Po=mo("-"),Ro=function(e,t,n){return!!wo(e,t,n)||function(e,t,n){if(t.selection.empty){const r="type here",s=2;return xo(`
${e}
${r}
${e}
`,e.length+2,e.length+r.length+2,t,n)}let{from:r,to:s}=t.selection;if(!wo(e,t,n)){let i=t.tr;0<r&&"\n"!==t.doc.textBetween(r-1,r)&&(i=i.insertText("\n",r,r),r+=1,s+=1),s+1<t.doc.content.size&&"\n"!==t.doc.textBetween(s,s+1)&&(i=i.insertText("\n",s+1,s+1),s+=1),i.insertText("\n"+e,s),i.insertText(e+"\n",r),n&&(e="\n".length+e.length,i.setSelection(At.create(t.apply(i).doc,r,s+2*e)),i.scrollIntoView(),n(i))}return!0}(e,t,n)}.bind(null,"```"),Bo=mo(">!"),Fo=go("<sup>","</sup>"),$o=go("<sub>","</sub>"),qo=go("<kbd>","</kbd>");function jo(e,t,n){return!(!Vi(n.state)||t&&(ji(n),0))}so=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Ho(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return 1;if(n&&1!=r.childCount)return}}function Uo(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;0<=t;t--){if(0<e.index(t))return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Wo(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;0<=t;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Jo(e){for(let t=0;t<e.edgeCount;t++){var n=e.edge(t)["type"];if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Go=(e,t)=>{var{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;var r=n.node(-1),i=n.indexAfter(-1),o=Jo(r.contentMatchAt(i));if(!o||!r.canReplaceWith(i,i,o))return!1;if(t){let r=n.after(),s=e.tr.replaceWith(r,r,o.createAndFill());s.setSelection(Ct.near(s.doc.resolve(r),1)),t(s.scrollIntoView())}return!0};function Ko(e,t,n){let r,s,i=t.nodeBefore,o=t.nodeAfter;if(!i.type.spec.isolating&&!o.type.spec.isolating){if(function(e,t,n){var r=t.nodeBefore,s=t.nodeAfter,i=t.index();return r&&s&&r.type.compatibleContent(s.type)&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),1):t.parent.canReplace(i,i+1)&&(s.isTextblock||lt(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),1))}(e,t,n))return 1;var l=t.parent.canReplace(t.index(),t.index()+1);if(l&&(r=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(r[0]||o.type).validEnd){if(n){let s=t.pos+o.nodeSize,l=R.empty;for(let e=r.length-1;0<=e;e--)l=R.from(r[e].create(null,l));l=R.from(i.copy(l));let a=e.tr.step(new et(t.pos-1,s,t.pos,s,new V(l,1,0),r.length,!0)),c=s+2*r.length;lt(a.doc,c)&&a.join(c),n(a.scrollIntoView())}return 1}var a=Ct.findFrom(t,1),a=a&&a.$from.blockRange(a.$to),h=a&&rt(a);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(a,h).scrollIntoView()),1;if(l&&Ho(o,"start",!0)&&Ho(i,"end")){let r=i,s=[];for(;s.push(r),!r.isTextblock;)r=r.lastChild;let l=o,a=1;for(;!l.isTextblock;l=l.firstChild)a++;if(r.canReplace(r.childCount,r.childCount,l.content)){if(n){let r=R.empty;for(let e=s.length-1;0<=e;e--)r=R.from(s[e].copy(r));n(e.tr.step(new et(t.pos-s.length,t.pos+o.nodeSize,t.pos+a,t.pos+o.nodeSize-a,new V(r,s.length,0),0,!0)).scrollIntoView())}return 1}}}}function Zo(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return!!s.node(i).isTextblock&&(n&&n(t.tr.setSelection(At.create(t.doc,e<0?s.start(i):s.end(i)))),!0)}}var Ai=Zo(-1),Qo=Zo(1);function Yo(e,t=null){return function(n,r){var{$from:s,$to:i}=n.selection,s=s.blockRange(i),i=s&&st(s,e,t);return!!i&&(r&&r(n.tr.wrap(s,i).scrollIntoView()),!0)}}function el(e,t=null){return function(n,r){let{from:s,to:i}=n.selection,o=!1;return n.doc.nodesBetween(s,i,(r,s)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{let t=n.doc.resolve(s),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}),!!o&&(r&&r(n.tr.setBlockType(s,i,e,t).scrollIntoView()),!0)}}function tl(e,t=null){return function(n,r){var{empty:s,$cursor:i,ranges:o}=n.selection;if(s&&!i||!function(e,t,n){for(let r=0;r<t.length;r++){let{$from:s,$to:i}=t[r],o=0==s.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(s.pos,i.pos,e=>{if(o)return!1;o=e.inlineContent&&e.type.allowsMarkType(n)}),o)return 1}}(n.doc,o,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let s=!1,i=n.tr;for(let t=0;!s&&t<o.length;t++){let{$from:r,$to:i}=o[t];s=n.doc.rangeHasMark(r.pos,i.pos,e)}for(let n=0;n<o.length;n++){let{$from:r,$to:l}=o[n];if(s)i.removeMark(r.pos,l.pos,e);else{let n=r.pos,s=l.pos,o=r.nodeAfter,a=l.nodeBefore,c=o&&o.isText?/^\s*/.exec(o.text)[0].length:0,h=a&&a.isText?/\s*$/.exec(a.text)[0].length:0;n+c<s&&(n+=c,s-=h),i.addMark(n,s,e.create(t))}}r(i.scrollIntoView())}return!0}}function nl(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}var vl,pa,rl=nl(so,(e,t,n)=>{var r=e.selection["$cursor"];if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;var s=Uo(r);if(!s){let n=r.blockRange(),s=n&&rt(n);return null!=s&&(t&&t(e.tr.lift(n,s).scrollIntoView()),!0)}var i=s.nodeBefore;if(!i.type.spec.isolating&&Ko(e,s,t))return!0;if(0==r.parent.content.size&&(Ho(i,"end")||Et.isSelectable(i))){let n=at(e.doc,r.before(),r.after(),V.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Ho(i,"end")?Ct.findFrom(r.doc.resolve(r.mapping.map(s.pos,-1)),-1):Et.create(r.doc,s.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||s.depth!=r.depth-1||(t&&t(e.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),0))},(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):0<r.parentOffset)return!1;i=Uo(r)}n=i&&i.nodeBefore;return!(!n||!Et.isSelectable(n)||(t&&t(e.tr.setSelection(Et.create(e.doc,i.pos-n.nodeSize)).scrollIntoView()),0))}),so=nl(so,(e,t,n)=>{var r=e.selection["$cursor"];if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var s=Wo(r);if(!s)return!1;var i=s.nodeAfter;if(Ko(e,s,t))return!0;if(0==r.parent.content.size&&(Ho(i,"start")||Et.isSelectable(i))){let n=at(e.doc,r.before(),r.after(),V.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Ho(i,"start")?Ct.findFrom(r.doc.resolve(r.mapping.map(s.pos)),1):Et.create(r.doc,r.mapping.map(s.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||s.depth!=r.depth-1||(t&&t(e.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),0))},(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=Wo(r)}n=i&&i.nodeAfter;return!(!n||!Et.isSelectable(n)||(t&&t(e.tr.setSelection(Et.create(e.doc,i.pos)).scrollIntoView()),0))}),il={Enter:nl((e,t)=>{var{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))},(e,t)=>{var n=e.selection,{$from:r,$to:s}=n;if(n instanceof Dt||r.parent.inlineContent||s.parent.inlineContent)return!1;var i=Jo(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,o=e.tr.insert(n,i.createAndFill());o.setSelection(At.create(o.doc,n+1)),t(o.scrollIntoView())}return!0},(e,t)=>{var n=e.selection["$cursor"];if(!n||n.parent.content.size)return!1;if(1<n.depth&&n.after()!=n.end(-1)){let r=n.before();if(ot(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var n=n.blockRange(),s=n&&rt(n);return null!=s&&(t&&t(e.tr.lift(n,s).scrollIntoView()),!0)},(e,t)=>{var{$from:n,$to:r}=e.selection;if(e.selection instanceof Et&&e.selection.node.isBlock)return!(!n.parentOffset||!ot(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){var r=r.parentOffset==r.parent.content.size,i=e.tr;(e.selection instanceof At||e.selection instanceof Dt)&&i.deleteSelection();let o=0==n.depth?null:Jo(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=r&&o?[{type:o}]:void 0,a=ot(i.doc,i.mapping.map(n.pos),1,l);if(l||a||!ot(i.doc,i.mapping.map(n.pos),1,o?[{type:o}]:void 0)||(o&&(l=[{type:o}]),a=!0),a&&(i.split(i.mapping.map(n.pos),1,l),!r&&!n.parentOffset&&n.parent.type!=o)){let e=i.mapping.map(n.before()),t=i.doc.resolve(e);o&&n.node(-1).canReplaceWith(t.index(),t.index()+1,o)&&i.setNodeMarkup(i.mapping.map(n.before()),o)}t(i.scrollIntoView())}return!0}),"Mod-Enter":Go,Backspace:rl,"Mod-Backspace":rl,"Shift-Backspace":rl,Delete:so,"Mod-Delete":so,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new Dt(e.doc))),!0)},ol={"Ctrl-h":il.Backspace,"Alt-Backspace":il["Mod-Backspace"],"Ctrl-d":il.Delete,"Ctrl-Alt-Backspace":il["Mod-Delete"],"Alt-Delete":il["Mod-Delete"],"Alt-d":il["Mod-Delete"],"Ctrl-a":Ai,"Ctrl-e":Qo};for(let e in il)ol[e]=il[e];const ll=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&"darwin"==os.platform())?ol:il;const cl=new Se({nodes:{doc:{content:"code_block+"},text:{group:"inline"},code_block:{content:"text*",group:"block",marks:"",code:!0,defining:!0,isolating:!0,selectable:!1,attrs:{params:{default:"markdown"}},parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",{class:"s-code-block markdown"},["code",0]]}},marks:{}}),hl=new jt({props:{clipboardSerializer:new Re({code_block:e=>e.textContent},{})}});let ul=0;class pl{constructor(e,t){this.from=e,this.to=t}}class fl{constructor(e={}){this.id=ul++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=gl.match(e)),t=>{t=e(t);return void 0===t?null:[this,t]}}}fl.closedBy=new fl({deserialize:e=>e.split(" ")}),fl.openedBy=new fl({deserialize:e=>e.split(" ")}),fl.group=new fl({deserialize:e=>e.split(" ")}),fl.contextHash=new fl({perNode:!0}),fl.lookAhead=new fl({perNode:!0}),fl.mounted=new fl({perNode:!0});const ml=Object.create(null);class gl{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){var t=e.props&&e.props.length?Object.create(null):ml,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new gl(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return 0<(1&this.flags)}get isSkipped(){return 0<(2&this.flags)}get isError(){return 0<(4&this.flags)}get isAnonymous(){return 0<(8&this.flags)}is(e){var t;return"string"==typeof e?this.name==e||!!(t=this.prop(fl.group))&&-1<t.indexOf(e):this.id==e}static match(e){let t=Object.create(null);for(var n in e)for(var r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(fl.group),r=-1;r<(n?n.length:0);r++){var s=t[r<0?e.name:n[r]];if(s)return s}}}}gl.none=new gl("",Object.create(null),0,8);class kl{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){var n,t=[];for(n of this.types){let r=null;for(let t of e){let e=t(n);e&&((r=r||Object.assign({},n.props))[e[0].id]=e[1])}t.push(r?new gl(n.name,r,n.id,n.flags):n)}return new kl(t)}}const bl=new WeakMap,yl=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(vl=vl||{});class wl{constructor(e,t,n,r,s){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[e,t]of s)this.props["number"==typeof e?e:e.id]=t}}toString(){var e=this.prop(fl.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){var n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Nl(this.topNode,e)}cursorAt(e,t=0,n){var r=bl.get(this)||this.topNode,r=new Nl(r);return r.moveTo(e,t),bl.set(this,r._tree),r}get topNode(){return new Al(this,0,0,null)}resolve(e,t=0){e=Ml(bl.get(this)||this.topNode,e,t,!1);return bl.set(this,e),e}resolveInner(e,t=0){e=Ml(yl.get(this)||this.topNode,e,t,!0);return yl.set(this,e),e}iterate(e){for(var{enter:t,leave:n,from:r=0,to:s=this.length}=e,i=this.cursor((e.mode||0)|vl.IncludeAnonymous);;){let e=!1;if(i.from<=s&&i.to>=r&&(i.type.isAnonymous||!1!==t(i))){if(i.firstChild())continue;e=!0}for(;e&&n&&!i.type.isAnonymous&&n(i),!i.nextSibling();){if(!i.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){var e=[];if(this.props)for(var t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Pl(gl.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new wl(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new wl(gl.none,e,t,n)))}static build(e){let{buffer:n,nodeSet:r,maxBufferLength:s=1024,reused:i=[],minRepeatType:o=r.types.length}=e,l=Array.isArray(n)?new xl(n,n.length):n,a=r.types,c=0,h=0;function d(e,t,n,m,g){for(var{id:k,start:b,end:y,size:v}=l,w=h;v<0;){if(l.next(),-1==v){let t=i[k];return n.push(t),m.push(b-e)}if(-3==v)return c=k;if(-4==v)return h=k;throw new RangeError("Unrecognized record size: "+v)}let x,C,_=a[k],S=b-e;if(y-b<=s&&(C=function(e,t){let n=l.fork(),r=0,i=0,a=0,c=n.end-s,h={size:0,start:0,skip:0};e:for(let s=n.pos-e;n.pos>s;){let e=n.size;if(n.id==t&&0<=e)h.size=r,h.start=i,h.skip=a,a+=4,r+=4,n.next();else{let l=n.pos-e;if(e<0||l<s||n.start<c)break;let d=n.id>=o?4:0,u=n.start;for(n.next();n.pos>l;){if(n.size<0){if(-3!=n.size)break e;d+=4}else n.id>=o&&(d+=4);n.next()}i=u,r+=e,a+=d}}return(t<0||r==e)&&(h.size=r,h.start=i,h.skip=a),4<h.size?h:void 0}(l.pos-t,g))){let t=new Uint16Array(C.size-C.skip),n=l.pos-C.size,s=t.length;for(;l.pos>n;)s=function f(e,t,n){let{id:r,start:s,end:i,size:a}=l;if(l.next(),0<=a&&r<o){let o=n;if(4<a){let r=l.pos-(a-4);for(;l.pos>r;)n=f(e,t,n)}t[--n]=o,t[--n]=i-e,t[--n]=s-e,t[--n]=r}else-3==a?c=r:-4==a&&(h=r);return n}(C.start,t,s);x=new Cl(t,y-C.start,r),S=C.start-e}else{let e=l.pos-v,t=(l.next(),[]),n=[],r=k>=o?k:-1,i=0,a=y;for(;l.pos>e;)0<=r&&l.id==r&&0<=l.size?(l.end<=a-s&&(u(t,n,b,i,l.end,a,r,w),i=t.length,a=l.end),l.next()):d(b,e,t,n,r);if(0<=r&&0<i&&i<t.length&&u(t,n,b,i,b,a,r,w),t.reverse(),n.reverse(),-1<r&&0<i){let e=function(e){return(t,n,r)=>{let s,i,o=0,l=t.length-1;if(0<=l&&(s=t[l])instanceof wl){if(!l&&s.type==e&&s.length==r)return s;(i=s.prop(fl.lookAhead))&&(o=n[l]+s.length+i)}return p(e,t,n,r,o)}}(_);x=Pl(_,t,n,0,t.length,0,y-b,e,e)}else x=p(_,t,n,y-b,w-y)}n.push(x),m.push(S)}function u(e,t,n,s,i,o,l,a){for(var c=[],h=[];e.length>s;)c.push(e.pop()),h.push(t.pop()+n-i);e.push(p(r.types[l],c,h,o-i,a-o)),t.push(i-n)}function p(e,t,n,r,s=0,i){if(c){let e=[fl.contextHash,c];i=i?[e].concat(i):[e]}if(25<s){let e=[fl.lookAhead,s];i=i?[e].concat(i):[e]}return new wl(e,t,n,r,i)}for(var m=[],g=[];0<l.pos;)d(e.start||0,e.bufferStart||0,m,g,-1);var t=null!=(t=e.length)?t:m.length?g[0]+m[0].length:0;return new wl(a[e.topID],m.reverse(),g.reverse(),t)}}wl.empty=new wl(gl.none,[],[],0);class xl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xl(this.buffer,this.index)}}class Cl{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return gl.none}toString(){var e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),n==(e+=4))return s;for(var i=[];e<n;)i.push(this.childString(e)),e=this.buffer[e+3];return s+"("+i.join(",")+")"}findChild(e,t,n,r,s){let i=this["buffer"],o=-1;for(let l=e;l!=t&&!(_l(s,r,i[l+1],i[l+2])&&(o=l,0<n));l=i[l+3]);return o}slice(e,t,n,r){var s=this.buffer,i=new Uint16Array(t-e);for(let r=e,o=0;r<t;)i[o++]=s[r++],i[o++]=s[r++]-n,i[o++]=s[r++]-n,i[o++]=s[r++]-e;return new Cl(i,r-n,this.set)}}function _l(e,t,n,r){switch(e){case-2:return n<t;case-1:return t<=r&&n<t;case 0:return n<t&&t<r;case 1:return n<=t&&t<r;case 2:return t<r;case 4:return 1}}function Sl(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;n=t.type.isError&&t.from==t.to?(e=n,t.prevSibling):t}return e}function Ml(e,t,n,r){for(var s;e.from==e.to||(n<1?e.from>=t:e.from>t)||(-1<n?e.to<=t:e.to<t);){let t=!r&&e instanceof Al&&e.index<0?null:e.parent;if(!t)return e;e=t}var i=r?0:vl.IgnoreOverlays;if(r)for(let r=e,o=r.parent;o;o=(r=o).parent)r instanceof Al&&r.index<0&&(null==(s=o.enter(t,n,i))?void 0:s.from)!=r.from&&(e=o);for(;;){let r=e.enter(t,n,i);if(!r)return e;e=r}}class Al{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,s=0){for(let i=this;;){for(var{children:o,positions:l}=i._tree,a=0<t?o.length:-1;e!=a;e+=t){let a=o[e],c=l[e]+i.from;if(_l(r,n,c,c+a.length))if(a instanceof Cl){if(!(s&vl.ExcludeBuffers)){let o=a.findChild(0,a.buffer.length,t,n-c,r);if(-1<o)return new Dl(new Ol(i,a,e,c),null,o)}}else if(s&vl.IncludeAnonymous||!a.type.isAnonymous||Il(a)){let o;if(!(s&vl.IgnoreMounts)&&a.props&&(o=a.prop(fl.mounted))&&!o.overlay)return new Al(o.tree,c,e,i);let l=new Al(a,c,e,i);return s&vl.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(t<0?a.children.length-1:0,t,n,r)}}if(s&vl.IncludeAnonymous||!i.type.isAnonymous)return null;if(e=0<=i.index?i.index+t:t<0?-1:i._parent._tree.children.length,!(i=i._parent))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&vl.IgnoreOverlays)&&(r=this._tree.prop(fl.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:s}of r.overlay)if((0<t?e<=n:e<n)&&(t<0?s>=n:s>n))return new Al(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&0<=this.index?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&0<=this.index?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Nl(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Ml(this,e,t,!1)}resolveInner(e,t=0){return Ml(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Sl(this,e)}getChild(e,t=null,n=null){e=Tl(this,e,t,n);return e.length?e[0]:null}getChildren(e,t=null,n=null){return Tl(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return El(this,e)}}function Tl(e,t,n,r){var s=e.cursor(),i=[];if(!s.firstChild())return i;if(null!=n)for(;!s.type.is(n);)if(!s.nextSibling())return i;for(;;){if(null!=r&&s.type.is(r))return i;if(s.type.is(t)&&i.push(s.node),!s.nextSibling())return null==r?i:[]}}function El(e,t,n=t.length-1){for(let r=e.parent;0<=n;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class Ol{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Dl{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){var r=this.context["buffer"],r=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new Dl(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){return n&vl.ExcludeBuffers||(n=this.context.buffer,(n=n.findChild(this.index+4,n.buffer[this.index+3],0<t?1:-1,e-this.context.start,t))<0)?null:new Dl(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){var e=this.context["buffer"],t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Dl(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){var e=this.context["buffer"],t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Dl(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Nl(this,e)}get tree(){return null}toTree(){var i,o,e=[],t=[],n=this.context["buffer"],r=this.index+4,s=n.buffer[this.index+3];return r<s&&(i=n.buffer[this.index+1],o=n.buffer[this.index+2],e.push(n.slice(r,s,i,o)),t.push(0)),new wl(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Ml(this,e,t,!1)}resolveInner(e,t=0){return Ml(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Sl(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){e=Tl(this,e,t,n);return e.length?e[0]:null}getChildren(e,t=null,n=null){return Tl(this,e,t,n)}get node(){return this}matchContext(e){return El(this,e)}}class Nl{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Al)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;var{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Al?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){var r;return this.buffer?(r=this.buffer["buffer"],!((r=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n))<0)&&(this.stack.push(this.index),this.yieldBuf(r))):this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&vl.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){var e;return this.buffer?this.stack.length?this.yieldBuf(this.stack.pop()):(e=this.mode&vl.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent(),this.buffer=null,this.yieldNode(e)):this.yieldNode(this.mode&vl.IncludeAnonymous?this._tree._parent:this._tree.parent)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));var t=this.buffer["buffer"],n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,r=this["buffer"];if(r){if(0<e){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(-1<t)for(let r=t+e,s=e<0?-1:n._tree.children.length;r!=s;r+=e){let e=n._tree.children[r];if(this.mode&vl.IncludeAnonymous||e instanceof Cl||!e.type.isAnonymous||Il(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(-1<t?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;0<=s;){for(let i=e;i;i=i._parent)if(i.index==r){if(r==this.index)return i;t=i,n=s+1;break e}r=this.stack[--s]}for(let e=n;e<this.stack.length;e++)t=new Dl(this.buffer,t,this.stack[e]);return this.bufferNode=new Dl(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return El(this.node,e);var t=this.buffer["buffer"],n=t.set["types"];for(let r=e.length-1,s=this.stack.length-1;0<=r;s--){if(s<0)return El(this.node,e,r);var i=n[t.buffer[this.stack[s]]];if(!i.isAnonymous){if(e[r]&&e[r]!=i.name)return!1;r--}}return!0}}function Il(e){return e.children.some(e=>e instanceof Cl||!e.type.isAnonymous||Il(e))}const Ll=new WeakMap;function zl(e,t){if(!e.isAnonymous||t instanceof Cl||t.type!=e)return 1;let n=Ll.get(t);if(null==n){n=1;for(var r of t.children){if(r.type!=e||!(r instanceof wl)){n=1;break}n+=zl(e,r)}Ll.set(t,n)}return n}function Pl(e,t,n,r,s,i,o,l,a){let c=0;for(let n=r;n<s;n++)c+=zl(e,t[n]);let h=Math.ceil(1.5*c/8),d=[],u=[];return function t(n,r,s,o,l){for(let c=s;c<o;){let s=c,p=r[c],f=zl(e,n[c]);for(c++;c<o;c++){let t=zl(e,n[c]);if(f+t>=h)break;f+=t}if(c==s+1){if(f>h){let e=n[s];t(e.children,e.positions,0,e.children.length,r[s]+l);continue}d.push(n[s])}else{let t=r[c-1]+n[c-1].length-p;d.push(Pl(e,n,r,s,c,p,t,null,a))}u.push(p+l-i)}}(t,n,r,s,0),(l||a)(d,u,o)}class Rl{constructor(e,t,n,r,s=!1,i=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(s?1:0)|(i?2:0)}get openStart(){return 0<(1&this.open)}get openEnd(){return 0<(2&this.open)}static addTree(e,t=[],n=!1){var r=[new Rl(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],s=1,i=e.length?e[0]:null;for(let o=0,l=0,a=0;;o++){var c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-l>=n)for(;i&&i.from<h;){let t=i;if(l>=t.from||h<=t.to||a){let e=Math.max(t.from,l)-a,n=Math.min(t.to,h)-a;t=e>=n?null:new Rl(e,n,t.tree,t.offset+a,0<o,!!c)}if(t&&r.push(t),i.to>h)break;i=s<e.length?e[s++]:null}if(!c)break;l=c.toA,a=c.toA-c.toB}return r}}class Bl{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new fl({perNode:!0});let Fl=0;class $l{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Fl++}static define(e){if(null!=e&&e.base)throw new Error("Can not derive from a modified tag");var t=new $l([],null,[]);if(t.set.push(t),e)for(var n of e.set)t.set.push(n);return t}static defineModifier(){let e=new jl;return t=>-1<t.modified.indexOf(e)?t:jl.get(t.base||t,t.modified.concat(e).sort((e,t)=>e.id-t.id))}}let ql=0;class jl{constructor(){this.instances=[],this.id=ql++}static get(e,t){if(!t.length)return e;var n=t[0].instances.find(n=>{return n.base==e&&(s=n.modified,t.length==s.length&&t.every((e,t)=>e==s[t]));var s});if(n)return n;var r=[],s=new $l(r,e,t);for(let e of t)e.instances.push(s);var i=function Vl(e){let t=[e];for(let n=0;n<e.length;n++)for(var r of Vl(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}(t);for(let t of e.set)for(let e of i)r.push(jl.get(t,e));return s}}function Hl(e){var n,t=Object.create(null);for(n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],s=2,i=e;for(let t=0;;){if("..."==i&&0<t&&t+3==e.length){s=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(i);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),(t+=r[0].length)==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){s=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);i=e.slice(t)}var o=n.length-1,l=n[o];if(!l)throw new RangeError("Invalid path: "+e);o=new Wl(r,s,0<o?n.slice(0,o):null);t[l]=o.sort(t[l])}}return Ul.add(t)}const Ul=new fl;class Wl{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Jl(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:s=null}=t||{};return{style:e=>{let t=s;for(var r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}Wl.empty=new Wl([],2,null);class Gl{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,s){let{type:i,from:o,to:l}=e;if(!(n<=o||l<=t)){i.isTop&&(s=this.highlighters.filter(e=>!e.scope||e.scope(i)));let a=r,c=function(e){let t=e.type.prop(Ul);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||Wl.empty,h=function(e,t){let n=null;for(var r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(s,c.tags);if(h&&(a&&(a+=" "),a+=h,1==c.mode&&(r+=(r?" ":"")+h)),this.startSpan(e.from,a),!c.opaque){let d=e.tree&&e.tree.prop(fl.mounted);if(d&&d.overlay){let i=e.node.enter(d.overlay[0].from+o,1),c=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),h=e.firstChild();for(let u=0,p=o;;u++){var f=u<d.overlay.length?d.overlay[u]:null,m=f?f.from+o:l,g=Math.max(t,p),k=Math.min(n,m);if(g<k&&h)for(;e.from<k&&(this.highlightRange(e,g,k,r,s),this.startSpan(Math.min(n,e.to),a),!(e.to>=m)&&e.nextSibling()););if(!f||n<m)break;(p=f.to+o)>t&&(this.highlightRange(i.cursor(),Math.max(t,f.from+o),Math.min(n,p),r,c),this.startSpan(p,a))}h&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,s),this.startSpan(Math.min(n,e.to),a)}}while(e.nextSibling());e.parent()}}}}}const Kl=$l.define,Zl=Kl(),Xl=Kl(),Ql=Kl(Xl),Yl=Kl(Xl),ea=Kl(),ta=Kl(ea),na=Kl(ea),ra=Kl(),sa=Kl(ra),ia=Kl(),oa=Kl(),la=Kl(),aa=Kl(la),ca=Kl(),ha={comment:Zl,lineComment:Kl(Zl),blockComment:Kl(Zl),docComment:Kl(Zl),name:Xl,variableName:Kl(Xl),typeName:Ql,tagName:Kl(Ql),propertyName:Yl,attributeName:Kl(Yl),className:Kl(Xl),labelName:Kl(Xl),namespace:Kl(Xl),macroName:Kl(Xl),literal:ea,string:ta,docString:Kl(ta),character:Kl(ta),attributeValue:Kl(ta),number:na,integer:Kl(na),float:Kl(na),bool:Kl(ea),regexp:Kl(ea),escape:Kl(ea),color:Kl(ea),url:Kl(ea),keyword:ia,self:Kl(ia),null:Kl(ia),atom:Kl(ia),unit:Kl(ia),modifier:Kl(ia),operatorKeyword:Kl(ia),controlKeyword:Kl(ia),definitionKeyword:Kl(ia),moduleKeyword:Kl(ia),operator:oa,derefOperator:Kl(oa),arithmeticOperator:Kl(oa),logicOperator:Kl(oa),bitwiseOperator:Kl(oa),compareOperator:Kl(oa),updateOperator:Kl(oa),definitionOperator:Kl(oa),typeOperator:Kl(oa),controlOperator:Kl(oa),punctuation:la,separator:Kl(la),bracket:aa,angleBracket:Kl(aa),squareBracket:Kl(aa),paren:Kl(aa),brace:Kl(aa),content:ra,heading:sa,heading1:Kl(sa),heading2:Kl(sa),heading3:Kl(sa),heading4:Kl(sa),heading5:Kl(sa),heading6:Kl(sa),contentSeparator:Kl(ra),list:Kl(ra),quote:Kl(ra),emphasis:Kl(ra),strong:Kl(ra),link:Kl(ra),monospace:Kl(ra),strikethrough:Kl(ra),inserted:Kl(),deleted:Kl(),changed:Kl(),invalid:Kl(),meta:ca,documentMeta:Kl(ca),annotation:Kl(ca),processingInstruction:Kl(ca),definition:$l.defineModifier(),constant:$l.defineModifier(),function:$l.defineModifier(),standard:$l.defineModifier(),local:$l.defineModifier(),special:$l.defineModifier()},da=Jl([{tag:ha.link,class:"tok-link"},{tag:ha.heading,class:"tok-heading"},{tag:ha.emphasis,class:"tok-emphasis"},{tag:ha.strong,class:"tok-strong"},{tag:ha.keyword,class:"tok-keyword"},{tag:ha.atom,class:"tok-atom"},{tag:ha.bool,class:"tok-bool"},{tag:ha.url,class:"tok-url"},{tag:ha.labelName,class:"tok-labelName"},{tag:ha.inserted,class:"tok-inserted"},{tag:ha.deleted,class:"tok-deleted"},{tag:ha.literal,class:"tok-literal"},{tag:ha.string,class:"tok-string"},{tag:ha.number,class:"tok-number"},{tag:[ha.regexp,ha.escape,ha.special(ha.string)],class:"tok-string2"},{tag:ha.variableName,class:"tok-variableName"},{tag:ha.local(ha.variableName),class:"tok-variableName tok-local"},{tag:ha.definition(ha.variableName),class:"tok-variableName tok-definition"},{tag:ha.special(ha.variableName),class:"tok-variableName2"},{tag:ha.definition(ha.propertyName),class:"tok-propertyName tok-definition"},{tag:ha.typeName,class:"tok-typeName"},{tag:ha.namespace,class:"tok-namespace"},{tag:ha.className,class:"tok-className"},{tag:ha.macroName,class:"tok-macroName"},{tag:ha.propertyName,class:"tok-propertyName"},{tag:ha.operator,class:"tok-operator"},{tag:ha.comment,class:"tok-comment"},{tag:ha.meta,class:"tok-meta"},{tag:ha.invalid,class:"tok-invalid"},{tag:ha.punctuation,class:"tok-punctuation"}]);class ua{constructor(e,t,n,r,s,i,o){this.type=e,this.value=t,this.from=n,this.hash=r,this.end=s,this.children=i,this.positions=o,this.hashProp=[[fl.contextHash,r]]}static create(e,t,n,r,s){return new ua(e,t,n,r+(r<<8)+e+(t<<4)|0,s,[],[])}addChild(e,t){e.prop(fl.contextHash)!=this.hash&&(e=new wl(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){var n=this.children.length-1;return 0<=n&&(t=Math.max(t,this.positions[n]+this.children[n].length+this.from)),new wl(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,n)=>new wl(gl.none,e,t,n,this.hashProp)})}}!function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.URL=33]="URL",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeText=40]="CodeText",e[e.CodeInfo=41]="CodeInfo",e[e.LinkTitle=42]="LinkTitle",e[e.LinkLabel=43]="LinkLabel"}(pa=pa||{});class fa{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class ma{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){var e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return ya(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,n=0){for(let r=t;r<e;r++)n+=9==this.text.charCodeAt(r)?4-n%4:1;return n}findColumn(e){let t=0;for(let n=0;t<this.text.length&&n<e;t++)n+=9==this.text.charCodeAt(t)?4-n%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function ga(e,t,n){var r;return n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent||!(n.indent>=n.baseIndent+4)&&(0<(r=(e.type==pa.OrderedList?Ma:Sa)(n,t,!1))&&(e.type!=pa.BulletList||Ca(n,t,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==e.value)}var ka={[pa.Blockquote]:(e,t,n)=>62==n.next&&(n.markers.push(ec(pa.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+(ba(n.text.charCodeAt(n.pos+1))?2:1)),e.end=t.lineStart+n.text.length,!0),[pa.ListItem]:(e,t,n)=>!(n.indent<n.baseIndent+e.value&&-1<n.next||(n.moveBaseColumn(n.baseIndent+e.value),0)),[pa.OrderedList]:ga,[pa.BulletList]:ga,[pa.Document]:()=>!0};function ba(e){return 32==e||9==e||10==e||13==e}function ya(e,t=0){for(;t<e.length&&ba(e.charCodeAt(t));)t++;return t}function va(e,t,n){for(;n<t&&ba(e.charCodeAt(t-1));)t--;return t}function wa(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let n=t;n<e.text.length;n++)if(96==e.text.charCodeAt(n))return-1;return t}function xa(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function Ca(e,t,n){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let r=1;for(let t=e.pos+1;t<e.text.length;t++){let n=e.text.charCodeAt(t);if(n==e.next)r++;else if(!ba(n))return-1}return n&&45==e.next&&-1<Ta(e)&&e.depth==t.stack.length||r<3?-1:1}function _a(e,t){for(let n=e.stack.length-1;0<=n;n--)if(e.stack[n].type==t)return 1}function Sa(e,t,n){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!ba(e.text.charCodeAt(e.pos+1))||!(!n||_a(t,pa.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function Ma(e,t,n){let r=e.pos,s=e.next;for(;48<=s&&s<=57;){if(++r==e.text.length)return-1;s=e.text.charCodeAt(r)}return r==e.pos||r>e.pos+9||46!=s&&41!=s||r<e.text.length-1&&!ba(e.text.charCodeAt(r+1))||n&&!_a(t,pa.OrderedList)&&(e.skipSpace(r+1)==e.text.length||r>e.pos+1||49!=e.next)?-1:r+1-e.pos}function Aa(e){if(35!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;var n;return t<e.text.length&&32!=e.text.charCodeAt(t)||6<(n=t-e.pos)?-1:n}function Ta(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;for(var n=t;t<e.text.length&&ba(e.text.charCodeAt(t));)t++;return t==e.text.length?n:-1}const Ea=/^[ \t]*$/,Oa=/-->/,Da=/\?>/,Na=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,Oa],[/^\s*<\?/,Da],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Ea],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Ea]];function Ia(e,t,n){if(60==e.next){var r=e.text.slice(e.pos);for(let e=0,t=Na.length-(n?1:0);e<t;e++)if(Na[e][0].test(r))return e}return-1}function La(e,t){var n=e.countIndent(t,e.pos,e.indent),e=e.countIndent(e.skipSpace(t),t,n);return n+5<=e?n+1:e}function za(e,t,n){var r=e.length-1;0<=r&&e[r].to==t&&e[r].type==pa.CodeText?e[r].to=n:e.push(ec(pa.CodeText,t,n))}const Pa={LinkReference:void 0,IndentedCode(e,t){var n=t.baseIndent+4;if(t.indent<n)return!1;let r=t.findColumn(n),s=e.lineStart+r,i=e.lineStart+t.text.length,o=[],l=[];for(za(o,s,i);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){za(l,e.lineStart-1,e.lineStart);for(let e of t.markers)l.push(e)}else{if(t.indent<n)break;{if(l.length){for(let e of l)e.type==pa.CodeText?za(o,e.from,e.to):o.push(e);l=[]}za(o,e.lineStart-1,e.lineStart);for(let e of t.markers)o.push(e);i=e.lineStart+t.text.length;let n=e.lineStart+t.findColumn(t.baseIndent+4);n<i&&za(o,n,i)}}return l.length&&((l=l.filter(e=>e.type!=pa.CodeText)).length&&(t.markers=l.concat(t.markers))),e.addNode(e.buffer.writeElements(o,-s).finish(pa.CodeBlock,i-s),s),!0},FencedCode(e,t){var n=wa(t);if(n<0)return!1;var r=e.lineStart+t.pos,s=t.next,i=n-t.pos,n=t.skipSpace(n),l=va(t.text,t.text.length,n),a=[ec(pa.CodeMark,r,r+i)];n<l&&a.push(ec(pa.CodeInfo,e.lineStart+n,e.lineStart+l));for(let n=!0;e.nextLine()&&t.depth>=e.stack.length;n=!1){let r=t.pos;if(t.indent-t.baseIndent<4)for(;r<t.text.length&&t.text.charCodeAt(r)==s;)r++;if(r-t.pos>=i&&t.skipSpace(r)==t.text.length){for(let e of t.markers)a.push(e);a.push(ec(pa.CodeMark,e.lineStart+t.pos,e.lineStart+r)),e.nextLine();break}{n||za(a,e.lineStart-1,e.lineStart);for(let e of t.markers)a.push(e);let r=e.lineStart+t.basePos,s=e.lineStart+t.text.length;r<s&&za(a,r,s)}}return e.addNode(e.buffer.writeElements(a,-r).finish(pa.FencedCode,e.prevLineEnd()-r),r),!0},Blockquote(e,t){var n=xa(t);return!(n<0)&&(e.startContext(pa.Blockquote,t.pos),e.addNode(pa.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){return!(Ca(t,e,!1)<0)&&(t=e.lineStart+t.pos,e.nextLine(),e.addNode(pa.HorizontalRule,t),!0)},BulletList(e,t){var n=Sa(t,e,!1);if(n<0)return!1;e.block.type!=pa.BulletList&&e.startContext(pa.BulletList,t.basePos,t.next);var r=La(t,t.pos+1);return e.startContext(pa.ListItem,t.basePos,r-t.baseIndent),e.addNode(pa.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},OrderedList(e,t){var n=Ma(t,e,!1);if(n<0)return!1;e.block.type!=pa.OrderedList&&e.startContext(pa.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));var r=La(t,t.pos+n);return e.startContext(pa.ListItem,t.basePos,r-t.baseIndent),e.addNode(pa.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},ATXHeading(e,t){var n=Aa(t);if(n<0)return!1;let r=t.pos,s=e.lineStart+r,i=va(t.text,t.text.length,r),o=i;for(;o>r&&t.text.charCodeAt(o-1)==t.next;)o--;o!=i&&o!=r&&ba(t.text.charCodeAt(o-1))||(o=t.text.length);var l=e.buffer.write(pa.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(r+n+1,o),s+n+1),-s),l=(o<t.text.length&&l.write(pa.HeaderMark,o-r,i-r),l.finish(pa.ATXHeading1-1+n,t.text.length-r));return e.nextLine(),e.addNode(l,s),!0},HTMLBlock(e,t){var n=Ia(t,0,!1);if(n<0)return!1;let r=e.lineStart+t.pos,s=Na[n][1],i=[],o=s!=Ea;for(;!s.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){o=!1;break}for(let e of t.markers)i.push(e)}o&&e.nextLine();var n=s==Oa?pa.CommentBlock:s==Da?pa.ProcessingInstructionBlock:pa.HTMLBlock,a=e.prevLineEnd();return e.addNode(e.buffer.writeElements(i,-r).finish(n,a-r),r),!0},SetextHeading:void 0};class Ra{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,n){var s;return-1!=this.stage&&(t=n.content+"\n"+t.scrub(),-1<(s=this.advance(t))&&s<t.length&&this.complete(e,n,s))}finish(e,t){return(2==this.stage||3==this.stage)&&ya(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,n){return e.addLeafElement(t,ec(pa.LinkReference,this.start,this.start+n,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(uc(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(ec(pa.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2!=this.stage)return Ba(e,this.pos);{let t=ya(e,this.pos),n=0;if(t>this.pos){var r=dc(e,t,this.start);if(r){let t=Ba(e,r.to-this.start);0<t&&(this.nextStage(r),n=t)}}return 0<(n=n||Ba(e,this.pos))&&n<e.length?n:-1}}if(!this.nextStage(hc(e,ya(e,this.pos),this.start)))return-1}}}}function Ba(e,t){for(;t<e.length;t++){var n=e.charCodeAt(t);if(10==n)break;if(!ba(n))return-1}return t}class Fa{nextLine(e,t,n){var r=t.depth<e.stack.length?-1:Ta(t),s=t.next;return!(r<0)&&(t=ec(pa.HeaderMark,e.lineStart+t.pos,e.lineStart+r),e.nextLine(),e.addLeafElement(n,ec(61==s?pa.SetextHeading1:pa.SetextHeading2,n.start,e.prevLineEnd(),[...e.parser.parseInline(n.content,n.start),t])),!0)}finish(){return!1}}const $a={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new Ra(t):null,SetextHeading:()=>new Fa},qa=[(e,t)=>0<=Aa(t),(e,t)=>0<=wa(t),(e,t)=>0<=xa(t),(e,t)=>0<=Sa(t,e,!0),(e,t)=>0<=Ma(t,e,!0),(e,t)=>0<=Ca(t,e,!0),(e,t)=>0<=Ia(t,0,!0)],ja={text:"",end:0};class Va{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.line=new ma,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=ua.create(pa.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=n.length?new gc(n,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();for(var e=this["line"];;){for(;e.depth<this.stack.length;)this.finishContext();for(let t of e.markers)this.addNode(t.type,t.from,t.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(!this.fragments||!this.reuseFragment(e.basePos)){e:for(;;){for(let t of this.parser.blockParsers)if(t){var n=t(this,e);if(0!=n){if(1==n)return null;e.forward();continue e}}break}var t=new fa(this.lineStart+e.pos,e.text.slice(e.pos));for(let e of this.parser.leafBlockParsers)if(e){let n=e(this,t);n&&t.parsers.push(n)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4)for(let n of this.parser.endLeafBlock)if(n(this,e,t))break e;for(let n of t.parsers)if(n.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let n of e.markers)t.marks.push(n)}this.finishLeaf(t)}return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;e=this.fragments.takeNodes(this);if(!e)return!1;let n=e,r=this.absoluteLineStart+e;for(let e=1;e<this.ranges.length;e++){let t=this.ranges[e-1].to,s=this.ranges[e].from;t>=this.lineStart&&s<r&&(n-=s-t)}return this.lineStart+=n,this.absoluteLineStart+=e,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++):this.atEnd=!0,this.readLine(),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){var t=ja;if((t.end=e)>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,1<this.ranges.length){let e=this.absoluteLineStart,n=this.rangeI;for(;this.ranges[n].to<t.end;){n++;var r=this.ranges[n].from,s=this.lineChunkAt(r);t.end=r+s.length,t.text=t.text.slice(0,this.ranges[n-1].to-e)+s,e=t.end-t.text.length}}return t}readLine(){var e=this["line"],{text:t,end:n}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=n,e.reset(t);e.depth<this.stack.length;e.depth++){let t=this.stack[e.depth],n=this.parser.skipContextMarkup[t.type];if(!n)throw new Error("Unhandled block context "+pa[t.type]);if(!n(t,this,e))break;e.forward()}}lineChunkAt(e){let t,n=this.input.chunk(e);if(this.input.lineChunks)t="\n"==n?"":n;else{let e=n.indexOf("\n");t=e<0?n:n.slice(0,e)}return e+t.length>this.to?t.slice(0,this.to-e):t}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,n=0){this.block=ua.create(e,n,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,n=0){this.startContext(this.parser.getNodeType(e),t,n)}addNode(e,t,n){"number"==typeof e&&(e=new wl(this.parser.nodeSet.types[e],Za,Za,(null!=n?n:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(fc(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){var e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;1<this.stack.length;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return 1<this.ranges.length?function Ha(e,t,n,r,s){if(s.has(n.tree))return n.tree;let i=e[t].to,o=[],l=[],a=n.from+r;function c(n,s){for(;s?n>=i:n>i;){let s=e[t+1].from-i;r+=s,n+=s,t++,i=e[t].to}}for(let h=n.firstChild;h;h=h.nextSibling){c(h.from+r,!0);let n,d=h.from+r;h.to+r>i?(n=Ha(e,t,h,r,s),c(h.to+r,!1)):n=h.toTree(),o.push(n),l.push(d-a)}return c(n.to+r,!1),new wl(n.type,o,l,n.to+r-a,n.tree?n.tree.propValues:void 0)}(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let t of e.parsers)if(t.finish(this,e))return;var t=fc(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(pa.Paragraph,e.content.length),e.start)}elt(e,t,n,r){return"string"==typeof e?ec(this.parser.getNodeType(e),t,n,r):new Ya(e,t)}get buffer(){return new Xa(this.parser.nodeSet)}}function Wa(e){return null!=e&&0<e.length}function Ga(e,t){e=e.indexOf(t);if(e<0)throw new RangeError("Position specified relative to unknown parser "+t);return e}var Ka=[gl.none];for(let e,t=1;e=pa[t];t++)Ka[t]=gl.define({id:t,name:e,props:t>=pa.Escape?[]:[[fl.group,t in ka?["Block","BlockContext"]:["Block","LeafBlock"]]]});const Za=[];class Xa{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,n,r=0){return this.content.push(e,t,n,4+4*r),this}writeElements(e,t=0){for(var n of e)n.writeTo(this,t);return this}finish(e,t){return wl.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class Qa{constructor(e,t,n,r=Za){this.type=e,this.from=t,this.to=n,this.children=r}writeTo(e,t){var n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new Xa(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class Ya{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Za}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function ec(e,t,n,r){return new Qa(e,t,n,r)}const tc={resolve:"Emphasis",mark:"EmphasisMark"},nc={resolve:"Emphasis",mark:"EmphasisMark"},rc={},sc={};class ic{constructor(e,t,n,r){this.type=e,this.from=t,this.to=n,this.side=r}}const oc="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let lc=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{lc=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch(e){}const ac={Escape(e,t,n){if(92==t&&n!=e.end-1){var r=e.char(n+1);for(let t=0;t<oc.length;t++)if(oc.charCodeAt(t)==r)return e.append(ec(pa.Escape,n,n+2))}return-1},Entity(e,t,n){return 38==t&&(t=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31)))?e.append(ec(pa.Entity,n,n+1+t[0].length)):-1},InlineCode(e,t,n){if(!(96!=t||n&&96==e.char(n-1))){let r=n+1;for(;r<e.end&&96==e.char(r);)r++;let s=r-n,i=0;for(;r<e.end;r++)if(96==e.char(r)){if(++i==s&&96!=e.char(r+1))return e.append(ec(pa.InlineCode,n,r+1,[ec(pa.CodeMark,n,n+s),ec(pa.CodeMark,r+1-s,r+1)]))}else i=0}return-1},HTMLTag(e,t,n){var s;return 60!=t||n==e.end-1?-1:(t=e.slice(n+1,e.end),(s=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(t))?e.append(ec(pa.URL,n,n+1+s[0].length)):(s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(t))?e.append(ec(pa.Comment,n,n+1+s[0].length)):(s=/^\?[^]*?\?>/.exec(t))?e.append(ec(pa.ProcessingInstruction,n,n+1+s[0].length)):(s=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(t))?e.append(ec(pa.HTMLTag,n,n+1+s[0].length)):-1)},Emphasis(e,t,n){if(95!=t&&42!=t)return-1;let r=n+1;for(;e.char(r)==t;)r++;var s=e.slice(n-1,n),i=e.slice(r,r+1),o=lc.test(s),l=lc.test(i),s=/\s|^$/.test(s),i=/\s|^$/.test(i),h=!i&&(!l||s||o),s=!s&&(!o||i||l),i=h&&(42==t||!s||o),o=s&&(42==t||!h||l);return e.append(new ic(95==t?tc:nc,n,r,(i?1:0)|(o?2:0)))},HardBreak(e,t,n){if(92==t&&10==e.char(n+1))return e.append(ec(pa.HardBreak,n,n+2));if(32==t){let t=n+1;for(;32==e.char(t);)t++;if(10==e.char(t)&&t>=n+2)return e.append(ec(pa.HardBreak,n,t+1))}return-1},Link:(e,t,n)=>91==t?e.append(new ic(rc,n,n+1,1)):-1,Image:(e,t,n)=>33==t&&91==e.char(n+1)?e.append(new ic(sc,n,n+2,1)):-1,LinkEnd(e,t,n){if(93==t)for(let t=e.parts.length-1;0<=t;t--){var r=e.parts[t];if(r instanceof ic&&(r.type==rc||r.type==sc)){if(!r.side||e.skipSpace(r.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[t]=null,-1;var s=e.takeContent(t),s=e.parts[t]=function(e,t,n,r,s){let i=e["text"],o=e.char(s),l=s;if(t.unshift(ec(pa.LinkMark,r,r+(n==pa.Image?2:1))),t.push(ec(pa.LinkMark,s-1,s)),40==o){let n,r=e.skipSpace(s+1),o=hc(i,r-e.offset,e.offset);o&&(r=e.skipSpace(o.to),(n=dc(i,r-e.offset,e.offset))&&(r=e.skipSpace(n.to))),41==e.char(r)&&(t.push(ec(pa.LinkMark,s,s+1)),l=r+1,o&&t.push(o),n&&t.push(n),t.push(ec(pa.LinkMark,r,l)))}else if(91==o){let n=uc(i,s-e.offset,e.offset,!1);n&&(t.push(n),l=n.to)}return ec(n,r,l,t)}(e,s,r.type==rc?pa.Link:pa.Image,r.from,n+1);if(r.type==rc)for(let n=0;n<t;n++){let t=e.parts[n];t instanceof ic&&t.type==rc&&(t.side=0)}return s.to}}return-1}};function hc(e,t,n){if(60==e.charCodeAt(t)){for(let r=t+1;r<e.length;r++){var s=e.charCodeAt(r);if(62==s)return ec(pa.URL,t+n,r+1+n);if(60==s||10==s)return!1}return null}{let r=0,s=t;for(let t=!1;s<e.length;s++){let n=e.charCodeAt(s);if(ba(n))break;if(t)t=!1;else if(40==n)r++;else if(41==n){if(!r)break;r--}else 92==n&&(t=!0)}return s>t?ec(pa.URL,t+n,s+n):s==e.length&&null}}function dc(e,t,n){var r=e.charCodeAt(t);if(39!=r&&34!=r&&40!=r)return!1;var s=40==r?41:r;for(let r=t+1,i=!1;r<e.length;r++){var o=e.charCodeAt(r);if(i)i=!1;else{if(o==s)return ec(pa.LinkTitle,t+n,r+1+n);92==o&&(i=!0)}}return null}function uc(e,t,n,r){for(let s=!1,i=t+1,o=Math.min(e.length,i+999);i<o;i++){let o=e.charCodeAt(i);if(s)s=!1;else{if(93==o)return!r&&ec(pa.LinkLabel,t+n,i+1+n);if(r&&!ba(o)&&(r=!1),91==o)return!1;92==o&&(s=!0)}}return null}class pc{constructor(e,t,n){this.parser=e,this.text=t,this.offset=n,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,n,r,s){return this.append(new ic(e,t,n,(r?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let t=e;t<this.parts.length;t++){var n=this.parts[t];if(n instanceof ic&&n.type.resolve&&2&n.side){let r,s=n.type==tc||n.type==nc,i=n.to-n.from,o=t-1;for(;o>=e;o--){let e=this.parts[o];if(e instanceof ic&&1&e.side&&e.type==n.type&&!(s&&(1&n.side||2&e.side)&&(e.to-e.from+i)%3==0&&((e.to-e.from)%3||i%3))){r=e;break}}if(r){let l=n.type.resolve,a=[],c=r.from,h=n.to;if(s){let e=Math.min(2,r.to-r.from,i);c=r.to-e,h=n.from+e,l=1==e?"Emphasis":"StrongEmphasis"}r.type.mark&&a.push(this.elt(r.type.mark,c,r.to));for(let e=o+1;e<t;e++)this.parts[e]instanceof Qa&&a.push(this.parts[e]),this.parts[e]=null;n.type.mark&&a.push(this.elt(n.type.mark,n.from,h));var d=this.elt(l,c,h,a);this.parts[o]=s&&r.from!=c?new ic(r.type,r.from,c,r.side):null,(this.parts[t]=s&&n.to!=h?new ic(n.type,h,n.to,n.side):null)?this.parts.splice(t,0,d):this.parts[t]=d}}}var t=[];for(let n=e;n<this.parts.length;n++){let e=this.parts[n];e instanceof Qa&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;0<=t;t--){var n=this.parts[t];if(n instanceof ic&&n.type==e)return t}return null}takeContent(e){var t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return ya(this.text,e-this.offset)+this.offset}elt(e,t,n,r){return"string"==typeof e?ec(this.parser.getNodeType(e),t,n,r):new Ya(e,t)}}function fc(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),r=0;for(let e of t){for(;r<n.length&&n[r].to<e.to;)r++;if(r<n.length&&n[r].from<e.from){let t=n[r];t instanceof Qa&&(n[r]=new Qa(t.type,t.from,t.to,fc(t.children,[e])))}else n.splice(r++,0,e)}return n}const mc=[pa.CodeBlock,pa.ListItem,pa.OrderedList,pa.BulletList];class gc{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;0<e&&"\n"!=this.input.read(e-1,e);)e--;this.fragmentEnd=e?e-1:0}let n=this.cursor;n||(n=this.cursor=this.fragment.tree.cursor()).firstChild();for(var r=e+this.fragment.offset;n.to<=r;)if(!n.parent())return!1;for(;;){if(n.from>=r)return this.fragment.from<=t;if(!n.childAfter(r))return!1}}matches(e){var t=this.cursor.tree;return t&&t.prop(fl.contextHash)==e}takeNodes(e){let t=this.cursor,n=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,i=s,o=e.block.children.length,l=i,a=o;for(;;){if(t.to-n>r){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-n),t.type.is("Block")&&(mc.indexOf(t.type.id)<0?(i=t.to-n,o=e.block.children.length):(i=l,o=a,l=t.to-n,a=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>o;)e.block.children.pop(),e.block.positions.pop();return i-s}}const kc=Hl({"Blockquote/...":ha.quote,HorizontalRule:ha.contentSeparator,"ATXHeading1/... SetextHeading1/...":ha.heading1,"ATXHeading2/... SetextHeading2/...":ha.heading2,"ATXHeading3/...":ha.heading3,"ATXHeading4/...":ha.heading4,"ATXHeading5/...":ha.heading5,"ATXHeading6/...":ha.heading6,"Comment CommentBlock":ha.comment,Escape:ha.escape,Entity:ha.character,"Emphasis/...":ha.emphasis,"StrongEmphasis/...":ha.strong,"Link/... Image/...":ha.link,"OrderedList/... BulletList/...":ha.list,"BlockQuote/...":ha.quote,"InlineCode CodeText":ha.monospace,URL:ha.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":ha.processingInstruction,"CodeInfo LinkLabel":ha.labelName,LinkTitle:ha.string,Paragraph:ha.content}),bc=new class Ua extends class{startParse(e,t,n){return"string"==typeof e&&(e=new Bl(e)),n=n?n.length?n.map(e=>new pl(e.from,e.to)):[new pl(0,0)]:[new pl(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){for(var r=this.startParse(e,t,n);;){let e=r.advance();if(e)return e}}}{constructor(e,t,n,r,s,i,o,l,a){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=n,this.blockNames=r,this.endLeafBlock=s,this.skipContextMarkup=i,this.inlineParsers=o,this.inlineNames=l,this.wrappers=a,this.nodeTypes=Object.create(null);for(let t of e.types)this.nodeTypes[t.name]=t.id}createParse(e,t,n){let r=new Va(this,e,t,n);for(var s of this.wrappers)r=s(r,e,t,n);return r}configure(e){var t=function Ja(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=Ja(e[0]);if(1==e.length)return t;let n=Ja(e.slice(1));if(!n||!t)return t||n;let r=(e,t)=>(e||Za).concat(t||Za),s=t.wrap,i=n.wrap;return{props:r(t.props,n.props),defineNodes:r(t.defineNodes,n.defineNodes),parseBlock:r(t.parseBlock,n.parseBlock),parseInline:r(t.parseInline,n.parseInline),remove:r(t.remove,n.remove),wrap:s?i?(e,t,n,r)=>s(i(e,t,n,r),t,n,r):s:i}}(e);if(!t)return this;let{nodeSet:n,skipContextMarkup:r}=this,s=this.blockParsers.slice(),i=this.leafBlockParsers.slice(),o=this.blockNames.slice(),l=this.inlineParsers.slice(),a=this.inlineNames.slice(),c=this.endLeafBlock.slice(),h=this.wrappers;if(Wa(t.defineNodes)){r=Object.assign({},r);let e,s=n.types.slice();for(let n of t.defineNodes){let{name:t,block:i,composite:o,style:l}="string"==typeof n?{name:n}:n;if(!s.some(e=>e.name==t)){o&&(r[s.length]=(e,t,n)=>o(t,n,e.value));let a=s.length,c=o?["Block","BlockContext"]:i?a>=pa.ATXHeading1&&a<=pa.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;s.push(gl.define({id:a,name:t,props:c&&[[fl.group,c]]})),l&&(e=e||{},Array.isArray(l)||l instanceof $l?e[t]=l:Object.assign(e,l))}}n=new kl(s),e&&(n=n.extend(Hl(e)))}if(Wa(t.props)&&(n=n.extend(...t.props)),Wa(t.remove))for(let e of t.remove){let t=this.blockNames.indexOf(e),n=this.inlineNames.indexOf(e);-1<t&&(s[t]=i[t]=void 0),-1<n&&(l[n]=void 0)}if(Wa(t.parseBlock))for(let e of t.parseBlock){let t=o.indexOf(e.name);if(-1<t)s[t]=e.parse,i[t]=e.leaf;else{let t=e.before?Ga(o,e.before):e.after?Ga(o,e.after)+1:o.length-1;s.splice(t,0,e.parse),i.splice(t,0,e.leaf),o.splice(t,0,e.name)}e.endLeaf&&c.push(e.endLeaf)}if(Wa(t.parseInline))for(let e of t.parseInline){let t=a.indexOf(e.name);if(-1<t)l[t]=e.parse;else{let t=e.before?Ga(a,e.before):e.after?Ga(a,e.after)+1:a.length-1;l.splice(t,0,e.parse),a.splice(t,0,e.name)}}return t.wrap&&(h=h.concat(t.wrap)),new Ua(n,s,i,o,c,r,l,a,h)}getNodeType(e){var t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){var n=new pc(this,e,t);e:for(let e=t;e<n.end;){let t=n.char(e);for(var r of this.inlineParsers)if(r&&0<=(r=r(n,t,e))){e=r;continue e}e++}return n.resolveMarkers(0)}}(new kl(Ka).extend(kc),Object.keys(Pa).map(e=>Pa[e]),Object.keys(Pa).map(e=>$a[e]),Object.keys(Pa),qa,ka,Object.keys(ac).map(e=>ac[e]),Object.keys(ac),[]),yc={resolve:"Strikethrough",mark:"StrikethroughMark"},vc={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":ha.strikethrough}},{name:"StrikethroughMark",style:ha.processingInstruction}],parseInline:[{name:"Strikethrough",parse(e,t,n){var i,o,s;return 126!=t||126!=e.char(n+1)||126==e.char(n+2)?-1:(t=e.slice(n-1,n),s=e.slice(n+2,n+3),i=/\s|^$/.test(t),o=/\s|^$/.test(s),t=lc.test(t),s=lc.test(s),e.addDelimiter(yc,n,n+2,!o&&(!s||i||t),!i&&(!t||o||s)))},after:"Emphasis"}]};function wc(e,t,n=0,r,s=0){let i=0,o=!0,l=-1,a=-1,c=!1,h=()=>{r.push(e.elt("TableCell",s+l,s+a,e.parser.parseInline(t.slice(l,a),s+l)))};for(let d=n;d<t.length;d++){let n=t.charCodeAt(d);124!=n||c?(c||32!=n&&9!=n)&&(l<0&&(l=d),a=d+1):((!o||-1<l)&&i++,o=!1,r&&(-1<l&&h(),r.push(e.elt("TableDelimiter",d+s,d+s+1))),l=a=-1),c=!c&&92==n}return-1<l&&(i++,r&&h()),i}function xc(e,t){for(let n=t;n<e.length;n++){let t=e.charCodeAt(n);if(124==t)return 1;92==t&&n++}}const Cc=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class _c{constructor(){this.rows=null}nextLine(e,t,n){if(null==this.rows){let r;var s;this.rows=!1,45!=t.next&&58!=t.next&&124!=t.next||!Cc.test(r=t.text.slice(t.pos))||wc(e,n.content,0,s=[],n.start)==wc(e,r,t.pos)&&(this.rows=[e.elt("TableHeader",n.start,n.start+n.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}else if(this.rows){let n=[];wc(e,t.text,t.pos,n,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,n))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}const Sc={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":ha.heading}},"TableRow",{name:"TableCell",style:ha.content},{name:"TableDelimiter",style:ha.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,t)=>xc(t.content,0)?new _c:null,endLeaf(e,t,n){return!(n.parsers.some(e=>e instanceof _c)||!xc(t.text,t.basePos))&&(n=e.scanLine(e.absoluteLineEnd+1).text,Cc.test(n)&&wc(e,t.text,t.basePos)==wc(e,n,t.basePos))},before:"SetextHeading"}]};ha.list,ha.atom,ha.special(ha.content),ha.processingInstruction,ha.special(ha.content),ha.processingInstruction,ha.character;var Ac=Object.defineProperty;function Tc(e,t,n,r,s){if(!(e&&e.nodeSize&&null!=n&&n.length&&r))return[];e=function(e,t){const n=[];return t.includes("doc")&&n.push({node:e,pos:-1}),e.descendants((e,r)=>{if(e.isBlock&&-1<t.indexOf(e.type.name))return n.push({node:e,pos:r}),!1}),n}(e,n);let o=[];return e.forEach(e=>{let i;null!=s&&s.preRenderer&&(i=null!=(n=s.preRenderer(e.node,e.pos))?n:void 0);var n=r(e.node)||"*",n=t[n]||t["*"]||null;if(n){const c=n.parse(e.node.textContent,i),h=[];(function(e,t,n,s=e.length){t=new Gl(0,Array.isArray(t)?t:[t],n);t.highlightRange(e.cursor(),0,s,"",t.highlighters),t.flush(s)})(c,(null==s?void 0:s.highlighter)||da,(t,n,r)=>{t=Ps.inline(t+e.pos+1,n+e.pos+1,{class:r});h.push(t)}),null!=s&&s.postRenderer&&s.postRenderer(e.node,e.pos,Rl.addTree(c)),o=[...o,...h]}}),o}class Ec{constructor(e){((e,t)=>{((e,t,n)=>{t in e?Ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t,void 0)})(this,"cache"),this.cache={...e}}get(e){return this.cache[e]||null}set(e,t,n){e<0||(this.cache[e]={node:t,fragments:n})}replace(e,t,n,r){this.remove(e),this.set(t,n,r)}remove(e){delete this.cache[e]}invalidate(e){const t=new Ec(this.cache),n=e.mapping;return Object.keys(this.cache).forEach(r=>{var i,o,l,a,c,r=+r;r<0||(i=n.mapResult(r),o=e.doc.nodeAt(i.pos),{node:l,fragments:a}=this.get(r),c=e.mapping.maps.flatMap(e=>{const t=[];return e.forEach((e,n,r,s)=>{t.push({fromA:e,toA:n,fromB:r,toB:s})}),t}),i.deleted||null==o||!o.eq(l)?t.remove(r):r!==i.pos&&t.replace(r,i.pos,o,Rl.applyChanges(a,c)))}),t}}function Dc(e,t=0){if(e.docChanged&&e.doc.resolve(e.selection.to-t).before(1)===e.doc.content.size-e.doc.lastChild.nodeSize){const t=e.doc.type.schema.nodes.paragraph.create(null);e=e.insert(e.doc.content.size,t)}return e}function Nc(e,t){return[e.nodes.table,e.nodes.table_head,e.nodes.table_body,e.nodes.table_row,e.nodes.table_cell,e.nodes.table_header].includes(t)}function Ic(e,t){return Nc(e,t.$head.parent.type)}function Lc(e,t){return t.$head.parent.type===e.nodes.table_header}const zc=nl(Go,(e,t)=>(t(e.tr.replaceSelectionWith(e.schema.nodes.hard_break.create()).scrollIntoView()),!0));function Pc(e,t){return Rc(e,t,!1)}function Rc(e,t,n=!1){if(!Ic(e.schema,e.selection))return!1;if(t){var r=e.schema.nodes.paragraph,s=n?e.selection.$head.before(-3)-1:e.selection.$head.after(-3)+1,i=e.tr;try{i.doc.resolve(s)}catch(e){const t=n?s+1:s-1;i.insert(t,r.create())}i.setSelection(Ct.near(i.doc.resolve(Math.max(0,s)),1)),t(i.scrollIntoView())}return!0}function Bc(e,t){return $c(!0,e,t)}function Fc(e,t){return $c(!1,e,t)}function $c(e,t,n){if(!Ic(t.schema,t.selection)||Lc(t.schema,t.selection))return!1;if(n){const r=t.selection["$head"],s=r.node(-1),i=[];s.forEach(e=>{i.push(t.schema.nodes.table_cell.create(e.attrs))});var o=t.schema.nodes.table_row.create(null,i),e=e?r.before(-1):r.after(-1);n(t.tr.insert(e,o).scrollIntoView())}return!0}function qc(e,t){return Vc(!1,e,t)}function jc(e,t){return Vc(!0,e,t)}function Vc(e,t,n){if(!Ic(t.schema,t.selection))return!1;if(n){const r=t.selection.$head,s=r.node(-3),i=r.index(-1),o=[],l=r.start(-3);let a,c=(s.descendants((n,r)=>{if(!Nc(t.schema,n.type))return!1;if((a=n.type===t.schema.nodes.table_row?n.child(i):a)&&n==a){const t=e?s.resolve(r+1).before():s.resolve(r+1).after();o.push([n.type,l+t])}}),t.tr);for(const e of o.reverse())c=c.insert(e[1],e[0].create());n(c.scrollIntoView())}return!0}function Hc(e,t){if(!Ic(e.schema,e.selection)||Lc(e.schema,e.selection))return!1;if(t){var n=e.tr,r=e.selection.$head;if(1===r.node(-2).childCount)return Zc(e,t);n.delete(r.start(-1)-1,r.end(-1)+1),t(n.scrollIntoView())}return!0}function Uc(e,t){if(!Ic(e.schema,e.selection))return!1;if(t){const n=e.selection.$head,r=n.node(-3);if(1===n.node(-1).childCount)return Zc(e,t);const s=n.index(-1);let i;const o=[],l=n.start(-3);r.descendants((t,n)=>{if(!Nc(e.schema,t.type))return!1;(i=t.type===e.schema.nodes.table_row?t.childCount>=s+1?t.child(s):null:i)&&t==i&&o.push(r.resolve(n+1))});let a=e.tr;for(const e of o.reverse())a=a.delete(l+e.start()-1,l+e.end()+1);t(a.scrollIntoView())}return!0}function Wc(e,t){var n,r;return!!Ic(e.schema,e.selection)&&({$from:n,$to:r}=e.selection,n.start(-3)>=n.pos-3&&n.end(-3)<=r.pos+3?Zc(e,t):n.start(-1)>=n.pos-1&&n.end(-1)<=r.pos+1?Hc(e,t):!n.sameParent(r))}function Jc(e,t,n){if(-1!==n&&1!==n)return!1;if(!Ic(e.schema,e.selection))return!1;var r=e.selection.$head;for(let s=-1;-4<s;s--){var i=r.index(s),o=r.node(s);if(o)if(o.maybeChild(i+n))return o=-1===n?r.start()- -1*s*2:r.end()+-1*s*2,t(e.tr.setSelection(Ct.near(e.tr.doc.resolve(o),1)).scrollIntoView()),!0}return(1===n?Pc:function(e,t){return Rc(e,t,!0)})(e,t)}function Gc(e,t){return Jc(e,t,-1)}function Kc(e,t){return Jc(e,t,1)}function Zc(e,t){var n=e.selection.$head;return t&&t(e.tr.deleteRange(n.start(-3)-1,n.end(-3)+1)),!0}function Xc(e,t){if(!el(e.schema.nodes.table)(e))return!1;if(t){let n=1,r=1;var s=()=>e.schema.nodes.table_cell.create(null,e.schema.text("cell "+r++)),i=()=>e.schema.nodes.table_header.create(null,e.schema.text("header "+n++)),o=(...t)=>e.schema.nodes.table_row.create(null,t),s=(i=(t=>e.schema.nodes.table_head.create(null,t))(o(i(),i())),o=(t=>e.schema.nodes.table_body.create(null,t))([o(s(),s()),o(s(),s())]),e.schema.nodes.table.createChecked(null,[i,o]));t(Dc(e.tr.replaceSelectionWith(s),2).scrollIntoView())}return!0}class Qc extends Bi{constructor(e,t){super(Yc),this.validateLink=t;t=x();this.viewContainer=document.createElement("form"),this.viewContainer.className="mt6 bt bb bc-black-400 js-link-editor",this.viewContainer.innerHTML=y`<div class="d-flex fd-column gsy gs8 p12">
            <div class="flex--item">
                <label for="link-editor-href-input-${t}" class="s-label mb4">${a("link_editor.href_label")}</label>
                <input id="link-editor-href-input-${t}" class="s-input js-link-editor-href" type="text" name="href" aria-describedby="link-editor-href-error-${t}" />
                <p id="link-editor-href-error-${t}" class="s-input-message mt4 d-none js-link-editor-href-error"></p>
            </div>

            <div class="flex--item">
                <label for="link-editor-text-input-${t}" class="s-label mb4">${a("link_editor.text_label")}</label>
                <input id="link-text-href-input-${t}" class="s-input js-link-editor-text" type="text" name="text" />
            </div>

            <div class="flex--item">
                <button class="s-btn s-btn__primary js-link-editor-save-btn" type="submit" disabled>${a("link_editor.save_button")}</button>
                <button class="s-btn" type="reset">${a("link_editor.cancel_button")}</button>
            </div>
        </div>`,this.viewContainer.addEventListener("submit",t=>{t.preventDefault(),t.stopPropagation(),this.handleSave(e)}),this.viewContainer.addEventListener("reset",t=>{t.preventDefault(),t.stopPropagation();t=this.tryHideInterfaceTr(e.state);t&&e.dispatch(t)}),this.hrefInput.addEventListener("input",e=>{this.validate(e.target.value)})}get hrefInput(){return this.viewContainer.querySelector(".js-link-editor-href")}get textInput(){return this.viewContainer.querySelector(".js-link-editor-text")}get saveBtn(){return this.viewContainer.querySelector(".js-link-editor-save-btn")}get hrefError(){return this.viewContainer.querySelector(".js-link-editor-href-error")}validate(e){e=this.validateLink(e);return e?this.hideValidationError():this.showValidationError(a("link_editor.validation_error")),this.saveBtn.disabled=!e,e}showValidationError(e){var t=this.hrefInput.parentElement,n=this.hrefError;t.classList.add("has-error"),n.textContent=e,n.classList.remove("d-none")}hideValidationError(){var e=this.hrefInput.parentElement,t=this.hrefError;e.classList.remove("has-error"),t.textContent="",t.classList.add("d-none")}resetEditor(){this.hrefInput.value="",this.textInput.value="",this.hideValidationError()}handleSave(e){var t=this.hrefInput.value;if(this.validate(t)){var n=this.textInput.value||t,r=e.state.schema.text(n,[]);let s=this.tryHideInterfaceTr(e.state,{url:null,text:null})||e.state.tr;s=(s=(s=(s=s.replaceSelectionWith(r,!0)).setSelection(At.create(s.doc,s.selection.from-n.length,s.selection.to))).removeMark(s.selection.from,s.selection.to,e.state.schema.marks.link)).addMark(s.selection.from,s.selection.to,e.state.schema.marks.link.create({href:t})),e.dispatch(s)}}update(e){if(super.update(e),this.isShown){var t=Yc.getState(e.state),t=(null!=t&&t.url&&(this.hrefInput.value=t.url,this.validate(t.url)),null!=t&&t.text&&(this.textInput.value=t.text),this.tryShowInterfaceTr(e.state));t&&(t=Yc.forceHideTooltipTr(e.state.apply(t)),e.dispatch(t)),this.hrefInput.focus()}else{this.resetEditor();const t=this.tryHideInterfaceTr(e.state);t&&e.dispatch(t)}}destroy(){this.viewContainer.remove()}buildInterface(e){e.appendChild(this.viewContainer)}destroyInterface(e){e.removeChild(this.viewContainer)}}const Yc=new class extends Pi{constructor(){super(Qc.name)}forceHideTooltipTr(e){var t=this.getState(e);return th(t.decorations)?(t.forceHideTooltip=!0,this.setMeta(e.tr,t)):e.tr}};class eh{constructor(e){var t="link-tooltip-popover"+x();this.content=document.createElement("span"),this.content.className="w0",this.content.setAttribute("aria-controls",t),this.content.setAttribute("data-controller","s-popover"),this.content.setAttribute("data-s-popover-placement","bottom"),this.content.innerHTML=y`<div class="s-popover is-visible p4 w-auto wmx-initial wmn-initial js-link-tooltip"
            id="${t}"
            role="menu">
            <div class="s-popover--arrow"></div>
            <div class="d-flex ai-center">
                <a href="${this.href}"
                    class="wmx3 flex--item fs-body1 fw-normal truncate ml8 mr4"
                    target="_blank"
                    rel="nofollow noreferrer">${this.href}</a>
                <button type="button"
                        class="flex--item s-btn mr4 js-link-tooltip-edit"
                        title="${a("link_tooltip.edit_button_title")}"><span class="svg-icon icon-bg iconPencilSm"></span></button>
                <button type="button"
                        class="flex--item s-btn js-link-tooltip-remove"
                        title="${a("link_tooltip.remove_button_title")}"><span class="svg-icon icon-bg iconTrashSm"></span></button>
            </div>
        </div>`,this.content.addEventListener("s-popover:hide",e=>{e.preventDefault()}),this.bindElementInteraction(this.removeButton,e=>{this.removeListener.call(this,e)}),this.bindElementInteraction(this.editButton,e=>{this.editListener.call(this,e)}),this.update(e)}get editButton(){return this.content.querySelector(".js-link-tooltip-edit")}get removeButton(){return this.content.querySelector(".js-link-tooltip-remove")}get link(){return this.content.querySelector("a")}bindElementInteraction(e,t){e.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault(),t.call(this,e)}),e.addEventListener("keydown",e=>{"Tab"!==e.key&&(e.stopPropagation(),e.preventDefault(),"Enter"!==e.key&&" "!==e.key||t.call(this,e))})}update(e){if(this.isLink(e)){var t=this.findMarksInSelection(e);if(0<t.length){this.href=t[0].attrs.href;const e=this.link;e.href=e.title=e.innerText=this.href}}}getDecorations(e,t){if("forceHideTooltip"in e&&e.forceHideTooltip)return Fs.empty;if(!this.findMarksInSelection(t).length)return Fs.empty;this.update(t);e=Ps.widget(t.selection.from,e=>(this.updateEventListeners(e),this.content),{side:-1,ignoreSelection:!0,stopEvent:()=>!0});return Fs.create(t.doc,[e])}hasFocus(e){return this.content.contains(e.relatedTarget)}isLink(e){var{from:t,$from:n,to:r,empty:s}=e.selection;return s?void 0!==e.schema.marks.link.isInSet(e.storedMarks||n.marks()):e.doc.rangeHasMark(t,r,e.schema.marks.link)}expandSelection(e,t){e=this.linkAround(e);return t.setSelection(At.create(t.doc,e.from,e.to))}linkAround(e){var t=e.selection.$from,n=t.parent.childAfter(t.parentOffset);if(n.node){var r=rh(n.node.marks,e.schema.marks.link)[0];if(r){let s=t.index(),i=t.start()+n.offset;for(;0<s&&r.isInSet(t.parent.child(s-1).marks);)--s,i-=t.parent.child(s).nodeSize;let o=t.indexAfter(),l=i+n.node.nodeSize;for(;o<t.parent.childCount&&r.isInSet(t.parent.child(o).marks);)l+=t.parent.child(o).nodeSize,o+=1;return{from:i,to:l}}}}findMarksInSelection(e){const t=[],{to:n,from:r,$from:s,empty:i}=e.selection;return i?rh(s.marks(),e.schema.marks.link):(r<n&&e.doc.nodesBetween(r,n,n=>{t.push(rh(n.marks,e.schema.marks.link))}),[].concat(...t))}updateEventListeners(e){this.removeListener=()=>{let t=e.state;var n;e.state.selection.empty&&(n=this.expandSelection(t,t.tr),t=e.state.apply(n)),tl(e.state.schema.marks.link)(t,e.dispatch.bind(e))},this.editListener=()=>{let t=e.state.tr;e.state.selection.empty&&(t=this.expandSelection(e.state,e.state.tr));var n=e.state.apply(t),{from:r,to:s}=n.selection,r=n.doc.textBetween(r,s),s=this.findMarksInSelection(n)[0].attrs.href;t=Yc.showInterfaceTr(n,{forceHideTooltip:!0,url:s,text:r})||t,e.dispatch(t)}}}function th(e){return e&&e!==Fs.empty}function rh(e,t){return e.filter(e=>e.type===t)}const sh="    ";function ih(e){const t=mh(e),n=Yo(e);return(e,r)=>{var s,i;return t(e)?({$from:s,$to:i}=e.selection,null!=(i=(s=s.blockRange(i))&&rt(s))&&(r&&r(e.tr.lift(s,i)),!0)):n(e,r)}}function lh(e){return(t,n)=>{var r=t.schema.nodes.heading,s=mh(r,e),i=function(e){var{from:t,to:n}=e.selection;let r=0;return e.doc.nodesBetween(t,n,e=>{if("heading"===e.type.name)return r=e.attrs.level,!0}),r}(t);return!s(t)||6!==i&&i!==(null==e?void 0:e.level)?el(r,null!=e&&e.level?e:Object.assign(Object.assign({},e),{level:i+1}))(t,e=>{n&&n(Dc(e))}):el(t.schema.nodes.paragraph)(t,n)}}function ah(e){const{from:t,to:n}=e.selection,r=[];return e.doc.nodesBetween(t,n,(e,s)=>{if("code_block"===e.type.name){let i,o=s+1;e.textContent.split("\n").forEach(e=>{i=o+e.length,(t>=o&&n<=i||o>=t&&i<=n||t>=o&&t<=i||n>=o&&n<=i)&&r.push(o),o=i+1})}}),r}function ch(e,t){var n=ah(e),r=n.length;if(r<=0||!t)return 0<r;let s=e.tr;const{from:i,to:o}=e.selection,l=sh,a="code_block"===e.selection.$from.node().type.name;return n.reverse().forEach(e=>{s=s.insertText(l,e)}),s.setSelection(At.create(e.apply(s).doc,a?i+l.length:i,o+r*l.length)),t(s),!0}function hh(e,t){var n=ah(e),r=n.length;if(r<=0||!t)return 0<r;let s=e.tr;var{from:r,to:o}=e.selection;let l=0;const a=sh,c="code_block"===e.selection.$from.node().type.name;return n.reverse().forEach(t=>{e.doc.textBetween(t,t+a.length)===a&&(s=s.insertText("",t,t+a.length),l++)}),s.setSelection(At.create(e.apply(s).doc,c&&l?r-a.length:r,o-l*a.length)),t(s),!0}function dh(e,t){return(n,r)=>{if(n.selection.empty)return!1;if(!function(e,t){const n=[e.nodes.horizontal_rule,e.nodes.code_block,e.nodes.image],r=[e.marks.link,e.marks.code],s=0!=t.$head.marks().filter(e=>r.includes(e.type)).length;return!n.includes(t.$head.parent.type)&&!s}(n.schema,n.selection))return!1;if(r){let i=n.tr;if(mh(n.schema.nodes.tagLink)(n)){const e=n.selection.content().content.firstChild.attrs.tagName;i=n.tr.replaceSelectionWith(n.schema.text(e))}else{const r=null==(s=n.selection.content().content.firstChild)?void 0:s.textContent;if(r.endsWith(" ")){const{from:e,to:t}=n.selection;n.selection=At.create(n.doc,e,t-1)}if(!e(r.trim(),t))return!1;var s=n.schema.nodes.tagLink.create({tagName:r.trim(),tagType:t?"meta-tag":"tag"});i=n.tr.replaceSelectionWith(s)}r(i)}return!0}}function uh(e,t){if(Ic(e.schema,e.selection))return!1;if(t){var n=e.doc.content.size-1===Math.max(e.selection.from,e.selection.to),r=1===e.tr.selection.from;let s=e.tr.replaceSelectionWith(e.schema.nodes.horizontal_rule.create());r&&(s=s.insert(0,e.schema.nodes.paragraph.create())),t(s=n?s.insert(s.selection.to,e.schema.nodes.paragraph.create()):s)}return!0}function ph(e,t,n){return!(!Vi(n.state)||t&&(ji(n),0))}function fh(e,t,n){var r,s,i=tl(e.schema.marks.link,{href:null})(e,null);if(t&&i){let i,o;var l=e.selection.$anchor;if(e.selection.empty&&l.textOffset){const n=function(e){return e.selection.$anchor.textOffset?(e=e.selection.$anchor).parent.child(e.index()):null}(e),r=n.marks.find(t=>t.type===e.schema.marks.link);if(r){i=n.text,o=r.attrs.href;const s=l.pos;t(e.tr.setSelection(At.create(e.doc,s-l.textOffset,s-l.textOffset+i.length)))}}else{i=null!=(s=null==(r=e.selection.content().content.firstChild)?void 0:r.textContent)?s:null;const t=/^http(s)?:\/\/\S+$/.exec(i);o=0<(null==t?void 0:t.length)?t[0]:""}!function(e,t,n){t=Yc.showInterfaceTr(e.state,{url:t,text:n});t&&e.dispatch(t)}(n,o,i)}return i}function mh(e,t){return function(n){var{from:r,to:s}=n.selection;let i=!1,o=!t;return n.doc.nodesBetween(r,s,n=>{i=n.type.name===e.name;for(const e in t)o=n.attrs[e]===t[e];return!(i&&o)}),i&&o}}function gh(e){return function(t){var{from:n,$from:r,to:s,empty:i}=t.selection;return i?!!e.isInSet(t.storedMarks||r.marks()):t.doc.rangeHasMark(n,s,e)}}function kh(e,t){var r=e.selection.$cursor,s=e.storedMarks||r.marks();if(null==s||!s.length)return!1;s=s.filter(e=>e.type.spec.exitable);if(null==s||!s.length)return!1;const o=r.nodeAfter;let l,a=e.tr;return!!(l=o&&null!=(r=o.marks)&&r.length?s.filter(e=>!e.type.isInSet(o.marks)):s).length&&(t&&(l.forEach(e=>{a=a.removeStoredMark(e)}),t(a=o?a:a.insertText(" "))),!0)}const vh=(e,t,n)=>{var r;return[{name:"formatting1",priority:0,entries:[fi((e=>gi("Header",a("commands.heading.dropdown",{shortcut:w("Mod-H")}),"heading-dropdown",()=>!0,mh(e.nodes.heading),pi(a("commands.heading.entry",{level:1}),{richText:{command:lh({level:1}),active:mh(e.nodes.heading,{level:1})},commonmark:null},"h1-btn",["fs-body3","mt8"]),pi(a("commands.heading.entry",{level:2}),{richText:{command:lh({level:2}),active:mh(e.nodes.heading,{level:2})},commonmark:null},"h2-btn",["fs-body2"]),pi(a("commands.heading.entry",{level:3}),{richText:{command:lh({level:3}),active:mh(e.nodes.heading,{level:3})},commonmark:null},"h3-btn",["fs-body1"])))(e),n===S.RichText),fi({key:"toggleHeading",richText:null,commonmark:No,display:mi("Header",a("commands.heading.dropdown",{shortcut:w("Mod-H")}),"heading-btn")},n===S.Commonmark),{key:"toggleBold",richText:{command:tl(e.marks.strong),active:gh(e.marks.strong)},commonmark:To,display:mi("Bold",a("commands.bold",{shortcut:w("Mod-B")}),"bold-btn")},{key:"toggleEmphasis",richText:{command:tl(e.marks.em),active:gh(e.marks.em)},commonmark:Eo,display:mi("Italic",a("commands.emphasis",{shortcut:w("Mod-I")}),"italic-btn")},{key:"toggleCode",richText:{command:tl(e.marks.code),active:gh(e.marks.code)},commonmark:Oo,display:mi("Code",a("commands.inline_code",{shortcut:w("Mod-K")}),"code-btn")},fi({key:"toggleStrike",richText:{command:tl(e.marks.strike),active:gh(e.marks.strike)},commonmark:Io,display:mi("Strikethrough",a("commands.strikethrough"),"strike-btn")},null==(r=t.parserFeatures)?void 0:r.extraEmphasis)]},{name:"formatting2",priority:10,entries:[{key:"toggleLink",richText:fh,commonmark:Co,display:mi("Link",a("commands.link",{shortcut:w("Mod-L")}),"insert-link-btn")},{key:"toggleBlockquote",richText:{command:ih(e.nodes.blockquote),active:mh(e.nodes.blockquote)},commonmark:Lo,display:mi("Quote",a("commands.blockquote",{shortcut:w("Mod-Q")}),"blockquote-btn")},{key:"toggleCodeblock",richText:{command:function(e,t){return(n,r)=>mh(e,t)(n)?el(n.schema.nodes.paragraph)(n,r):el(e,t)(n,e=>{r&&r(Dc(e))})}(e.nodes.code_block),active:mh(e.nodes.code_block)},commonmark:Ro,display:mi("Codeblock",a("commands.code_block",{shortcut:w("Mod-M")}),"code-block-btn")},fi({key:"insertImage",richText:ph,commonmark:jo,display:mi("Image",a("commands.image",{shortcut:w("Mod-G")}),"insert-image-btn")},!(null==(r=t.imageUpload)||!r.handler)),fi({key:"insertTable",richText:{command:Xc,visible:e=>!Ic(e.schema,e.selection)},commonmark:So,display:mi("Table",a("commands.table_insert",{shortcut:w("Mod-E")}),"insert-table-btn")},null==(r=t.parserFeatures)?void 0:r.tables),fi(n===S.RichText&&gi("Table",a("commands.table_edit"),"table-dropdown",e=>Ic(e.schema,e.selection),()=>!1,ui("Column","columnSection"),pi(a("commands.table_column.remove"),{richText:Uc,commonmark:null},"remove-column-btn"),pi(a("commands.table_column.insert_before"),{richText:jc,commonmark:null},"insert-column-before-btn"),pi(a("commands.table_column.insert_after"),{richText:qc,commonmark:null},"insert-column-after-btn"),ui("Row","rowSection"),pi(a("commands.table_row.remove"),{richText:Hc,commonmark:null},"remove-row-btn"),pi(a("commands.table_row.insert_before"),{richText:Bc,commonmark:null},"insert-row-before-btn"),pi(a("commands.table_row.insert_after"),{richText:Fc,commonmark:null},"insert-row-after-btn")),null==(r=t.parserFeatures)?void 0:r.tables)]},{name:"formatting3",priority:20,entries:[{key:"toggleOrderedList",richText:{command:ih(e.nodes.ordered_list),active:mh(e.nodes.ordered_list)},commonmark:zo,display:mi("OrderedList",a("commands.ordered_list",{shortcut:w("Mod-O")}),"numbered-list-btn")},{key:"toggleUnorderedList",richText:{command:ih(e.nodes.bullet_list),active:mh(e.nodes.bullet_list)},commonmark:Po,display:mi("UnorderedList",a("commands.unordered_list",{shortcut:w("Mod-U")}),"bullet-list-btn")},{key:"insertRule",richText:uh,commonmark:Mo,display:mi("HorizontalRule",a("commands.horizontal_rule",{shortcut:w("Mod-R")}),"horizontal-rule-btn")},((e,t)=>{var n;return gi("EllipsisHorizontal",a("commands.moreFormatting"),"more-formatting-dropdown",()=>!0,()=>!1,pi(a("commands.tagLink",{shortcut:w("Mod-[")}),{richText:{command:dh(null==(n=null==(n=t.parserFeatures)?void 0:n.tagLinks)?void 0:n.validate,!1),active:mh(e.nodes.tagLink)},commonmark:_o(null==(n=null==(n=t.parserFeatures)?void 0:n.tagLinks)?void 0:n.validate,!1)},"tag-btn"),pi(a("commands.metaTagLink",{shortcut:w("Mod-]")}),{richText:{command:dh(null==(n=null==(n=t.parserFeatures)?void 0:n.tagLinks)?void 0:n.validate,!0),active:mh(e.nodes.tagLink)},commonmark:_o(null==(t=null==(n=t.parserFeatures)?void 0:n.tagLinks)?void 0:t.validate,!0)},"meta-tag-btn"),pi(a("commands.spoiler",{shortcut:w("Mod-/")}),{richText:{command:ih(e.nodes.spoiler),active:mh(e.nodes.spoiler)},commonmark:Bo},"spoiler-btn"),pi(a("commands.sub",{shortcut:w("Mod-,")}),{richText:{command:tl(e.marks.sub),active:gh(e.marks.sub)},commonmark:$o},"subscript-btn"),pi(a("commands.sup",{shortcut:w("Mod-.")}),{richText:{command:tl(e.marks.sup),active:gh(e.marks.sup)},commonmark:Fo},"superscript-btn"),pi(a("commands.kbd",{shortcut:w("Mod-'")}),{richText:{command:tl(e.marks.kbd),active:gh(e.marks.kbd)},commonmark:qo},"kbd-btn"))})(e,t)]},{name:"history",priority:30,entries:[{key:"undo-btn",richText:on,commonmark:on,display:mi("Undo",a("commands.undo",{shortcut:w("Mod-Z")}),"undo-btn")},{key:"redo-btn",richText:ln,commonmark:ln,display:mi("Refresh",a("commands.redo",{shortcut:w("Mod-Y")}),"redo-btn")}],classes:["d-none sm:d-inline-flex vk:d-inline-flex"]},{name:"other",priority:40,entries:[function(e,t,n,r){const s=document.createElement("a");return s.className="s-editor-btn s-btn flex--item js-editor-btn js-"+r,s.href=n,s.target="_blank",s.title=t,s.setAttribute("aria-label",t),s.dataset.controller="s-tooltip",s.dataset.sTooltipPlacement="top",(t=document.createElement("span")).className="icon-bg icon"+e,s.append(t),{key:r,richText:e={command:(e,t)=>(t&&window.open(s.href,s.target),!!n),active:()=>!1},commonmark:e,display:s}}("Help",a("commands.help"),t.editorHelpLink,"help-link")]}]};class wh extends A{constructor(e,t,n,r={}){super(),this.options=u(wh.defaultOptions,r);var i,l,r=yi(n.getFinalizedMenu(vh(cl,this.options,S.Commonmark),cl),this.options.menuParentContainer,S.Commonmark);this.editorView=new ii(t=>{this.setTargetNodeAttributes(t,this.options),e.appendChild(t)},{editable:Zi,state:$t.create({doc:this.parseContent(t),plugins:[sn(),...function(e){var t=po(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_("Mod-z",on)),_("Mod-y",ln)),_("Mod-Shift-z",ln)),{Tab:Do,"Shift-Tab":Do}),_("Mod-b",To)),_("Mod-i",Eo)),_("Mod-l",Co)),_("Ctrl-q",Lo)),_("Mod-k",Oo)),_("Mod-g",jo)),_("Ctrl-g",jo)),_("Mod-o",zo)),_("Mod-u",Po)),_("Mod-h",No)),_("Mod-r",Mo)),_("Mod-m",Ro)),_("Mod-[",_o(e.tagLinks.validate,!1))),_("Mod-]",_o(e.tagLinks.validate,!0))),_("Mod-/",Bo)),_("Mod-,",$o)),_("Mod-.",Fo)),_("Mod-'",qo)),_("Mod-a",Ao))),n=po(Object.assign({},_("Mod-e",So))),t=[t,po(ll)];return e.tables&&t.unshift(n),t}(this.options.parserFeatures),r,null!=(l=this.options.preview)&&l.enabled?new wi({key:Si,state:{init:()=>({isShown:l.shownByDefault}),apply(e,t){var e=this.getMeta(e);return{isShown:null!=(e=null==e?void 0:e.isShown)?e:t.isShown}}},view(e){var t=((null==l?void 0:l.parentContainer)||function(e){return e.dom.parentElement})(e);if(t.contains(e.dom))throw"Preview parentContainer must not contain the editor view";return new _i(e,t,l)}}):new jt({}),function(e){var t=Jl([{tag:ha.quote,class:"hljs-quote"},{tag:ha.contentSeparator,class:"hljs-built_in"},{tag:ha.heading1,class:"hljs-section"},{tag:ha.heading2,class:"hljs-section"},{tag:ha.heading3,class:"hljs-section"},{tag:ha.heading4,class:"hljs-section"},{tag:ha.heading5,class:"hljs-section"},{tag:ha.heading6,class:"hljs-section"},{tag:ha.comment,class:"hljs-comment"},{tag:ha.escape,class:"hljs-literal"},{tag:ha.character,class:"hljs-symbol"},{tag:ha.emphasis,class:"hljs-emphasis"},{tag:ha.strong,class:"hljs-strong"},{tag:ha.link,class:"hljs-string"},{tag:ha.monospace,class:"hljs-code"},{tag:ha.url,class:"hljs-link"},{tag:ha.processingInstruction,class:"hljs-symbol"},{tag:ha.labelName,class:"hljs-string"},{tag:ha.string,class:"hljs-string"},{tag:ha.tagName,class:"hljs-tag"},{tag:ha.strikethrough,class:"tok-strike"},{tag:ha.heading,class:"hljs-strong"},{tag:ha.content,class:""},{tag:ha.list,class:""}]),n=[],r={};return e.extraEmphasis&&n.push(vc),e.tables&&n.push(Sc),e.html&&(r["HTMLBlock HTMLTag"]=ha.tagName),function(e,t,r){const s=function(e){var t=e.attrs.detectedHighlightLanguage,e=e.attrs.params;return t||(null==e?void 0:e.split(" ")[0])||""},i=(n,i)=>({content:Tc(n,e,t,s,{preRenderer:(e,t)=>{return null==(t=i.get(t))?void 0:t.fragments},postRenderer:(e,t,n)=>{i.set(t,e,n)},highlighter:r})}),o=new Ut;return new jt({key:o,state:{init(e,t){var n=new Ec({}),r=i(t.doc,n);return{cache:n,decorations:Fs.create(t.doc,r.content)}},apply(e,t){var r,n=t.cache.invalidate(e);return e.docChanged?(r=i(e.doc,n),{cache:n,decorations:Fs.create(e.doc,r.content)}):{cache:n,decorations:t.decorations.map(e.mapping,e.doc)}}},props:{decorations(e){return null==(e=this.getState(e))?void 0:e.decorations}}})}({"*":bc.configure([{props:[Hl(r)]},...n])},["code_block"],t)}(this.options.parserFeatures),Ri(this.options.pluginParentContainer),(i=this.options.imageUpload,t=this.options.parserFeatures.validateLink,Hi(i,t,(e,t,n)=>{var r=a("image_upload.default_image_alt_text");let s=`![${r}](${t})`,o=n+2,l=o+r.length;i.embedImagesAsLinks?(s=s.slice(1),--o,--l):i.wrapImagesInLinks&&(s=`[${s}](${t})`,o+=1,l+=1);r=e.tr.insertText(s,n);return r.setSelection(At.create(e.apply(r).doc,o,l)),r})),Gi(this.options.placeholderText),Qi(),Yi,Li,hl,...n.plugins.commonmark]}),plugins:[]}),this.editorView.state.doc.toJSON()}static get defaultOptions(){return{editorHelpLink:null,menuParentContainer:null,parserFeatures:M,placeholderText:null,imageUpload:{handler:$i},preview:{enabled:!1,parentContainer:null,renderer:null}}}parseContent(e){return eo.fromSchema(cl).parseCode(e)}serializeContent(){return eo.toString(this.editorView.state.doc)}}var xh=Object.defineProperty,Ch=(e,t,n)=>(((e,t,n)=>{t in e?xh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Sh{constructor(e,t,n){Ch(this,"buffer"),Ch(this,"nodeQueue"),Ch(this,"classPrefix"),Ch(this,"currentPosition"),this.buffer=[],this.nodeQueue=[],this.classPrefix=n,this.currentPosition=t+1,e.walk(this)}get currentNode(){return this.nodeQueue.length?this.nodeQueue.slice(-1):null}addText(e){this.currentNode&&(this.currentPosition+=e.length)}openNode(e){var t=e.scope||"",t=e.sublanguage?"language-"+t:this.expandScopeName(t),n=this.newNode();n.scope=e.scope,n.classes=t,n.from=this.currentPosition,this.nodeQueue.push(n)}closeNode(e){var t=this.nodeQueue.pop();if(!t)throw"Cannot close node!";if(t.to=this.currentPosition,e.scope!==t.scope)throw"Mismatch!";this.buffer.push(t)}value(){return this.buffer}newNode(){return{from:0,to:0,scope:void 0,classes:""}}expandScopeName(e){var t,n;return e.includes(".")?(n=(t=e.split(".")).shift()||"",[""+this.classPrefix+n,...t.map((e,t)=>""+e+"_".repeat(t+1))].join(" ")):""+this.classPrefix+e}}class Mh{constructor(e){Ch(this,"cache"),this.cache={...e}}get(e){return this.cache[e]||null}set(e,t,n){e<0||(this.cache[e]={node:t,decorations:n})}replace(e,t,n,r){this.remove(e),this.set(t,n,r)}remove(e){delete this.cache[e]}invalidate(e){const t=new Mh(this.cache),n=e.mapping;return Object.keys(this.cache).forEach(r=>{r=+r;if(!(r<0)){var i=n.mapResult(r),o=e.doc.nodeAt(i.pos),{node:l,decorations:a}=this.get(r);if(i.deleted||null==o||!o.eq(l))t.remove(r);else if(r!==i.pos){const e=a.map(e=>e.map(n,0,0)).filter(e=>null!==e);t.replace(r,i.pos,o,e)}}}),t}}const Ah={bsh:"bash",csh:"bash",sh:"bash",c:"cpp",cc:"cpp",cxx:"cpp",cyc:"cpp",m:"cpp",cs:"csharp",coffee:"coffeescript",html:"xml",xsl:"xml",js:"javascript",pl:"perl",py:"python",cv:"python",rb:"ruby",clj:"clojure",erl:"erlang",hs:"haskell",mma:"mathematica",tex:"latex",cl:"lisp",el:"lisp",lsp:"lisp",scm:"scheme",ss:"scheme",rkt:"scheme",fs:"ocaml",ml:"ocaml",s:"r",rc:"rust",rs:"rust",vhd:"vhdl",none:"plaintext"};function Th(e,t="none"){return e=(e.attrs.params||"").split(/\s/)[0].toLowerCase()||t||null,Ah[e]||e}function Eh(e){var t=function(){let e=globalThis.hljs;if(!e)try{e=r(7500)}catch(e){}return e&&e.highlight?e:null}();return t?function(e,t,n){const s=n,i=function(e,t,n,r){t=t.attrs||{};return t.detectedHighlightLanguage=r,e.setNodeMarkup(n,void 0,t)},o=(n,r)=>{const i=[];return{content:function(e,t,n,r,s){if(!(e&&e.nodeSize&&null!=n&&n.length&&r))return[];e=function(e,t){const n=[];return t.includes("doc")&&n.push({node:e,pos:-1}),e.descendants((e,r)=>{if(e.isBlock&&-1<t.indexOf(e.type.name))return n.push({node:e,pos:r}),!1}),n}(e,n);let o=[];return e.forEach(e=>{if(null!=s&&s.preRenderer){const t=s.preRenderer(e.node,e.pos);if(t)return void(o=[...o,...t])}var n=r(e.node);if(!n||t.getLanguage(n)){var i=n?t.highlight(e.node.textContent,{language:n}):t.highlightAuto(e.node.textContent);!n&&i.language&&null!=s&&s.autohighlightCallback&&s.autohighlightCallback(e.node,e.pos,i.language);const l=i._emitter,a=new Sh(l,e.pos,l.options.classPrefix).value(),c=[];a.forEach(e=>{e.scope&&(e=Ps.inline(e.from,e.to,{class:e.classes}),c.push(e))}),null!=s&&s.postRenderer&&s.postRenderer(e.node,e.pos,c),o=[...o,...c]}}),o}(n,e,t,s,{preRenderer:(e,t)=>{return null==(t=r.get(t))?void 0:t.decorations},postRenderer:(e,t,n)=>{r.set(t,e,n)},autohighlightCallback:(e,t,n)=>{i.push({node:e,pos:t,language:n})}}),autodetectedLanguages:i}},l=new Ut;return new jt({key:l,state:{init(e,t){var n=new Mh({}),r=o(t.doc,n);return{cache:n,decorations:Fs.create(t.doc,r.content),autodetectedLanguages:r.autodetectedLanguages}},apply(e,t){var r,n=t.cache.invalidate(e);return e.docChanged?(r=o(e.doc,n),{cache:n,decorations:Fs.create(e.doc,r.content),autodetectedLanguages:r.autodetectedLanguages}):{cache:n,decorations:t.decorations.map(e.mapping,e.doc),autodetectedLanguages:[]}}},props:{decorations(e){return null==(e=this.getState(e))?void 0:e.decorations}},view(e){var t=e=>{var t=l.getState(e.state);if(t&&t.autodetectedLanguages.length){let n=e.state.tr;t.autodetectedLanguages.forEach(e=>{e.language&&(n=i(n,e.node,e.pos,e.language)||n)}),n=n.setMeta("addToHistory",!1),e.dispatch(n)}};return t(e),{update:t}}})}(t,["code_block"],t=>t.attrs.detectedHighlightLanguage||Th(t,e)):new jt({})}rl=r(7024),so=r.n(rl),Ai=r(9980),Qo=new Se({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"==e&&null}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",e.attrs]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code"]}}});class Lh{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:q.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(e){let t,n=this.top(),r=n.content,s=r[r.length-1],i=this.schema.text(e,n.marks);s&&(t=function(e,t){if(e.isText&&t.isText&&q.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(s,i))?r[r.length-1]=t:r.push(i)}}openMark(e){var t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){var t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){var n=e[t],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n,e,t)}}addNode(e,t,n){var r=this.top(),e=e.createAndFill(t,n,r?r.marks:[]);return e?(this.push(e),e):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:q.none})}closeNode(){var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function zh(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function Ph(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function Rh(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function Bh(){}class Fh{constructor(e,t,n){this.schema=e,this.tokenizer=t,this.tokens=n,this.tokenHandlers=function(e,t){var r,n=Object.create(null);for(r in t){let s=t[r];if(s.block){let t=e.nodeType(s.block);Ph(s,r)?n[r]=(e,n,r,i)=>{e.openNode(t,zh(s,n,r,i)),e.addText(Rh(n.content)),e.closeNode()}:(n[r+"_open"]=(e,n,r,i)=>e.openNode(t,zh(s,n,r,i)),n[r+"_close"]=e=>e.closeNode())}else if(s.node){let t=e.nodeType(s.node);n[r]=(e,n,r,i)=>e.addNode(t,zh(s,n,r,i))}else if(s.mark){let t=e.marks[s.mark];Ph(s,r)?n[r]=(e,n,r,i)=>{e.openMark(t.create(zh(s,n,r,i))),e.addText(Rh(n.content)),e.closeMark(t)}:(n[r+"_open"]=(e,n,r,i)=>e.openMark(t.create(zh(s,n,r,i))),n[r+"_close"]=e=>e.closeMark(t))}else{if(!s.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(s));Ph(s,r)?n[r]=Bh:(n[r+"_open"]=Bh,n[r+"_close"]=Bh)}}return n.text=(e,t)=>e.addText(t.content),n.inline=(e,t)=>e.parseTokens(t.children),n.softbreak=n.softbreak||(e=>e.addText("\n")),n}(e,n)}parse(e){let t,n=new Lh(this.schema,this.tokenHandlers);for(n.parseTokens(this.tokenizer.parse(e,{}));t=n.closeNode(),n.stack.length;);return t||this.schema.topNodeType.createAndFill()}}function $h(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}rl=new Fh(Qo,Ai("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:$h(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:$h(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});class jh{constructor(e,t,n={}){this.nodes=e,this.marks=t,this.options=n}serialize(e,t={}){t=Object.assign(this.options,t);t=new Uh(this.nodes,this.marks,t);return t.renderContent(e),t.out}}Qo=new jh({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){e.write("```"+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,s=e.repeat(" ",r+2);e.renderList(t,s,t=>{t=String(n+t);return e.repeat(" ",r-t.length)+t+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let s=r+1;s<n.childCount;s++)if(n.child(s).type!=t.type)return void e.write("\\\n")},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:(e,t,n,r)=>(e.inAutolink=function(e,t,n){var r;return!(e.attrs.title||!/^\w+:/.test(e.attrs.href))&&!(!(r=t.child(n)).isText||r.text!=e.attrs.href||r.marks[r.marks.length-1]!=e||n!=t.childCount-1&&e.isInSet(t.child(n+1).marks))}(t,n,r),e.inAutolink?"<":"["),close(e,t,n,r){var s=e["inAutolink"];return e.inAutolink=void 0,s?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open:(e,t,n,r)=>Hh(n.child(r),-1),close:(e,t,n,r)=>Hh(n.child(r-1),1),escape:!1}});function Hh(e,t){let n,r=/`+/g,s=0;if(e.isText)for(;n=r.exec(e.text);)s=Math.max(s,n[0].length);let i=0<s&&0<t?" `":"`";for(let e=0;e<s;e++)i+="`";return 0<s&&t<0&&(i+=" "),i}class Uh{constructor(e,t,n){this.nodes=e,this.marks=t,this.options=n,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,void 0===this.options.tightLists&&(this.options.tightLists=!1)}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+="\n"),1<e){let t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(let n=1;n<e;n++)this.out+=t+"\n"}this.closed=null}}wrapBlock(e,t,n,r){var s=this.delim;this.write(t||e),this.delim+=e,r(),this.delim=s,this.closeBlock(n)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+="\n")}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){var n=e.split("\n");for(let e=0;e<n.length;e++)this.write(),!t&&"["==n[e][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(n[e],this.atBlockStart):n[e],e!=n.length-1&&(this.out+="\n")}render(e,t,n){if("number"==typeof t)throw new Error("!");if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");this.nodes[e.type.name](this,e,t,n)}renderContent(e){e.forEach((t,n,r)=>this.render(t,e,r))}renderInline(e){this.atBlockStart=!0;let t=[],n="",r=(r,s,i)=>{let o=r?r.marks:[],l=(r&&"hard_break"===r.type.name&&(o=o.filter(t=>{var n;return i+1!=e.childCount&&(n=e.child(i+1),t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text)))})),n);if(n="",r&&r.isText&&o.some(n=>{var r=this.marks[n.type.name];return r&&r.expelEnclosingWhitespace&&!(n.isInSet(t)||i<e.childCount-1&&n.isInSet(e.child(i+1).marks))})){let[,s,i,a]=/^(\s*)(.*?)(\s*)$/m.exec(r.text);l+=s,n=a,(s||a)&&((r=i?r.withText(i):null)||(o=t))}var a=o.length?o[o.length-1]:null,c=a&&!1===this.marks[a.type.name].escape,h=o.length-(c?1:0);e:for(let e=0;e<h;e++){let n=o[e];if(!this.marks[n.type.name].mixable)break;for(let r=0;r<t.length;r++){let s=t[r];if(!this.marks[s.type.name].mixable)break;if(n.eq(s)){e>r?o=o.slice(0,r).concat(n).concat(o.slice(r,e)).concat(o.slice(e+1,h)):r>e&&(o=o.slice(0,e).concat(o.slice(e+1,r)).concat(n).concat(o.slice(r,h)));continue e}}}let d=0;for(;d<Math.min(t.length,h)&&o[d].eq(t[d]);)++d;for(;d<t.length;)this.text(this.markString(t.pop(),!1,e,i),!1);if(l&&this.text(l),r){for(;t.length<h;){let n=o[t.length];t.push(n),this.text(this.markString(n,!0,e,i),!1)}c&&r.isText?this.text(this.markString(a,!0,e,i)+r.text+this.markString(a,!1,e,i+1),!1):this.render(r,e,i)}};e.forEach(r),r(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,n){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let r=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,s=this.inTightList;this.inTightList=r,e.forEach((s,i,o)=>{o&&r&&this.flushClose(1),this.wrapBlock(t,n(o),e,()=>this.render(s,e,o))}),this.inTightList=s}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(t,n)=>"_"==t&&0<n&&n+1<e.length&&e[n-1].match(/\w/)&&e[n+1].match(/\w/)?t:"\\"+t),t&&(e=e.replace(/^[#\-*+>]/,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),e=this.options.escapeExtraCharacters?e.replace(this.options.escapeExtraCharacters,"\\$&"):e}quote(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}markString(e,t,n,r){var s=this.marks[e.type.name],t=t?s.open:s.close;return"string"==typeof t?t:t(this,e,n,r)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}function Jh(e){e.core.ruler.push("hardbreak-markup",function(e){return function Wh(e,t=null){for(let n=0;n<e.length;n++){var r=e[n];r.children&&Wh(r.children,r),"hardbreak"===r.type&&(/\s\s\n/.test(null==t?void 0:t.content)?r.markup="  \n":/\\\n/.test(null==t?void 0:t.content)&&(r.markup="\\\n"))}}(e.tokens),!1})}var Gh,Ai=r(5872),Zh=r.n(Ai);!function(e){e[e.unknown=0]="unknown",e[e.comment=1]="comment",e[e.strike=2]="strike",e[e.strong=3]="strong",e[e.emphasis=4]="emphasis",e[e.hardbreak=5]="hardbreak",e[e.code=6]="code",e[e.link=7]="link",e[e.image=8]="image",e[e.keyboard=9]="keyboard",e[e.pre=10]="pre",e[e.sup=11]="sup",e[e.sub=12]="sub",e[e.heading=13]="heading",e[e.paragraph=14]="paragraph",e[e.horizontal_rule=15]="horizontal_rule",e[e.blockquote=16]="blockquote",e[e.list_item=17]="list_item",e[e.ordered_list=18]="ordered_list",e[e.unordered_list=19]="unordered_list",e[e.description_details=20]="description_details",e[e.description_list=21]="description_list",e[e.description_term=22]="description_term"}(Gh=Gh||{});const Xh={[Gh.link]:["href","title"],[Gh.image]:["alt","height","src","title","width"]},Qh=[Gh.blockquote,Gh.heading,Gh.list_item,Gh.ordered_list,Gh.unordered_list,Gh.description_details,Gh.description_list,Gh.description_term,Gh.paragraph,Gh.horizontal_rule,Gh.pre],Yh=[Gh.hardbreak,Gh.image,Gh.horizontal_rule];function ed(e){var t;if(!e)return{type:Gh.unknown,isSelfClosing:!1,isClosing:!1,isBlock:!1,tagName:null,attributes:{},markup:null};let n=Gh.unknown;var r=/^<\/\S+?.*?>$/.test(e),s=e.replace(/[<>/]/g,"").trim().split(/\s/)[0];n=["del","strike","s"].includes(s)?Gh.strike:["b","strong"].includes(s)?Gh.strong:["em","i"].includes(s)?Gh.emphasis:"code"===s?Gh.code:"br"===s?Gh.hardbreak:"blockquote"===s?Gh.blockquote:"a"===s?Gh.link:"img"===s?Gh.image:/h[1,2,3,4,5,6]/.test(s)?Gh.heading:"kbd"===s?Gh.keyboard:"pre"===s?Gh.pre:"sup"===s?Gh.sup:"sub"===s?Gh.sub:"ul"===s?Gh.unordered_list:"ol"===s?Gh.ordered_list:"li"===s?Gh.list_item:"p"===s?Gh.paragraph:"hr"===s?Gh.horizontal_rule:"dd"===s?Gh.description_details:"dl"===s?Gh.description_list:"dt"===s?Gh.description_term:Gh.unknown;let i=s?`<${r?"/":""}${s}>`:"";var o=Yh.includes(n),l=(o&&(i=e.replace(/^(<[a-z]+).*?([^\S\r\n]?\/?>)$/is,"$1$2")),{}),a=Xh[n];if(null!=a&&a.length)for(const n of a)l[n]=(null==(t=new RegExp(n+`=["'](.+?)["']`).exec(e))?void 0:t[1])||"";return{type:n,isSelfClosing:o,isClosing:r,isBlock:Qh.includes(n),tagName:s,attributes:l,markup:i}}function td(e,t){var n=t||new(Zh())("","",0),r=e.isSelfClosing?"":e.isClosing?"_close":"_open";let s="";switch(e.type){case Gh.unknown:s="text";break;case Gh.strike:s="s"+r;break;case Gh.emphasis:s="em"+r;break;case Gh.code:s="code_inline_split"+r;break;case Gh.horizontal_rule:s="hr";break;case Gh.link:s="link"+r,n.attrSet("href",e.attributes.href),n.attrSet("title",e.attributes.title);break;case Gh.image:s="image",n.attrSet("src",e.attributes.src),n.attrSet("height",e.attributes.height),n.attrSet("width",e.attributes.width),n.attrSet("alt",e.attributes.alt),n.attrSet("title",e.attributes.title);break;case Gh.keyboard:s="kbd"+r;break;default:s=Gh[e.type]+r}return n.type=s,n.markup=e.markup,n.nesting=e.isClosing?-1:1,e.isSelfClosing&&(n.nesting=0),n.tag=e.tagName||"",n}function nd(e,t){var n,r;return e.block?[e]:(n=[Gh.blockquote,Gh.pre],(r=new(Zh())("inline","",0)).children=[e],!t||n.includes(t)?[new(Zh())("paragraph_open","p",1),r,new(Zh())("paragraph_close","p",-1)]:[r])}function rd(e){let t=null;return"html_inline"===e.type?t=ed(e.content):e.children&&e.children.length&&(e.children=sd(e.children)),t&&(t.isBlock||(e=td(t,e)).attrSet("inline_html","true")),e}function sd(e){for(let t=0,n=(e=e.map(rd).filter(e=>!!e)).length;t<n;t++){const n=e[t];if(n.attrGet("inline_html"))if(n.type.includes("_close")&&!n.attrGet("paired"))n.type="html_inline";else if(n.type.includes("_open")){let r=!1;for(let s=t+1,i=e.length;s<i;s++){const t=e[s];if(t&&t.attrGet("inline_html")&&!t.attrGet("paired")&&n.tag===t.tag){r=!0,t.attrSet("paired","true");break}}r||(n.type="html_inline")}}return e}function id(e){var t=null==(t=e.match(/(<\/?[a-z]+.*?>)/gi))?void 0:t.map(e=>({match:e,tagInfo:ed(e)}));if(!t||!t.length)return e;let r=e;return t.forEach(e=>{let t;if(e.tagInfo.type===Gh.unknown)t="";else if(e.tagInfo.type===Gh.image){var n=e.match.match(/((width|height|src|alt|title)=["'].+?["'])/g);let r=e.tagInfo.markup;null!=n&&n.length&&(r=r.replace("<img","<img "+n.join(" "))),t=r}else if(e.tagInfo.type===Gh.link){const n=e.match.match(/((href|title)=["'].+?["'])/g);let r=e.tagInfo.markup;null!=n&&n.length&&(r=r.replace("<a","<a "+n.join(" "))),t=r}else t=e.tagInfo.markup;r=r.replace(e.match,t)}),r}function ld(e){const t=[];return e.forEach(e=>{var n;if(null!=(n=e.children)&&n.length&&(e.children=ld(e.children)),0===e.type.indexOf("html_block"))if("html_block"===e.type){if(e.content=id(e.content),e.content.trim())if(e.content.includes("<"))t.push(e);else{const n=new(Zh())("text","",0);n.content=e.content;var r=nd(n,null);t.push(...r)}}else{if("html_block_container_open"===e.type){const n=e.attrGet("contentOpen"),r=e.attrGet("contentClose");e.attrSet("contentOpen",id(n)),e.attrSet("contentClose",id(r))}t.push(e)}else t.push(e)}),t}function cd(e){e.core.ruler.push("so-sanitize-html",function(e){return e.tokens=sd(e.tokens),e.tokens=function od(e){const t=[];return e.forEach(e=>{var n;let r=null;if("html_block"===e.type?r=function(e){const t=e.content,n=/^(?:(<[a-z0-9]+.*?>)([^<>\n]+?)(<\/[a-z0-9]+>))$|^(<[a-z0-9]+(?:\s.+?)?\s?\/?>)$/i.exec(t);if(!n)return null;var r=[];let s=!1;if(n[4]){const e=ed(t);e.type!==Gh.unknown&&(s=e.isBlock,r.push(e))}else{const e=ed(n[1]),t=n[2],i=ed(n[3]);e.type!==Gh.unknown&&i.type!==Gh.unknown&&e.type===i.type&&(s=e.isBlock,r.push(e),r.push(t),r.push(i))}return 0<r.length?{isBlock:s,tagInfo:r}:null}(e):null!=(n=e.children)&&n.length&&(e.children=od(e.children)),r&&r.tagInfo.length){const s=[];r.tagInfo.forEach((e,t,n)=>{n=n[t-1],t="string"==typeof e||!e.isBlock;let o;if("string"==typeof e){const t=new(Zh())("text","",0);t.content=e,o=t}else o=td(e);let l=[o];t&&(l=nd(o,null==n?void 0:n.type)),s.push(...l)}),t.push(...s)}else t.push(e)}),t}(e.tokens),e.tokens=function ad(e){const t=[];let n=0,r=e.map((e,t)=>{var r;return"html_block"===e.type&&(r=null!=(r=null==(r=e.content.match(/<[a-z]+(\s[a-z0-9\-"'=\s])?>/gi))?void 0:r.length)?r:0,(e=null!=(e=null==(e=e.content.match(/<\/[a-z]+>/gi))?void 0:e.length)?e:0)<r||r<e&&n%2==1)?(n+=1,t):null}).filter(e=>null!==e),s=(r.length%2==1&&(r=r.slice(0,-1)),null);return e.forEach((e,n)=>{e.children&&e.children.length&&(e.children=ad(e.children)),"html_block"===e.type&&r.includes(n)?(n=new(Zh())("html_block_container_"+(s?"close":"open"),"",s?-1:1),s=s?(s.attrSet("contentClose",e.content),null):(n.attrSet("contentOpen",e.content),n),t.push(n)):t.push(e)}),t}(e.tokens),e.tokens=ld(e.tokens),!1})}function hd(e,t,n){if(!n)throw new Error("link-reference: parent token is undefined");var l,r=/\[(.+?)\](?!\()(?:\[\]|\[(.+?)\]|)/g;let s,i,o;for(;null!==(o=r.exec(n.content));)if(null!=o&&o.length){i=o[1],o[2]&&(i=o[2]),s=e[(0,c.normalizeReference)(i)];const n="image"===t.type?t.attrGet("src"):t.attrGet("href");if(s&&s.href===n)break;s=void 0}return!!s&&(l=o[2]?"full":o[0].endsWith("[]")?"collapsed":"shortcut",t.markup="reference",t.meta=t.meta||{},t.meta.reference=Object.assign(Object.assign({},s),{label:i,type:l,contentMatch:o[0]}),!0)}function ud(e){e.core.ruler.push("link-reference",function(e){var t=null==(t=e.env)?void 0:t.references;return!(!t||!Object.keys(t).length||(function dd(e,t,n){let r=!1;t.forEach(t=>{"link_open"!==t.type||t.markup||(r=hd(e,t,n)),"link_close"===t.type&&r&&(t.markup="reference",r=!1),"image"!==t.type||t.markup||hd(e,t,n),t.children&&dd(e,t.children,t)})}(t,e.tokens),1))})}function pd(e,t,n,r,s){var i,o,l,a,h,d,u,p,f,m,g,k,y,v,w,x,C,_,S,M=t.lineMax,A=t.bMarks[n]+t.tShift[n],T=t.eMarks[n];if(4<=t.sCount[n]-t.blkIndent)return!1;if(62!==t.src.charCodeAt(A)||!e.followingCharRegex.test(t.src[A+1]))return!1;if(A+=e.markup.length,!s){for(a=f=t.sCount[n]+A-(t.bMarks[n]+t.tShift[n]),32===t.src.charCodeAt(A)?(A++,a++,f++,w=!(i=!1)):9===t.src.charCodeAt(A)?(w=!0,i=(t.bsCount[n]+f)%4!=3||(A++,a++,f++,!1)):w=!1,m=[t.bMarks[n]],t.bMarks[n]=A;A<T&&(o=t.src.charCodeAt(A),(0,c.isSpace)(o));)9===o?f+=4-(f+t.bsCount[n]+(i?1:0))%4:f++,A++;for(g=[t.bsCount[n]],t.bsCount[n]=t.sCount[n]+1+(w?1:0),d=T<=A,y=[t.sCount[n]],t.sCount[n]=f-a,v=[t.tShift[n]],t.tShift[n]=A-t.bMarks[n],C=t.md.block.ruler.getRules("spoiler"),s=t.parentType,S=!(t.parentType="spoiler"),p=n+1;p<r&&(t.sCount[p]<t.blkIndent&&(S=!0),!((A=t.bMarks[p]+t.tShift[p])>=(T=t.eMarks[p])));p++)if(A+=e.markup.length,62!==t.src.charCodeAt(A-e.markup.length)||!e.followingCharRegex.test(t.src[A-e.markup.length+1])||S){if(d)break;for(x=!1,l=0,h=C.length;l<h;l++)if(C[l](t,p,r,!0)){x=!0;break}if(x){t.lineMax=p,0!==t.blkIndent&&(m.push(t.bMarks[p]),g.push(t.bsCount[p]),v.push(t.tShift[p]),y.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}m.push(t.bMarks[p]),g.push(t.bsCount[p]),v.push(t.tShift[p]),y.push(t.sCount[p]),t.sCount[p]=-1}else{for(a=f=t.sCount[p]+A-(t.bMarks[p]+t.tShift[p]),32===t.src.charCodeAt(A)?(A++,a++,f++,w=!(i=!1)):9===t.src.charCodeAt(A)?(w=!0,i=(t.bsCount[p]+f)%4!=3||(A++,a++,f++,!1)):w=!1,m.push(t.bMarks[p]),t.bMarks[p]=A;A<T&&(o=t.src.charCodeAt(A),(0,c.isSpace)(o));)9===o?f+=4-(f+t.bsCount[p]+(i?1:0))%4:f++,A++;d=T<=A,g.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(w?1:0),y.push(t.sCount[p]),t.sCount[p]=f-a,v.push(t.tShift[p]),t.tShift[p]=A-t.bMarks[p]}for(k=t.blkIndent,t.blkIndent=0,(_=t.push(e.name+"_open",e.name,1)).markup=e.markup,_.map=u=[n,0],t.md.block.tokenize(t,n,p),(_=t.push(e.name+"_close",e.name,-1)).markup=e.markup,t.lineMax=M,t.parentType=s,u[1]=t.line,l=0;l<v.length;l++)t.bMarks[l+n]=m[l],t.tShift[l+n]=v[l],t.sCount[l+n]=y[l],t.bsCount[l+n]=g[l];t.blkIndent=k}return!0}function fd(e,t,n,r){return pd({followingCharRegex:/!/,markup:">!",name:"spoiler"},e,t,n,r)}function md(e,t,n,r){return pd({followingCharRegex:/[^!]/,markup:">",name:"blockquote"},e,t,n,r)}function gd(e){e.block.ruler.__rules__.forEach(e=>{var t=e.alt.indexOf("blockquote");-1<t&&e.alt.splice(t,0,"spoiler")}),e.block.ruler.before("blockquote","spoiler",fd,{alt:["paragraph","reference","spoiler","blockquote","list"]}),e.block.ruler.at("blockquote",md,{alt:["paragraph","reference","spoiler","blockquote","list"]})}function kd(e,t,n,r,s,i){var o=n.bMarks[r]+n.tShift[r],l=n.eMarks[r];return!(60!==n.src.charCodeAt(o)||l<=o+2)&&(33===n.src.charCodeAt(o+1)&&(o=n.src.slice(o,l),!(null==(l=e.exec(o))||!l.length)&&(i||(n.line=e=r+1,(o=n.push(t,"",0)).map=[r,e],o.content=n.getLines(r,e,n.blkIndent,!0),o.attrSet("language",l[1])),!0)))}function bd(e,t,n,r){return kd(/<!-- language: lang-(.+?) -->/,"stack_language_comment",e,t,0,r)}function yd(e,t,n,r){return kd(/<!-- language-all: lang-(.+?) -->/,"stack_language_all_comment",e,t,0,r)}function vd(e){let t=null;for(const n of e.tokens)if("stack_language_all_comment"===n.type){t=n.attrGet("language");break}for(let n=0,r=e.tokens.length;n<r;n++){const r=e.tokens[n],s=e.tokens[n+1];if("stack_language_comment"===r.type&&"code_block"===(null==s?void 0:s.type)){const e=r.attrGet("language");s.info=e}else"stack_language_all_comment"===r.type?t=r.attrGet("language"):"code_block"===r.type&&!r.info&&t&&(r.info=t)}return e.tokens=e.tokens.filter(e=>!e.type.startsWith("stack_language")),!1}function wd(e){e.block.ruler.before("html_block","stack_language_comment",bd),e.block.ruler.before("html_block","stack_language_all_comment",yd),e.core.ruler.push("so-sanitize-code-lang",vd)}function xd(e,t){e.inline.ruler.push("tag_link",function(e,n){return function(e,t,n){if(91!==e.src.charCodeAt(e.pos))return!1;if("[tag:"!==e.src.slice(e.pos,e.pos+5)&&"[meta-tag:"!==e.src.slice(e.pos,e.pos+10))return!1;var r=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(r<0)return!1;var s=e.src.slice(e.pos,r+1),i="[meta-tag:"===s.slice(0,10),o=s.slice(i?10:5,-1);if(n.validate&&!n.validate(o,i,s))return!1;if(!t){let t=e.push("tag_link_open","a",1);t.attrSet("tagName",o),t.attrSet("tagType",i?"meta-tag":"tag"),t.content=s,(t=e.push("text","",0)).content=o,t=e.push("tag_link_close","a",-1)}return e.pos=r+1,!0}(e,n,t)})}function _d(e){e.core.ruler.push("tight-list",function(e){return function Cd(e){let t=0,n=!1,r=!1;for(let s=0;s<e.length;s++){var i=e[s];if("bullet_list_open"!==i.type&&"ordered_list_open"!==i.type){if(i.type.startsWith("list_item_"))n=i.type.endsWith("open");else if(i.type.startsWith("paragraph_")&&n&&i.hidden)r=!0;else if("bullet_list_close"===i.type||"ordered_list_close"===i.type){t=s;break}}else{const t=Cd(e.slice(s+1));t.isTight&&i.attrSet("tight",t.isTight.toString()),s+=t.iteratedElements+1}}return{iteratedElements:t,isTight:r}}(e.tokens),!1})}const Sd=Object.assign(Object.assign({},rl.tokens),{pre:{block:"pre"},kbd:{mark:"kbd"},sup:{mark:"sup"},sub:{mark:"sub"},html_inline:{node:"html_inline",getAttrs:e=>({content:e.content})},html_block:{node:"html_block",getAttrs:e=>({content:e.content})},html_block_container:{block:"html_block_container",getAttrs:e=>({contentOpen:e.attrGet("contentOpen"),contentClose:e.attrGet("contentClose")})},stack_language_comment:{ignore:!0},stack_language_all_comment:{ignore:!0},bullet_list:{block:"bullet_list",getAttrs:e=>({tight:"true"===e.attrGet("tight")})},ordered_list:{block:"ordered_list",getAttrs:e=>({order:+e.attrGet("start")||1,tight:"true"===e.attrGet("tight")})},code_block:{block:"code_block",noCloseToken:!0,getAttrs:e=>({params:e.info||"",markup:e.markup||"indented"})},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},s:{mark:"strike"},table:{block:"table"},thead:{block:"table_head"},tbody:{block:"table_body"},th:{block:"table_header",getAttrs:e=>({style:e.attrGet("style")})},tr:{block:"table_row"},td:{block:"table_cell",getAttrs:e=>({style:e.attrGet("style")})},image:{node:"image",getAttrs:e=>{var t,i={src:e.attrGet("src"),width:e.attrGet("width"),height:e.attrGet("height"),alt:e.attrGet("alt")||(null==(t=null==(t=e.children)?void 0:t[0])?void 0:t.content)||null,title:e.attrGet("title")};if("reference"===e.markup){const t=e.meta;i.referenceType=null==(e=null==t?void 0:t.reference)?void 0:e.type,i.referenceLabel=null==(e=null==t?void 0:t.reference)?void 0:e.label}return i}},tag_link:{block:"tagLink",getAttrs:e=>({tagName:e.attrGet("tagName"),tagType:e.attrGet("tagType")})},spoiler:{block:"spoiler"},code_inline_split:{mark:"code"}});Object.keys(Sd).forEach(e=>{var t=Sd[e];if(t.getAttrs){const n=t.getAttrs.bind(t);t.getAttrs="link"===e?(e,t,r)=>{r=Object.assign({},n(e,t,r));if(r.markup=e.markup,"reference"===e.markup){const t=e.meta;r.referenceType=null==(e=null==t?void 0:t.reference)?void 0:e.type,r.referenceLabel=null==(e=null==t?void 0:t.reference)?void 0:e.label}return r}:(e,t,r)=>Object.assign({markup:e.markup},n(e,t,r))}else t.getAttrs=e=>({markup:e.markup})});class Md extends Fh{constructor(e,t,n){super(e,t,n),this.tokenHandlers.softbreak=e=>{var t=this.schema.nodes.softbreak;e.openNode(t,{}),e.addText(" "),e.closeNode()}}}class Ad extends so(){constructor(e,t){super(e,t)}parse(e,t){return super.parse(e,t)}}class Td{constructor(e,t){this.match=e,this.match=e,this.handler="string"==typeof t?function(e){return function(t,n,r,s){let i=e;if(n[1]){let e=n[0].lastIndexOf(n[1]),t=(i+=n[0].slice(e+n[1].length),(r+=e)-s);0<t&&(i=n[0].slice(e-t,e)+i,r=s)}return t.tr.insertText(i,r,s)}}(t):t}}function Ed(e,t,n,r,s,i){if(!e.composing){var o=e.state,l=o.doc.resolve(t);if(!l.parent.type.spec.code){var a=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,null,"")+r;for(let l=0;l<s.length;l++){var c=s[l].match.exec(a),c=c&&s[l].handler(o,c,t-(c[0].length-r.length),n);if(c)return e.dispatch(c.setMeta(i,{transform:c,from:t,to:n,text:r})),!0}}}return!1}const Od=(e,t)=>{var n=e.plugins;for(let r=0;r<n.length;r++){let s,i=n[r];if(i.spec.isInputRules&&(s=i.getState(e))){if(t){let n=e.tr,r=s.transform;for(let e=r.steps.length-1;0<=e;e--)n.step(r.steps[e].invert(r.docs[e]));if(s.text){let t=n.doc.resolve(s.from).marks();n.replaceWith(s.from,s.to,e.schema.text(s.text,t))}else n.delete(s.from,s.to);t(n)}return!0}}return!1};function Dd(e,t,n=null,r){return new Td(e,(e,s,i,o)=>{var l=n instanceof Function?n(s):n,e=e.tr.delete(i,o),o=e.doc.resolve(i).blockRange(),l=o&&st(o,t,l);if(!l)return null;e.wrap(o,l);o=e.doc.resolve(i-1).nodeBefore;return o&&o.type==t&&lt(e.doc,i-1)&&(!r||r(s,o))&&e.join(i-1),e})}function Nd(e,t,n=null){return new Td(e,(e,r,s,i)=>{var o=e.doc.resolve(s),r=n instanceof Function?n(r):n;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t)?e.tr.delete(s,i).setBlockType(s,s,t,r):null})}new Td(/--$/,""),new Td(/\.\.\.$/,""),new Td(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new Td(/"$/,""),new Td(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new Td(/'$/,"");const Id=/`(\S(?:|.*?\S))`$/,Ld=/\*\*(\S(?:|.*?\S))\*\*$/,zd=/\*([^*\s]([^*])*[^*\s]|[^*\s])\*$/,Pd=/__(\S(?:|.*?\S))__$/,Rd=/_([^_\s]([^_])*[^_\s]|[^_\s])_$/,Bd=/\[(.+)\]\((.+)\)$/;function Fd(e,t,n,r){return new Td(e,(e,s,i,o)=>{var l=r?r(s):{},a=e.tr;if(!e.doc.resolve(i).parent.type.allowsMarkType(t))return null;if(n&&!n(s))return null;var c=s[0],s=s[1];if(s){const e=i+c.indexOf(s),t=e+s.length;t<o&&a.delete(t,o),e>i&&a.delete(i,e),o=i+s.length}return a.addMark(i,o,t.create(l)),a.removeStoredMark(t),a})}function Vd(e,t){var s,n=po({Tab:ch,"Shift-Tab":hh,"Mod-]":ch,"Mod-[":hh}),r=po(Object.assign(Object.assign({},_("Mod-e",Xc)),{"Mod-Enter":Pc,"Shift-Enter":Pc,Enter:Kc,Backspace:Wc,Delete:Wc,"Mod-Backspace":Wc,"Mod-Delete":Wc,Tab:Kc,"Shift-Tab":Gc})),e=[po(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_("Mod-z",on)),_("Mod-y",ln)),_("Mod-Shift-z",ln)),{Backspace:Od,Enter:(s=e.nodes.list_item,function(e,t){var{$from:n,$to:r,node:i}=e.selection;if(i&&i.isBlock||n.depth<2||!n.sameParent(r))return!1;i=n.node(-1);if(i.type!=s)return!1;if(0==n.parent.content.size&&n.node(-1).childCount==n.indexAfter(-1)){if(3==n.depth||n.node(-3).type!=s||n.index(-2)!=n.node(-2).childCount-1)return!1;if(t){let r=R.empty,i=n.index(-1)?1:n.index(-2)?2:3;for(let e=n.depth-i;e>=n.depth-3;e--)r=R.from(n.node(e).copy(r));let o=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3,l=(r=r.append(R.from(s.createAndFill())),n.before(n.depth-(i-1))),a=e.tr.replace(l,n.after(-o),new V(r,4-i,0)),c=-1;a.doc.nodesBetween(l,a.doc.content.size,(e,t)=>{if(-1<c)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)}),-1<c&&a.setSelection(Ct.near(a.doc.resolve(c))),t(a.scrollIntoView())}return!0}i=r.pos==n.end()?i.contentMatchAt(0).defaultType:null,e=e.tr.delete(n.pos,r.pos),r=i?[null,{type:i}]:void 0;return!!ot(e.doc,n.pos,2,r)&&(t&&t(e.split(n.pos,2,r).scrollIntoView()),!0)}),Tab:function(e){return function(t,n){var{$from:r,$to:s}=t.selection,i=r.blockRange(s,t=>0<t.childCount&&t.firstChild.type==e);if(!i)return!1;r=i.startIndex;if(0==r)return!1;var l=i.parent,a=l.child(r-1);if(a.type!=e)return!1;if(n){let r=a.lastChild&&a.lastChild.type==l.type,s=R.from(r?e.create():null),o=new V(R.from(e.create(null,R.from(l.type.create(null,s)))),r?3:1,0),c=i.start,h=i.end;n(t.tr.step(new et(c-(r?3:1),h,c,h,o,1,!0)).scrollIntoView())}return!0}}(e.nodes.list_item),"Shift-Tab":function(e){return function(t,n){var{$from:r,$to:s}=t.selection,s=r.blockRange(s,t=>0<t.childCount&&t.firstChild.type==e);return!!s&&(!n||(r.node(s.depth-1).type==e?function(e,t,n,r){var e=e.tr,i=r.end,o=r.$to.end(r.depth),n=(i<o&&(e.step(new et(i-1,o,i,o,new V(R.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ie(e.doc.resolve(r.$from.pos),e.doc.resolve(o),r.depth)),rt(r));if(null==n)return!1;e.lift(r,n);o=e.mapping.map(i,-1)-1;return lt(e.doc,o)&&e.join(o),t(e.scrollIntoView()),!0}(t,n,e,s):function(e,t,n){var r=e.tr,s=n.parent;for(let e=n.end,t=n.endIndex-1,i=n.startIndex;t>i;t--)e-=s.child(t).nodeSize,r.delete(e-1,e+1);var l,c,h,e=r.doc.resolve(n.start),o=e.nodeAfter;return r.mapping.map(n.end)==n.start+e.nodeAfter.nodeSize&&(l=0==n.startIndex,n=n.endIndex==s.childCount,c=e.node(-1),h=e.index(-1),!!c.canReplace(h+(l?0:1),h+1,o.content.append(n?R.empty:R.from(s)))&&(h=(c=e.pos)+o.nodeSize,r.step(new et(c-(l?1:0),h+(n?1:0),c+1,h-1,new V((l?R.empty:R.from(s.copy(R.empty))).append(n?R.empty:R.from(s.copy(R.empty))),l?0:1,n?0:1),l?0:1)),t(r.scrollIntoView()),!0))}(t,n,s)))}}(e.nodes.list_item),"Mod-Enter":zc,"Shift-Enter":zc}),_("Mod-b",tl(e.marks.strong))),_("Mod-i",tl(e.marks.em))),_("Mod-l",fh)),_("Ctrl-q",Yo(e.nodes.blockquote))),_("Mod-k",tl(e.marks.code))),_("Mod-g",ph)),_("Ctrl-g",ph)),_("Mod-o",Yo(e.nodes.ordered_list))),_("Mod-u",Yo(e.nodes.bullet_list))),_("Mod-h",lh())),_("Mod-r",uh)),_("Mod-m",el(e.nodes.code_block))),_("Mod-[",dh(t.tagLinks.validate,!1))),_("Mod-]",dh(t.tagLinks.validate,!0))),_("Mod-/",Yo(e.nodes.spoiler))),_("Mod-,",tl(e.marks.sub))),_("Mod-.",tl(e.marks.sup))),_("Mod-'",tl(e.marks.kbd))),{ArrowRight:kh,ArrowDown:Go})),po(ll),n];return t.tables&&e.unshift(r),e}class Hd extends Uh{constructor(e,t,n){super(e,t,n),this.linkReferenceDefinitions={}}addLinkReferenceDefinition(e,t,n){e=(0,c.normalizeReference)(e);this.linkReferenceDefinitions[e]||(this.linkReferenceDefinitions[e]={href:t,title:n})}writeLinkReferenceDefinitions(){let e=Object.keys(this.linkReferenceDefinitions);if(e.length){const t=[],n=[];e.forEach(e=>{isNaN(Number(e))?n.push(e):t.push(+e)}),(e=[...t.sort((e,t)=>e-t).map(e=>e.toString()),...n.sort()]).forEach(e=>{var t=this.linkReferenceDefinitions[e];this.ensureNewLine(),this.write("["),this.text(e),this.write("]: "),this.text(t.href),t.title&&this.text(` "${t.title}"`)})}}}class Ud extends jh{serialize(e,t){t=new Hd(this.nodes,this.marks,t||{});return t.renderContent(e),t.writeLinkReferenceDefinitions(),t.out}}function Wd(e,t,n){const r=t.attrs.markup;if(r&&r.startsWith("<")&&r.endsWith(">")){var s=r.replace(/[<>/\s]/g,""),i="<"+s;if(e.text(i,!1),Xh[n]){const r=Xh[n].sort();for(const n of r){const r=t.attrs[n];r&&e.text(` ${n}="${r}"`)}}return Yh.includes(n)?e.text(r.replace(i,""),!1):(e.text(">",!1),e.renderInline(t),e.closed=!1,e.text(`</${s}>`,!1),e.closeBlock(t)),1}}const Jd=Object.assign(Object.assign({},Qo.nodes),{blockquote(e,t){var n;Wd(e,t,Gh.blockquote)||(n=t.attrs.markup||">",e.wrapBlock(n+" ",null,t,()=>e.renderContent(t)))},code_block(e,t){var n=t.attrs.markup||"```";"indented"===n?t.textContent.split("\n").forEach((t,n)=>{0<n&&e.ensureNewLine(),e.text("    "+t,!1)}):(e.write(n+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write(n)),e.closeBlock(t)},heading(e,t){var n=t.attrs.markup||"";Wd(e,t,Gh.heading)||(n&&!n.startsWith("#")?(e.renderInline(t),e.ensureNewLine(),e.write(n)):(e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t)),e.closeBlock(t))},horizontal_rule(e,t){Wd(e,t,Gh.horizontal_rule)||(e.write(t.attrs.markup||"----------"),e.closeBlock(t))},bullet_list(e,t){if(!Wd(e,t,Gh.unordered_list)){const n=t.attrs.markup||"-";e.renderList(t,"  ",()=>n+" ")}},ordered_list(e,t){if(!Wd(e,t,Gh.ordered_list)){const n=t.attrs.order||1,r=String(n+t.childCount-1).length,s=e.repeat(" ",r+2),i=t.attrs.markup||".";e.renderList(t,s,t=>{t=String(n+t);return e.repeat(" ",r-t.length)+t+i+" "})}},list_item(e,t){Wd(e,t,Gh.list_item)||e.renderContent(t)},paragraph(e,t){Wd(e,t,Gh.paragraph)||(e.renderInline(t),e.closeBlock(t))},image(e,t){if(!Wd(e,t,Gh.image)){var n=t.attrs.title?" "+e.quote(t.attrs.title):"",r="!["+e.esc(t.attrs.alt||"")+"]";let s="("+e.esc(t.attrs.src)+n+")";if("reference"===t.attrs.markup)switch(e.addLinkReferenceDefinition(t.attrs.referenceLabel,t.attrs.src,t.attrs.title),t.attrs.referenceType){case"full":s=`[${t.attrs.referenceLabel}]`;break;case"collapsed":s="[]";break;default:s=""}e.write(r+s)}},hard_break(e,t,n,r){if(!Wd(e,t,Gh.hardbreak))for(let s=r+1;s<n.childCount;s++)if(n.child(s).type!=t.type)return void e.write(t.attrs.markup||"  \n")},text(e,t){const n=t.marks.find(e=>e.type===e.type.schema.marks.link);let r;if(["linkify","autolink"].includes(null==n?void 0:n.attrs.markup))r=n.attrs.href;else{const n=e.atBlank()||e.closed;let s=e.esc(t.text,n);s=(s=s.replace(/\\_/g,"_").replace(/\b_|_\b/g,"\\_")).replace(/([<>])/g,"\\$1"),r=s}e.text(r,!1)}}),Gd={html_inline(e,t){e.write(t.attrs.content)},html_block(e,t){e.write(t.attrs.content),e.closeBlock(t)},html_block_container(e,t){e.write(t.attrs.contentOpen),e.ensureNewLine(),e.write("\n"),e.renderContent(t),e.write(t.attrs.contentClose),e.closeBlock(t)},softbreak(e){e.write("\n")},table(e,t){const n=t.type.schema;function r(t){const r=[];return e.ensureNewLine(),t.forEach(t=>{if(t.type===n.nodes.table_header||t.type===n.nodes.table_cell){const n=function(t){return e.write("| "),e.renderInline(t),e.write(" "),function(e){var e=e.attrs.style;return(e=e&&e.match(/text-align:[ ]?(left|right|center)/))&&e[1]?e[1]:null}(t)}(t);r.push(n)}}),e.write("|"),r}t.forEach(t=>{t.type===n.nodes.table_head&&function(t){let s=[];t.forEach(e=>{e.type===n.nodes.table_row&&(s=r(e))}),e.ensureNewLine();for(const t of s)e.write("|"),e.write("left"===t||"center"===t?":":" "),e.write("---"),e.write("right"===t||"center"===t?":":" ");e.write("|")}(t),t.type===n.nodes.table_body&&t.forEach(e=>{e.type===n.nodes.table_row&&r(e)})}),e.closeBlock(t)},tagLink(e,t){var n="meta-tag"===t.attrs.tagType?"meta-tag":"tag",t=t.attrs.tagName;e.write(`[${n}:${t}]`)},spoiler(e,t){e.wrapBlock(">! ",null,t,()=>e.renderContent(t))}};function Kd(e){return e.open instanceof Function||e.close instanceof Function?(d("markdown-serializer genMarkupAwareMarkSpec","Unable to extend mark config with open/close as functions",e),e):Object.assign(Object.assign({},e),{open:(t,n)=>n.attrs.markup||e.open,close(t,n){let r=n.attrs.markup;return(r=/^<[a-z]+>$/i.test(r)?r.replace(/^</,"</"):r)||e.close}})}const Zd=Qo.marks.link,Xd={open(e,t,n,r){var s;return t.attrs.markup?"reference"===t.attrs.markup?(e.addLinkReferenceDefinition(t.attrs.referenceLabel,t.attrs.href,t.attrs.title),"["):"linkify"===t.attrs.markup?"":"autolink"===t.attrs.markup?"<":(s=t.attrs.title?` title="${t.attrs.title}"`:"",`<a${t.attrs.href?` href="${t.attrs.href}"`:""}${s}>`):"string"==typeof Zd.open?Zd.open:Zd.open(e,t,n,r)},close(e,t,n,r){if(!t.attrs.markup)return"string"==typeof Zd.close?Zd.close:Zd.close(e,t,n,r);if("reference"===t.attrs.markup)switch(t.attrs.referenceType){case"full":return`][${t.attrs.referenceLabel}]`;case"collapsed":return"][]";default:return"]"}return"linkify"===t.attrs.markup?"":"autolink"===t.attrs.markup?">":"</a>"}},Qd=Qo.marks.code,Yd={open(e,t,n,r){if("string"==typeof Qd.open)return t.attrs.markup||Qd.open;let s=Qd.open(e,t,n,r);return s=t.attrs.markup?s.replace("`",t.attrs.markup):s},close(e,t,n,r){if("string"==typeof Qd.close)return t.attrs.markup||Qd.close;let s=Qd.close(e,t,n,r);if(t.attrs.markup){const e=t.attrs.markup.replace(/^</,"</");s=s.replace("`",e)}return s},escape:Qd.escape},eu=Object.assign(Object.assign({},Qo.marks),{em:Kd(Qo.marks.em),strong:Kd(Qo.marks.strong),code:Yd,link:Xd,strike:Kd({open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}),kbd:Kd({open:"<kbd>",close:"</kbd>",mixable:!0,expelEnclosingWhitespace:!0}),sup:Kd({open:"<sup>",close:"</sup>",mixable:!0,expelEnclosingWhitespace:!0}),sub:Kd({open:"<sub>",close:"</sub>",mixable:!0,expelEnclosingWhitespace:!0})});class tu{constructor(e,t,n,r){this.additionalProcessors=r,this.language=null,this.dom=document.createElement("div"),this.dom.classList.add("ps-relative","p0","ws-normal","ow-normal"),this.render(t,n),this.contentDOM=this.dom.querySelector(".content-dom"),this.update(e)}update(e){var t,n;return"code_block"===e.type.name&&(t=this.getLanguageFromBlock(e),(n=this.getValidProcessorResult(t,e))?this.updateProcessor(e,n):this.updateCodeBlock(t),this.toggleView(!!n,!!e.attrs.isEditingProcessor),!0)}render(e,t){var n=x();this.dom.innerHTML=y`
        <div class="ps-absolute t2 r4 fs-fine pe-none us-none fc-black-300 js-language-indicator" contenteditable=false></div>
        <div class="d-flex ps-absolute t0 r0 js-processor-toggle">
            <label class="flex--item mr4" for="js-editor-toggle-${n}">
                Edit
            </label>
            <div class="flex--item s-toggle-switch">
                <input class="js-processor-is-editing" id="js-editor-toggle-${n}" type="checkbox">
                <div class="s-toggle-switch--indicator"></div>
            </div>
        </div>
        <div class="d-none js-processor-view"></div>
        <pre class="s-code-block js-code-view js-code-mode"><code class="content-dom"></code></pre>`,this.contentDOM=this.dom.querySelector(".content-dom"),"function"==typeof t&&this.dom.querySelector(".js-processor-is-editing").addEventListener("change",n=>{n.stopPropagation();var n=!!n.target.checked,s=t(),s=e.state.doc.nodeAt(s).attrs;e.dispatch(e.state.tr.setNodeMarkup(t(),null,Object.assign(Object.assign({},s),{isEditingProcessor:n})))})}toggleView(e,t){var n=(e,t)=>this.dom.querySelector(e).classList.toggle("d-none",!t);n(".js-code-view",!e||t),n(".js-processor-toggle",e),n(".js-language-indicator",!e),n(".js-processor-view",e&&!t)}getLanguageFromBlock(e){let t=e.attrs.detectedHighlightLanguage;return(t=t&&a("nodes.codeblock_lang_auto",{lang:t}))||Th(e)}updateCodeBlock(e){this.language!==e&&(this.dom.querySelector(".js-language-indicator").textContent=e,this.language=e)}updateProcessor(e,t){var n=this.dom.querySelector(".js-processor-view"),e=!!e.attrs.isEditingProcessor;return this.dom.querySelector(".js-code-view").classList.toggle("d-none",!e),n.classList.toggle("d-none",e),n.innerHTML="",n.append(...t.childNodes),!0}getValidProcessorResult(e,t){var n=document.createElement("div"),r=this.getProcessors(e);if(!r.length)return null;let s=!1;for(const e of r)if(s=e(t.textContent,n),s)break;return s?n:null}getProcessors(e){var t=[];return e in this.additionalProcessors&&t.push(...this.additionalProcessors[e]),"*"in this.additionalProcessors&&t.push(...this.additionalProcessors["*"]),t}}class nu{constructor(e){this.dom=document.createElement("div"),this.dom.className="html_block ProseMirror-widget",this.dom.innerHTML=e.attrs.content}}class ru{constructor(e){this.dom=document.createElement("div"),this.dom.className="html_block_container ProseMirror-widget",e.childCount?(e=e.attrs.contentOpen+'<div class="ProseMirror-contentdom"></div>'+e.attrs.contentClose,this.dom.innerHTML=e,this.contentDOM=this.dom.querySelector(".ProseMirror-contentdom")):this.dom.innerHTML="invalid html_block_container"}}class su{constructor(e,t,n){this.id=x(),this.img=this.createImage(e),this.form=this.createForm(),this.form.addEventListener("submit",e=>this.handleChangedImageAttributes(e,n,t)),this.popover=this.createPopover(),this.dom=document.createElement("span"),this.dom.appendChild(this.img),this.dom.appendChild(this.popover),this.dom.addEventListener("s-popover:hide",e=>this.preventClose(e))}selectNode(){this.img.classList.add("bs-ring"),this.selectionActive=!0,this.img.dispatchEvent(new Event("image-popover-show"));var e=this.form.querySelectorAll("input");0<e.length&&e[0].focus({preventScroll:!0})}deselectNode(){this.img.classList.remove("bs-ring"),this.selectionActive=!1,this.img.dispatchEvent(new Event("image-popover-hide"))}stopEvent(e){return this.popover.contains(e.target)}ignoreMutation(){return!0}destroy(){this.img.remove(),this.popover.remove(),this.dom=null,this.form.remove()}createImage(e){var t=document.createElement("img");return t.setAttribute("aria-controls","img-popover-"+this.id),t.setAttribute("data-controller","s-popover"),t.setAttribute("data-action","image-popover-show->s-popover#show image-popover-hide->s-popover#hide"),t.src=e.attrs.src,e.attrs.alt&&(t.alt=e.attrs.alt),e.attrs.title&&(t.title=e.attrs.title),t}createForm(){var e=document.createElement("form");return e.className="d-flex fd-column",e.innerHTML=y`
            <label class="flex--item s-label mb4" for="img-src-${this.id}">Image source</label>
            <div class="d-flex ps-relative mb12">
                <input class="flex--item s-input" type="text" name="src" id="img-src-${this.id}" value="${this.img.src}" placeholder="https://example.com/image.png"/>
            </div>
            <label class="flex--item s-label mb4" for="img-alt-${this.id}">Image description</label>
            <div class="d-flex ps-relative mb12">
                <input class="flex--item s-input" type="text" name="alt" id="img-alt-${this.id}" value="${this.img.alt}" placeholder="A description for the image"/>
            </div>
            <label class="flex--item s-label mb4" for="img-title-${this.id}">Title</label>
            <div class="d-flex ps-relative mb12">
                <input class="flex--item s-input" type="text" name="title" id="img-title-${this.id}" value="${this.img.title}" placeholder="A title shown on hover"/>
            </div>

            <button class="s-btn s-btn__primary" type="submit" aria-pressed="false">Apply</button>
        `,e}createPopover(){var e=document.createElement("div");return e.className="s-popover ws-normal wb-normal js-img-popover",e.id="img-popover-"+this.id,e.innerHTML='<div class="s-popover--arrow ws-normal"></div>',e.append(this.form),e}handleChangedImageAttributes(e,t,n){var s,i;e.preventDefault(),"function"==typeof t&&(s=(e=e=>this.form.querySelector(e))("#img-src-"+this.id),i=e("#img-alt-"+this.id),e=e("#img-title-"+this.id),n.dispatch(n.state.tr.setNodeMarkup(t(),null,{src:s.value,alt:i.value,title:e.value})),n.focus())}preventClose(e){this.selectionActive&&e.preventDefault()}}class iu{constructor(e,t){this.dom=document.createElement("a"),this.dom.setAttribute("href","#"),this.dom.setAttribute("rel","tag"),this.dom.classList.add("s-tag"),this.dom.innerText=e.attrs.tagName,null!=t&&t.render&&((t=t.render(e.attrs.tagName,"meta-tag"===e.attrs.tagType))&&null!=t&&t.link?((t.additionalClasses||[]).forEach(e=>this.dom.classList.add(e)),this.dom.setAttribute("href",t.link),this.dom.setAttribute("title",t.linkTitle)):d("TagLink NodeView","Unable to render taglink due to invalid response from options.renderer: ",t))}}const ou={};function lu(e,t,n){if(m(e,t)){const r=[];return e.doc.descendants((e,t,s)=>{s=function(e,t,n){var r;if(null!=t&&t.isText&&n){var i=t,o=null==(r=null==(r=null==i?void 0:i.marks.find(e=>"link"===e.type.name))?void 0:r.attrs)?void 0:r.href;if(o)for(const r of e)if(r&&(r.textOnly||function(e){var t=e.content.firstChild;if(!t)return;var e=1===e.childCount,r="text"===t.type.name,t=t.marks.some(e=>"link"===e.type.name);return e&&r&&t}(n))&&(!r.textOnly||t.isText)&&(!r.textOnly||o===(null==i?void 0:i.textContent))&&r.domainTest&&r.domainTest.test(o))return{url:o,provider:r}}return null}(n,e,s);if(s)return r.push({provider:s,pos:t,node:e}),!1}),r}}function cu(e,t){const n=[];return t.forEach(t=>{var s;!t.isTextOnly&&t.content?n.push(function(e,t){var n=document.createElement("div");return n.className="js-link-preview-decoration",t&&n.appendChild(t.cloneNode(!0)),Ps.widget(e,n,{side:-1})}(t.pos,t.content)):t.content||(s=(t=e.resolve(t.pos)).posAtIndex(0,t.depth-1),n.push(Ps.node(s,s+t.parent.nodeSize,{class:"is-loading js-link-preview-loading",title:"Loading..."})))}),Fs.create(e,n)}const du=new class extends vi{constructor(e){super(e)}setMeta(e,t){return e.setMeta(this,{callbackData:null,state:t})}setCallbackData(e,t){return e.setMeta(this,{callbackData:t,state:null})}dispatchCallbackData(e,t){t=this.setCallbackData(e.state.tr,t);return e.updateState(e.state.apply(t)),t}}("linkPreviews");function uu(e){const t=e||[];return new Ci({key:du,asyncCallback:(e,n)=>function(e,t,n){t=lu(e.state,t,n);return t.length?(n=t.map(e=>{var t=e.provider.url in ou,n=ou[e.provider.url]||null,t=t?Promise.resolve(n):e.provider.provider.renderer(e.provider.url),n={pos:e.pos,content:n,isTextOnly:e.provider.provider.textOnly,href:e.provider.url},t=t.then(t=>({content:ou[e.provider.url]=t,isTextOnly:e.provider.provider.textOnly,href:e.provider.url,pos:e.pos})).catch(()=>{var t=document.createElement("div");return t.innerText="Error fetching content.",ou[e.provider.url]=t,Promise.resolve({})});return n.promise=t,n}),du.dispatchCallbackData(e,n),Promise.all(n.map(e=>e.promise))):Promise.reject(null)}(e,n,t),state:{init:(e,n)=>({decorations:function(e,t){return t=lu(e,null,t).map(e=>({content:ou[e.provider.url],href:e.provider.url,isTextOnly:e.provider.provider.textOnly,pos:e.pos})),cu(e.doc,t)}(n,t)}),apply(e,t){var n=this.getCallbackData(e);if(n){const t=n.map(t=>Object.assign(Object.assign({},t),{pos:e.mapping.map(t.pos)}));return{decorations:cu(e.doc,t),recentlyUpdated:t}}return{decorations:t.decorations.map(e.mapping,e.doc)}}},props:{decorations(e){return this.getState(e).decorations}},appendTransaction(e,t,n){var r,s=du.getState(n);if(null==(r=s.recentlyUpdated)||!r.length||!s.recentlyUpdated.some(e=>e.isTextOnly))return null;let i=null;return s.recentlyUpdated.forEach(t=>{if(null!=(r=t.content)&&r.textContent&&t.isTextOnly){let s=t.pos;e.forEach(e=>{s=e.mapping.map(s)});var r=n.schema,r=r.text(t.content.textContent,[r.marks.link.create({href:t.href,markup:null})]),t=n.doc.nodeAt(s).nodeSize;i=(i||n.tr).replaceWith(s,s+t,r)}}),i}})}const pu=new jt({props:{handlePaste(e,t,n){if(null==(t=t.clipboardData)||!t.getData("text/html"))return!1;let i=n.content.firstChild;return!(!(i="paragraph"===(null==(t=null==i?void 0:i.type)?void 0:t.name)&&1===i.childCount?i.firstChild:i)||"text"!==i.type.name||i.marks.length)&&(n=e.state["selection"],!(null==(t=n.$from.nodeBefore)||!t.marks.length||(e.dispatch(e.state.tr.replaceSelectionWith(i,!0)),0)))}}});function fu(e,t,n,r){var{from:s,to:i}=t.selection;return t.doc.nodesBetween(s,i,(t,s)=>{if("spoiler"===t.type.name){t=Object.assign({},t.attrs);t.revealed=n;let o=!1;return null!=r&&r.length&&r.forEach(e=>{e=e.mapping.mapResult(s);if(e.deleted)return!(o=!0);s=e.pos}),o||(e=e.setNodeMarkup(s,null,t)),!1}}),e}const mu=new jt({appendTransaction(e,t,n){if(!g(t,n))return null;let r=n.tr;return r=fu(r,t,!1,e),(r=fu(r,n,!0)).steps.length?r=r.setMeta("addToHistory",!1):null}}),gu=new jt({key:new Ut("tablesPlugin"),props:{transformPasted:e=>new V(function ku(e){const t=[];return e.forEach(e=>{e.type===e.type.schema.nodes.table?t.push(e.type.schema.nodes.paragraph.createAndFill({},e.type.schema.text(e.textContent))):t.push(e.copy(ku(e.content)))}),R.fromArray(t)}(e.content),1,1),handlePaste:(e,t,n)=>!!Ic(e.state.schema,e.state.selection)&&(e.dispatch(e.state.tr.insertText(n.size&&n.content&&n.content.firstChild?n.content.firstChild.textContent:null)),!0)}});class bu extends A{constructor(e,t,n,r={}){var a;super(),this.options=u(bu.defaultOptions,r),this.externalPluginProvider=n,this.markdownSerializer=(r=this.externalPluginProvider,new Ud(Object.assign(Object.assign(Object.assign({},Jd),Gd),r.markdownProps.serializers.nodes),Object.assign(Object.assign({},eu),r.markdownProps.serializers.marks))),this.finalizedSchema=new Se(this.externalPluginProvider.getFinalizedSchema(Ti)),this.markdownParser=function(e,t,n){e=function(e,t){var n=new Ad("default",{html:e.html,linkify:!0});return e.tables||n.disable("table"),e.extraEmphasis||n.disable("strikethrough"),n.linkify.set({fuzzyLink:!1,fuzzyEmail:!1}),n.validateLink=e.validateLink,e.html&&n.use(e=>cd(e)),n.use(wd),e.tagLinks&&n.use(xd,e.tagLinks),n.use(gd),n.use(_d),n.use(ud),n.use(Jh),null!=t&&t.alterMarkdownIt(n),n}(e,n);return new Md(t,e,Object.assign(Object.assign({},Sd),null==n?void 0:n.markdownProps.parser))}(this.options.parserFeatures,this.finalizedSchema,this.externalPluginProvider);const i=this.parseContent(t),o=yi(this.externalPluginProvider.getFinalizedMenu(vh(this.finalizedSchema,this.options,S.RichText),i.type.schema),this.options.menuParentContainer,S.RichText),l=this.options.parserFeatures.tagLinks;this.editorView=new ii(t=>{this.setTargetNodeAttributes(t,this.options),e.appendChild(t)},{editable:Zi,state:$t.create({doc:i,plugins:[sn(),...Vd(this.finalizedSchema,this.options.parserFeatures),o,((e,t)=>{var n=Dd(/^\s*>\s$/,e.nodes.blockquote),r=Dd(/^\s*>!\s$/,e.nodes.spoiler),s=Nd(new RegExp("^(#{1,3})\\s$"),e.nodes.heading,e=>({level:e[1].length})),i=Nd(/^```$/,e.nodes.code_block),o=Dd(/^\s*[*+-]\s$/,e.nodes.bullet_list),l=Dd(/^\s*\d(\.|\))\s$/,e.nodes.ordered_list,e=>({order:+e[1]}),(e,t)=>t.childCount+t.attrs.order==+e[1]),a=Fd(Id,e.marks.code),c=Fd(Ld,e.marks.strong),h=Fd(zd,e.marks.em,e=>"*"!==e.input.charAt(e.input.lastIndexOf(e[0])-1));return function({rules:e}){let t=new jt({state:{init:()=>null,apply(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,s,i)=>Ed(n,r,s,i,e,t),handleDOMEvents:{compositionend:n=>{setTimeout(()=>{var r=n.state.selection["$cursor"];r&&Ed(n,r.pos,r.pos,"",e,t)})}}},isInputRules:!0});return t}({rules:[n,r,s,i,o,l,a,c,Fd(Pd,e.marks.strong),h,Fd(Rd,e.marks.em,e=>"_"!==e.input.charAt(e.input.lastIndexOf(e[0])-1)),(t=>Fd(Bd,e.marks.link,e=>t.validateLink(e[2]),e=>({href:e[2]})))(t)]})})(this.finalizedSchema,this.options.parserFeatures),uu(this.options.linkPreviewProviders),Eh(this.options.codeblockOverrideLanguage),Ri(this.options.pluginParentContainer),(e=>new wi({key:Yc,state:{init:(e,t)=>({visible:!1,linkTooltip:new eh(t),decorations:Fs.empty,shouldShow:!1}),apply(e,t,n,r){e=this.getMeta(e)||t,"forceHideTooltip"in e&&(t.forceHideTooltip=e.forceHideTooltip),r=t.linkTooltip.getDecorations(t,r);return Object.assign(Object.assign({},e),{forceHideTooltip:t.forceHideTooltip&&th(r),linkTooltip:t.linkTooltip,decorations:r})}},props:{decorations(e){return this.getState(e).decorations||Fs.empty},handleDOMEvents:{blur(e,t){var{linkTooltip:n,decorations:r}=Yc.getState(e.state);return!th(r)||e.hasFocus()||n.hasFocus(t)||e.dispatch(Yc.forceHideTooltipTr(e.state)),!1}},handleClick(e,t,n){t=rh(e.state.doc.resolve(t).marks(),e.state.schema.marks.link)[0],e="Cmd"===v()?n.metaKey:n.ctrlKey,n=t&&e;return n&&window.open(t.attrs.href,"_blank"),!!n}},view:t=>new Qc(t,e.validateLink)}))(this.options.parserFeatures),Gi(this.options.placeholderText),Wi(this.options.imageUpload,this.options.parserFeatures.validateLink,this.finalizedSchema),Qi(),mu,gu,Ii,(a=this.options.parserFeatures,new jt({props:{handlePaste(e,t){if("code_block"===e.state.selection.$from.node().type.name)return!1;const n=t.clipboardData.getData("text/plain");if(!n||!/^.+?:\/\//.test(n)||!a.validateLink(n))return!1;if(function(e){var{from:t,$from:n,to:r,empty:s}=e.selection,i=e.schema;return s?i.marks.code.isInSet(e.storedMarks||n.marks()):e.doc.rangeHasMark(t,r,i.marks.code)}(e.state))e.dispatch(e.state.tr.insertText(n));else{let t=n;if(!e.state.tr.selection.empty){const n=e.state.tr.selection;let r="";e.state.doc.nodesBetween(n.from,n.to,(e,t)=>{var s;e.isText&&(s=Math.max(0,n.from-t),t=Math.max(0,n.to-t),r+=e.textBetween(s,t))}),r&&(t=r)}var r=e.state.schema,s={href:n,markup:t===n?"linkify":null},r=r.text(t,[r.marks.link.create(s)]);e.dispatch(e.state.tr.replaceSelectionWith(r,!1))}return!0}}})),...this.externalPluginProvider.plugins.richText,pu]}),nodeViews:Object.assign({code_block:(e,t,n)=>new tu(e,t,n,this.externalPluginProvider.codeblockProcessors),image:(e,t,n)=>new su(e,t,n),tagLink:e=>new iu(e,l),html_block:function(e){return new nu(e)},html_block_container:function(e){return new ru(e)}},this.externalPluginProvider.nodeViews),plugins:[]}),this.editorView.state.doc.toJSON().content}static get defaultOptions(){return{parserFeatures:M,editorHelpLink:null,linkPreviewProviders:[],codeblockOverrideLanguage:null,menuParentContainer:null,imageUpload:{handler:$i},editorPlugins:[]}}parseContent(e){let t;try{t=this.markdownParser.parse(e)}catch(n){d("RichTextEditorConstructor markdownParser.parse","Catastrophic parse error!",n),t=eo.fromSchema(this.finalizedSchema).parseCode(e),t=new wt(t).insert(0,this.finalizedSchema.node("heading",{level:1},this.finalizedSchema.text("WARNING! There was an error parsing the document"))).doc}return t}serializeContent(){return this.markdownSerializer.serialize(this.editorView.state.doc)}}class yu{constructor(e,t){if(this._codeblockProcessors={},this._plugins={richText:[],commonmark:[]},this._markdownProps={parser:{},serializers:{nodes:{},marks:{}}},this._nodeViews={},this.menuCallbacks=[],this.schemaCallbacks=[],this.markdownItCallbacks=[],null!=e&&e.length)for(const n of e)this.applyConfig(n(t))}get codeblockProcessors(){return Object.assign({},this._codeblockProcessors)}get plugins(){return this._plugins}get markdownProps(){return this._markdownProps}get nodeViews(){return this._nodeViews}getFinalizedSchema(e){let t={nodes:L.from(e.nodes),marks:L.from(e.marks)};for(const e of this.schemaCallbacks)e&&(t=e(t));return t}alterMarkdownIt(e){for(const t of this.markdownItCallbacks)t&&t(e)}getFinalizedMenu(e,t){var n;const r=[],s=[];for(const r of[()=>e,...this.menuCallbacks])if(r){const e=r(t);for(const t of e){let e=s.find(e=>e.name===t.name);e?e.entries.push(...t.entries):(s.push(t),e=t),e.priority=null!=(n=t.priority)?n:1/0}}for(const e of s){const t=r.find(t=>t.name===e.name);t?(t.entries.push(...e.entries),t.priority=Math.min(t.priority||0,e.priority)):r.push({name:e.name,priority:e.priority,visible:e.visible,classes:e.classes,entries:e.entries})}return r}applyConfig(e){var t;null!=(t=e.codeBlockProcessors)&&t.forEach(({lang:e,callback:t})=>{this.addCodeBlockProcessor(e,t)}),null!=(t=null==(t=e.commonmark)?void 0:t.plugins)&&t.forEach(e=>{this._plugins.commonmark.push(e)}),null!=(t=null==(t=e.richText)?void 0:t.plugins)&&t.forEach(e=>{this._plugins.richText.push(e)}),this.schemaCallbacks.push(e.extendSchema),null!=(t=e.richText)&&t.nodeViews&&(this._nodeViews=Object.assign(Object.assign({},this._nodeViews),null==(t=e.richText)?void 0:t.nodeViews)),this.extendMarkdown(e.markdown,null==(t=e.markdown)?void 0:t.alterMarkdownIt),this.menuCallbacks.push(e.menuItems)}extendMarkdown(e,t){var n;null!=e&&e.parser&&(this._markdownProps.parser=Object.assign(Object.assign({},this._markdownProps.parser),e.parser)),null!=(n=null==e?void 0:e.serializers)&&n.nodes&&(this._markdownProps.serializers.nodes=Object.assign(Object.assign({},this._markdownProps.serializers.nodes),e.serializers.nodes)),null!=(n=null==e?void 0:e.serializers)&&n.marks&&(this._markdownProps.serializers.marks=Object.assign(Object.assign({},this._markdownProps.serializers.marks),e.serializers.marks)),t&&this.markdownItCallbacks.push(t)}addCodeBlockProcessor(e,t){e in this._codeblockProcessors||(this._codeblockProcessors[e]=[]),this._codeblockProcessors[e].push(t)}}class vu{constructor(e,t,n={}){this.options=u(vu.defaultOptions,n),this.target=e,this.internalId=x(),this.innerTarget=document.createElement("div"),this.target.appendChild(this.innerTarget),this.setupPluginContainer(),this.pluginProvider=new yu(this.options.editorPlugins,this.options),this.setBackingView(this.options.defaultView,t)}get editorView(){var e;return null==(e=this.backingView)?void 0:e.editorView}get content(){var e;return(null==(e=this.backingView)?void 0:e.content)||""}set content(e){this.backingView.content=e}get document(){return this.editorView.state.doc}get dom(){return this.editorView.dom}get readonly(){return!!this.editorView&&!this.editorView.editable}get currentViewType(){return this.backingView instanceof bu?S.RichText:S.Commonmark}static get defaultOptions(){var e=["fl-grow1","outline-none","p12","pt6","w100","s-prose","js-editor","ProseMirror"];return{defaultView:S.RichText,targetClassList:["ps-relative","z-base","s-textarea","overflow-auto","hmn2","w100","p0","d-flex","fd-column","s-editor-resizable"],elementAttributes:{},parserFeatures:bu.defaultOptions.parserFeatures,commonmarkOptions:{classList:e,preview:{enabled:!1,renderer:null}},richTextOptions:{classList:e}}}focus(){this.backingView.focus()}destroy(){this.backingView.destroy()}setView(e){this.setBackingView(e,null)}enable(){Xi(!1,this.editorView.state,this.editorView.dispatch.bind(null)),this.innerTarget.classList.remove(...vu.READONLY_CLASSES)}disable(){Xi(!0,this.editorView.state,this.editorView.dispatch.bind(null)),this.innerTarget.classList.add(...vu.READONLY_CLASSES)}reinitialize(e={}){this.options=u(this.options,e),this.setBackingView(this.currentViewType,this.content)}setupPluginContainer(){this.pluginContainer=document.createElement("div"),this.pluginContainer.className="py6 bg-inherit btr-sm w100 ps-sticky t0 l0 z-nav s-editor-shadow js-plugin-container js-sticky";const e=document.createElement("div");if(e.className="d-flex overflow-x-auto ai-center px12 py4 pb0",this.pluginContainer.appendChild(e),this.options.menuParentContainer=()=>e,this.options.commonmarkOptions.preview.enabled){const e=document.createElement("div"),t=(this.target.appendChild(e),()=>e);this.options.commonmarkOptions.preview.parentContainer=t}const t=document.createElement("div");this.pluginContainer.appendChild(t),this.options.pluginParentContainer=()=>t,this.innerTarget.appendChild(this.pluginContainer),this.createEditorSwitcher(this.options.defaultView,e),function(e){const t=new IntersectionObserver(function(e){for(const t of e){const e=!t.isIntersecting,n=t.target.nextElementSibling,r=new CustomEvent("sticky-change",{detail:{stuck:e,target:n}});document.dispatchEvent(r)}},{threshold:[0],root:e});e.querySelectorAll(".js-sticky").forEach(e=>{var n=document.createElement("div");n.className="js-sticky-sentinel",e.parentNode.insertBefore(n,e),t.observe(n)})}(this.innerTarget),document.addEventListener("sticky-change",e=>{var t=e.detail.target;t.classList.contains("js-plugin-container")&&t.classList.toggle("is-stuck",e.detail.stuck)})}setBackingView(e,t){var n=this.readonly;if(this.backingView&&(t=t||this.backingView.content,this.backingView.destroy()),this.innerTarget.classList.add(...this.options.targetClassList),e===S.RichText)this.backingView=new bu(this.innerTarget,t,this.pluginProvider,u(this.options,this.options.richTextOptions));else{if(e!==S.Commonmark)throw"Unable to set editor to unknown type: "+S[e];this.backingView=new wh(this.innerTarget,t,this.pluginProvider,u(this.options,this.options.commonmarkOptions))}this.backingView.editorView.props.handleDOMEvents={focus:()=>(this.innerTarget.classList.add("bs-ring","bc-blue-300"),!1),blur:()=>(this.innerTarget.classList.remove("bs-ring","bc-blue-300"),!1)},n?this.disable():this.enable()}createEditorSwitcher(e,t){var n=this.options.commonmarkOptions.preview,n=(null==n?void 0:n.enabled)&&(null==n?void 0:n.shownByDefault)||!1,s=e===S.RichText?"checked":"",e=e!==S.Commonmark||n?"":"checked",o=this.options.commonmarkOptions.preview.enabled,l=document.createElement("div");if(l.className="flex--item d-flex ai-center ml24 fc-medium",l.innerHTML=y`<div class="s-btn-group__radio">
    <input type="radio" name="mode-toggle-${this.internalId}"
        id="mode-toggle-rich-${this.internalId}"
        class="js-editor-toggle-btn"
        data-mode="${S.RichText}"
        ${s} />
    <label class="s-btn s-editor-btn px6"
        for="mode-toggle-rich-${this.internalId}"
        title="${a("menubar.mode_toggle_richtext_title")}">
        <span class="icon-bg iconRichText"></span>
        <span class="v-visible-sr">${a("menubar.mode_toggle_richtext_title")}</span>
    </label>
    <input type="radio" name="mode-toggle-${this.internalId}"
        id="mode-toggle-markdown-${this.internalId}"
        class="js-editor-toggle-btn"
        data-mode="${S.Commonmark}"
        data-preview="false"
        ${e} />
    <label class="s-btn s-editor-btn px6"
        for="mode-toggle-markdown-${this.internalId}"
        title="${a("menubar.mode_toggle_markdown_title")}">
        <span class="icon-bg iconMarkdown"></span>
        <span class="v-visible-sr">${a("menubar.mode_toggle_markdown_title")}</span>
    </label>
</div>`,o){const e=n?"checked":"",t=document.createElement("div");t.innerHTML=y`
<input type="radio" name="mode-toggle-${this.internalId}"
    id="mode-toggle-preview-${this.internalId}"
    class="js-editor-toggle-btn"
    data-mode="${S.Commonmark}"
    data-preview="${o.toString()}"
    ${e} />
<label class="s-btn s-editor-btn px6"
    for="mode-toggle-preview-${this.internalId}"
    title="${a("menubar.mode_toggle_preview_title")}">
    <span class="icon-bg iconMarkdownPreview"></span>
    <span class="v-visible-sr">${a("menubar.mode_toggle_preview_title")}</span>
</label>`,l.firstElementChild.append(...t.children)}l.querySelectorAll(".js-editor-toggle-btn").forEach(e=>{e.addEventListener("change",this.editorSwitcherChangeHandler.bind(this))}),t.appendChild(l)}editorSwitcherChangeHandler(e){e.stopPropagation(),e.preventDefault();const t=e.target,n=+t.dataset.mode,r="true"===t.dataset.preview,s=(e=this.backingView.editorView,Si.previewIsVisible(e));n===this.currentViewType&&r===s||(t.parentElement.querySelectorAll(".js-editor-toggle-btn").forEach(e=>{e.checked=e===t}),this.setView(n),r!==s&&function(e,t){Si.togglePreviewVisibility(e,t)}(this.backingView.editorView,r),C(this.target,"view-change",{editorType:n,previewShown:this.currentViewType!==S.RichText&&r}),this.focus())}}vu.READONLY_CLASSES=["is-readonly"]})(),s;function r(e){var s=n[e];return void 0!==s||(s=n[e]={exports:{}},t[e](s,s.exports,r)),s.exports}var t,n,s});